(function(or,jr){typeof exports=="object"&&typeof module!="undefined"?jr(exports):typeof define=="function"&&define.amd?define(["exports"],jr):(or=typeof globalThis!="undefined"?globalThis:or||self,jr(or.OML2D={}))})(this,function(or){"use strict";var JI=Object.defineProperty;var QI=(or,jr,fi)=>jr in or?JI(or,jr,{enumerable:!0,configurable:!0,writable:!0,value:fi}):or[jr]=fi;var Qr=(or,jr,fi)=>(QI(or,typeof jr!="symbol"?jr+"":jr,fi),fi);var gn=(or,jr,fi)=>new Promise((wh,qs)=>{var Ph=nn=>{try{ys(fi.next(nn))}catch(Zs){qs(Zs)}},Eh=nn=>{try{ys(fi.throw(nn))}catch(Zs){qs(Zs)}},ys=nn=>nn.done?wh(nn.value):Promise.resolve(nn.value).then(Ph,Eh);ys((fi=fi.apply(or,jr)).next())});(function(){var D=!0;function t(){D||(this._$MT=null,this._$5S=null,this._$NP=0,t._$42++,this._$5S=new vt(this))}t._$0s=1,t._$4s=2,t._$42=0,t._$62=function(f,d){try{if(d instanceof ArrayBuffer&&(d=new DataView(d)),!(d instanceof DataView))throw new Zr("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var x=new ft(d),L=x._$ST(),M=x._$ST(),N=x._$ST(),V;if(L==109&&M==111&&N==99)V=x._$ST();else throw new Zr("_$gi _$C _$li , _$Q0 _$P0.");if(x._$gr(V),V>bt._$T7){f._$NP|=t._$4s;var z=bt._$T7,k="_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+z+" < _$f0 : "+V+` )@_$SS#loadModel()
`;throw new Zr(k)}var q=x._$nP();if(V>=bt._$s7){var tt=x._$9T(),et=x._$9T();if(tt!=-30584||et!=-30584)throw f._$NP|=t._$0s,new Zr("_$gi _$C _$li , _$0 _$6 _$Ui.")}f._$KS(q);var ht=f.getModelContext();ht.setDrawParam(f.getDrawParam()),ht.init()}catch(gt){h._$Rb(gt)}},t.prototype._$KS=function(f){this._$MT=f},t.prototype.getModelImpl=function(){return this._$MT==null&&(this._$MT=new b,this._$MT._$zP()),this._$MT},t.prototype.getCanvasWidth=function(){return this._$MT==null?0:this._$MT.getCanvasWidth()},t.prototype.getCanvasHeight=function(){return this._$MT==null?0:this._$MT.getCanvasHeight()},t.prototype.getParamFloat=function(f){return typeof f!="number"&&(f=this._$5S.getParamIndex(w.getID(f))),this._$5S.getParamFloat(f)},t.prototype.setParamFloat=function(f,d,x){typeof f!="number"&&(f=this._$5S.getParamIndex(w.getID(f))),arguments.length<3&&(x=1),this._$5S.setParamFloat(f,this._$5S.getParamFloat(f)*(1-x)+d*x)},t.prototype.addToParamFloat=function(f,d,x){typeof f!="number"&&(f=this._$5S.getParamIndex(w.getID(f))),arguments.length<3&&(x=1),this._$5S.setParamFloat(f,this._$5S.getParamFloat(f)+d*x)},t.prototype.multParamFloat=function(f,d,x){typeof f!="number"&&(f=this._$5S.getParamIndex(w.getID(f))),arguments.length<3&&(x=1),this._$5S.setParamFloat(f,this._$5S.getParamFloat(f)*(1+(d-1)*x))},t.prototype.getParamIndex=function(f){return this._$5S.getParamIndex(w.getID(f))},t.prototype.loadParam=function(){this._$5S.loadParam()},t.prototype.saveParam=function(){this._$5S.saveParam()},t.prototype.init=function(){this._$5S.init()},t.prototype.update=function(){this._$5S.update()},t.prototype._$Rs=function(){return h._$li("_$60 _$PT _$Rs()"),-1},t.prototype._$Ds=function(f){h._$li(`_$60 _$PT _$SS#_$Ds() 
`)},t.prototype._$K2=function(){},t.prototype.draw=function(){},t.prototype.getModelContext=function(){return this._$5S},t.prototype._$s2=function(){return this._$NP},t.prototype._$P7=function(f,d,x,L){var M=-1,N=0,V=this,z=.5,k=.15;if(x==0){for(var q=0;q<f.length;q++){var tt=f[q],et=d[q],ht=V.getParamFloat(tt)!=0;V.setPartsOpacity(et,ht?1:0)}return}else if(f.length==1){var tt=f[0],gt=V.getParamFloat(tt)!=0,et=d[0],xt=V.getPartsOpacity(et),ut=x/L;gt?(xt+=ut,xt>1&&(xt=1)):(xt-=ut,xt<0&&(xt=0)),V.setPartsOpacity(et,xt)}else{for(var q=0;q<f.length;q++){var tt=f[q],ht=V.getParamFloat(tt)!=0;if(ht){if(M>=0)break;M=q;var et=d[q];N=V.getPartsOpacity(et),N+=x/L,N>1&&(N=1)}}M<0&&(console.log("No _$wi _$q0/ _$U default[%s]",f[0]),M=0,N=1,V.loadParam(),V.setParamFloat(f[M],N),V.saveParam());for(var q=0;q<f.length;q++){var et=d[q];if(M==q)V.setPartsOpacity(et,N);else{var Ct=V.getPartsOpacity(et),wt;N<z?wt=N*(z-1)/z+1:wt=(1-N)*z/(1-z);{var St=(1-wt)*(1-N);St>k&&(wt=1-k/(1-N))}Ct>wt&&(Ct=wt),V.setPartsOpacity(et,Ct)}}}},t.prototype.setPartsOpacity=function(f,d){typeof f!="number"&&(f=this._$5S.getPartsDataIndex(_.getID(f))),this._$5S.setPartsOpacity(f,d)},t.prototype.getPartsDataIndex=function(f){return f instanceof _||(f=_.getID(f)),this._$5S.getPartsDataIndex(f)},t.prototype.getPartsOpacity=function(f){return typeof f!="number"&&(f=this._$5S.getPartsDataIndex(_.getID(f))),f<0?0:this._$5S.getPartsOpacity(f)},t.prototype.getDrawParam=function(){},t.prototype.getDrawDataIndex=function(f){return this._$5S.getDrawDataIndex(he.getID(f))},t.prototype.getDrawData=function(f){return this._$5S.getDrawData(f)},t.prototype.getTransformedPoints=function(f){var d=this._$5S._$C2(f);return d instanceof Qi?d.getTransformedPoints():null},t.prototype.getIndexArray=function(f){if(f<0||f>=this._$5S._$aS.length)return null;var d=this._$5S._$aS[f];return d!=null&&d.getType()==Zt._$wb&&d instanceof Ve?d.getIndexArray():null};function e(f){if(!D){this.clipContextList=new Array,this.glcontext=f.gl,this.dp_webgl=f,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new st,yt.glContext.length>yt.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new Vt,this.tmpMatrix2=new Vt,this.tmpMatrixForMask=new Vt,this.tmpMatrixForDraw=new Vt,this.CHANNEL_COLORS=new Array;var d=new Et;d=new Et,d.r=0,d.g=0,d.b=0,d.a=1,this.CHANNEL_COLORS.push(d),d=new Et,d.r=1,d.g=0,d.b=0,d.a=0,this.CHANNEL_COLORS.push(d),d=new Et,d.r=0,d.g=1,d.b=0,d.a=0,this.CHANNEL_COLORS.push(d),d=new Et,d.r=0,d.g=0,d.b=1,d.a=0,this.CHANNEL_COLORS.push(d);for(var x=0;x<this.CHANNEL_COLORS.length;x++)this.dp_webgl.setChannelFlagAsColor(x,this.CHANNEL_COLORS[x])}}e.CHANNEL_COUNT=4,e.RENDER_TEXTURE_USE_MIPMAP=!1,e.NOT_USED_FRAME=-100,e.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var f=this.CHANNEL_COLORS.length-1;f>=0;--f)this.CHANNEL_COLORS.splice(f,1);this.CHANNEL_COLORS=[]}this.releaseShader()},e.prototype.releaseShader=function(){for(var f=yt.frameBuffers.length,d=0;d<f;d++)this.gl.deleteFramebuffer(yt.frameBuffers[d].framebuffer);yt.frameBuffers=[],yt.glContext=[]},e.prototype.init=function(f,d,x){for(var L=0;L<d.length;L++){var M=d[L].getClipIDList();if(M!=null){var N=this.findSameClip(M);N==null&&(N=new r(this,f,M),this.clipContextList.push(N));var V=d[L].getDrawDataID(),z=f.getDrawDataIndex(V);N.addClippedDrawData(V,z);var k=x[L];k.clipBufPre_clipContext=N}}},e.prototype.getMaskRenderTexture=function(){var f=null;return f=this.dp_webgl.createFramebuffer(),yt.frameBuffers[this.dp_webgl.glno]=f,this.dp_webgl.glno},e.prototype.setupClip=function(f,d){for(var x=0,L=0;L<this.clipContextList.length;L++){var M=this.clipContextList[L];this.calcClippedDrawTotalBounds(f,M),M.isUsing&&x++}if(x>0){var N=d.gl.getParameter(d.gl.FRAMEBUFFER_BINDING),V=new Array(4);V[0]=0,V[1]=0,V[2]=d.gl.canvas.width,V[3]=d.gl.canvas.height,d.gl.viewport(0,0,yt.clippingMaskBufferSize,yt.clippingMaskBufferSize),this.setupLayoutBounds(x),d.gl.bindFramebuffer(d.gl.FRAMEBUFFER,yt.frameBuffers[this.curFrameNo].framebuffer),d.gl.clearColor(0,0,0,0),d.gl.clear(d.gl.COLOR_BUFFER_BIT);for(var L=0;L<this.clipContextList.length;L++){var M=this.clipContextList[L],z=M.allClippedDrawRect;M.layoutChannelNo;var k=M.layoutBounds,q=.05;this.tmpBoundsOnModel._$jL(z),this.tmpBoundsOnModel.expand(z.width*q,z.height*q);var tt=k.width/this.tmpBoundsOnModel.width,et=k.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(k.x,k.y,0),this.tmpMatrix2.scale(tt,et,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(k.x,k.y,0),this.tmpMatrix2.scale(tt,et,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var ht=this.tmpMatrixForMask.getArray(),gt=0;gt<16;gt++)M.matrixForMask[gt]=ht[gt];for(var xt=this.tmpMatrixForDraw.getArray(),gt=0;gt<16;gt++)M.matrixForDraw[gt]=xt[gt];for(var ut=M.clippingMaskDrawIndexList.length,Ct=0;Ct<ut;Ct++){var wt=M.clippingMaskDrawIndexList[Ct],St=f.getDrawData(wt),It=f._$C2(wt);d.setClipBufPre_clipContextForMask(M),St.draw(d,f,It)}}d.gl.bindFramebuffer(d.gl.FRAMEBUFFER,N),d.setClipBufPre_clipContextForMask(null),d.gl.viewport(V[0],V[1],V[2],V[3])}},e.prototype.getColorBuffer=function(){return this.colorBuffer},e.prototype.findSameClip=function(f){for(var d=0;d<this.clipContextList.length;d++){var x=this.clipContextList[d],L=x.clipIDList.length;if(L==f.length){for(var M=0,N=0;N<L;N++)for(var V=x.clipIDList[N],z=0;z<L;z++)if(f[z]==V){M++;break}if(M==L)return x}}return null},e.prototype.calcClippedDrawTotalBounds=function(f,d){for(var x=f._$Ri.getModelImpl().getCanvasWidth(),L=f._$Ri.getModelImpl().getCanvasHeight(),M=x>L?x:L,N=M,V=M,z=0,k=0,q=d.clippedDrawContextList.length,tt=0;tt<q;tt++){var et=d.clippedDrawContextList[tt],ht=et.drawDataIndex,gt=f._$C2(ht);if(gt._$yo()){for(var xt=gt.getTransformedPoints(),ut=xt.length,Ct=[],wt=[],St=0,It=at._$i2;It<ut;It+=at._$No)Ct[St]=xt[It],wt[St]=xt[It+1],St++;var re=Math.min.apply(null,Ct),Bt=Math.min.apply(null,wt),G=Math.max.apply(null,Ct),Mt=Math.max.apply(null,wt);re<N&&(N=re),Bt<V&&(V=Bt),G>z&&(z=G),Mt>k&&(k=Mt)}}if(N==M)d.allClippedDrawRect.x=0,d.allClippedDrawRect.y=0,d.allClippedDrawRect.width=0,d.allClippedDrawRect.height=0,d.isUsing=!1;else{var Ut=z-N,He=k-V;d.allClippedDrawRect.x=N,d.allClippedDrawRect.y=V,d.allClippedDrawRect.width=Ut,d.allClippedDrawRect.height=He,d.isUsing=!0}},e.prototype.setupLayoutBounds=function(f){var d=f/e.CHANNEL_COUNT,x=f%e.CHANNEL_COUNT;d=~~d,x=~~x;for(var L=0,M=0;M<e.CHANNEL_COUNT;M++){var N=d+(M<x?1:0);if(N!=0)if(N==1){var V=this.clipContextList[L++];V.layoutChannelNo=M,V.layoutBounds.x=0,V.layoutBounds.y=0,V.layoutBounds.width=1,V.layoutBounds.height=1}else if(N==2)for(var z=0;z<N;z++){var k=z%2,q=0;k=~~k;var V=this.clipContextList[L++];V.layoutChannelNo=M,V.layoutBounds.x=k*.5,V.layoutBounds.y=0,V.layoutBounds.width=.5,V.layoutBounds.height=1}else if(N<=4)for(var z=0;z<N;z++){var k=z%2,q=z/2;k=~~k,q=~~q;var V=this.clipContextList[L++];V.layoutChannelNo=M,V.layoutBounds.x=k*.5,V.layoutBounds.y=q*.5,V.layoutBounds.width=.5,V.layoutBounds.height=.5}else if(N<=9)for(var z=0;z<N;z++){var k=z%3,q=z/3;k=~~k,q=~~q;var V=this.clipContextList[L++];V.layoutChannelNo=M,V.layoutBounds.x=k/3,V.layoutBounds.y=q/3,V.layoutBounds.width=1/3,V.layoutBounds.height=1/3}else h._$li("_$6 _$0P mask count : %d",N)}};function r(f,d,x){this.clipIDList=new Array,this.clipIDList=x,this.clippingMaskDrawIndexList=new Array;for(var L=0;L<x.length;L++)this.clippingMaskDrawIndexList.push(d.getDrawDataIndex(x[L]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new st,this.allClippedDrawRect=new st,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=f}r.prototype.addClippedDrawData=function(f,d){var x=new i(f,d);this.clippedDrawContextList.push(x)};function i(f,d){this._$gP=f,this.drawDataIndex=d}function s(){D||(this.color=null)}function o(){D||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}o._$JT=function(f,d,x){var L=f/d,M=x/d,N=M,V=1/3,z=2/3,k=1-(1-M)*(1-M),q=1-(1-N)*(1-N),tt=0,et=(1-M)*V*k+(N*z+(1-N)*V)*(1-k),ht=(N+(1-N)*z)*q+(M*V+(1-M)*z)*(1-q),gt=1,xt=gt-3*ht+3*et-tt,ut=3*ht-6*et+3*tt,Ct=3*et-3*tt,wt=tt;if(L<=0)return 0;if(L>=1)return 1;var St=L,It=St*St,re=St*It,Bt=xt*re+ut*It+Ct*St+wt;return Bt},o.prototype._$a0=function(){},o.prototype.setFadeIn=function(f){this._$dP=f},o.prototype.setFadeOut=function(f){this._$eo=f},o.prototype._$pT=function(f){this._$V0=f},o.prototype.getFadeOut=function(){return this._$eo},o.prototype._$4T=function(){return this._$eo},o.prototype._$mT=function(){return this._$V0},o.prototype.getDurationMSec=function(){return-1},o.prototype.getLoopDurationMSec=function(){return-1},o.prototype.updateParam=function(f,d){if(!(!d._$AT||d._$9L)){var x=Ft.getUserTimeMSec();if(d._$z2<0){d._$z2=x,d._$bs=x;var L=this.getDurationMSec();d._$Do<0&&(d._$Do=L<=0?-1:d._$z2+L)}var M=this._$V0,N=this._$dP==0?1:xi._$r2((x-d._$bs)/this._$dP),V=this._$eo==0||d._$Do<0?1:xi._$r2((d._$Do-x)/this._$eo);M=M*N*V,0<=M&&M<=1||console.log("### assert!! ### "),this.updateParamExe(f,x,M,d),d._$Do>0&&d._$Do<x&&(d._$9L=!0)}},o.prototype.updateParamExe=function(f,d,x,L){};function h(){}h._$8s=0,h._$fT=new Object,h.start=function(f){var d=h._$fT[f];d==null&&(d=new u,d._$r=f,h._$fT[f]=d),d._$0S=Ft.getSystemTimeMSec()},h.dump=function(f){var d=h._$fT[f];if(d!=null){var x=Ft.getSystemTimeMSec(),L=x-d._$0S;return console.log(f+" : "+L+"ms"),L}else return-1},h.end=function(f){var d=h._$fT[f];if(d!=null){var x=Ft.getSystemTimeMSec();return x-d._$0S}else return-1},h._$li=function(f,d){},h._$Ji=function(f,d){console.log(f,d)},h._$dL=function(f,d){console.log(f,d),console.log(`
`)},h._$KL=function(f,d){for(var x=0;x<d;x++)x%16==0&&x>0?console.log(`
`):x%8==0&&x>0&&console.log("  "),console.log("%02X ",f[x]&255);console.log(`
`)},h._$nr=function(f,d,x){console.log(`%s
`,f);for(var L=d.length,M=0;M<L;++M)console.log("%5d",d[M]),console.log(`%s
`,x),console.log(",");console.log(`
`)},h._$Rb=function(f){console.log("dump exception : "+f),console.log("stack :: "+f.stack)};function u(){this._$r=null,this._$0S=null}function c(){D||(this.x=null,this.y=null,this.width=null,this.height=null)}c.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},c.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},c.prototype._$EL=function(){return this.x+this.width},c.prototype._$5T=function(){return this.y+this.height},c.prototype._$jL=function(f,d,x,L){this.x=f,this.y=d,this.width=x,this.height=L},c.prototype._$jL=function(f){this.x=f.x,this.y=f.y,this.width=f.width,this.height=f.height};function _(f){D||Br.prototype.constructor.call(this,f)}_.prototype=new Br,_._$tP=new Object,_._$27=function(){_._$tP.clear()},_.getID=function(f){var d=_._$tP[f];return d==null&&(d=new _(f),_._$tP[f]=d),d},_.prototype._$3s=function(){return new _};function y(){}function w(f){D||Br.prototype.constructor.call(this,f)}w.prototype=new Br,w._$tP=new Object,w._$27=function(){w._$tP.clear()},w.getID=function(f){var d=w._$tP[f];return d==null&&(d=new w(f),w._$tP[f]=d),d},w.prototype._$3s=function(){return new w};function b(){D||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,b._$42++)}b._$42=0,b.prototype._$zP=function(){this._$vo==null&&(this._$vo=new ai),this._$F2==null&&(this._$F2=new Array)},b.prototype.getCanvasWidth=function(){return this._$ao},b.prototype.getCanvasHeight=function(){return this._$1S},b.prototype._$F0=function(f){this._$vo=f._$nP(),this._$F2=f._$nP(),this._$ao=f._$6L(),this._$1S=f._$6L()},b.prototype._$6S=function(f){this._$F2.push(f)},b.prototype._$Xr=function(){return this._$F2},b.prototype._$E2=function(){return this._$vo};function E(){D||(this.p1=new T,this.p2=new T,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}E.prototype.setup=function(f,d,x){this._$ks=this._$Yb(),this.p2._$xT(),arguments.length==3&&(this._$Fo=f,this._$L2=d,this.p1._$p=x,this.p2._$p=x,this.p2.y=f,this.setup())},E.prototype.getPhysicsPoint1=function(){return this.p1},E.prototype.getPhysicsPoint2=function(){return this.p2},E.prototype._$qr=function(){return this._$Db},E.prototype._$pr=function(f){this._$Db=f},E.prototype._$5r=function(){return this._$M2},E.prototype._$Cs=function(){return this._$9b},E.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},E.prototype.addSrcParam=function(f,d,x,L){var M=new O(f,d,x,L);this._$lL.push(M)},E.prototype.addTargetParam=function(f,d,x,L){var M=new Y(f,d,x,L);this._$qP.push(M)},E.prototype.update=function(f,d){if(this._$iP==0){this._$iP=this._$iT=d,this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));return}var x=(d-this._$iT)/1e3;if(x!=0){for(var L=this._$lL.length-1;L>=0;--L){var M=this._$lL[L];M._$oP(f,this)}this._$oo(f,x),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/x,this._$ks=this._$M2}for(var L=this._$qP.length-1;L>=0;--L){var N=this._$qP[L];N._$YS(f,this)}this._$iT=d},E.prototype._$oo=function(f,d){d<.033&&(d=.033);var x=1/d;this.p1.vx=(this.p1.x-this.p1._$s0)*x,this.p1.vy=(this.p1.y-this.p1._$70)*x,this.p1.ax=(this.p1.vx-this.p1._$7L)*x,this.p1.ay=(this.p1.vy-this.p1._$HL)*x,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var L=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),M,N,V=Math.cos(L),z=Math.sin(L),k=9.8*this.p2._$p,q=this._$Db*n._$bS,tt=k*Math.cos(L-q);M=tt*z,N=tt*V;var et=-this.p1.fx*z*z,ht=-this.p1.fy*z*V,gt=-this.p2.vx*this._$L2,xt=-this.p2.vy*this._$L2;this.p2.fx=M+et+gt,this.p2.fy=N+ht+xt,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*d,this.p2.vy+=this.p2.ay*d,this.p2.x+=this.p2.vx*d,this.p2.y+=this.p2.vy*d;var ut=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/ut,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/ut,this.p2.vx=(this.p2.x-this.p2._$s0)*x,this.p2.vy=(this.p2.y-this.p2._$70)*x,this.p2._$xT()};function T(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}T.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy};function P(f,d,x){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=f,this.scale=d,this._$V0=x}P.prototype._$oP=function(f,d){};function O(f,d,x,L){P.prototype.constructor.call(this,d,x,L),this._$tL=null,this._$tL=f}O.prototype=new P,O.prototype._$oP=function(f,d){var x=this.scale*f.getParamFloat(this._$wL),L=d.getPhysicsPoint1();switch(this._$tL){default:case E.Src.SRC_TO_X:L.x=L.x+(x-L.x)*this._$V0;break;case E.Src.SRC_TO_Y:L.y=L.y+(x-L.y)*this._$V0;break;case E.Src.SRC_TO_G_ANGLE:var M=d._$qr();M=M+(x-M)*this._$V0,d._$pr(M);break}};function H(f,d,x){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=f,this.scale=d,this._$V0=x}H.prototype._$YS=function(f,d){};function Y(f,d,x,L){H.prototype.constructor.call(this,d,x,L),this._$YP=null,this._$YP=f}Y.prototype=new H,Y.prototype._$YS=function(f,d){switch(this._$YP){default:case E.Target.TARGET_FROM_ANGLE:f.setParamFloat(this._$wL,this.scale*d._$5r(),this._$V0);break;case E.Target.TARGET_FROM_ANGLE_V:f.setParamFloat(this._$wL,this.scale*d._$Cs(),this._$V0);break}},E.Src=function(){},E.Src.SRC_TO_X="SRC_TO_X",E.Src.SRC_TO_Y="SRC_TO_Y",E.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",E.Target=function(){},E.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",E.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";function J(){D||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}J.prototype.init=function(f){this._$fL=f._$fL,this._$gL=f._$gL,this._$B0=f._$B0,this._$z0=f._$z0,this._$qT=f._$qT,this.reflectX=f.reflectX,this.reflectY=f.reflectY},J.prototype._$F0=function(f){this._$fL=f._$_T(),this._$gL=f._$_T(),this._$B0=f._$_T(),this._$z0=f._$_T(),this._$qT=f._$_T(),f.getFormatVersion()>=bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=f._$po(),this.reflectY=f._$po())},J.prototype._$e=function(){};var it=function(){};it._$ni=function(f,d,x,L,M,N,V,z,k){var q=V*N-z*M;if(q==0)return null;var tt=((f-x)*N-(d-L)*M)/q,et;return M!=0?et=(f-x-tt*V)/M:et=(d-L-tt*z)/N,isNaN(et)&&(et=(f-x-tt*V)/M,isNaN(et)&&(et=(d-L-tt*z)/N),isNaN(et)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+M),console.log("v1x != 0 ? "+(M!=0)))),k==null?new Array(et,tt):(k[0]=et,k[1]=tt,k)};function st(){D||(this.x=null,this.y=null,this.width=null,this.height=null)}st.prototype._$8P=function(){return this.x+.5*this.width},st.prototype._$6P=function(){return this.y+.5*this.height},st.prototype._$EL=function(){return this.x+this.width},st.prototype._$5T=function(){return this.y+this.height},st.prototype._$jL=function(f,d,x,L){this.x=f,this.y=d,this.width=x,this.height=L},st.prototype._$jL=function(f){this.x=f.x,this.y=f.y,this.width=f.width,this.height=f.height},st.prototype.contains=function(f,d){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},st.prototype.expand=function(f,d){this.x-=f,this.y-=d,this.width+=f*2,this.height+=d*2};function K(){}K._$Z2=function(f,d,x,L){var M=d._$Q2(f,x),N=f._$vs(),V=f._$Tr();if(d._$zr(N,V,M),M<=0)return L[N[0]];if(M==1){var z=L[N[0]],k=L[N[1]],q=V[0];return z+(k-z)*q|0}else if(M==2){var z=L[N[0]],k=L[N[1]],tt=L[N[2]],et=L[N[3]],q=V[0],ht=V[1],gt=z+(k-z)*q|0,xt=tt+(et-tt)*q|0;return gt+(xt-gt)*ht|0}else if(M==3){var ut=L[N[0]],Ct=L[N[1]],wt=L[N[2]],St=L[N[3]],It=L[N[4]],re=L[N[5]],Bt=L[N[6]],G=L[N[7]],q=V[0],ht=V[1],Mt=V[2],z=ut+(Ct-ut)*q|0,k=wt+(St-wt)*q|0,tt=It+(re-It)*q|0,et=Bt+(G-Bt)*q|0,gt=z+(k-z)*ht|0,xt=tt+(et-tt)*ht|0;return gt+(xt-gt)*Mt|0}else if(M==4){var Ut=L[N[0]],He=L[N[1]],sr=L[N[2]],kt=L[N[3]],ur=L[N[4]],pe=L[N[5]],oe=L[N[6]],ge=L[N[7]],Ee=L[N[8]],be=L[N[9]],Se=L[N[10]],ee=L[N[11]],de=L[N[12]],Lt=L[N[13]],ie=L[N[14]],Le=L[N[15]],q=V[0],ht=V[1],Mt=V[2],yr=V[3],ut=Ut+(He-Ut)*q|0,Ct=sr+(kt-sr)*q|0,wt=ur+(pe-ur)*q|0,St=oe+(ge-oe)*q|0,It=Ee+(be-Ee)*q|0,re=Se+(ee-Se)*q|0,Bt=de+(Lt-de)*q|0,G=ie+(Le-ie)*q|0,z=ut+(Ct-ut)*ht|0,k=wt+(St-wt)*ht|0,tt=It+(re-It)*ht|0,et=Bt+(G-Bt)*ht|0,gt=z+(k-z)*Mt|0,xt=tt+(et-tt)*Mt|0;return gt+(xt-gt)*yr|0}else{for(var ze=1<<M,Ne=new Float32Array(ze),je=0;je<ze;je++){for(var _t=je,Lr=1,rr=0;rr<M;rr++)Lr*=_t%2==0?1-V[rr]:V[rr],_t/=2;Ne[je]=Lr}for(var Or=new Float32Array(ze),br=0;br<ze;br++)Or[br]=L[N[br]];for(var ti=0,br=0;br<ze;br++)ti+=Ne[br]*Or[br];return ti+.5|0}},K._$br=function(f,d,x,L){var M=d._$Q2(f,x),N=f._$vs(),V=f._$Tr();if(d._$zr(N,V,M),M<=0)return L[N[0]];if(M==1){var z=L[N[0]],k=L[N[1]],q=V[0];return z+(k-z)*q}else if(M==2){var z=L[N[0]],k=L[N[1]],tt=L[N[2]],et=L[N[3]],q=V[0],ht=V[1];return(1-ht)*(z+(k-z)*q)+ht*(tt+(et-tt)*q)}else if(M==3){var gt=L[N[0]],xt=L[N[1]],ut=L[N[2]],Ct=L[N[3]],wt=L[N[4]],St=L[N[5]],It=L[N[6]],re=L[N[7]],q=V[0],ht=V[1],Bt=V[2];return(1-Bt)*((1-ht)*(gt+(xt-gt)*q)+ht*(ut+(Ct-ut)*q))+Bt*((1-ht)*(wt+(St-wt)*q)+ht*(It+(re-It)*q))}else if(M==4){var G=L[N[0]],Mt=L[N[1]],Ut=L[N[2]],He=L[N[3]],sr=L[N[4]],kt=L[N[5]],ur=L[N[6]],pe=L[N[7]],oe=L[N[8]],ge=L[N[9]],Ee=L[N[10]],be=L[N[11]],Se=L[N[12]],ee=L[N[13]],de=L[N[14]],Lt=L[N[15]],q=V[0],ht=V[1],Bt=V[2],ie=V[3];return(1-ie)*((1-Bt)*((1-ht)*(G+(Mt-G)*q)+ht*(Ut+(He-Ut)*q))+Bt*((1-ht)*(sr+(kt-sr)*q)+ht*(ur+(pe-ur)*q)))+ie*((1-Bt)*((1-ht)*(oe+(ge-oe)*q)+ht*(Ee+(be-Ee)*q))+Bt*((1-ht)*(Se+(ee-Se)*q)+ht*(de+(Lt-de)*q)))}else{for(var Le=1<<M,yr=new Float32Array(Le),ze=0;ze<Le;ze++){for(var Ne=ze,je=1,_t=0;_t<M;_t++)je*=Ne%2==0?1-V[_t]:V[_t],Ne/=2;yr[ze]=je}for(var Lr=new Float32Array(Le),rr=0;rr<Le;rr++)Lr[rr]=L[N[rr]];for(var Or=0,rr=0;rr<Le;rr++)Or+=yr[rr]*Lr[rr];return Or}},K._$Vr=function(f,d,x,L,M,N,V,z){var k=d._$Q2(f,x),q=f._$vs(),tt=f._$Tr();d._$zr(q,tt,k);var et=L*2,ht=V;if(k<=0){var gt=q[0],xt=M[gt];if(z==2&&V==0)Ft._$jT(xt,0,N,0,et);else for(var ut=0;ut<et;)N[ht]=xt[ut++],N[ht+1]=xt[ut++],ht+=z}else if(k==1)for(var xt=M[q[0]],Ct=M[q[1]],wt=tt[0],St=1-wt,ut=0;ut<et;)N[ht]=xt[ut]*St+Ct[ut]*wt,++ut,N[ht+1]=xt[ut]*St+Ct[ut]*wt,++ut,ht+=z;else if(k==2)for(var xt=M[q[0]],Ct=M[q[1]],It=M[q[2]],re=M[q[3]],wt=tt[0],Bt=tt[1],St=1-wt,G=1-Bt,Mt=G*St,Ut=G*wt,He=Bt*St,sr=Bt*wt,ut=0;ut<et;)N[ht]=Mt*xt[ut]+Ut*Ct[ut]+He*It[ut]+sr*re[ut],++ut,N[ht+1]=Mt*xt[ut]+Ut*Ct[ut]+He*It[ut]+sr*re[ut],++ut,ht+=z;else if(k==3)for(var kt=M[q[0]],ur=M[q[1]],pe=M[q[2]],oe=M[q[3]],ge=M[q[4]],Ee=M[q[5]],be=M[q[6]],Se=M[q[7]],wt=tt[0],Bt=tt[1],ee=tt[2],St=1-wt,G=1-Bt,de=1-ee,Lt=de*G*St,ie=de*G*wt,Le=de*Bt*St,yr=de*Bt*wt,ze=ee*G*St,Ne=ee*G*wt,je=ee*Bt*St,_t=ee*Bt*wt,ut=0;ut<et;)N[ht]=Lt*kt[ut]+ie*ur[ut]+Le*pe[ut]+yr*oe[ut]+ze*ge[ut]+Ne*Ee[ut]+je*be[ut]+_t*Se[ut],++ut,N[ht+1]=Lt*kt[ut]+ie*ur[ut]+Le*pe[ut]+yr*oe[ut]+ze*ge[ut]+Ne*Ee[ut]+je*be[ut]+_t*Se[ut],++ut,ht+=z;else if(k==4)for(var Lr=M[q[0]],rr=M[q[1]],Or=M[q[2]],br=M[q[3]],ti=M[q[4]],Ti=M[q[5]],ei=M[q[6]],hi=M[q[7]],Tr=M[q[8]],Ki=M[q[9]],tn=M[q[10]],ui=M[q[11]],en=M[q[12]],li=M[q[13]],Ie=M[q[14]],Nn=M[q[15]],wt=tt[0],Bt=tt[1],ee=tt[2],Ai=tt[3],St=1-wt,G=1-Bt,de=1-ee,Ui=1-Ai,mh=Ui*de*G*St,pn=Ui*de*G*wt,Mr=Ui*de*Bt*St,Jo=Ui*de*Bt*wt,gh=Ui*ee*G*St,yh=Ui*ee*G*wt,Qo=Ui*ee*Bt*St,Ko=Ui*ee*Bt*wt,ta=Ai*de*G*St,Ys=Ai*de*G*wt,fs=Ai*de*Bt*St,cs=Ai*de*Bt*wt,ds=Ai*ee*G*St,ea=Ai*ee*G*wt,ra=Ai*ee*Bt*St,ia=Ai*ee*Bt*wt,ut=0;ut<et;)N[ht]=mh*Lr[ut]+pn*rr[ut]+Mr*Or[ut]+Jo*br[ut]+gh*ti[ut]+yh*Ti[ut]+Qo*ei[ut]+Ko*hi[ut]+ta*Tr[ut]+Ys*Ki[ut]+fs*tn[ut]+cs*ui[ut]+ds*en[ut]+ea*li[ut]+ra*Ie[ut]+ia*Nn[ut],++ut,N[ht+1]=mh*Lr[ut]+pn*rr[ut]+Mr*Or[ut]+Jo*br[ut]+gh*ti[ut]+yh*Ti[ut]+Qo*ei[ut]+Ko*hi[ut]+ta*Tr[ut]+Ys*Ki[ut]+fs*tn[ut]+cs*ui[ut]+ds*en[ut]+ea*li[ut]+ra*Ie[ut]+ia*Nn[ut],++ut,ht+=z;else{for(var vn=1<<k,_s=new Float32Array(vn),ps=0;ps<vn;ps++){for(var na=ps,rn=1,Ln=0;Ln<k;Ln++)rn*=na%2==0?1-tt[Ln]:tt[Ln],na/=2;_s[ps]=rn}for(var mn=new Float32Array(vn),Jr=0;Jr<vn;Jr++)mn[Jr]=M[q[Jr]];for(var ut=0;ut<et;){for(var sa=0,bh=0,oa=ut+1,Jr=0;Jr<vn;Jr++)sa+=_s[Jr]*mn[Jr][ut],bh+=_s[Jr]*mn[Jr][oa];ut+=2,N[ht]=sa,N[ht+1]=bh,ht+=z}}};function At(){D||(this.x=null,this.y=null)}At.prototype._$HT=function(f,d){this.x=f,this.y=d},At.prototype._$HT=function(f){this.x=f.x,this.y=f.y};function Tt(){D||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}Tt._$ur=-2,Tt._$ES=500,Tt._$wb=2,Tt._$8S=3,Tt._$52=Tt._$ES,Tt._$R2=Tt._$ES,Tt._$or=function(){return Tt._$52},Tt._$Pr=function(){return Tt._$R2},Tt.prototype.convertClipIDForV2_11=function(f){var d=[];return f==null||f.length==0?null:/,/.test(f)?(d=f.id.split(","),d):(d.push(f.id),d)},Tt.prototype._$F0=function(f){this._$gP=f._$nP(),this._$dr=f._$nP(),this._$GS=f._$nP(),this._$qb=f._$6L(),this._$Lb=f._$cS(),this._$mS=f._$Tb(),f.getFormatVersion()>=bt._$T7?(this.clipID=f._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},Tt.prototype.getClipIDList=function(){return this.clipIDList},Tt.prototype.init=function(f){},Tt.prototype._$Nr=function(f,d){if(d._$IS[0]=!1,d._$Us=K._$Z2(f,this._$GS,d._$IS,this._$Lb),!yt._$Zs){if(d._$IS[0])return}d._$7s=K._$br(f,this._$GS,d._$IS,this._$mS)},Tt.prototype._$2b=function(f,d){},Tt.prototype.getDrawDataID=function(){return this._$gP},Tt.prototype._$j2=function(f){this._$gP=f},Tt.prototype.getOpacity=function(f,d){return d._$7s},Tt.prototype._$zS=function(f,d){return d._$Us},Tt.prototype._$MS=function(f){for(var d=f.length-1;d>=0;--d){var x=f[d];x<Tt._$52?Tt._$52=x:x>Tt._$R2&&(Tt._$R2=x)}},Tt.prototype.getTargetBaseDataID=function(){return this._$dr},Tt.prototype._$gs=function(f){this._$dr=f},Tt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=lr._$2o()},Tt.prototype.preDraw=function(f,d,x){},Tt.prototype.draw=function(f,d,x){},Tt.prototype.getType=function(){},Tt.prototype._$B2=function(f,d,x){};function dt(){D||(this._$Eb=dt._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=dt.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}dt._$ps=32,dt.CLIPPING_PROCESS_NONE=0,dt.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,dt.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,dt.CLIPPING_PROCESS_DRAW=3,dt.CLIPPING_PROCESS_CLEAR_ALPHA=4,dt.prototype.setChannelFlagAsColor=function(f,d){this.CHANNEL_COLORS[f]=d},dt.prototype.getChannelFlagAsColor=function(f){return this.CHANNEL_COLORS[f]},dt.prototype._$ZT=function(){},dt.prototype._$Uo=function(f,d,x,L,M,N,V){},dt.prototype._$Rs=function(){return-1},dt.prototype._$Ds=function(f){},dt.prototype.setBaseColor=function(f,d,x,L){f<0?f=0:f>1&&(f=1),d<0?d=0:d>1&&(d=1),x<0?x=0:x>1&&(x=1),L<0?L=0:L>1&&(L=1),this._$lT=f,this._$C0=d,this._$tT=x,this._$WL=L},dt.prototype._$WP=function(f){this.culling=f},dt.prototype.setMatrix=function(f){for(var d=0;d<16;d++)this.matrix4x4[d]=f[d]},dt.prototype._$IT=function(){return this.matrix4x4},dt.prototype.setPremultipliedAlpha=function(f){this.premultipliedAlpha=f},dt.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},dt.prototype.setAnisotropy=function(f){this.anisotropy=f},dt.prototype.getAnisotropy=function(){return this.anisotropy},dt.prototype.getClippingProcess=function(){return this.clippingProcess},dt.prototype.setClippingProcess=function(f){this.clippingProcess=f},dt.prototype.setClipBufPre_clipContextForMask=function(f){this.clipBufPre_clipContextMask=f},dt.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},dt.prototype.setClipBufPre_clipContextForDraw=function(f){this.clipBufPre_clipContextDraw=f},dt.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};function Et(){D||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=yt.L2D_COLOR_BLEND_MODE_MULT)}function Rt(){D||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}Rt._$ur=-2,Rt._$c2=1,Rt._$_b=2,Rt.prototype._$F0=function(f){this._$kP=f._$nP(),this._$dr=f._$nP()},Rt.prototype.readV2_opacity=function(f){f.getFormatVersion()>=bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=f._$Tb())},Rt.prototype.init=function(f){},Rt.prototype._$Nr=function(f,d){},Rt.prototype.interpolateOpacity=function(f,d,x,L){this._$mS==null?x.setInterpolatedOpacity(1):x.setInterpolatedOpacity(K._$br(f,d,L,this._$mS))},Rt.prototype._$2b=function(f,d){},Rt.prototype._$nb=function(f,d,x,L,M,N,V){},Rt.prototype.getType=function(){},Rt.prototype._$gs=function(f){this._$dr=f},Rt.prototype._$a2=function(f){this._$kP=f},Rt.prototype.getTargetBaseDataID=function(){return this._$dr},Rt.prototype.getBaseDataID=function(){return this._$kP},Rt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=lr._$2o()};function Ft(){}Ft._$W2=0,Ft._$CS=Ft._$W2,Ft._$Mo=function(){return!0},Ft._$XP=function(f){try{for(var d=getTimeMSec();getTimeMSec()-d<f;);}catch(x){x._$Rb()}},Ft.getUserTimeMSec=function(){return Ft._$CS==Ft._$W2?Ft.getSystemTimeMSec():Ft._$CS},Ft.setUserTimeMSec=function(f){Ft._$CS=f},Ft.updateUserTimeMSec=function(){return Ft._$CS=Ft.getSystemTimeMSec()},Ft.getTimeMSec=function(){return new Date().getTime()},Ft.getSystemTimeMSec=function(){return new Date().getTime()},Ft._$Q=function(f){},Ft._$jT=function(f,d,x,L,M){for(var N=0;N<M;N++)x[L+N]=f[d+N]};function ne(){D||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=ne._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}ne._$ds=-2,ne.prototype._$F0=function(f){this._$wL=f._$nP(),this._$VP=f._$6L(),this._$GP=f._$nP()},ne.prototype.getParamIndex=function(f){return this._$2r!=f&&(this._$8o=ne._$ds),this._$8o},ne.prototype._$Pb=function(f,d){this._$8o=f,this._$2r=d},ne.prototype.getParamID=function(){return this._$wL},ne.prototype._$yP=function(f){this._$wL=f},ne.prototype._$N2=function(){return this._$VP},ne.prototype._$d2=function(){return this._$GP},ne.prototype._$t2=function(f,d){this._$VP=f,this._$GP=d},ne.prototype._$Lr=function(){return this._$O2},ne.prototype._$wr=function(f){this._$O2=f},ne.prototype._$SL=function(){return this._$ri},ne.prototype._$AL=function(f){this._$ri=f};function ae(){}ae.startsWith=function(f,d,x){var L=d+x.length;if(L>=f.length)return!1;for(var M=d;M<L;M++)if(ae.getChar(f,M)!=x.charAt(M-d))return!1;return!0},ae.getChar=function(f,d){return String.fromCharCode(f.getUint8(d))},ae.createString=function(f,d,x){for(var L=new ArrayBuffer(x*2),M=new Uint16Array(L),N=0;N<x;N++)M[N]=f.getUint8(d+N);return String.fromCharCode.apply(null,M)},ae._$LS=function(f,d,x,L){f instanceof ArrayBuffer&&(f=new DataView(f));var M=x,N=!1,V=!1,z=0,k=ae.getChar(f,M);k=="-"&&(N=!0,M++);for(var q=!1;M<d;M++){switch(k=ae.getChar(f,M),k){case"0":z=z*10;break;case"1":z=z*10+1;break;case"2":z=z*10+2;break;case"3":z=z*10+3;break;case"4":z=z*10+4;break;case"5":z=z*10+5;break;case"6":z=z*10+6;break;case"7":z=z*10+7;break;case"8":z=z*10+8;break;case"9":z=z*10+9;break;case".":V=!0,M++,q=!0;break;default:q=!0;break}if(q)break}if(V)for(var tt=.1,et=!1;M<d;M++){switch(k=ae.getChar(f,M),k){case"0":break;case"1":z+=tt*1;break;case"2":z+=tt*2;break;case"3":z+=tt*3;break;case"4":z+=tt*4;break;case"5":z+=tt*5;break;case"6":z+=tt*6;break;case"7":z+=tt*7;break;case"8":z+=tt*8;break;case"9":z+=tt*9;break;default:et=!0;break}if(tt*=.1,et)break}return N&&(z=-z),L[0]=M,z};function zt(){D||(this._$Ob=null)}zt.prototype._$zP=function(){this._$Ob=new Array},zt.prototype._$F0=function(f){this._$Ob=f._$nP()},zt.prototype._$Ur=function(f){if(f._$WS())return!0;for(var d=f._$v2(),x=this._$Ob.length-1;x>=0;--x){var L=this._$Ob[x].getParamIndex(d);if(L==ne._$ds&&(L=f.getParamIndex(this._$Ob[x].getParamID())),f._$Xb(L))return!0}return!1},zt.prototype._$Q2=function(f,d){for(var x=this._$Ob.length,L=f._$v2(),M=0,N,V,z=0;z<x;z++){var k=this._$Ob[z];if(N=k.getParamIndex(L),N==ne._$ds&&(N=f.getParamIndex(k.getParamID()),k._$Pb(N,L)),N<0)throw new Exception("err 23242 : "+k.getParamID());var q=N<0?0:f.getParamFloat(N);V=k._$N2();var tt=k._$d2(),et=-1,ht=0,gt,xt;if(!(V<1))if(V==1)gt=tt[0],gt-at._$J<q&&q<gt+at._$J?(et=0,ht=0):(et=0,d[0]=!0);else if(gt=tt[0],q<gt-at._$J)et=0,d[0]=!0;else if(q<gt+at._$J)et=0;else{for(var ut=!1,Ct=1;Ct<V;++Ct){if(xt=tt[Ct],q<xt+at._$J){xt-at._$J<q?et=Ct:(et=Ct-1,ht=(q-gt)/(xt-gt),M++),ut=!0;break}gt=xt}ut||(et=V-1,ht=0,d[0]=!0)}k._$wr(et),k._$AL(ht)}return M},zt.prototype._$zr=function(f,d,x){var L=1<<x;L+1>at._$Qb&&console.log(`err 23245
`);for(var M=this._$Ob.length,N=1,V=1,z=0,k=0;k<L;++k)f[k]=0;for(var q=0;q<M;++q){var tt=this._$Ob[q];if(tt._$SL()==0){var et=tt._$Lr()*N;if(et<0&&yt._$3T)throw new Exception("err 23246");for(var k=0;k<L;++k)f[k]+=et}else{for(var et=N*tt._$Lr(),ht=N*(tt._$Lr()+1),k=0;k<L;++k)f[k]+=(k/V|0)%2==0?et:ht;d[z++]=tt._$SL(),V*=2}N*=tt._$N2()}f[L]=65535,d[z]=-1},zt.prototype._$h2=function(f,d,x){for(var L=new Float32Array(d),M=0;M<d;++M)L[M]=x[M];var N=new ne;N._$yP(f),N._$t2(d,L),this._$Ob.push(N)},zt.prototype._$J2=function(f){for(var d=f,x=this._$Ob.length,L=0;L<x;++L){var M=this._$Ob[L],N=M._$N2(),V=d%M._$N2(),z=M._$d2()[V];console.log("%s[%d]=%7.2f / ",M.getParamID(),V,z),d/=N}console.log(`
`)},zt.prototype.getParamCount=function(){return this._$Ob.length},zt.prototype._$zs=function(){return this._$Ob};function Vt(){this.m=new Float32Array(16),this.identity()}Vt.prototype.identity=function(){for(var f=0;f<16;f++)this.m[f]=f%5==0?1:0},Vt.prototype.getArray=function(){return this.m},Vt.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},Vt.prototype.setMatrix=function(f){if(!(f==null||f.length!=16))for(var d=0;d<16;d++)this.m[d]=f[d]},Vt.prototype.mult=function(f,d,x){return d==null?null:(this==d?this.mult_safe(this.m,f.m,d.m,x):this.mult_fast(this.m,f.m,d.m,x),d)},Vt.prototype.mult_safe=function(f,d,x,L){if(f==x){var M=new Array(16);this.mult_fast(f,d,M,L);for(var N=15;N>=0;--N)x[N]=M[N]}else this.mult_fast(f,d,x,L)},Vt.prototype.mult_fast=function(f,d,x,L){L?(x[0]=f[0]*d[0]+f[4]*d[1]+f[8]*d[2],x[4]=f[0]*d[4]+f[4]*d[5]+f[8]*d[6],x[8]=f[0]*d[8]+f[4]*d[9]+f[8]*d[10],x[12]=f[0]*d[12]+f[4]*d[13]+f[8]*d[14]+f[12],x[1]=f[1]*d[0]+f[5]*d[1]+f[9]*d[2],x[5]=f[1]*d[4]+f[5]*d[5]+f[9]*d[6],x[9]=f[1]*d[8]+f[5]*d[9]+f[9]*d[10],x[13]=f[1]*d[12]+f[5]*d[13]+f[9]*d[14]+f[13],x[2]=f[2]*d[0]+f[6]*d[1]+f[10]*d[2],x[6]=f[2]*d[4]+f[6]*d[5]+f[10]*d[6],x[10]=f[2]*d[8]+f[6]*d[9]+f[10]*d[10],x[14]=f[2]*d[12]+f[6]*d[13]+f[10]*d[14]+f[14],x[3]=x[7]=x[11]=0,x[15]=1):(x[0]=f[0]*d[0]+f[4]*d[1]+f[8]*d[2]+f[12]*d[3],x[4]=f[0]*d[4]+f[4]*d[5]+f[8]*d[6]+f[12]*d[7],x[8]=f[0]*d[8]+f[4]*d[9]+f[8]*d[10]+f[12]*d[11],x[12]=f[0]*d[12]+f[4]*d[13]+f[8]*d[14]+f[12]*d[15],x[1]=f[1]*d[0]+f[5]*d[1]+f[9]*d[2]+f[13]*d[3],x[5]=f[1]*d[4]+f[5]*d[5]+f[9]*d[6]+f[13]*d[7],x[9]=f[1]*d[8]+f[5]*d[9]+f[9]*d[10]+f[13]*d[11],x[13]=f[1]*d[12]+f[5]*d[13]+f[9]*d[14]+f[13]*d[15],x[2]=f[2]*d[0]+f[6]*d[1]+f[10]*d[2]+f[14]*d[3],x[6]=f[2]*d[4]+f[6]*d[5]+f[10]*d[6]+f[14]*d[7],x[10]=f[2]*d[8]+f[6]*d[9]+f[10]*d[10]+f[14]*d[11],x[14]=f[2]*d[12]+f[6]*d[13]+f[10]*d[14]+f[14]*d[15],x[3]=f[3]*d[0]+f[7]*d[1]+f[11]*d[2]+f[15]*d[3],x[7]=f[3]*d[4]+f[7]*d[5]+f[11]*d[6]+f[15]*d[7],x[11]=f[3]*d[8]+f[7]*d[9]+f[11]*d[10]+f[15]*d[11],x[15]=f[3]*d[12]+f[7]*d[13]+f[11]*d[14]+f[15]*d[15])},Vt.prototype.translate=function(f,d,x){this.m[12]=this.m[0]*f+this.m[4]*d+this.m[8]*x+this.m[12],this.m[13]=this.m[1]*f+this.m[5]*d+this.m[9]*x+this.m[13],this.m[14]=this.m[2]*f+this.m[6]*d+this.m[10]*x+this.m[14],this.m[15]=this.m[3]*f+this.m[7]*d+this.m[11]*x+this.m[15]},Vt.prototype.scale=function(f,d,x){this.m[0]*=f,this.m[4]*=d,this.m[8]*=x,this.m[1]*=f,this.m[5]*=d,this.m[9]*=x,this.m[2]*=f,this.m[6]*=d,this.m[10]*=x,this.m[3]*=f,this.m[7]*=d,this.m[11]*=x},Vt.prototype.rotateX=function(f){var d=n.fcos(f),x=n._$9(f),L=this.m[4];this.m[4]=L*d+this.m[8]*x,this.m[8]=L*-x+this.m[8]*d,L=this.m[5],this.m[5]=L*d+this.m[9]*x,this.m[9]=L*-x+this.m[9]*d,L=this.m[6],this.m[6]=L*d+this.m[10]*x,this.m[10]=L*-x+this.m[10]*d,L=this.m[7],this.m[7]=L*d+this.m[11]*x,this.m[11]=L*-x+this.m[11]*d},Vt.prototype.rotateY=function(f){var d=n.fcos(f),x=n._$9(f),L=this.m[0];this.m[0]=L*d+this.m[8]*-x,this.m[8]=L*x+this.m[8]*d,L=this.m[1],this.m[1]=L*d+this.m[9]*-x,this.m[9]=L*x+this.m[9]*d,L=m[2],this.m[2]=L*d+this.m[10]*-x,this.m[10]=L*x+this.m[10]*d,L=m[3],this.m[3]=L*d+this.m[11]*-x,this.m[11]=L*x+this.m[11]*d},Vt.prototype.rotateZ=function(f){var d=n.fcos(f),x=n._$9(f),L=this.m[0];this.m[0]=L*d+this.m[4]*x,this.m[4]=L*-x+this.m[4]*d,L=this.m[1],this.m[1]=L*d+this.m[5]*x,this.m[5]=L*-x+this.m[5]*d,L=this.m[2],this.m[2]=L*d+this.m[6]*x,this.m[6]=L*-x+this.m[6]*d,L=this.m[3],this.m[3]=L*d+this.m[7]*x,this.m[7]=L*-x+this.m[7]*d};function he(f){D||Br.prototype.constructor.call(this,f)}he.prototype=new Br,he._$tP=new Object,he._$27=function(){he._$tP.clear()},he.getID=function(f){var d=he._$tP[f];return d==null&&(d=new he(f),he._$tP[f]=d),d},he.prototype._$3s=function(){return new he};function Kt(){D||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}Kt._$kS=-1,Kt._$pS=0,Kt._$hb=1,Kt.STATE_IDENTITY=0,Kt._$gb=1,Kt._$fo=2,Kt._$go=4,Kt.prototype.transform=function(f,d,x){var L,M,N,V,z,k,q=0,tt=0;switch(this._$hi){default:return;case Kt._$go|Kt._$fo|Kt._$gb:for(L=this._$7,M=this._$H,N=this._$k,V=this._$f,z=this._$g,k=this._$w;--x>=0;){var et=f[q++],ht=f[q++];d[tt++]=L*et+M*ht+N,d[tt++]=V*et+z*ht+k}return;case Kt._$go|Kt._$fo:for(L=this._$7,M=this._$H,V=this._$f,z=this._$g;--x>=0;){var et=f[q++],ht=f[q++];d[tt++]=L*et+M*ht,d[tt++]=V*et+z*ht}return;case Kt._$go|Kt._$gb:for(M=this._$H,N=this._$k,V=this._$f,k=this._$w;--x>=0;){var et=f[q++];d[tt++]=M*f[q++]+N,d[tt++]=V*et+k}return;case Kt._$go:for(M=this._$H,V=this._$f;--x>=0;){var et=f[q++];d[tt++]=M*f[q++],d[tt++]=V*et}return;case Kt._$fo|Kt._$gb:for(L=this._$7,N=this._$k,z=this._$g,k=this._$w;--x>=0;)d[tt++]=L*f[q++]+N,d[tt++]=z*f[q++]+k;return;case Kt._$fo:for(L=this._$7,z=this._$g;--x>=0;)d[tt++]=L*f[q++],d[tt++]=z*f[q++];return;case Kt._$gb:for(N=this._$k,k=this._$w;--x>=0;)d[tt++]=f[q++]+N,d[tt++]=f[q++]+k;return;case Kt.STATE_IDENTITY:(f!=d||q!=tt)&&Ft._$jT(f,q,d,tt,x*2);return}},Kt.prototype.update=function(){this._$H==0&&this._$f==0?this._$7==1&&this._$g==1?this._$k==0&&this._$w==0?(this._$hi=Kt.STATE_IDENTITY,this._$Z=Kt._$pS):(this._$hi=Kt._$gb,this._$Z=Kt._$hb):this._$k==0&&this._$w==0?(this._$hi=Kt._$fo,this._$Z=Kt._$kS):(this._$hi=Kt._$fo|Kt._$gb,this._$Z=Kt._$kS):this._$7==0&&this._$g==0?this._$k==0&&this._$w==0?(this._$hi=Kt._$go,this._$Z=Kt._$kS):(this._$hi=Kt._$go|Kt._$gb,this._$Z=Kt._$kS):this._$k==0&&this._$w==0?(this._$hi=Kt._$go|Kt._$fo,this._$Z=Kt._$kS):(this._$hi=Kt._$go|Kt._$fo|Kt._$gb,this._$Z=Kt._$kS)},Kt.prototype._$RT=function(f){this._$IT(f);var d=f[0],x=f[2],L=f[1],M=f[3],N=Math.sqrt(d*d+L*L),V=d*M-x*L;N==0?yt._$so&&console.log("affine._$RT() / rt==0"):(f[0]=N,f[1]=V/N,f[2]=(L*M+d*x)/V,f[3]=Math.atan2(L,d))},Kt.prototype._$ho=function(f,d,x,L){var M=new Float32Array(6),N=new Float32Array(6);f._$RT(M),d._$RT(N);var V=new Float32Array(6);V[0]=M[0]+(N[0]-M[0])*x,V[1]=M[1]+(N[1]-M[1])*x,V[2]=M[2]+(N[2]-M[2])*x,V[3]=M[3]+(N[3]-M[3])*x,V[4]=M[4]+(N[4]-M[4])*x,V[5]=M[5]+(N[5]-M[5])*x,L._$CT(V)},Kt.prototype._$CT=function(f){var d=Math.cos(f[3]),x=Math.sin(f[3]);this._$7=f[0]*d,this._$f=f[0]*x,this._$H=f[1]*(f[2]*d-x),this._$g=f[1]*(f[2]*x+d),this._$k=f[4],this._$w=f[5],this.update()},Kt.prototype._$IT=function(f){f[0]=this._$7,f[1]=this._$f,f[2]=this._$H,f[3]=this._$g,f[4]=this._$k,f[5]=this._$w};function ve(){D||(o.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=ve._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}ve.prototype=new o,ve._$cs="VISIBLE:",ve._$ar="LAYOUT:",ve._$Co=0,ve._$D2=[],ve._$1T=1,ve.loadMotion=function(f){var d=new ve,x=[0],L=f.length;d._$yT=0;for(var M=0;M<L;++M){var N=f[M]&255;if(!(N==`
`||N=="\r")){if(N=="#"){for(;M<L&&!(f[M]==`
`||f[M]=="\r");++M);continue}if(N=="$"){for(var V=M,z=-1;M<L&&(N=f[M]&255,!(N=="\r"||N==`
`));++M)if(N=="="){z=M;break}var k=!1;if(z>=0){for(z==V+4&&f[V+1]=="f"&&f[V+2]=="p"&&f[V+3]=="s"&&(k=!0),M=z+1;M<L&&(N=f[M]&255,!(N=="\r"||N==`
`));++M)if(!(N==","||N==" "||N=="	")){var q=ae._$LS(f,L,M,x);x[0]>0&&k&&5<q&&q<121&&(d._$D0=q),M=x[0]}}for(;M<L&&!(f[M]==`
`||f[M]=="\r");++M);continue}if("a"<=N&&N<="z"||"A"<=N&&N<="Z"||N=="_"){for(var V=M,z=-1;M<L&&(N=f[M]&255,!(N=="\r"||N==`
`));++M)if(N=="="){z=M;break}if(z>=0){var tt=new Nt;ae.startsWith(f,V,ve._$cs)?(tt._$RP=Nt._$hs,tt._$4P=new String(f,V,z-V)):ae.startsWith(f,V,ve._$ar)?(tt._$4P=new String(f,V+7,z-V-7),ae.startsWith(f,V+7,"ANCHOR_X")?tt._$RP=Nt._$xs:ae.startsWith(f,V+7,"ANCHOR_Y")?tt._$RP=Nt._$us:ae.startsWith(f,V+7,"SCALE_X")?tt._$RP=Nt._$qs:ae.startsWith(f,V+7,"SCALE_Y")?tt._$RP=Nt._$Ys:ae.startsWith(f,V+7,"X")?tt._$RP=Nt._$ws:ae.startsWith(f,V+7,"Y")&&(tt._$RP=Nt._$Ns)):(tt._$RP=Nt._$Fr,tt._$4P=new String(f,V,z-V)),d.motions.push(tt);var et=0;for(ve._$D2.clear(),M=z+1;M<L&&(N=f[M]&255,!(N=="\r"||N==`
`));++M)if(!(N==","||N==" "||N=="	")){var q=ae._$LS(f,L,M,x);if(x[0]>0){ve._$D2.push(q),et++;var ht=x[0];if(ht<M){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}M=ht}}tt._$I0=ve._$D2._$BL(),et>d._$yT&&(d._$yT=et)}}}}return d._$AS=1e3*d._$yT/d._$D0|0,d},ve.prototype.getDurationMSec=function(){return this._$AS},ve.prototype.dump=function(){for(var f=0;f<this.motions.length;f++){var d=this.motions[f];console.log("_$wL[%s] [%d]. ",d._$4P,d._$I0.length);for(var x=0;x<d._$I0.length&&x<10;x++)console.log("%5.2f ,",d._$I0[x]);console.log(`
`)}},ve.prototype.updateParamExe=function(f,d,x,L){for(var M=d-L._$z2,N=M*this._$D0/1e3,V=N|0,z=N-V,k=0;k<this.motions.length;k++){var q=this.motions[k],tt=q._$I0.length,et=q._$4P;if(q._$RP==Nt._$hs){var ht=q._$I0[V>=tt?tt-1:V];f.setParamFloat(et,ht)}else if(!(Nt._$ws<=q._$RP&&q._$RP<=Nt._$Ys)){var gt=f.getParamFloat(et),xt=q._$I0[V>=tt?tt-1:V],ut=q._$I0[V+1>=tt?tt-1:V+1],Ct=xt+(ut-xt)*z,wt=gt+(Ct-gt)*x;f.setParamFloat(et,wt)}}V>=this._$yT&&(this._$E?(L._$z2=d,this.loopFadeIn&&(L._$bs=d)):L._$9L=!0)},ve.prototype._$r0=function(){return this._$E},ve.prototype._$aL=function(f){this._$E=f},ve.prototype.isLoopFadeIn=function(){return this.loopFadeIn},ve.prototype.setLoopFadeIn=function(f){this.loopFadeIn=f},me.prototype.clear=function(){this.size=0},me.prototype.add=function(f){if(this._$P.length<=this.size){var d=new Float32Array(this.size*2);Ft._$jT(this._$P,0,d,0,this.size),this._$P=d}this._$P[this.size++]=f},me.prototype._$BL=function(){var f=new Float32Array(this.size);return Ft._$jT(this._$P,0,f,0,this.size),f},Nt._$Fr=0,Nt._$hs=1,Nt._$ws=100,Nt._$Ns=101,Nt._$xs=102,Nt._$us=103,Nt._$qs=104,Nt._$Ys=105;function at(){}at._$Ms=1,at._$Qs=2,at._$i2=0,at._$No=2,at._$do=at._$Ms,at._$Ls=!0,at._$1r=5,at._$Qb=65,at._$J=1e-4,at._$FT=.001,at._$Ss=3;function bt(){}bt._$o7=6,bt._$S7=7,bt._$s7=8,bt._$77=9,bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,bt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,bt._$T7=bt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,bt._$Is=-2004318072,bt._$h0=0,bt._$4L=23,bt._$7P=33,bt._$uT=function(f){console.log(`_$bo :: _$6 _$mo _$E0 : %d
`,f)},bt._$9o=function(f){if(f<40)return bt._$uT(f),null;if(f<50)return bt._$uT(f),null;if(f<60)return bt._$uT(f),null;if(f<100)switch(f){case 65:return new Ge;case 66:return new zt;case 67:return new ne;case 68:return new se;case 69:return new J;case 70:return new Ve;default:return bt._$uT(f),null}else if(f<150)switch(f){case 131:return new Fi;case 133:return new ce;case 136:return new b;case 137:return new ai;case 142:return new ke}return bt._$uT(f),null};function vt(f){D||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(vt._$is),this._$_2=new Float32Array(vt._$is),this._$vr=new Float32Array(vt._$is),this._$Rr=new Float32Array(vt._$is),this._$Or=new Float32Array(vt._$is),this._$fs=new Float32Array(vt._$is),this._$Js=new Array(vt._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(at._$Qb),this._$ZP=new Float32Array(at._$1r*2),this._$Ri=f,this._$b0=vt._$HP++,this.clipManager=null,this.dp_webgl=null)}vt._$HP=0,vt._$_0=!0,vt._$V2=-1,vt._$W0=-1,vt._$jr=!1,vt._$ZS=!0,vt._$tr=-1e6,vt._$lr=1e6,vt._$is=32,vt._$e=!1,vt.prototype.getDrawDataIndex=function(f){for(var d=this._$aS.length-1;d>=0;--d)if(this._$aS[d]!=null&&this._$aS[d].getDrawDataID()==f)return d;return-1},vt.prototype.getDrawData=function(f){if(f instanceof he){if(this._$Bo==null){this._$Bo=new Object;for(var d=this._$aS.length,x=0;x<d;x++){var L=this._$aS[x],M=L.getDrawDataID();M!=null&&(this._$Bo[M]=L)}}return this._$Bo[id]}else return f<this._$aS.length?this._$aS[f]:null},vt.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),this._$Bo!=null&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},vt.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var f=this._$Ri.getModelImpl(),d=f._$Xr(),x=d.length,L=new Array,M=new Array,N=0;N<x;++N){var V=d[N];this._$F2.push(V),this._$Hr.push(V.init(this));for(var z=V.getBaseData(),k=z.length,q=0;q<k;++q)L.push(z[q]);for(var q=0;q<k;++q){var tt=z[q].init(this);tt._$l2(N),M.push(tt)}for(var et=V.getDrawData(),ht=et.length,q=0;q<ht;++q){var gt=et[q],xt=gt.init(this);xt._$IP=N,this._$aS.push(gt),this._$8b.push(xt)}}for(var ut=L.length,Ct=lr._$2o();;){for(var wt=!1,N=0;N<ut;++N){var St=L[N];if(St!=null){var It=St.getTargetBaseDataID();(It==null||It==Ct||this.getBaseDataIndex(It)>=0)&&(this._$3S.push(St),this._$db.push(M[N]),L[N]=null,wt=!0)}}if(!wt)break}var re=f._$E2();if(re!=null){var Bt=re._$1s();if(Bt!=null)for(var G=Bt.length,N=0;N<G;++N){var Mt=Bt[N];Mt!=null&&this._$02(Mt.getParamID(),Mt.getDefaultValue(),Mt.getMinValue(),Mt.getMaxValue())}}this.clipManager=new e(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},vt.prototype.update=function(){vt._$e&&h.start("_$zL");for(var f=this._$_2.length,d=0;d<f;d++)this._$_2[d]!=this._$vr[d]&&(this._$Js[d]=vt._$ZS,this._$vr[d]=this._$_2[d]);var x=!1,L=this._$3S.length,M=this._$aS.length,N=Zt._$or(),V=Zt._$Pr(),z=V-N+1;(this._$Ws==null||this._$Ws.length<z)&&(this._$Ws=new Int16Array(z),this._$Vs=new Int16Array(z));for(var d=0;d<z;d++)this._$Ws[d]=vt._$V2,this._$Vs[d]=vt._$V2;(this._$Er==null||this._$Er.length<M)&&(this._$Er=new Int16Array(M));for(var d=0;d<M;d++)this._$Er[d]=vt._$W0;vt._$e&&h.dump("_$zL"),vt._$e&&h.start("_$UL");for(var k=null,q=0;q<L;++q){var tt=this._$3S[q],et=this._$db[q];try{tt._$Nr(this,et),tt._$2b(this,et)}catch(St){k==null&&(k=St)}}k!=null&&vt._$_0&&h._$Rb(k),vt._$e&&h.dump("_$UL"),vt._$e&&h.start("_$DL");for(var ht=null,gt=0;gt<M;++gt){var xt=this._$aS[gt],ut=this._$8b[gt];try{if(xt._$Nr(this,ut),ut._$u2())continue;xt._$2b(this,ut);var Ct=Math.floor(xt._$zS(this,ut)-N),wt;try{wt=this._$Vs[Ct]}catch(St){console.log(`_$li :: %s / %s 				@@_$fS
`,St.toString(),xt.getDrawDataID().toString()),Ct=Math.floor(xt._$zS(this,ut)-N);continue}wt==vt._$V2?this._$Ws[Ct]=gt:this._$Er[wt]=gt,this._$Vs[Ct]=gt}catch(St){ht==null&&(ht=St,yt._$sT(yt._$H7))}}ht!=null&&vt._$_0&&h._$Rb(ht),vt._$e&&h.dump("_$DL"),vt._$e&&h.start("_$eL");for(var d=this._$Js.length-1;d>=0;d--)this._$Js[d]=vt._$jr;return this._$QT=!1,vt._$e&&h.dump("_$eL"),x},vt.prototype.preDraw=function(f){this.clipManager!=null&&(f._$ZT(),this.clipManager.setupClip(this,f))},vt.prototype.draw=function(f){if(this._$Ws==null){h._$li("call _$Ri.update() before _$Ri.draw() ");return}var d=this._$Ws.length;f._$ZT();for(var x=0;x<d;++x){var L=this._$Ws[x];if(L!=vt._$V2)do{var M=this._$aS[L],N=this._$8b[L];if(N._$yo()){var V=N._$IP,z=this._$Hr[V];N._$VS=z.getPartsOpacity(),M.draw(f,this,N)}var k=this._$Er[L];if(k<=L||k==vt._$W0)break;L=k}while(!0)}},vt.prototype.getParamIndex=function(f){for(var d=this._$pb.length-1;d>=0;--d)if(this._$pb[d]==f)return d;return this._$02(f,0,vt._$tr,vt._$lr)},vt.prototype._$BS=function(f){return this.getBaseDataIndex(f)},vt.prototype.getBaseDataIndex=function(f){for(var d=this._$3S.length-1;d>=0;--d)if(this._$3S[d]!=null&&this._$3S[d].getBaseDataID()==f)return d;return-1},vt.prototype._$UT=function(f,d){var x=new Float32Array(d);return Ft._$jT(f,0,x,0,f.length),x},vt.prototype._$02=function(f,d,x,L){if(this._$qo>=this._$pb.length){var M=this._$pb.length,N=new Array(M*2);Ft._$jT(this._$pb,0,N,0,M),this._$pb=N,this._$_2=this._$UT(this._$_2,M*2),this._$vr=this._$UT(this._$vr,M*2),this._$Rr=this._$UT(this._$Rr,M*2),this._$Or=this._$UT(this._$Or,M*2);var V=new Array;Ft._$jT(this._$Js,0,V,0,M),this._$Js=V}return this._$pb[this._$qo]=f,this._$_2[this._$qo]=d,this._$vr[this._$qo]=d,this._$Rr[this._$qo]=x,this._$Or[this._$qo]=L,this._$Js[this._$qo]=vt._$ZS,this._$qo++},vt.prototype._$Zo=function(f,d){this._$3S[f]=d},vt.prototype.setParamFloat=function(f,d){d<this._$Rr[f]&&(d=this._$Rr[f]),d>this._$Or[f]&&(d=this._$Or[f]),this._$_2[f]=d},vt.prototype.loadParam=function(){var f=this._$_2.length;f>this._$fs.length&&(f=this._$fs.length),Ft._$jT(this._$fs,0,this._$_2,0,f)},vt.prototype.saveParam=function(){var f=this._$_2.length;f>this._$fs.length&&(this._$fs=new Float32Array(f)),Ft._$jT(this._$_2,0,this._$fs,0,f)},vt.prototype._$v2=function(){return this._$co},vt.prototype._$WS=function(){return this._$QT},vt.prototype._$Xb=function(f){return this._$Js[f]==vt._$ZS},vt.prototype._$vs=function(){return this._$Es},vt.prototype._$Tr=function(){return this._$ZP},vt.prototype.getBaseData=function(f){return this._$3S[f]},vt.prototype.getParamFloat=function(f){return this._$_2[f]},vt.prototype.getParamMax=function(f){return this._$Or[f]},vt.prototype.getParamMin=function(f){return this._$Rr[f]},vt.prototype.setPartsOpacity=function(f,d){var x=this._$Hr[f];x.setPartsOpacity(d)},vt.prototype.getPartsOpacity=function(f){var d=this._$Hr[f];return d.getPartsOpacity()},vt.prototype.getPartsDataIndex=function(f){for(var d=this._$F2.length-1;d>=0;--d)if(this._$F2[d]!=null&&this._$F2[d]._$p2()==f)return d;return-1},vt.prototype._$q2=function(f){return this._$db[f]},vt.prototype._$C2=function(f){return this._$8b[f]},vt.prototype._$Bb=function(f){return this._$Hr[f]},vt.prototype._$5s=function(f,d){for(var x=this._$Ws.length,L=f,M=0;M<x;++M){var N=this._$Ws[M];if(N!=vt._$V2)do{var V=this._$8b[N];V._$yo()&&(V._$GT()._$B2(this,V,L),L+=d);var z=this._$Er[N];if(z<=N||z==vt._$W0)break;N=z}while(!0)}},vt.prototype.setDrawParam=function(f){this.dp_webgl=f},vt.prototype.getDrawParam=function(){return this.dp_webgl};function le(){}le._$0T=function(f){return le._$0T(new _$5(f))},le._$0T=function(f){if(!f.exists())throw new _$ls(f._$3b());for(var d=f.length(),x=new Int8Array(d),L=new _$Xs(new _$kb(f),8192),M,N=0;(M=L.read(x,N,d-N))>0;)N+=M;return x},le._$C=function(f){var d=null,x=null;try{d=f instanceof Array?f:new _$Xs(f,8192),x=new _$js;for(var L=1e3,M,N=new Int8Array(L);(M=d.read(N))>0;)x.write(N,0,M);return x._$TS()}finally{f!=null&&f.close(),x!=null&&(x.flush(),x.close())}};function Gt(){D||(dt.prototype.constructor.call(this),this._$sb=new Int32Array(Gt._$As),this._$U2=new Array,this.transform=null,this.gl=null,Gt._$NT==null&&(Gt._$NT=Gt._$9r(256),Gt._$vS=Gt._$9r(256),Gt._$no=Gt._$vb(256)))}Gt.prototype=new dt,Gt._$As=32,Gt._$Gr=!1,Gt._$NT=null,Gt._$vS=null,Gt._$no=null,Gt._$9r=function(f){var d=new Float32Array(f);return d},Gt._$vb=function(f){var d=new Int16Array(f);return d},Gt._$cr=function(f,d){return f==null||f._$yL()<d.length?(f=Gt._$9r(d.length*2),f.put(d),f._$oT(0)):(f.clear(),f.put(d),f._$oT(0)),f},Gt._$mb=function(f,d){return f==null||f._$yL()<d.length?(f=Gt._$vb(d.length*2),f.put(d),f._$oT(0)):(f.clear(),f.put(d),f._$oT(0)),f},Gt._$Hs=function(){return Gt._$Gr},Gt._$as=function(f){Gt._$Gr=f},Gt.prototype.setGL=function(f){this.gl=f},Gt.prototype.setTransform=function(f){this.transform=f},Gt.prototype._$ZT=function(){},Gt.prototype._$Uo=function(f,d,x,L,M,N,V,z){if(!(N<.01)){var k=this._$U2[f],q=N>.9?yt.EXPAND_W:0;this.gl.drawElements(k,x,L,M,N,q,this.transform,z)}},Gt.prototype._$Rs=function(){throw new Error("_$Rs")},Gt.prototype._$Ds=function(f){throw new Error("_$Ds")},Gt.prototype._$K2=function(){for(var f=0;f<this._$sb.length;f++){var d=this._$sb[f];d!=0&&(this.gl._$Sr(1,this._$sb,f),this._$sb[f]=0)}},Gt.prototype.setTexture=function(f,d){this._$sb.length<f+1&&this._$nS(f),this._$sb[f]=d},Gt.prototype.setTexture=function(f,d){this._$sb.length<f+1&&this._$nS(f),this._$U2[f]=d},Gt.prototype._$nS=function(f){var d=Math.max(this._$sb.length*2,f+1+10),x=new Int32Array(d);Ft._$jT(this._$sb,0,x,0,this._$sb.length),this._$sb=x;var L=new Array;Ft._$jT(this._$U2,0,L,0,this._$U2.length),this._$U2=L};function se(){D||(Rt.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}se.prototype=new Rt,se._$Xo=new Float32Array(2),se._$io=new Float32Array(2),se._$0o=new Float32Array(2),se._$Lo=new Float32Array(2),se._$To=new Float32Array(2),se._$Po=new Float32Array(2),se._$gT=new Array,se.prototype._$zP=function(){this._$GS=new zt,this._$GS._$zP(),this._$Y0=new Array},se.prototype.getType=function(){return Rt._$c2},se.prototype._$F0=function(f){Rt.prototype._$F0.call(this,f),this._$GS=f._$nP(),this._$Y0=f._$nP(),Rt.prototype.readV2_opacity.call(this,f)},se.prototype.init=function(f){var d=new Pe(this);return d._$Yr=new J,this._$32()&&(d._$Wr=new J),d},se.prototype._$Nr=function(f,d){this!=d._$GT()&&console.log("### assert!! ### ");var x=d;if(this._$GS._$Ur(f)){var L=se._$gT;L[0]=!1;var M=this._$GS._$Q2(f,L);d._$Ib(L[0]),this.interpolateOpacity(f,this._$GS,d,L);var N=f._$vs(),V=f._$Tr();if(this._$GS._$zr(N,V,M),M<=0){var Ie=this._$Y0[N[0]];x._$Yr.init(Ie)}else if(M==1){var Ie=this._$Y0[N[0]],z=this._$Y0[N[1]],k=V[0];x._$Yr._$fL=Ie._$fL+(z._$fL-Ie._$fL)*k,x._$Yr._$gL=Ie._$gL+(z._$gL-Ie._$gL)*k,x._$Yr._$B0=Ie._$B0+(z._$B0-Ie._$B0)*k,x._$Yr._$z0=Ie._$z0+(z._$z0-Ie._$z0)*k,x._$Yr._$qT=Ie._$qT+(z._$qT-Ie._$qT)*k}else if(M==2){var Ie=this._$Y0[N[0]],z=this._$Y0[N[1]],q=this._$Y0[N[2]],tt=this._$Y0[N[3]],k=V[0],et=V[1],ht=Ie._$fL+(z._$fL-Ie._$fL)*k,gt=q._$fL+(tt._$fL-q._$fL)*k;x._$Yr._$fL=ht+(gt-ht)*et,ht=Ie._$gL+(z._$gL-Ie._$gL)*k,gt=q._$gL+(tt._$gL-q._$gL)*k,x._$Yr._$gL=ht+(gt-ht)*et,ht=Ie._$B0+(z._$B0-Ie._$B0)*k,gt=q._$B0+(tt._$B0-q._$B0)*k,x._$Yr._$B0=ht+(gt-ht)*et,ht=Ie._$z0+(z._$z0-Ie._$z0)*k,gt=q._$z0+(tt._$z0-q._$z0)*k,x._$Yr._$z0=ht+(gt-ht)*et,ht=Ie._$qT+(z._$qT-Ie._$qT)*k,gt=q._$qT+(tt._$qT-q._$qT)*k,x._$Yr._$qT=ht+(gt-ht)*et}else if(M==3){var xt=this._$Y0[N[0]],ut=this._$Y0[N[1]],Ct=this._$Y0[N[2]],wt=this._$Y0[N[3]],St=this._$Y0[N[4]],It=this._$Y0[N[5]],re=this._$Y0[N[6]],Bt=this._$Y0[N[7]],k=V[0],et=V[1],G=V[2],ht=xt._$fL+(ut._$fL-xt._$fL)*k,gt=Ct._$fL+(wt._$fL-Ct._$fL)*k,Mt=St._$fL+(It._$fL-St._$fL)*k,Ut=re._$fL+(Bt._$fL-re._$fL)*k;x._$Yr._$fL=(1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et),ht=xt._$gL+(ut._$gL-xt._$gL)*k,gt=Ct._$gL+(wt._$gL-Ct._$gL)*k,Mt=St._$gL+(It._$gL-St._$gL)*k,Ut=re._$gL+(Bt._$gL-re._$gL)*k,x._$Yr._$gL=(1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et),ht=xt._$B0+(ut._$B0-xt._$B0)*k,gt=Ct._$B0+(wt._$B0-Ct._$B0)*k,Mt=St._$B0+(It._$B0-St._$B0)*k,Ut=re._$B0+(Bt._$B0-re._$B0)*k,x._$Yr._$B0=(1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et),ht=xt._$z0+(ut._$z0-xt._$z0)*k,gt=Ct._$z0+(wt._$z0-Ct._$z0)*k,Mt=St._$z0+(It._$z0-St._$z0)*k,Ut=re._$z0+(Bt._$z0-re._$z0)*k,x._$Yr._$z0=(1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et),ht=xt._$qT+(ut._$qT-xt._$qT)*k,gt=Ct._$qT+(wt._$qT-Ct._$qT)*k,Mt=St._$qT+(It._$qT-St._$qT)*k,Ut=re._$qT+(Bt._$qT-re._$qT)*k,x._$Yr._$qT=(1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et)}else if(M==4){var He=this._$Y0[N[0]],sr=this._$Y0[N[1]],kt=this._$Y0[N[2]],ur=this._$Y0[N[3]],pe=this._$Y0[N[4]],oe=this._$Y0[N[5]],ge=this._$Y0[N[6]],Ee=this._$Y0[N[7]],be=this._$Y0[N[8]],Se=this._$Y0[N[9]],ee=this._$Y0[N[10]],de=this._$Y0[N[11]],Lt=this._$Y0[N[12]],ie=this._$Y0[N[13]],Le=this._$Y0[N[14]],yr=this._$Y0[N[15]],k=V[0],et=V[1],G=V[2],ze=V[3],ht=He._$fL+(sr._$fL-He._$fL)*k,gt=kt._$fL+(ur._$fL-kt._$fL)*k,Mt=pe._$fL+(oe._$fL-pe._$fL)*k,Ut=ge._$fL+(Ee._$fL-ge._$fL)*k,Ne=be._$fL+(Se._$fL-be._$fL)*k,je=ee._$fL+(de._$fL-ee._$fL)*k,_t=Lt._$fL+(ie._$fL-Lt._$fL)*k,Lr=Le._$fL+(yr._$fL-Le._$fL)*k;x._$Yr._$fL=(1-ze)*((1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et))+ze*((1-G)*(Ne+(je-Ne)*et)+G*(_t+(Lr-_t)*et)),ht=He._$gL+(sr._$gL-He._$gL)*k,gt=kt._$gL+(ur._$gL-kt._$gL)*k,Mt=pe._$gL+(oe._$gL-pe._$gL)*k,Ut=ge._$gL+(Ee._$gL-ge._$gL)*k,Ne=be._$gL+(Se._$gL-be._$gL)*k,je=ee._$gL+(de._$gL-ee._$gL)*k,_t=Lt._$gL+(ie._$gL-Lt._$gL)*k,Lr=Le._$gL+(yr._$gL-Le._$gL)*k,x._$Yr._$gL=(1-ze)*((1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et))+ze*((1-G)*(Ne+(je-Ne)*et)+G*(_t+(Lr-_t)*et)),ht=He._$B0+(sr._$B0-He._$B0)*k,gt=kt._$B0+(ur._$B0-kt._$B0)*k,Mt=pe._$B0+(oe._$B0-pe._$B0)*k,Ut=ge._$B0+(Ee._$B0-ge._$B0)*k,Ne=be._$B0+(Se._$B0-be._$B0)*k,je=ee._$B0+(de._$B0-ee._$B0)*k,_t=Lt._$B0+(ie._$B0-Lt._$B0)*k,Lr=Le._$B0+(yr._$B0-Le._$B0)*k,x._$Yr._$B0=(1-ze)*((1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et))+ze*((1-G)*(Ne+(je-Ne)*et)+G*(_t+(Lr-_t)*et)),ht=He._$z0+(sr._$z0-He._$z0)*k,gt=kt._$z0+(ur._$z0-kt._$z0)*k,Mt=pe._$z0+(oe._$z0-pe._$z0)*k,Ut=ge._$z0+(Ee._$z0-ge._$z0)*k,Ne=be._$z0+(Se._$z0-be._$z0)*k,je=ee._$z0+(de._$z0-ee._$z0)*k,_t=Lt._$z0+(ie._$z0-Lt._$z0)*k,Lr=Le._$z0+(yr._$z0-Le._$z0)*k,x._$Yr._$z0=(1-ze)*((1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et))+ze*((1-G)*(Ne+(je-Ne)*et)+G*(_t+(Lr-_t)*et)),ht=He._$qT+(sr._$qT-He._$qT)*k,gt=kt._$qT+(ur._$qT-kt._$qT)*k,Mt=pe._$qT+(oe._$qT-pe._$qT)*k,Ut=ge._$qT+(Ee._$qT-ge._$qT)*k,Ne=be._$qT+(Se._$qT-be._$qT)*k,je=ee._$qT+(de._$qT-ee._$qT)*k,_t=Lt._$qT+(ie._$qT-Lt._$qT)*k,Lr=Le._$qT+(yr._$qT-Le._$qT)*k,x._$Yr._$qT=(1-ze)*((1-G)*(ht+(gt-ht)*et)+G*(Mt+(Ut-Mt)*et))+ze*((1-G)*(Ne+(je-Ne)*et)+G*(_t+(Lr-_t)*et))}else{for(var rr=Math.pow(2,M)|0,Or=new Float32Array(rr),br=0;br<rr;br++){for(var ti=br,Ti=1,ei=0;ei<M;ei++)Ti*=ti%2==0?1-V[ei]:V[ei],ti/=2;Or[br]=Ti}for(var hi=new Array,Tr=0;Tr<rr;Tr++)hi[Tr]=this._$Y0[N[Tr]];for(var Ki=0,tn=0,ui=0,en=0,li=0,Tr=0;Tr<rr;Tr++)Ki+=Or[Tr]*hi[Tr]._$fL,tn+=Or[Tr]*hi[Tr]._$gL,ui+=Or[Tr]*hi[Tr]._$B0,en+=Or[Tr]*hi[Tr]._$z0,li+=Or[Tr]*hi[Tr]._$qT;x._$Yr._$fL=Ki,x._$Yr._$gL=tn,x._$Yr._$B0=ui,x._$Yr._$z0=en,x._$Yr._$qT=li}var Ie=this._$Y0[N[0]];x._$Yr.reflectX=Ie.reflectX,x._$Yr.reflectY=Ie.reflectY}},se.prototype._$2b=function(f,d){this!=d._$GT()&&console.log("### assert!! ### ");var x=d;if(x._$hS(!0),!this._$32())x.setTotalScale_notForClient(x._$Yr._$B0),x.setTotalOpacity(x.getInterpolatedOpacity());else{var L=this.getTargetBaseDataID();if(x._$8r==Rt._$ur&&(x._$8r=f.getBaseDataIndex(L)),x._$8r<0)yt._$so&&h._$li("_$L _$0P _$G :: %s",L),x._$hS(!1);else{var M=f.getBaseData(x._$8r);if(M!=null){var N=f._$q2(x._$8r),V=se._$Xo;V[0]=x._$Yr._$fL,V[1]=x._$Yr._$gL;var z=se._$io;z[0]=0,z[1]=-.1;var k=N._$GT().getType();k==Rt._$c2?z[1]=-10:z[1]=-.1;var q=se._$0o;this._$Jr(f,M,N,V,z,q);var tt=n._$92(z,q);M._$nb(f,N,V,V,1,0,2),x._$Wr._$fL=V[0],x._$Wr._$gL=V[1],x._$Wr._$B0=x._$Yr._$B0,x._$Wr._$z0=x._$Yr._$z0,x._$Wr._$qT=x._$Yr._$qT-tt*n._$NS;var et=N.getTotalScale();x.setTotalScale_notForClient(et*x._$Wr._$B0);var ht=N.getTotalOpacity();x.setTotalOpacity(ht*x.getInterpolatedOpacity()),x._$Wr.reflectX=x._$Yr.reflectX,x._$Wr.reflectY=x._$Yr.reflectY,x._$hS(N._$yo())}else x._$hS(!1)}}},se.prototype._$nb=function(f,d,x,L,M,N,V){this!=d._$GT()&&console.log("### assert!! ### ");for(var z=d,k=z._$Wr!=null?z._$Wr:z._$Yr,q=Math.sin(n._$bS*k._$qT),tt=Math.cos(n._$bS*k._$qT),et=z.getTotalScale(),ht=k.reflectX?-1:1,gt=k.reflectY?-1:1,xt=tt*et*ht,ut=-q*et*gt,Ct=q*et*ht,wt=tt*et*gt,St=k._$fL,It=k._$gL,re,Bt,G=M*V,Mt=N;Mt<G;Mt+=V)re=x[Mt],Bt=x[Mt+1],L[Mt]=xt*re+ut*Bt+St,L[Mt+1]=Ct*re+wt*Bt+It},se.prototype._$Jr=function(f,d,x,L,M,N){d!=x._$GT()&&console.log("### assert!! ### ");var V=se._$Lo;se._$Lo[0]=L[0],se._$Lo[1]=L[1],d._$nb(f,x,V,V,1,0,2);for(var z=se._$To,k=se._$Po,q=10,tt=1,et=0;et<q;et++){if(k[0]=L[0]+tt*M[0],k[1]=L[1]+tt*M[1],d._$nb(f,x,k,z,1,0,2),z[0]-=V[0],z[1]-=V[1],z[0]!=0||z[1]!=0){N[0]=z[0],N[1]=z[1];return}if(k[0]=L[0]-tt*M[0],k[1]=L[1]-tt*M[1],d._$nb(f,x,k,z,1,0,2),z[0]-=V[0],z[1]-=V[1],z[0]!=0||z[1]!=0){z[0]=-z[0],z[0]=-z[0],N[0]=z[0],N[1]=z[1];return}tt*=.1}yt._$so&&console.log(`_$L0 to transform _$SP
`)};function Pe(f){Sr.prototype.constructor.call(this,f),this._$8r=Rt._$ur,this._$Yr=null,this._$Wr=null}Pe.prototype=new Sr;function Zt(){D||(Tt.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}Zt.prototype=new Tt,Zt._$ur=-2,Zt._$ES=500,Zt._$wb=2,Zt._$8S=3,Zt._$os=4,Zt._$52=Zt._$ES,Zt._$R2=Zt._$ES,Zt._$Sb=function(f){for(var d=f.length-1;d>=0;--d){var x=f[d];x<Zt._$52?Zt._$52=x:x>Zt._$R2&&(Zt._$R2=x)}},Zt._$or=function(){return Zt._$52},Zt._$Pr=function(){return Zt._$R2},Zt.prototype._$F0=function(f){this._$gP=f._$nP(),this._$dr=f._$nP(),this._$GS=f._$nP(),this._$qb=f._$6L(),this._$Lb=f._$cS(),this._$mS=f._$Tb(),f.getFormatVersion()>=bt._$T7?(this.clipID=f._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,Zt._$Sb(this._$Lb)},Zt.prototype.getClipIDList=function(){return this.clipIDList},Zt.prototype._$Nr=function(f,d){if(d._$IS[0]=!1,d._$Us=K._$Z2(f,this._$GS,d._$IS,this._$Lb),!yt._$Zs){if(d._$IS[0])return}d._$7s=K._$br(f,this._$GS,d._$IS,this._$mS)},Zt.prototype._$2b=function(f){},Zt.prototype.getDrawDataID=function(){return this._$gP},Zt.prototype._$j2=function(f){this._$gP=f},Zt.prototype.getOpacity=function(f,d){return d._$7s},Zt.prototype._$zS=function(f,d){return d._$Us},Zt.prototype.getTargetBaseDataID=function(){return this._$dr},Zt.prototype._$gs=function(f){this._$dr=f},Zt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=lr._$2o()},Zt.prototype.getType=function(){};function ke(){D||(this._$NL=null,this._$3S=null,this._$aS=null,ke._$42++)}ke._$42=0,ke.prototype._$1b=function(){return this._$3S},ke.prototype.getDrawDataList=function(){return this._$aS},ke.prototype._$F0=function(f){this._$NL=f._$nP(),this._$aS=f._$nP(),this._$3S=f._$nP()},ke.prototype._$kr=function(f){f._$Zo(this._$3S),f._$xo(this._$aS),this._$3S=null,this._$aS=null};function _e(){D||(t.prototype.constructor.call(this),this._$zo=new Gt)}_e.prototype=new t,_e.loadModel=function(f){var d=new _e;return t._$62(d,f),d},_e.loadModel=function(f){var d=new _e;return t._$62(d,f),d},_e._$to=function(){var f=new _e;return f},_e._$er=function(f){var d=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(d.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+d._$PL());for(var x=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],L=_e.loadModel(d._$3b()),M=0;M<x.length;M++){var N=new _$5(x[M]);if(N.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+N._$PL());L.setTexture(M,_$nL._$_o(f,N._$3b()))}return L},_e.prototype.setGL=function(f){this._$zo.setGL(f)},_e.prototype.setTransform=function(f){this._$zo.setTransform(f)},_e.prototype.draw=function(){this._$5S.draw(this._$zo)},_e.prototype._$K2=function(){this._$zo._$K2()},_e.prototype.setTexture=function(f,d){this._$zo==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(f,d)},_e.prototype.setTexture=function(f,d){this._$zo==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(f,d)},_e.prototype._$Rs=function(){return this._$zo._$Rs()},_e.prototype._$Ds=function(f){this._$zo._$Ds(f)},_e.prototype.getDrawParam=function(){return this._$zo};function fe(){D||(o.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=fe._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}fe.prototype=new o,fe._$cs="VISIBLE:",fe._$ar="LAYOUT:",fe.MTN_PREFIX_FADEIN="FADEIN:",fe.MTN_PREFIX_FADEOUT="FADEOUT:",fe._$Co=0,fe._$1T=1,fe.loadMotion=function(f){var d=le._$C(f),x=fe.loadMotion(d);return x};function ue(f,d){return String.fromCharCode(f.getUint8(d))}fe.loadMotion=function(f){f instanceof ArrayBuffer&&(f=new DataView(f));var d=new fe,x=[0],L=f.byteLength;d._$yT=0;for(var M=0;M<L;++M){var N=ue(f,M),V=N.charCodeAt(0);if(!(N==`
`||N=="\r")){if(N=="#"){for(;M<L&&!(ue(f,M)==`
`||ue(f,M)=="\r");++M);continue}if(N=="$"){for(var z=M,k=-1;M<L&&(N=ue(f,M),!(N=="\r"||N==`
`));++M)if(N=="="){k=M;break}var q=!1;if(k>=0){for(k==z+4&&ue(f,z+1)=="f"&&ue(f,z+2)=="p"&&ue(f,z+3)=="s"&&(q=!0),M=k+1;M<L&&(N=ue(f,M),!(N=="\r"||N==`
`));++M)if(!(N==","||N==" "||N=="	")){var tt=ae._$LS(f,L,M,x);x[0]>0&&q&&5<tt&&tt<121&&(d._$D0=tt),M=x[0]}}for(;M<L&&!(ue(f,M)==`
`||ue(f,M)=="\r");++M);continue}if(97<=V&&V<=122||65<=V&&V<=90||N=="_"){for(var z=M,k=-1;M<L&&(N=ue(f,M),!(N=="\r"||N==`
`));++M)if(N=="="){k=M;break}if(k>=0){var et=new Nt;ae.startsWith(f,z,fe._$cs)?(et._$RP=Nt._$hs,et._$4P=ae.createString(f,z,k-z)):ae.startsWith(f,z,fe._$ar)?(et._$4P=ae.createString(f,z+7,k-z-7),ae.startsWith(f,z+7,"ANCHOR_X")?et._$RP=Nt._$xs:ae.startsWith(f,z+7,"ANCHOR_Y")?et._$RP=Nt._$us:ae.startsWith(f,z+7,"SCALE_X")?et._$RP=Nt._$qs:ae.startsWith(f,z+7,"SCALE_Y")?et._$RP=Nt._$Ys:ae.startsWith(f,z+7,"X")?et._$RP=Nt._$ws:ae.startsWith(f,z+7,"Y")&&(et._$RP=Nt._$Ns)):(et._$RP=Nt._$Fr,et._$4P=ae.createString(f,z,k-z)),d.motions.push(et);var ht=0,gt=[];for(M=k+1;M<L&&(N=ue(f,M),!(N=="\r"||N==`
`));++M)if(!(N==","||N==" "||N=="	")){var tt=ae._$LS(f,L,M,x);if(x[0]>0){gt.push(tt),ht++;var xt=x[0];if(xt<M){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}M=xt-1}}et._$I0=new Float32Array(gt),ht>d._$yT&&(d._$yT=ht)}}}}return d._$rr=1e3*d._$yT/d._$D0|0,d},fe.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},fe.prototype.getLoopDurationMSec=function(){return this._$rr},fe.prototype.dump=function(){for(var f=0;f<this.motions.length;f++){var d=this.motions[f];console.log("_$wL[%s] [%d]. ",d._$4P,d._$I0.length);for(var x=0;x<d._$I0.length&&x<10;x++)console.log("%5.2f ,",d._$I0[x]);console.log(`
`)}},fe.prototype.updateParamExe=function(f,d,x,L){for(var M=d-L._$z2,N=M*this._$D0/1e3,V=N|0,z=N-V,k=0;k<this.motions.length;k++){var q=this.motions[k],tt=q._$I0.length,et=q._$4P;if(q._$RP==Nt._$hs){var ht=q._$I0[V>=tt?tt-1:V];f.setParamFloat(et,ht)}else if(!(Nt._$ws<=q._$RP&&q._$RP<=Nt._$Ys)){var gt=f.getParamIndex(et),xt=f.getModelContext(),ut=xt.getParamMax(gt),Ct=xt.getParamMin(gt),wt=.4,St=wt*(ut-Ct),It=xt.getParamFloat(gt),re=q._$I0[V>=tt?tt-1:V],Bt=q._$I0[V+1>=tt?tt-1:V+1],G;re<Bt&&Bt-re>St||re>Bt&&re-Bt>St?G=re:G=re+(Bt-re)*z;var Mt=It+(G-It)*x;f.setParamFloat(et,Mt)}}V>=this._$yT&&(this._$E?(L._$z2=d,this.loopFadeIn&&(L._$bs=d)):L._$9L=!0),this._$eP=x},fe.prototype._$r0=function(){return this._$E},fe.prototype._$aL=function(f){this._$E=f},fe.prototype._$S0=function(){return this._$D0},fe.prototype._$U0=function(f){this._$D0=f},fe.prototype.isLoopFadeIn=function(){return this.loopFadeIn},fe.prototype.setLoopFadeIn=function(f){this.loopFadeIn=f};function me(){this._$P=new Float32Array(100),this.size=0}me.prototype.clear=function(){this.size=0},me.prototype.add=function(f){if(this._$P.length<=this.size){var d=new Float32Array(this.size*2);Ft._$jT(this._$P,0,d,0,this.size),this._$P=d}this._$P[this.size++]=f},me.prototype._$BL=function(){var f=new Float32Array(this.size);return Ft._$jT(this._$P,0,f,0,this.size),f};function Nt(){this._$4P=null,this._$I0=null,this._$RP=null}Nt._$Fr=0,Nt._$hs=1,Nt._$ws=100,Nt._$Ns=101,Nt._$xs=102,Nt._$us=103,Nt._$qs=104,Nt._$Ys=105;function Ge(){D||(Rt.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}Ge.prototype=new Rt,Ge._$gT=new Array,Ge.prototype._$zP=function(){this._$GS=new zt,this._$GS._$zP()},Ge.prototype._$F0=function(f){Rt.prototype._$F0.call(this,f),this._$A=f._$6L(),this._$o=f._$6L(),this._$GS=f._$nP(),this._$Eo=f._$nP(),Rt.prototype.readV2_opacity.call(this,f)},Ge.prototype.init=function(f){var d=new Ke(this),x=(this._$o+1)*(this._$A+1);return d._$Cr!=null&&(d._$Cr=null),d._$Cr=new Float32Array(x*2),d._$hr!=null&&(d._$hr=null),this._$32()?d._$hr=new Float32Array(x*2):d._$hr=null,d},Ge.prototype._$Nr=function(f,d){var x=d;if(this._$GS._$Ur(f)){var L=this._$VT(),M=Ge._$gT;M[0]=!1,K._$Vr(f,this._$GS,M,L,this._$Eo,x._$Cr,0,2),d._$Ib(M[0]),this.interpolateOpacity(f,this._$GS,d,M)}},Ge.prototype._$2b=function(f,d){var x=d;if(x._$hS(!0),!this._$32())x.setTotalOpacity(x.getInterpolatedOpacity());else{var L=this.getTargetBaseDataID();if(x._$8r==Rt._$ur&&(x._$8r=f.getBaseDataIndex(L)),x._$8r<0)yt._$so&&h._$li("_$L _$0P _$G :: %s",L),x._$hS(!1);else{var M=f.getBaseData(x._$8r),N=f._$q2(x._$8r);if(M!=null&&N._$yo()){var V=N.getTotalScale();x.setTotalScale_notForClient(V);var z=N.getTotalOpacity();x.setTotalOpacity(z*x.getInterpolatedOpacity()),M._$nb(f,N,x._$Cr,x._$hr,this._$VT(),0,2),x._$hS(!0)}else x._$hS(!1)}}},Ge.prototype._$nb=function(f,d,x,L,M,N,V){{var z=d,k=z._$hr!=null?z._$hr:z._$Cr;Ge.transformPoints_sdk2(x,L,M,N,V,k,this._$o,this._$A)}},Ge.transformPoints_sdk2=function(f,d,x,L,M,N,V,z){for(var k=x*M,q,tt,et,ht=0,gt=0,xt=0,ut=0,Ct=0,wt=0,St=!1,It=L;It<k;It+=M){var re,Bt,G,Mt;if(G=f[It],Mt=f[It+1],re=G*V,Bt=Mt*z,re<0||Bt<0||V<=re||z<=Bt){var Ut=V+1;if(!St){St=!0,ht=.25*(N[(0+0*Ut)*2]+N[(V+0*Ut)*2]+N[(0+z*Ut)*2]+N[(V+z*Ut)*2]),gt=.25*(N[(0+0*Ut)*2+1]+N[(V+0*Ut)*2+1]+N[(0+z*Ut)*2+1]+N[(V+z*Ut)*2+1]);var He=N[(V+z*Ut)*2]-N[(0+0*Ut)*2],sr=N[(V+z*Ut)*2+1]-N[(0+0*Ut)*2+1],kt=N[(V+0*Ut)*2]-N[(0+z*Ut)*2],ur=N[(V+0*Ut)*2+1]-N[(0+z*Ut)*2+1];xt=(He+kt)*.5,ut=(sr+ur)*.5,Ct=(He-kt)*.5,wt=(sr-ur)*.5,ht-=.5*(xt+Ct),gt-=.5*(ut+wt)}if(-2<G&&G<3&&-2<Mt&&Mt<3)if(G<=0)if(Mt<=0){var pe=N[(0+0*Ut)*2],oe=N[(0+0*Ut)*2+1],ge=ht-2*xt,Ee=gt-2*ut,be=ht-2*Ct,Se=gt-2*wt,ee=ht-2*xt-2*Ct,de=gt-2*ut-2*wt,Lt=.5*(G- -2),ie=.5*(Mt- -2);Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else if(Mt>=1){var be=N[(0+z*Ut)*2],Se=N[(0+z*Ut)*2+1],ee=ht-2*xt+1*Ct,de=gt-2*ut+1*wt,pe=ht+3*Ct,oe=gt+3*wt,ge=ht-2*xt+3*Ct,Ee=gt-2*ut+3*wt,Lt=.5*(G- -2),ie=.5*(Mt-1);Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else{var Le=Bt|0;Le==z&&(Le=z-1);var Lt=.5*(G- -2),ie=Bt-Le,yr=Le/z,ze=(Le+1)/z,be=N[(0+Le*Ut)*2],Se=N[(0+Le*Ut)*2+1],pe=N[(0+(Le+1)*Ut)*2],oe=N[(0+(Le+1)*Ut)*2+1],ee=ht-2*xt+yr*Ct,de=gt-2*ut+yr*wt,ge=ht-2*xt+ze*Ct,Ee=gt-2*ut+ze*wt;Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else if(1<=G)if(Mt<=0){var ge=N[(V+0*Ut)*2],Ee=N[(V+0*Ut)*2+1],pe=ht+3*xt,oe=gt+3*ut,ee=ht+1*xt-2*Ct,de=gt+1*ut-2*wt,be=ht+3*xt-2*Ct,Se=gt+3*ut-2*wt,Lt=.5*(G-1),ie=.5*(Mt- -2);Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else if(Mt>=1){var ee=N[(V+z*Ut)*2],de=N[(V+z*Ut)*2+1],be=ht+3*xt+1*Ct,Se=gt+3*ut+1*wt,ge=ht+1*xt+3*Ct,Ee=gt+1*ut+3*wt,pe=ht+3*xt+3*Ct,oe=gt+3*ut+3*wt,Lt=.5*(G-1),ie=.5*(Mt-1);Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else{var Le=Bt|0;Le==z&&(Le=z-1);var Lt=.5*(G-1),ie=Bt-Le,yr=Le/z,ze=(Le+1)/z,ee=N[(V+Le*Ut)*2],de=N[(V+Le*Ut)*2+1],ge=N[(V+(Le+1)*Ut)*2],Ee=N[(V+(Le+1)*Ut)*2+1],be=ht+3*xt+yr*Ct,Se=gt+3*ut+yr*wt,pe=ht+3*xt+ze*Ct,oe=gt+3*ut+ze*wt;Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else if(Mt<=0){var Ne=re|0;Ne==V&&(Ne=V-1);var Lt=re-Ne,ie=.5*(Mt- -2),je=Ne/V,_t=(Ne+1)/V,ge=N[(Ne+0*Ut)*2],Ee=N[(Ne+0*Ut)*2+1],pe=N[(Ne+1+0*Ut)*2],oe=N[(Ne+1+0*Ut)*2+1],ee=ht+je*xt-2*Ct,de=gt+je*ut-2*wt,be=ht+_t*xt-2*Ct,Se=gt+_t*ut-2*wt;Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else if(Mt>=1){var Ne=re|0;Ne==V&&(Ne=V-1);var Lt=re-Ne,ie=.5*(Mt-1),je=Ne/V,_t=(Ne+1)/V,ee=N[(Ne+z*Ut)*2],de=N[(Ne+z*Ut)*2+1],be=N[(Ne+1+z*Ut)*2],Se=N[(Ne+1+z*Ut)*2+1],ge=ht+je*xt+3*Ct,Ee=gt+je*ut+3*wt,pe=ht+_t*xt+3*Ct,oe=gt+_t*ut+3*wt;Lt+ie<=1?(d[It]=ee+(be-ee)*Lt+(ge-ee)*ie,d[It+1]=de+(Se-de)*Lt+(Ee-de)*ie):(d[It]=pe+(ge-pe)*(1-Lt)+(be-pe)*(1-ie),d[It+1]=oe+(Ee-oe)*(1-Lt)+(Se-oe)*(1-ie))}else System.err.printf(`_$li calc : %.4f , %.4f					@@BDBoxGrid
`,G,Mt);else d[It]=ht+G*xt+Mt*Ct,d[It+1]=gt+G*ut+Mt*wt}else tt=re-(re|0),et=Bt-(Bt|0),q=2*((re|0)+(Bt|0)*(V+1)),tt+et<1?(d[It]=N[q]*(1-tt-et)+N[q+2]*tt+N[q+2*(V+1)]*et,d[It+1]=N[q+1]*(1-tt-et)+N[q+3]*tt+N[q+2*(V+1)+1]*et):(d[It]=N[q+2*(V+1)+2]*(tt-1+et)+N[q+2*(V+1)]*(1-tt)+N[q+2]*(1-et),d[It+1]=N[q+2*(V+1)+3]*(tt-1+et)+N[q+2*(V+1)+1]*(1-tt)+N[q+3]*(1-et))}},Ge.prototype.transformPoints_sdk1=function(f,d,x,L,M,N,V){for(var z=d,k,q,tt=this._$o,et=this._$A,ht=M*V,gt,xt,ut,Ct,wt,St=z._$hr!=null?z._$hr:z._$Cr,It=N;It<ht;It+=V)yt._$ts?(k=x[It],q=x[It+1],k<0?k=0:k>1&&(k=1),q<0?q=0:q>1&&(q=1),k*=tt,q*=et,gt=k|0,xt=q|0,gt>tt-1&&(gt=tt-1),xt>et-1&&(xt=et-1),Ct=k-gt,wt=q-xt,ut=2*(gt+xt*(tt+1))):(k=x[It]*tt,q=x[It+1]*et,Ct=k-(k|0),wt=q-(q|0),ut=2*((k|0)+(q|0)*(tt+1))),Ct+wt<1?(L[It]=St[ut]*(1-Ct-wt)+St[ut+2]*Ct+St[ut+2*(tt+1)]*wt,L[It+1]=St[ut+1]*(1-Ct-wt)+St[ut+3]*Ct+St[ut+2*(tt+1)+1]*wt):(L[It]=St[ut+2*(tt+1)+2]*(Ct-1+wt)+St[ut+2*(tt+1)]*(1-Ct)+St[ut+2]*(1-wt),L[It+1]=St[ut+2*(tt+1)+3]*(Ct-1+wt)+St[ut+2*(tt+1)+1]*(1-Ct)+St[ut+3]*(1-wt))},Ge.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},Ge.prototype.getType=function(){return Rt._$_b};function Ke(f){Sr.prototype.constructor.call(this,f),this._$8r=Rt._$ur,this._$Cr=null,this._$hr=null}Ke.prototype=new Sr;function ce(){D||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,ce._$42++)}ce._$42=0,ce.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},ce.prototype._$F0=function(f){this._$g0=f._$8L(),this.visible=f._$8L(),this._$NL=f._$nP(),this._$3S=f._$nP(),this._$aS=f._$nP()},ce.prototype.init=function(f){var d=new Vr(this);return d.setPartsOpacity(this.isVisible()?1:0),d},ce.prototype._$6o=function(f){if(this._$3S==null)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(f)},ce.prototype._$3o=function(f){if(this._$aS==null)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(f)},ce.prototype._$Zo=function(f){this._$3S=f},ce.prototype._$xo=function(f){this._$aS=f},ce.prototype.isVisible=function(){return this.visible},ce.prototype._$uL=function(){return this._$g0},ce.prototype._$KP=function(f){this.visible=f},ce.prototype._$ET=function(f){this._$g0=f},ce.prototype.getBaseData=function(){return this._$3S},ce.prototype.getDrawData=function(){return this._$aS},ce.prototype._$p2=function(){return this._$NL},ce.prototype._$ob=function(f){this._$NL=f},ce.prototype.getPartsID=function(){return this._$NL},ce.prototype._$MP=function(f){this._$NL=f};function Vr(f){this._$VS=null,this._$e0=null,this._$e0=f}Vr.prototype=new y,Vr.prototype.getPartsOpacity=function(){return this._$VS},Vr.prototype.setPartsOpacity=function(f){this._$VS=f};function Br(f){D||(this.id=f)}Br._$L7=function(){w._$27(),lr._$27(),he._$27(),_._$27()},Br.prototype.toString=function(){return this.id};function ai(){D||(this._$4S=null)}ai.prototype._$1s=function(){return this._$4S},ai.prototype._$zP=function(){this._$4S=new Array},ai.prototype._$F0=function(f){this._$4S=f._$nP()},ai.prototype._$Ks=function(f){this._$4S.push(f)};function Ze(f,d){this.canvas=f,this.context=d,this.viewport=new Array(0,0,f.width,f.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}Ze.tr=new zr,Ze._$50=new zr,Ze._$Ti=new Array(0,0),Ze._$Pi=new Array(0,0),Ze._$B=new Array(0,0),Ze.prototype._$lP=function(f,d,x,L){this.viewport=new Array(f,d,x,L)},Ze.prototype._$bL=function(){this.context.save();var f=this.viewport;f!=null&&(this.context.beginPath(),this.context._$Li(f[0],f[1],f[2],f[3]),this.context.clip())},Ze.prototype._$ei=function(){this.context.restore()},Ze.prototype.drawElements=function(f,d,x,L,M,N,V,z){try{M!=this._$Qo&&(this._$Qo=M,this.context.globalAlpha=M);for(var k=d.length,q=f.width,tt=f.height,et=this.context,ht=this._$xP,gt=this._$uP,xt=this._$6r,ut=this._$3r,Ct=Ze.tr,wt=Ze._$Ti,St=Ze._$Pi,It=Ze._$B,re=0;re<k;re+=3){et.save();var Bt=d[re],G=d[re+1],Mt=d[re+2],Ut=ht+xt*x[Bt*2],He=gt+ut*x[Bt*2+1],sr=ht+xt*x[G*2],kt=gt+ut*x[G*2+1],ur=ht+xt*x[Mt*2],pe=gt+ut*x[Mt*2+1];V&&(V._$PS(Ut,He,It),Ut=It[0],He=It[1],V._$PS(sr,kt,It),sr=It[0],kt=It[1],V._$PS(ur,pe,It),ur=It[0],pe=It[1]);var oe=q*L[Bt*2],ge=tt-tt*L[Bt*2+1],Ee=q*L[G*2],be=tt-tt*L[G*2+1],Se=q*L[Mt*2],ee=tt-tt*L[Mt*2+1],de=Math.atan2(be-ge,Ee-oe),Lt=Math.atan2(kt-He,sr-Ut),ie=sr-Ut,Le=kt-He,yr=Math.sqrt(ie*ie+Le*Le),ze=Ee-oe,Ne=be-ge,je=Math.sqrt(ze*ze+Ne*Ne),_t=yr/je;it._$ni(Se,ee,oe,ge,Ee-oe,be-ge,-(be-ge),Ee-oe,wt),it._$ni(ur,pe,Ut,He,sr-Ut,kt-He,-(kt-He),sr-Ut,St);var Lr=(St[0]-wt[0])/wt[1],rr=Math.min(oe,Ee,Se),Or=Math.max(oe,Ee,Se),br=Math.min(ge,be,ee),ti=Math.max(ge,be,ee),Ti=Math.floor(rr),ei=Math.floor(br),hi=Math.ceil(Or),Tr=Math.ceil(ti);Ct.identity(),Ct.translate(Ut,He),Ct.rotate(Lt),Ct.scale(1,St[1]/wt[1]),Ct.shear(Lr,0),Ct.scale(_t,_t),Ct.rotate(-de),Ct.translate(-oe,-ge),Ct.setContext(et);var Ki=!0,tn=1.2;if(N||(N=Ki?tn:0),yt.IGNORE_EXPAND&&(N=0),yt.USE_CACHED_POLYGON_IMAGE){var ui=z._$e0;if(ui.gl_cacheImage=ui.gl_cacheImage||{},!ui.gl_cacheImage[re]){var en=Ze.createCanvas(hi-Ti,Tr-ei);yt.DEBUG_DATA.LDGL_CANVAS_MB=yt.DEBUG_DATA.LDGL_CANVAS_MB||0,yt.DEBUG_DATA.LDGL_CANVAS_MB+=(hi-Ti)*(Tr-ei)*4;var li=en.getContext("2d");li.translate(-Ti,-ei),Ze.clip(li,Ct,N,yr,oe,ge,Ee,be,Se,ee,Ut,He,sr,kt,ur,pe),li.drawImage(f,0,0),ui.gl_cacheImage[re]={cacheCanvas:en,cacheContext:li}}et.drawImage(ui.gl_cacheImage[re].cacheCanvas,Ti,ei)}else yt.IGNORE_CLIP||Ze.clip(et,Ct,N,yr,oe,ge,Ee,be,Se,ee,Ut,He,sr,kt,ur,pe),yt.USE_ADJUST_TRANSLATION&&(rr=0,Or=q,br=0,ti=tt),et.drawImage(f,rr,br,Or-rr,ti-br,rr,br,Or-rr,ti-br);et.restore()}}catch(Ie){h._$Rb(Ie)}},Ze.clip=function(f,d,x,L,M,N,V,z,k,q,tt,et,ht,gt,xt,ut){x>.02?Ze.expandClip(f,d,x,L,tt,et,ht,gt,xt,ut):Ze.clipWithTransform(f,null,M,N,V,z,k,q)},Ze.expandClip=function(f,d,x,L,M,N,V,z,k,q){var tt=V-M,et=z-N,ht=k-M,gt=q-N,xt=tt*gt-et*ht>0?x:-x,ut=-et,Ct=tt,wt=k-V,St=q-z,It=-St,re=wt,Bt=Math.sqrt(wt*wt+St*St),G=-gt,Mt=ht,Ut=Math.sqrt(ht*ht+gt*gt),He=M-xt*ut/L,sr=N-xt*Ct/L,kt=V-xt*ut/L,ur=z-xt*Ct/L,pe=V-xt*It/Bt,oe=z-xt*re/Bt,ge=k-xt*It/Bt,Ee=q-xt*re/Bt,be=M+xt*G/Ut,Se=N+xt*Mt/Ut,ee=k+xt*G/Ut,de=q+xt*Mt/Ut,Lt=Ze._$50,ie=d._$P2(Lt);return ie==null?!1:(Ze.clipWithTransform(f,Lt,He,sr,kt,ur,pe,oe,ge,Ee,ee,de,be,Se),!0)},Ze.clipWithTransform=function(f,d,x,L,M,N,V,z){if(arguments.length<1+3*2){h._$li("err : @LDGL.clip()");return}if(!(arguments[1]instanceof zr)){h._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");return}var k=Ze._$B,q=d,tt=arguments;if(f.beginPath(),q){q._$PS(tt[2],tt[3],k),f.moveTo(k[0],k[1]);for(var et=4;et<tt.length;et+=2)q._$PS(tt[et],tt[et+1],k),f.lineTo(k[0],k[1])}else{f.moveTo(tt[2],tt[3]);for(var et=4;et<tt.length;et+=2)f.lineTo(tt[et],tt[et+1])}f.clip()},Ze.createCanvas=function(f,d){var x=document.createElement("canvas");return x.setAttribute("width",f),x.setAttribute("height",d),x||h._$li("err : "+x),x},Ze.dumpValues=function(){for(var f="",d=0;d<arguments.length;d++)f+="["+d+"]= "+arguments[d].toFixed(3)+" , ";console.log(f)};function Fi(){D||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}Fi.prototype._$F0=function(f){this._$TT=f._$_T(),this._$LT=f._$_T(),this._$FS=f._$_T(),this._$wL=f._$nP()},Fi.prototype.getMinValue=function(){return this._$TT},Fi.prototype.getMaxValue=function(){return this._$LT},Fi.prototype.getDefaultValue=function(){return this._$FS},Fi.prototype.getParamID=function(){return this._$wL};function Sr(f){D||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=f,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}Sr.prototype._$yo=function(){return this._$AT&&!this._$JS},Sr.prototype._$hS=function(f){this._$AT=f},Sr.prototype._$GT=function(){return this._$e0},Sr.prototype._$l2=function(f){this._$IP=f},Sr.prototype.getPartsIndex=function(){return this._$IP},Sr.prototype._$x2=function(){return this._$JS},Sr.prototype._$Ib=function(f){this._$JS=f},Sr.prototype.getTotalScale=function(){return this.totalScale},Sr.prototype.setTotalScale_notForClient=function(f){this.totalScale=f},Sr.prototype.getInterpolatedOpacity=function(){return this._$7s},Sr.prototype.setInterpolatedOpacity=function(f){this._$7s=f},Sr.prototype.getTotalOpacity=function(f){return this.totalOpacity},Sr.prototype.setTotalOpacity=function(f){this.totalOpacity=f};function yt(){}yt._$2s="2.1.00_1",yt._$Kr=201001e3,yt._$sP=!0,yt._$so=!0,yt._$cb=!1,yt._$3T=!0,yt._$Ts=!0,yt._$fb=!0,yt._$ts=!0,yt.L2D_DEFORMER_EXTEND=!0,yt._$Wb=!1,yt._$yr=!1,yt._$Zs=!1,yt.L2D_NO_ERROR=0,yt._$i7=1e3,yt._$9s=1001,yt._$es=1100,yt._$r7=2e3,yt._$07=2001,yt._$b7=2002,yt._$H7=4e3,yt.L2D_COLOR_BLEND_MODE_MULT=0,yt.L2D_COLOR_BLEND_MODE_ADD=1,yt.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,yt._$6b=!0,yt._$cT=0,yt.clippingMaskBufferSize=256,yt.glContext=new Array,yt.frameBuffers=new Array,yt.fTexture=new Array,yt.IGNORE_CLIP=!1,yt.IGNORE_EXPAND=!1,yt.EXPAND_W=2,yt.USE_ADJUST_TRANSLATION=!0,yt.USE_CANVAS_TRANSFORM=!0,yt.USE_CACHED_POLYGON_IMAGE=!1,yt.DEBUG_DATA={},yt.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},yt.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},yt.PROFILE_IOS_DEFAULT=yt.PROFILE_IOS_QUALITY,yt.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},yt.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},yt.initProfile=function(){Re.isIOS()?yt.setupProfile(yt.PROFILE_IOS_DEFAULT):Re.isAndroid()?yt.setupProfile(yt.PROFILE_ANDROID):yt.setupProfile(yt.PROFILE_DESKTOP)},yt.setupProfile=function(f,d){if(typeof f=="number")switch(f){case 9901:f=yt.PROFILE_IOS_SPEED;break;case 9902:f=yt.PROFILE_IOS_QUALITY;break;case 9903:f=yt.PROFILE_IOS_DEFAULT;break;case 9904:f=yt.PROFILE_ANDROID;break;case 9905:f=yt.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+f);break}for(var x in f)yt[x]=f[x]},yt.init=function(){yt._$6b&&(yt._$6b=!1,yt.initProfile())},yt.getVersionStr=function(){return yt._$2s},yt.getVersionNo=function(){return yt._$Kr},yt._$sT=function(f){yt._$cT=f},yt.getError=function(){var f=yt._$cT;return yt._$cT=0,f},yt.dispose=function(){yt.glContext=[],yt.frameBuffers=[],yt.fTexture=[]},yt.setGL=function(f,d){var x=d||0;yt.glContext[x]=f},yt.getGL=function(f){return yt.glContext[f]},yt.setClippingMaskBufferSize=function(f){yt.clippingMaskBufferSize=f},yt.getClippingMaskBufferSize=function(){return yt.clippingMaskBufferSize},yt.deleteBuffer=function(f){var d=yt.getGL(f);d.deleteFramebuffer(yt.frameBuffers[f].framebuffer),delete yt.frameBuffers[f],delete yt.glContext[f]};function xi(){}xi._$r2=function(f){return f<0?0:f>1?1:.5-.5*Math.cos(f*n.PI_F)};function Zr(f){D||(this._$ib=f)}Zr._$fr=-1,Zr.prototype.toString=function(){return this._$ib};function Ve(){D||(Zt.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=Ve._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=Ve._$42++)}Ve.prototype=new Zt,Ve._$42=0,Ve._$Os=30,Ve._$ms=0,Ve._$ns=1,Ve._$_s=2,Ve._$gT=new Array,Ve.prototype._$_S=function(f){this._$LP=f},Ve.prototype.getTextureNo=function(){return this._$LP},Ve.prototype._$ZL=function(){return this._$Qi},Ve.prototype._$H2=function(){return this._$JP},Ve.prototype.getNumPoints=function(){return this._$d0},Ve.prototype.getType=function(){return Zt._$wb},Ve.prototype._$B2=function(f,d,x){var L=d,M=L._$hr!=null?L._$hr:L._$Cr,N=at._$do;switch(N){default:case at._$Ms:throw new Error("_$L _$ro ");case at._$Qs:for(var V=this._$d0-1;V>=0;--V){var z=V*at._$No;M[z+4]=x}break}},Ve.prototype._$zP=function(){this._$GS=new zt,this._$GS._$zP()},Ve.prototype._$F0=function(f){Zt.prototype._$F0.call(this,f),this._$LP=f._$6L(),this._$d0=f._$6L(),this._$Yo=f._$6L();var d=f._$nP();this._$BP=new Int16Array(this._$Yo*3);for(var x=this._$Yo*3-1;x>=0;--x)this._$BP[x]=d[x];if(this._$Eo=f._$nP(),this._$Qi=f._$nP(),f.getFormatVersion()>=bt._$s7){if(this._$JP=f._$6L(),this._$JP!=0){if(this._$JP&1){var L=f._$6L();this._$5P==null&&(this._$5P=new Object),this._$5P._$Hb=parseInt(L)}this._$JP&Ve._$Os?this._$6s=(this._$JP&Ve._$Os)>>1:this._$6s=Ve._$ms,this._$JP&32&&(this.culling=!1)}}else this._$JP=0},Ve.prototype.init=function(f){var d=new Qi(this),x=this._$d0*at._$No,L=this._$32();d._$Cr!=null&&(d._$Cr=null),d._$Cr=new Float32Array(x),d._$hr!=null&&(d._$hr=null),d._$hr=L?new Float32Array(x):null;var M=at._$do;switch(M){default:case at._$Ms:if(at._$Ls)for(var N=this._$d0-1;N>=0;--N){var V=N<<1;this._$Qi[V+1]=1-this._$Qi[V+1]}break;case at._$Qs:for(var N=this._$d0-1;N>=0;--N){var V=N<<1,z=N*at._$No,k=this._$Qi[V],q=this._$Qi[V+1];d._$Cr[z]=k,d._$Cr[z+1]=q,d._$Cr[z+4]=0,L&&(d._$hr[z]=k,d._$hr[z+1]=q,d._$hr[z+4]=0)}break}return d},Ve.prototype._$Nr=function(f,d){var x=d;if(this!=x._$GT()&&console.log("### assert!! ### "),!!this._$GS._$Ur(f)&&(Zt.prototype._$Nr.call(this,f,x),!x._$IS[0])){var L=Ve._$gT;L[0]=!1,K._$Vr(f,this._$GS,L,this._$d0,this._$Eo,x._$Cr,at._$i2,at._$No)}},Ve.prototype._$2b=function(f,d){try{this!=d._$GT()&&console.log("### assert!! ### ");var x=!1;d._$IS[0]&&(x=!0);var L=d;if(!x&&(Zt.prototype._$2b.call(this,f),this._$32())){var M=this.getTargetBaseDataID();if(L._$8r==Zt._$ur&&(L._$8r=f.getBaseDataIndex(M)),L._$8r<0)yt._$so&&h._$li("_$L _$0P _$G :: %s",M);else{var N=f.getBaseData(L._$8r),V=f._$q2(L._$8r);N!=null&&!V._$x2()?(N._$nb(f,V,L._$Cr,L._$hr,this._$d0,at._$i2,at._$No),L._$AT=!0):L._$AT=!1,L.baseOpacity=V.getTotalOpacity()}}}catch(z){throw z}},Ve.prototype.draw=function(f,d,x){if(this!=x._$GT()&&console.log("### assert!! ### "),!x._$IS[0]){var L=x,M=this._$LP;M<0&&(M=1);var N=this.getOpacity(d,L)*x._$VS*x.baseOpacity,V=L._$hr!=null?L._$hr:L._$Cr;f.setClipBufPre_clipContextForDraw(x.clipBufPre_clipContext),f._$WP(this.culling),f._$Uo(M,3*this._$Yo,this._$BP,V,this._$Qi,N,this._$6s,L)}},Ve.prototype.dump=function(){console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`,this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var f=0;f<this._$BP.length;f++)console.log("%5d ,",this._$BP[f]);console.log(`
  _$5i _$30`);for(var f=0;f<this._$Eo.length;f++){console.log(`
    _$30[%d] = `,f);for(var d=this._$Eo[f],x=0;x<d.length;x++)console.log("%6.2f, ",d[x])}console.log(`
`)},Ve.prototype._$72=function(f){return this._$5P==null?null:this._$5P[f]},Ve.prototype.getIndexArray=function(){return this._$BP};function Qi(f){we.prototype.constructor.call(this,f),this._$8r=Zt._$ur,this._$Cr=null,this._$hr=null}Qi.prototype=new we,Qi.prototype.getTransformedPoints=function(){return this._$hr!=null?this._$hr:this._$Cr};function qt(){D||(this.x=null,this.y=null)}qt.prototype._$HT=function(f){this.x=f.x,this.y=f.y},qt.prototype._$HT=function(f,d){this.x=f,this.y=d};function pr(f){D||(t.prototype.constructor.call(this),this.drawParamWebGL=new nt(f),this.drawParamWebGL.setGL(yt.getGL(f)))}pr.prototype=new t,pr.loadModel=function(f){var d=new pr;return t._$62(d,f),d},pr.loadModel=function(f,d){var x=d||0,L=new pr(x);return t._$62(L,f),L},pr._$to=function(){var f=new pr;return f},pr._$er=function(f){var d=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(d.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+d._$PL());for(var x=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],L=pr.loadModel(d._$3b()),M=0;M<x.length;M++){var N=new _$5(x[M]);if(N.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+N._$PL());L.setTexture(M,_$nL._$_o(f,N._$3b()))}return L},pr.prototype.setGL=function(f){yt.setGL(f)},pr.prototype.setTransform=function(f){this.drawParamWebGL.setTransform(f)},pr.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},pr.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},pr.prototype._$K2=function(){this.drawParamWebGL._$K2()},pr.prototype.setTexture=function(f,d){this.drawParamWebGL==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(f,d)},pr.prototype.setTexture=function(f,d){this.drawParamWebGL==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(f,d)},pr.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},pr.prototype._$Ds=function(f){this.drawParamWebGL._$Ds(f)},pr.prototype.getDrawParam=function(){return this.drawParamWebGL},pr.prototype.setMatrix=function(f){this.drawParamWebGL.setMatrix(f)},pr.prototype.setPremultipliedAlpha=function(f){this.drawParamWebGL.setPremultipliedAlpha(f)},pr.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},pr.prototype.setAnisotropy=function(f){this.drawParamWebGL.setAnisotropy(f)},pr.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};function Mi(){D||(this.motions=null,this._$eb=!1,this.motions=new Array)}Mi.prototype._$tb=function(){return this.motions},Mi.prototype.startMotion=function(f,d){for(var x=null,L=this.motions.length,M=0;M<L;++M)x=this.motions[M],x!=null&&(x._$qS(x._$w0.getFadeOut()),this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`,L,x._$sr));if(f==null)return-1;x=new Sn,x._$w0=f,this.motions.push(x);var N=x._$sr;return this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`,L,N),N},Mi.prototype.updateParam=function(f){try{for(var d=!1,x=0;x<this.motions.length;x++){var L=this.motions[x];if(L==null){this.motions.splice(x,1),x--;continue}var M=L._$w0;if(M==null){this.motions=this.motions.splice(x,1),x--;continue}M.updateParam(f,L),d=!0,L.isFinished()&&(this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`,this.motions.length-1,L._$sr),this.motions.splice(x,1),x--)}return d}catch(N){return h._$li(N),!0}},Mi.prototype.isFinished=function(f){if(arguments.length>=1){for(var d=0;d<this.motions.length;d++){var x=this.motions[d];if(x!=null&&x._$sr==f&&!x.isFinished())return!1}return!0}else{for(var d=0;d<this.motions.length;d++){var x=this.motions[d];if(x==null){this.motions.splice(d,1),d--;continue}var L=x._$w0;if(L==null){this.motions.splice(d,1),d--;continue}if(!x.isFinished())return!1}return!0}},Mi.prototype.stopAllMotions=function(){for(var f=0;f<this.motions.length;f++){var d=this.motions[f];if(d==null){this.motions.splice(f,1),f--;continue}var x=d._$w0;if(x==null){this.motions.splice(f,1),f--;continue}this.motions.splice(f,1),f--}},Mi.prototype._$Zr=function(f){this._$eb=f},Mi.prototype._$e=function(){console.log(`-- _$R --
`);for(var f=0;f<this.motions.length;f++){var d=this.motions[f],x=d._$w0;console.log(`MotionQueueEnt[%d] :: %s
`,this.motions.length,x.toString())}};function Sn(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=Sn._$Gs++}Sn._$Gs=0,Sn.prototype.isFinished=function(){return this._$9L},Sn.prototype._$qS=function(f){var d=Ft.getUserTimeMSec(),x=d+f;(this._$Do<0||x<this._$Do)&&(this._$Do=x)},Sn.prototype._$Bs=function(){return this._$sr};function zr(){this.m=new Array(1,0,0,0,1,0,0,0,1)}zr.prototype.setContext=function(f){var d=this.m;f.transform(d[0],d[1],d[3],d[4],d[6],d[7])},zr.prototype.toString=function(){for(var f="LDTransform { ",d=0;d<9;d++)f+=this.m[d].toFixed(2)+" ,";return f+=" }",f},zr.prototype.identity=function(){var f=this.m;f[0]=f[4]=f[8]=1,f[1]=f[2]=f[3]=f[5]=f[6]=f[7]=0},zr.prototype._$PS=function(f,d,x){x==null&&(x=new Array(0,0));var L=this.m;return x[0]=L[0]*f+L[3]*d+L[6],x[1]=L[1]*f+L[4]*d+L[7],x},zr.prototype._$P2=function(f){f||(f=new zr);var d=this.m,x=d[0],L=d[1],M=d[2],N=d[3],V=d[4],z=d[5],k=d[6],q=d[7],tt=d[8],et=x*V*tt+L*z*k+M*N*q-x*z*q-M*V*k-L*N*tt;if(et==0)return null;var ht=1/et;return f.m[0]=ht*(V*tt-q*z),f.m[1]=ht*(q*M-L*tt),f.m[2]=ht*(L*z-V*M),f.m[3]=ht*(k*z-N*tt),f.m[4]=ht*(x*tt-k*M),f.m[5]=ht*(N*M-x*z),f.m[6]=ht*(N*q-k*V),f.m[7]=ht*(k*L-x*q),f.m[8]=ht*(x*V-N*L),f},zr.prototype.transform=function(f,d,x){x==null&&(x=new Array(0,0));var L=this.m;return x[0]=L[0]*f+L[3]*d+L[6],x[1]=L[1]*f+L[4]*d+L[7],x},zr.prototype.translate=function(f,d){var x=this.m;x[6]=x[0]*f+x[3]*d+x[6],x[7]=x[1]*f+x[4]*d+x[7],x[8]=x[2]*f+x[5]*d+x[8]},zr.prototype.scale=function(f,d){var x=this.m;x[0]*=f,x[1]*=f,x[2]*=f,x[3]*=d,x[4]*=d,x[5]*=d},zr.prototype.shear=function(f,d){var x=this.m,L=x[0]+x[3]*d,M=x[1]+x[4]*d,N=x[2]+x[5]*d;x[3]=x[0]*f+x[3],x[4]=x[1]*f+x[4],x[5]=x[2]*f+x[5],x[0]=L,x[1]=M,x[2]=N},zr.prototype.rotate=function(f){var d=this.m,x=Math.cos(f),L=Math.sin(f),M=d[0]*x+d[3]*L,N=d[1]*x+d[4]*L,V=d[2]*x+d[5]*L;d[3]=-d[0]*L+d[3]*x,d[4]=-d[1]*L+d[4]*x,d[5]=-d[2]*L+d[5]*x,d[0]=M,d[1]=N,d[2]=V},zr.prototype.concatenate=function(f){var d=this.m,x=f.m,L=d[0]*x[0]+d[3]*x[1]+d[6]*x[2],M=d[1]*x[0]+d[4]*x[1]+d[7]*x[2],N=d[2]*x[0]+d[5]*x[1]+d[8]*x[2],V=d[0]*x[3]+d[3]*x[4]+d[6]*x[5],z=d[1]*x[3]+d[4]*x[4]+d[7]*x[5],k=d[2]*x[3]+d[5]*x[4]+d[8]*x[5],q=d[0]*x[6]+d[3]*x[7]+d[6]*x[8],tt=d[1]*x[6]+d[4]*x[7]+d[7]*x[8],et=d[2]*x[6]+d[5]*x[7]+d[8]*x[8];m[0]=L,m[1]=M,m[2]=N,m[3]=V,m[4]=z,m[5]=k,m[6]=q,m[7]=tt,m[8]=et};function lr(f){D||Br.prototype.constructor.call(this,f)}lr.prototype=new Br,lr._$eT=null,lr._$tP=new Object,lr._$2o=function(){return lr._$eT==null&&(lr._$eT=lr.getID("DST_BASE")),lr._$eT},lr._$27=function(){lr._$tP.clear(),lr._$eT=null},lr.getID=function(f){var d=lr._$tP[f];return d==null&&(d=new lr(f),lr._$tP[f]=d),d},lr.prototype._$3s=function(){return new lr};function nt(f){D||(dt.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=f,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}nt.prototype=new dt,nt._$9r=function(f){var d=new Float32Array(f);return d},nt._$vb=function(f){var d=new Int16Array(f);return d},nt._$cr=function(f,d){return f==null||f._$yL()<d.length?(f=nt._$9r(d.length*2),f.put(d),f._$oT(0)):(f.clear(),f.put(d),f._$oT(0)),f},nt._$mb=function(f,d){return f==null||f._$yL()<d.length?(f=nt._$vb(d.length*2),f.put(d),f._$oT(0)):(f.clear(),f.put(d),f._$oT(0)),f},nt._$Hs=function(){return this._$Gr},nt._$as=function(f){this._$Gr=f},nt.prototype.getGL=function(){return this.gl},nt.prototype.setGL=function(f){this.gl=f},nt.prototype.setTransform=function(f){this.transform=f},nt.prototype._$ZT=function(){var f=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=f.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),f.disable(f.SCISSOR_TEST),f.disable(f.STENCIL_TEST),f.disable(f.DEPTH_TEST),f.frontFace(f.CW),f.enable(f.BLEND),f.colorMask(1,1,1,1),f.bindBuffer(f.ARRAY_BUFFER,null),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null)},nt.prototype._$Uo=function(f,d,x,L,M,N,V,z){if(!(N<.01&&this.clipBufPre_clipContextMask==null)){N>.9&&yt.EXPAND_W;var k=this.gl;if(this.gl==null)throw new Error("gl is null");var q=!1,tt=1,et=1,ht=1,gt=this._$C0*tt*N,xt=this._$tT*et*N,ut=this._$WL*ht*N,Ct=this._$lT*N;if(this.clipBufPre_clipContextMask!=null){k.frontFace(k.CCW),k.useProgram(this.shaderProgram),this._$vS=mt(k,this._$vS,L),this._$no=Wt(k,this._$no,x),k.enableVertexAttribArray(this.a_position_Loc),k.vertexAttribPointer(this.a_position_Loc,2,k.FLOAT,!1,0,0),this._$NT=mt(k,this._$NT,M),k.activeTexture(k.TEXTURE1),k.bindTexture(k.TEXTURE_2D,this.textures[f]),k.uniform1i(this.s_texture0_Loc,1),k.enableVertexAttribArray(this.a_texCoord_Loc),k.vertexAttribPointer(this.a_texCoord_Loc,2,k.FLOAT,!1,0,0),k.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var wt=this.getClipBufPre_clipContextMask().layoutChannelNo,St=this.getChannelFlagAsColor(wt);k.uniform4f(this.u_channelFlag,St.r,St.g,St.b,St.a);var It=this.getClipBufPre_clipContextMask().layoutBounds;k.uniform4f(this.u_baseColor_Loc,It.x*2-1,It.y*2-1,It._$EL()*2-1,It._$5T()*2-1),k.uniform1i(this.u_maskFlag_Loc,!0)}else if(q=this.getClipBufPre_clipContextDraw()!=null,q){k.useProgram(this.shaderProgramOff),this._$vS=mt(k,this._$vS,L),this._$no=Wt(k,this._$no,x),k.enableVertexAttribArray(this.a_position_Loc_Off),k.vertexAttribPointer(this.a_position_Loc_Off,2,k.FLOAT,!1,0,0),this._$NT=mt(k,this._$NT,M),k.activeTexture(k.TEXTURE1),k.bindTexture(k.TEXTURE_2D,this.textures[f]),k.uniform1i(this.s_texture0_Loc_Off,1),k.enableVertexAttribArray(this.a_texCoord_Loc_Off),k.vertexAttribPointer(this.a_texCoord_Loc_Off,2,k.FLOAT,!1,0,0),k.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),k.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),k.activeTexture(k.TEXTURE2),k.bindTexture(k.TEXTURE_2D,yt.fTexture[this.glno]),k.uniform1i(this.s_texture1_Loc_Off,2);var wt=this.getClipBufPre_clipContextDraw().layoutChannelNo,St=this.getChannelFlagAsColor(wt);k.uniform4f(this.u_channelFlag_Loc_Off,St.r,St.g,St.b,St.a),k.uniform4f(this.u_baseColor_Loc_Off,gt,xt,ut,Ct)}else k.useProgram(this.shaderProgram),this._$vS=mt(k,this._$vS,L),this._$no=Wt(k,this._$no,x),k.enableVertexAttribArray(this.a_position_Loc),k.vertexAttribPointer(this.a_position_Loc,2,k.FLOAT,!1,0,0),this._$NT=mt(k,this._$NT,M),k.activeTexture(k.TEXTURE1),k.bindTexture(k.TEXTURE_2D,this.textures[f]),k.uniform1i(this.s_texture0_Loc,1),k.enableVertexAttribArray(this.a_texCoord_Loc),k.vertexAttribPointer(this.a_texCoord_Loc,2,k.FLOAT,!1,0,0),k.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),k.uniform4f(this.u_baseColor_Loc,gt,xt,ut,Ct),k.uniform1i(this.u_maskFlag_Loc,!1);this.culling?this.gl.enable(k.CULL_FACE):this.gl.disable(k.CULL_FACE),this.gl.enable(k.BLEND);var re,Bt,G,Mt;if(this.clipBufPre_clipContextMask!=null)re=k.ONE,Bt=k.ONE_MINUS_SRC_ALPHA,G=k.ONE,Mt=k.ONE_MINUS_SRC_ALPHA;else switch(V){case Ve._$ms:re=k.ONE,Bt=k.ONE_MINUS_SRC_ALPHA,G=k.ONE,Mt=k.ONE_MINUS_SRC_ALPHA;break;case Ve._$ns:re=k.ONE,Bt=k.ONE,G=k.ZERO,Mt=k.ONE;break;case Ve._$_s:re=k.DST_COLOR,Bt=k.ONE_MINUS_SRC_ALPHA,G=k.ZERO,Mt=k.ONE;break}k.blendEquationSeparate(k.FUNC_ADD,k.FUNC_ADD),k.blendFuncSeparate(re,Bt,G,Mt),this.anisotropyExt&&k.texParameteri(k.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var Ut=x.length;k.drawElements(k.TRIANGLES,Ut,k.UNSIGNED_SHORT,0),k.bindTexture(k.TEXTURE_2D,null)}};function mt(f,d,x){return d==null&&(d=f.createBuffer()),f.bindBuffer(f.ARRAY_BUFFER,d),f.bufferData(f.ARRAY_BUFFER,x,f.DYNAMIC_DRAW),d}function Wt(f,d,x){return d==null&&(d=f.createBuffer()),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,d),f.bufferData(f.ELEMENT_ARRAY_BUFFER,x,f.DYNAMIC_DRAW),d}nt.prototype._$Rs=function(){throw new Error("_$Rs")},nt.prototype._$Ds=function(f){throw new Error("_$Ds")},nt.prototype._$K2=function(){for(var f=0;f<this.textures.length;f++){var d=this.textures[f];d!=0&&(this.gl._$K2(1,this.textures,f),this.textures[f]=null)}},nt.prototype.setTexture=function(f,d){this.textures[f]=d},nt.prototype.initShader=function(){var f=this.gl;this.loadShaders2(),this.a_position_Loc=f.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=f.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=f.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=f.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=f.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=f.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=f.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=f.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=f.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=f.getUniformLocation(this.shaderProgramOff,"u_baseColor")},nt.prototype.disposeShader=function(){var f=this.gl;this.shaderProgram&&(f.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(f.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},nt.prototype.compileShader=function(f,d){var x=this.gl,N,L=d,M=x.createShader(f);if(M==null)return h._$Ji("_$L0 to create shader"),null;x.shaderSource(M,L),x.compileShader(M);var N=x.getShaderParameter(M,x.COMPILE_STATUS);if(!N){var V=x.getShaderInfoLog(M);return h._$Ji("_$L0 to compile shader : "+V),x.deleteShader(M),null}return M},nt.prototype.loadShaders2=function(){var f=this.gl;if(this.shaderProgram=f.createProgram(),!this.shaderProgram||(this.shaderProgramOff=f.createProgram(),!this.shaderProgramOff))return!1;var d="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}",x="precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}",L="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}",M="precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}";if(this.vertShader=this.compileShader(f.VERTEX_SHADER,d),!this.vertShader)return h._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(f.VERTEX_SHADER,L),!this.vertShaderOff)return h._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(f.FRAGMENT_SHADER,x),!this.fragShader)return h._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(f.FRAGMENT_SHADER,M),!this.fragShaderOff)return h._$Ji("OffFragment shader compile _$li!"),!1;f.attachShader(this.shaderProgram,this.vertShader),f.attachShader(this.shaderProgram,this.fragShader),f.attachShader(this.shaderProgramOff,this.vertShaderOff),f.attachShader(this.shaderProgramOff,this.fragShaderOff),f.linkProgram(this.shaderProgram),f.linkProgram(this.shaderProgramOff);var N=f.getProgramParameter(this.shaderProgram,f.LINK_STATUS);if(!N){var V=f.getProgramInfoLog(this.shaderProgram);return h._$Ji("_$L0 to link program: "+V),this.vertShader&&(f.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(f.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(f.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(f.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(f.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(f.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},nt.prototype.createFramebuffer=function(){var f=this.gl,d=yt.clippingMaskBufferSize,x=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,x);var L=f.createRenderbuffer();f.bindRenderbuffer(f.RENDERBUFFER,L),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,d,d),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,L);var M=f.createTexture();return f.bindTexture(f.TEXTURE_2D,M),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,d,d,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,M,0),f.bindTexture(f.TEXTURE_2D,null),f.bindRenderbuffer(f.RENDERBUFFER,null),f.bindFramebuffer(f.FRAMEBUFFER,null),yt.fTexture[this.glno]=M,{framebuffer:x,renderbuffer:L,texture:yt.fTexture[this.glno]}};function ft(f){D||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=f,this._$F=0)}ft.prototype._$fP=function(){var f=this._$ST(),d,x,L;if(f&128)if((d=this._$ST())&128)if((x=this._$ST())&128){if((L=this._$ST())&128)throw new Zr("_$L _$0P  _");return(f&127)<<21|(d&127)<<14|(x&127)<<7|L&255}else return(f&127)<<14|(d&127)<<7|x&255;else return(f&127)<<7|d&127;else return f&255},ft.prototype.getFormatVersion=function(){return this._$S2},ft.prototype._$gr=function(f){this._$S2=f},ft.prototype._$3L=function(){return this._$fP()},ft.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},ft.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},ft.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},ft.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},ft.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},ft.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new Zr("_$L _$q read long")},ft.prototype._$po=function(){return this._$zT(),this._$T.getInt8(this._$F++)!=0};var tr=!0;ft.prototype._$bT=function(){this._$zT();var f=this._$3L(),d=null;if(tr)try{var x=new ArrayBuffer(f*2);d=new Uint16Array(x);for(var L=0;L<f;++L)d[L]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,d)}catch(N){tr=!1}try{var M=new Array;if(d==null)for(var L=0;L<f;++L)M[L]=this._$T.getUint8(this._$F++);else for(var L=0;L<f;++L)M[L]=d[L];return String.fromCharCode.apply(null,M)}catch(N){console.log("read utf8 / _$rT _$L0 !! : "+N)}},ft.prototype._$cS=function(){this._$zT();for(var f=this._$3L(),d=new Int32Array(f),x=0;x<f;x++)d[x]=this._$T.getInt32(this._$F),this._$F+=4;return d},ft.prototype._$Tb=function(){this._$zT();for(var f=this._$3L(),d=new Float32Array(f),x=0;x<f;x++)d[x]=this._$T.getFloat32(this._$F),this._$F+=4;return d},ft.prototype._$5b=function(){this._$zT();for(var f=this._$3L(),d=new Float64Array(f),x=0;x<f;x++)d[x]=this._$T.getFloat64(this._$F),this._$F+=8;return d},ft.prototype._$nP=function(){return this._$Jb(-1)},ft.prototype._$Jb=function(f){if(this._$zT(),f<0&&(f=this._$3L()),f==bt._$7P){var d=this._$6L();if(0<=d&&d<this._$Ko.length)return this._$Ko[d];throw new Zr("_$sL _$4i @_$m0")}else{var x=this._$4b(f);return this._$Ko.push(x),x}},ft.prototype._$4b=function(f){if(f==0)return null;if(f==50){var d=this._$bT(),x=he.getID(d);return x}else if(f==51){var d=this._$bT(),x=lr.getID(d);return x}else if(f==134){var d=this._$bT(),x=_.getID(d);return x}else if(f==60){var d=this._$bT(),x=w.getID(d);return x}if(f>=48){var L=bt._$9o(f);return L!=null?(L._$F0(this),L):null}switch(f){case 1:return this._$bT();case 10:return this._$6L(),new s;case 11:return new st(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new st(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new At(this._$mP(),this._$mP());case 14:return new At(this._$_T(),this._$_T());case 15:for(var M=this._$3L(),x=new Array(M),N=0;N<M;N++)x[N]=this._$nP();return x;case 17:var x=new Kt(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return x;case 21:return new c(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new qt(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new Zr("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+f);default:throw new Zr("_$6 _$q : _$nP() NO _$i : "+f)}},ft.prototype._$8L=function(){return this._$hL==0?this._$v0=this._$ST():this._$hL==8&&(this._$v0=this._$ST(),this._$hL=0),(this._$v0>>7-this._$hL++&1)==1},ft.prototype._$zT=function(){this._$hL!=0&&(this._$hL=0)};function n(){}n._$2S=Math.PI/180,n._$bS=Math.PI/180,n._$wS=180/Math.PI,n._$NS=180/Math.PI,n.PI_F=Math.PI,n._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],n._$92=function(f,d){var x=Math.atan2(f[1],f[0]),L=Math.atan2(d[1],d[0]);return n._$tS(x,L)},n._$tS=function(f,d){for(var x=f-d;x<-Math.PI;)x+=2*Math.PI;for(;x>Math.PI;)x-=2*Math.PI;return x},n._$9=function(f){return Math.sin(f)},n.fcos=function(f){return Math.cos(f)};function we(f){D||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=f)}we.prototype._$u2=function(){return this._$IS[0]},we.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},we.prototype._$GT=function(){return this._$e0};function Re(){}Re._$W2=0,Re.SYSTEM_INFO=null,Re.USER_AGENT=navigator.userAgent,Re.isIPhone=function(){return Re.SYSTEM_INFO||Re.setup(),Re.SYSTEM_INFO._isIPhone},Re.isIOS=function(){return Re.SYSTEM_INFO||Re.setup(),Re.SYSTEM_INFO._isIPhone||Re.SYSTEM_INFO._isIPad},Re.isAndroid=function(){return Re.SYSTEM_INFO||Re.setup(),Re.SYSTEM_INFO._isAndroid},Re.getOSVersion=function(){return Re.SYSTEM_INFO||Re.setup(),Re.SYSTEM_INFO.version},Re.getOS=function(){return Re.SYSTEM_INFO||Re.setup(),Re.SYSTEM_INFO._isIPhone||Re.SYSTEM_INFO._isIPad?"iOS":Re.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Re.setup=function(){var f=Re.USER_AGENT;function d(M,N){for(var V=M.substring(N).split(/[ _,;\.]/),z=0,k=0;k<=2&&!isNaN(V[k]);k++){var q=parseInt(V[k]);if(q<0||q>999){h._$li("err : "+q+" @UtHtml5.setup()"),z=0;break}z+=q*Math.pow(1e3,2-k)}return z}var x,L=Re.SYSTEM_INFO={userAgent:f};if((x=f.indexOf("iPhone OS "))>=0)L.os="iPhone",L._isIPhone=!0,L.version=d(f,x+10);else if((x=f.indexOf("iPad"))>=0){if(x=f.indexOf("CPU OS"),x<0){h._$li(" err : "+f+" @UtHtml5.setup()");return}L.os="iPad",L._isIPad=!0,L.version=d(f,x+7)}else(x=f.indexOf("Android"))>=0?(L.os="Android",L._isAndroid=!0,L.version=d(f,x+8)):(L.os="-",L.version=-1)},window.UtSystem=Ft,window.UtDebug=h,window.LDTransform=zr,window.LDGL=Ze,window.Live2D=yt,window.Live2DModelWebGL=pr,window.Live2DModelJS=_e,window.Live2DMotion=fe,window.MotionQueueManager=Mi,window.PhysicsHair=E,window.AMotion=o,window.PartsDataID=_,window.DrawDataID=he,window.BaseDataID=lr,window.ParamID=w,yt.init();var D=!1})(),Live2D;var jr;(function(t){var e=function(){function E(){}return E.getVersion=function(){return b.ccall("csmGetVersion","number",[],[])},E.getLatestMocVersion=function(){return b.ccall("csmGetLatestMocVersion","number",[],[])},E.getMocVersion=function(T,P){return b.ccall("csmGetMocVersion","number",["number","number"],[T,P])},E.getSizeofModel=function(T){return b.ccall("csmGetSizeofModel","number",["number"],[T])},E.reviveMocInPlace=function(T,P){return b.ccall("csmReviveMocInPlace","number",["number","number"],[T,P])},E.initializeModelInPlace=function(T,P,O){return b.ccall("csmInitializeModelInPlace","number",["number","number","number"],[T,P,O])},E.getParameterCount=function(T){return b.ccall("csmGetParameterCount","number",["number"],[T])},E.getParameterIds=function(T){return b.ccall("csmGetParameterIds","number",["number"],[T])},E.getParameterMinimumValues=function(T){return b.ccall("csmGetParameterMinimumValues","number",["number"],[T])},E.getParameterTypes=function(T){return b.ccall("csmGetParameterTypes","number",["number"],[T])},E.getParameterMaximumValues=function(T){return b.ccall("csmGetParameterMaximumValues","number",["number"],[T])},E.getParameterDefaultValues=function(T){return b.ccall("csmGetParameterDefaultValues","number",["number"],[T])},E.getParameterValues=function(T){return b.ccall("csmGetParameterValues","number",["number"],[T])},E.getParameterKeyCounts=function(T){return b.ccall("csmGetParameterKeyCounts","number",["number"],[T])},E.getParameterKeyValues=function(T){return b.ccall("csmGetParameterKeyValues","number",["number"],[T])},E.getPartCount=function(T){return b.ccall("csmGetPartCount","number",["number"],[T])},E.getPartIds=function(T){return b.ccall("csmGetPartIds","number",["number"],[T])},E.getPartOpacities=function(T){return b.ccall("csmGetPartOpacities","number",["number"],[T])},E.getPartParentPartIndices=function(T){return b.ccall("csmGetPartParentPartIndices","number",["number"],[T])},E.getDrawableCount=function(T){return b.ccall("csmGetDrawableCount","number",["number"],[T])},E.getDrawableIds=function(T){return b.ccall("csmGetDrawableIds","number",["number"],[T])},E.getDrawableConstantFlags=function(T){return b.ccall("csmGetDrawableConstantFlags","number",["number"],[T])},E.getDrawableDynamicFlags=function(T){return b.ccall("csmGetDrawableDynamicFlags","number",["number"],[T])},E.getDrawableTextureIndices=function(T){return b.ccall("csmGetDrawableTextureIndices","number",["number"],[T])},E.getDrawableDrawOrders=function(T){return b.ccall("csmGetDrawableDrawOrders","number",["number"],[T])},E.getDrawableRenderOrders=function(T){return b.ccall("csmGetDrawableRenderOrders","number",["number"],[T])},E.getDrawableOpacities=function(T){return b.ccall("csmGetDrawableOpacities","number",["number"],[T])},E.getDrawableMaskCounts=function(T){return b.ccall("csmGetDrawableMaskCounts","number",["number"],[T])},E.getDrawableMasks=function(T){return b.ccall("csmGetDrawableMasks","number",["number"],[T])},E.getDrawableVertexCounts=function(T){return b.ccall("csmGetDrawableVertexCounts","number",["number"],[T])},E.getDrawableVertexPositions=function(T){return b.ccall("csmGetDrawableVertexPositions","number",["number"],[T])},E.getDrawableVertexUvs=function(T){return b.ccall("csmGetDrawableVertexUvs","number",["number"],[T])},E.getDrawableIndexCounts=function(T){return b.ccall("csmGetDrawableIndexCounts","number",["number"],[T])},E.getDrawableIndices=function(T){return b.ccall("csmGetDrawableIndices","number",["number"],[T])},E.getDrawableMultiplyColors=function(T){return b.ccall("csmGetDrawableMultiplyColors","number",["number"],[T])},E.getDrawableScreenColors=function(T){return b.ccall("csmGetDrawableScreenColors","number",["number"],[T])},E.getDrawableParentPartIndices=function(T){return b.ccall("csmGetDrawableParentPartIndices","number",["number"],[T])},E.mallocMoc=function(T){return b.ccall("csmMallocMoc","number",["number"],[T])},E.mallocModelAndInitialize=function(T){return b.ccall("csmMallocModelAndInitialize","number",["number"],[T])},E.malloc=function(T){return b.ccall("csmMalloc","number",["number"],[T])},E.setLogFunction=function(T){b.ccall("csmSetLogFunction",null,["number"],[T])},E.updateModel=function(T){b.ccall("csmUpdateModel",null,["number"],[T])},E.readCanvasInfo=function(T,P,O,H){b.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[T,P,O,H])},E.resetDrawableDynamicFlags=function(T){b.ccall("csmResetDrawableDynamicFlags",null,["number"],[T])},E.free=function(T){b.ccall("csmFree",null,["number"],[T])},E}();t.AlignofMoc=64,t.AlignofModel=16,t.MocVersion_Unknown=0,t.MocVersion_30=1,t.MocVersion_33=2,t.MocVersion_40=3,t.MocVersion_42=4,t.ParameterType_Normal=0,t.ParameterType_BlendShape=1;var r=function(){function E(){}return E.csmGetVersion=function(){return e.getVersion()},E.csmGetLatestMocVersion=function(){return e.getLatestMocVersion()},E.csmGetMocVersion=function(T,P){return e.getMocVersion(T._ptr,P.byteLength)},E}();t.Version=r;var i=function(){function E(){}return E.csmSetLogFunction=function(T){E.logFunction=T;var P=b.addFunction(E.wrapLogFunction,"vi");e.setLogFunction(P)},E.csmGetLogFunction=function(){return E.logFunction},E.wrapLogFunction=function(T){var P=b.UTF8ToString(T);E.logFunction(P)},E}();t.Logging=i;var s=function(){function E(T){var P=e.mallocMoc(T.byteLength);if(P){var O=new Uint8Array(b.HEAPU8.buffer,P,T.byteLength);O.set(new Uint8Array(T)),this._ptr=e.reviveMocInPlace(P,T.byteLength),this._ptr||e.free(P)}}return E.fromArrayBuffer=function(T){if(!T)return null;var P=new E(T);return P._ptr?P:null},E.prototype._release=function(){e.free(this._ptr),this._ptr=0},E}();t.Moc=s;var o=function(){function E(T){this._ptr=e.mallocModelAndInitialize(T._ptr),this._ptr&&(this.parameters=new u(this._ptr),this.parts=new c(this._ptr),this.drawables=new _(this._ptr),this.canvasinfo=new h(this._ptr))}return E.fromMoc=function(T){var P=new E(T);return P._ptr?P:null},E.prototype.update=function(){e.updateModel(this._ptr)},E.prototype.release=function(){e.free(this._ptr),this._ptr=0},E}();t.Model=o;var h=function(){function E(T){if(T){var P=new Float32Array(2),O=P.length*P.BYTES_PER_ELEMENT,H=e.malloc(O),Y=new Uint8Array(b.HEAPU8.buffer,H,O);Y.set(new Uint8Array(P.buffer));var J=new Float32Array(2),it=J.length*J.BYTES_PER_ELEMENT,st=e.malloc(it),K=new Uint8Array(b.HEAPU8.buffer,st,it);K.set(new Uint8Array(J.buffer));var At=new Float32Array(1),Tt=At.length*At.BYTES_PER_ELEMENT,dt=e.malloc(Tt),Et=new Uint8Array(b.HEAPU8.buffer,dt,Tt);Et.set(new Uint8Array(At.buffer)),e.readCanvasInfo(T,Y.byteOffset,K.byteOffset,Et.byteOffset),P=new Float32Array(Y.buffer,Y.byteOffset,Y.length),J=new Float32Array(K.buffer,K.byteOffset,K.length),At=new Float32Array(Et.buffer,Et.byteOffset,Et.length),this.CanvasWidth=P[0],this.CanvasHeight=P[1],this.CanvasOriginX=J[0],this.CanvasOriginY=J[1],this.PixelsPerUnit=At[0],e.free(Y.byteOffset),e.free(K.byteOffset),e.free(Et.byteOffset)}}return E}();t.CanvasInfo=h;var u=function(){function E(T){var P=0,O=null;this.count=e.getParameterCount(T),P=e.getParameterCount(T),this.ids=new Array(P);for(var H=new Uint32Array(b.HEAPU32.buffer,e.getParameterIds(T),P),Y=0;Y<H.length;Y++)this.ids[Y]=b.UTF8ToString(H[Y]);P=e.getParameterCount(T),this.minimumValues=new Float32Array(b.HEAPF32.buffer,e.getParameterMinimumValues(T),P),P=e.getParameterCount(T),this.types=new Int32Array(b.HEAP32.buffer,e.getParameterTypes(T),P),P=e.getParameterCount(T),this.maximumValues=new Float32Array(b.HEAPF32.buffer,e.getParameterMaximumValues(T),P),P=e.getParameterCount(T),this.defaultValues=new Float32Array(b.HEAPF32.buffer,e.getParameterDefaultValues(T),P),P=e.getParameterCount(T),this.values=new Float32Array(b.HEAPF32.buffer,e.getParameterValues(T),P),P=e.getParameterCount(T),this.keyCounts=new Int32Array(b.HEAP32.buffer,e.getParameterKeyCounts(T),P),P=e.getParameterCount(T),O=new Int32Array(b.HEAP32.buffer,e.getParameterKeyCounts(T),P),this.keyValues=new Array(P);for(var J=new Uint32Array(b.HEAPU32.buffer,e.getParameterKeyValues(T),P),Y=0;Y<J.length;Y++)this.keyValues[Y]=new Float32Array(b.HEAPF32.buffer,J[Y],O[Y])}return E}();t.Parameters=u;var c=function(){function E(T){var P=0;this.count=e.getPartCount(T),P=e.getPartCount(T),this.ids=new Array(P);for(var O=new Uint32Array(b.HEAPU32.buffer,e.getPartIds(T),P),H=0;H<O.length;H++)this.ids[H]=b.UTF8ToString(O[H]);P=e.getPartCount(T),this.opacities=new Float32Array(b.HEAPF32.buffer,e.getPartOpacities(T),P),P=e.getPartCount(T),this.parentIndices=new Int32Array(b.HEAP32.buffer,e.getPartParentPartIndices(T),P)}return E}();t.Parts=c;var _=function(){function E(T){this._modelPtr=T;var P=0,O=null;this.count=e.getDrawableCount(T),P=e.getDrawableCount(T),this.ids=new Array(P);for(var H=new Uint32Array(b.HEAPU32.buffer,e.getDrawableIds(T),P),Y=0;Y<H.length;Y++)this.ids[Y]=b.UTF8ToString(H[Y]);P=e.getDrawableCount(T),this.constantFlags=new Uint8Array(b.HEAPU8.buffer,e.getDrawableConstantFlags(T),P),P=e.getDrawableCount(T),this.dynamicFlags=new Uint8Array(b.HEAPU8.buffer,e.getDrawableDynamicFlags(T),P),P=e.getDrawableCount(T),this.textureIndices=new Int32Array(b.HEAP32.buffer,e.getDrawableTextureIndices(T),P),P=e.getDrawableCount(T),this.drawOrders=new Int32Array(b.HEAP32.buffer,e.getDrawableDrawOrders(T),P),P=e.getDrawableCount(T),this.renderOrders=new Int32Array(b.HEAP32.buffer,e.getDrawableRenderOrders(T),P),P=e.getDrawableCount(T),this.opacities=new Float32Array(b.HEAPF32.buffer,e.getDrawableOpacities(T),P),P=e.getDrawableCount(T),this.maskCounts=new Int32Array(b.HEAP32.buffer,e.getDrawableMaskCounts(T),P),P=e.getDrawableCount(T),this.vertexCounts=new Int32Array(b.HEAP32.buffer,e.getDrawableVertexCounts(T),P),P=e.getDrawableCount(T),this.indexCounts=new Int32Array(b.HEAP32.buffer,e.getDrawableIndexCounts(T),P),P=e.getDrawableCount(T),this.multiplyColors=new Float32Array(b.HEAPF32.buffer,e.getDrawableMultiplyColors(T),P*4),P=e.getDrawableCount(T),this.screenColors=new Float32Array(b.HEAPF32.buffer,e.getDrawableScreenColors(T),P*4),P=e.getDrawableCount(T),this.parentPartIndices=new Int32Array(b.HEAP32.buffer,e.getDrawableParentPartIndices(T),P),P=e.getDrawableCount(T),O=new Int32Array(b.HEAP32.buffer,e.getDrawableMaskCounts(T),P),this.masks=new Array(P);for(var J=new Uint32Array(b.HEAPU32.buffer,e.getDrawableMasks(T),P),Y=0;Y<J.length;Y++)this.masks[Y]=new Int32Array(b.HEAP32.buffer,J[Y],O[Y]);P=e.getDrawableCount(T),O=new Int32Array(b.HEAP32.buffer,e.getDrawableVertexCounts(T),P),this.vertexPositions=new Array(P);for(var it=new Uint32Array(b.HEAPU32.buffer,e.getDrawableVertexPositions(T),P),Y=0;Y<it.length;Y++)this.vertexPositions[Y]=new Float32Array(b.HEAPF32.buffer,it[Y],O[Y]*2);P=e.getDrawableCount(T),O=new Int32Array(b.HEAP32.buffer,e.getDrawableVertexCounts(T),P),this.vertexUvs=new Array(P);for(var st=new Uint32Array(b.HEAPU32.buffer,e.getDrawableVertexUvs(T),P),Y=0;Y<st.length;Y++)this.vertexUvs[Y]=new Float32Array(b.HEAPF32.buffer,st[Y],O[Y]*2);P=e.getDrawableCount(T),O=new Int32Array(b.HEAP32.buffer,e.getDrawableIndexCounts(T),P),this.indices=new Array(P);for(var K=new Uint32Array(b.HEAPU32.buffer,e.getDrawableIndices(T),P),Y=0;Y<K.length;Y++)this.indices[Y]=new Uint16Array(b.HEAPU16.buffer,K[Y],O[Y])}return E.prototype.resetDynamicFlags=function(){e.resetDrawableDynamicFlags(this._modelPtr)},E}();t.Drawables=_;var y=function(){function E(){}return E.hasBlendAdditiveBit=function(T){return(T&1<<0)==1<<0},E.hasBlendMultiplicativeBit=function(T){return(T&1<<1)==1<<1},E.hasIsDoubleSidedBit=function(T){return(T&1<<2)==1<<2},E.hasIsInvertedMaskBit=function(T){return(T&1<<3)==1<<3},E.hasIsVisibleBit=function(T){return(T&1<<0)==1<<0},E.hasVisibilityDidChangeBit=function(T){return(T&1<<1)==1<<1},E.hasOpacityDidChangeBit=function(T){return(T&1<<2)==1<<2},E.hasDrawOrderDidChangeBit=function(T){return(T&1<<3)==1<<3},E.hasRenderOrderDidChangeBit=function(T){return(T&1<<4)==1<<4},E.hasVertexPositionsDidChangeBit=function(T){return(T&1<<5)==1<<5},E.hasBlendColorDidChangeBit=function(T){return(T&1<<6)==1<<6},E}();t.Utils=y;var w=function(){var E=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(T){T=T||{};var P,O,Et={};for(O in P=P||(T!==void 0?T:{}))P.hasOwnProperty(O)&&(Et[O]=P[O]);var H,Y,J,st=!1,it=typeof window=="object",qt=typeof importScripts=="function",st=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!it&&!qt,K=!it&&!st&&!qt,At="",Tt=(st?(At=__dirname+"/",Y=function(nt,mt){xi(nt)},J=function(nt){return ae((nt=(nt=Y(nt,!0)).buffer?nt:new Uint8Array(nt)).buffer),nt},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(nt){throw nt}),process.on("unhandledRejection",ue),P.inspect=function(){return"[Emscripten Module object]"}):K?(typeof read!="undefined"&&(Y=function(nt){var mt=xi(nt);return mt?Sr(mt):read(nt)}),J=function(nt){var mt;if(!(mt=xi(nt))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(nt));ae(typeof(mt=read(nt,"binary"))=="object")}return mt},typeof print!="undefined"&&((console=typeof console=="undefined"?{}:console).log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)):(it||qt)&&(qt?At=self.location.href:document.currentScript&&(At=document.currentScript.src),At=(At=E||At).indexOf("blob:")!==0?At.substr(0,At.lastIndexOf("/")+1):"",Y=function(nt){try{var mt=new XMLHttpRequest;return mt.open("GET",nt,!1),mt.send(null),mt.responseText}catch(Wt){if(nt=xi(nt))return Sr(nt);throw Wt}},qt&&(J=function(nt){try{var mt=new XMLHttpRequest;return mt.open("GET",nt,!1),mt.responseType="arraybuffer",mt.send(null),new Uint8Array(mt.response)}catch(Wt){if(nt=xi(nt))return nt;throw Wt}}),H=function(nt){var mt=me,Wt=Zr,ft=new XMLHttpRequest;ft.open("GET",mt,!0),ft.responseType="arraybuffer",ft.onload=function(){var tr;ft.status==200||ft.status==0&&ft.response?Wt(ft.response):(tr=xi(mt))?Wt(tr.buffer):nt()},ft.onerror=nt,ft.send(null)}),P.print||console.log.bind(console)),dt=P.printErr||console.warn.bind(console);for(O in Et)Et.hasOwnProperty(O)&&(P[O]=Et[O]);var Et=null,Rt=Array(1),Ft=0,ne=!1;function ae(nt,mt){nt||ue("Assertion failed: "+mt)}var zt,Vt,he,Kt,ve=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function at(nt,mt,Wt){var ft=mt+Wt;for(Wt=mt;nt[Wt]&&!(ft<=Wt);)++Wt;if(16<Wt-mt&&nt.subarray&&ve)return ve.decode(nt.subarray(mt,Wt));for(ft="";mt<Wt;){var tr,n,we=nt[mt++];128&we?(tr=63&nt[mt++],(224&we)==192?ft+=String.fromCharCode((31&we)<<6|tr):(n=63&nt[mt++],(we=(240&we)==224?(15&we)<<12|tr<<6|n:(7&we)<<18|tr<<12|n<<6|63&nt[mt++])<65536?ft+=String.fromCharCode(we):(we-=65536,ft+=String.fromCharCode(55296|we>>10,56320|1023&we)))):ft+=String.fromCharCode(we)}return ft}function bt(nt,mt){return nt?at(he,nt,mt):""}function vt(nt){return 0<nt%16777216&&(nt+=16777216-nt%16777216),nt}function le(nt){zt=nt,P.HEAP8=Vt=new Int8Array(nt),P.HEAP16=new Int16Array(nt),P.HEAP32=Kt=new Int32Array(nt),P.HEAPU8=he=new Uint8Array(nt),P.HEAPU16=new Uint16Array(nt),P.HEAPU32=new Uint32Array(nt),P.HEAPF32=new Float32Array(nt),P.HEAPF64=new Float64Array(nt)}typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le"),it=P.TOTAL_MEMORY||16777216;function Gt(nt){for(;0<nt.length;){var mt,Wt=nt.shift();typeof Wt=="function"?Wt():typeof(mt=Wt.C)=="number"?Wt.w===void 0?P.dynCall_v(mt):P.dynCall_vi(mt,Wt.w):mt(Wt.w===void 0?null:Wt.w)}}it=(zt=P.buffer||new ArrayBuffer(it)).byteLength,le(zt),Kt[1052]=5247296;var se=[],Pe=[],Zt=[],ke=[];Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(nt,mt){var Wt=65535&nt,ft=65535&mt;return Wt*ft+((nt>>>16)*ft+Wt*(mt>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(nt){var mt=32,Wt=nt>>16;return Wt&&(mt-=16,nt=Wt),(Wt=nt>>8)&&(mt-=8,nt=Wt),(Wt=nt>>4)&&(mt-=4,nt=Wt),(Wt=nt>>2)&&(mt-=2,nt=Wt),nt>>1?mt-2:mt-nt}),Math.trunc||(Math.trunc=function(nt){return nt<0?Math.ceil(nt):Math.floor(nt)});var _e=0,fe=null;function ue(nt){throw P.onAbort&&P.onAbort(nt),Tt(nt),dt(nt),ne=!0,"abort("+nt+"). Build with -s ASSERTIONS=1 for more info."}P.preloadedImages={},P.preloadedAudios={};var me=null,Nt="data:application/octet-stream;base64,";function Ge(nt){return nt.replace(/\b__Z[\w\d_]+/g,function(mt){return mt==mt?mt:mt+" ["+mt+"]"})}function Ke(){var nt=Error();if(!nt.stack){try{throw Error(0)}catch(mt){nt=mt}if(!nt.stack)return"(no stack trace available)"}return nt.stack.toString()}var ce=[null,[],[]];function Vr(nt,mt){var Wt=ce[nt];mt===0||mt===10?((nt===1?Tt:dt)(at(Wt,0)),Wt.length=0):Wt.push(mt)}function Br(nt,mt,Wt,ft){try{for(var tr=0,n=0;n<Wt;n++){for(var we=Kt[mt+8*n>>2],Re=Kt[mt+(8*n+4)>>2],D=0;D<Re;D++)Vr(nt,he[we+D]);tr+=Re}return Kt[ft>>2]=tr,0}catch(f){return typeof FS!="undefined"&&f instanceof FS.A||ue(f),f.B}}function ai(){return Vt.length}function Ze(nt){try{var mt=new ArrayBuffer(nt);if(mt.byteLength==nt)return new Int8Array(mt).set(Vt),pr(mt),le(mt),1}catch(Wt){}}var Fi=!(me="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAABgKAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAExpdmUyRCBDdWJpc20gU0RLIENvcmUgVmVyc2lvbiAlZC4lZC4lZABNT0MzAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBDb3JydXB0ZWQgIG1vYzMgZmlsZS4KAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KAFtDU01dIFtFXSVzOiAlcwoAY3NtR2V0TW9jVmVyc2lvbgAiYWRkcmVzcyIgaXMgbnVsbC4AY3NtUmV2aXZlTW9jSW5QbGFjZQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZWFkQ2FudmFzSW5mbwAibW9kZWwiIGlzIGludmFsaWQuACJvdXRTaXplSW5QaXhlbHMiIGlzIG51bGwuACJvdXRPcmlnaW5JblBpeGVscyIgaXMgbnVsbC4AIm91dFBpeGVsc1BlclVuaXQiIGlzIG51bGwuAGNzbUdldFNpemVvZk1vZGVsACJtb2MiIGlzIGludmFsaWQuAGNzbUluaXRpYWxpemVNb2RlbEluUGxhY2UAInNpemUiIGlzIGludmFsaWQAY3NtVXBkYXRlTW9kZWwAY3NtR2V0UGFyYW1ldGVyQ291bnQAY3NtR2V0UGFyYW1ldGVySWRzAGNzbUdldFBhcmFtZXRlclR5cGVzAGNzbUdldFBhcmFtZXRlck1pbmltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyTWF4aW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJEZWZhdWx0VmFsdWVzAGNzbUdldFBhcmFtZXRlclZhbHVlcwBjc21HZXRQYXJ0Q291bnQAY3NtR2V0UGFydElkcwBjc21HZXRQYXJ0T3BhY2l0aWVzAGNzbUdldFBhcnRQYXJlbnRQYXJ0SW5kaWNlcwBjc21HZXREcmF3YWJsZUNvdW50AGNzbUdldERyYXdhYmxlSWRzAGNzbUdldERyYXdhYmxlQ29uc3RhbnRGbGFncwBjc21HZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzAGNzbUdldERyYXdhYmxlRHJhd09yZGVycwBjc21HZXREcmF3YWJsZVJlbmRlck9yZGVycwBjc21HZXREcmF3YWJsZU9wYWNpdGllcwBjc21HZXREcmF3YWJsZU1hc2tDb3VudHMAY3NtR2V0RHJhd2FibGVNYXNrcwBjc21HZXREcmF3YWJsZVZlcnRleENvdW50cwBjc21HZXREcmF3YWJsZVZlcnRleFBvc2l0aW9ucwBjc21HZXREcmF3YWJsZVZlcnRleFV2cwBjc21HZXREcmF3YWJsZUluZGV4Q291bnRzAGNzbUdldERyYXdhYmxlSW5kaWNlcwBjc21HZXREcmF3YWJsZU11bHRpcGx5Q29sb3JzAGNzbUdldERyYXdhYmxlU2NyZWVuQ29sb3JzAGNzbUdldERyYXdhYmxlUGFyZW50UGFydEluZGljZXMAY3NtUmVzZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXRQYXJhbWV0ZXJLZXlDb3VudHMAY3NtR2V0UGFyYW1ldGVyS2V5VmFsdWVzAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgAlcwoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=");function Sr(nt){for(var mt=[],Wt=0;Wt<nt.length;Wt++){var ft=nt[Wt];255<ft&&(Fi&&ae(!1,"Character code "+ft+" ("+String.fromCharCode(ft)+")  at offset "+Wt+" not in 0x00-0xFF."),ft&=255),mt.push(String.fromCharCode(ft))}return mt.join("")}var yt=typeof atob=="function"?atob:function(nt){var mt="",Wt=0;nt=nt.replace(/[^A-Za-z0-9\+\/=]/g,"");do var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)),ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)),tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)),n=n<<2|we>>4,we=(15&we)<<4|ft>>2,Re=(3&ft)<<6|tr;while(mt+=String.fromCharCode(n),ft!==64&&(mt+=String.fromCharCode(we)),tr!==64&&(mt+=String.fromCharCode(Re)),Wt<nt.length);return mt};function xi(nt){if(String.prototype.startsWith?nt.startsWith(Nt):nt.indexOf(Nt)===0){if(nt=nt.slice(Nt.length),typeof st=="boolean"&&st){try{var mt=Buffer.from(nt,"base64")}catch(n){mt=new Buffer(nt,"base64")}var Wt=new Uint8Array(mt.buffer,mt.byteOffset,mt.byteLength)}else try{for(var ft=yt(nt),tr=new Uint8Array(ft.length),mt=0;mt<ft.length;++mt)tr[mt]=ft.charCodeAt(mt);Wt=tr}catch(n){throw Error("Converting base64 string to bytes failed.")}return Wt}}var Zr,Ve,Qi,qt=function(nt,mt,Wt){var ft=new nt.Int8Array(Wt),tr=new nt.Int16Array(Wt),n=new nt.Int32Array(Wt),we=new nt.Uint8Array(Wt),Re=new nt.Uint16Array(Wt),D=new nt.Float32Array(Wt),f=new nt.Float64Array(Wt),d=0|mt.v,x=nt.Math.floor,L=nt.Math.pow,M=nt.Math.cos,N=nt.Math.sin,V=nt.Math.atan2,z=nt.Math.imul,k=nt.Math.clz32,q=mt.a,tt=mt.b,et=mt.c,ht=mt.d,gt=mt.e,xt=mt.f,ut=mt.g,Ct=mt.h,wt=mt.i,St=mt.j,It=mt.k,re=mt.l,Bt=mt.m,G=4416;function Mt(a){var l,v,S,C,p,R,I,A,g,$,F,X,Z,B,W,j,U,rt,lt=0,Q=0,ct=0|n[(a|=0)+500>>2];if(!((0|ct)<=0)){I=0|n[a+504>>2],A=0|n[a+444>>2],v=0|n[a+536>>2],Q=0;do if(S=0|n[I+(24*Q|0)+12>>2],C=0|n[A+(n[I+(24*Q|0)+4>>2]<<2)>>2],p=0|n[A+(n[I+(24*Q|0)+8>>2]<<2)>>2],R=0|n[I+(24*Q|0)+16>>2],a=0|n[I+(24*Q|0)+20>>2],l=+D[v+(Q<<2)>>2],0<(0|S))for(lt=0;U=+D[R+(lt<<2)>>2],X=+D[R+((g=1|lt)<<2)>>2],j=(0|Re[a+(lt<<1)>>1])<<1&65534,W=+D[(rt=C+(j<<2)|0)>>2],F=+D[(j=C+((1|j)<<2)|0)>>2],g=(0|Re[a+(g<<1)>>1])<<1&65534,B=+D[(Z=p+(g<<2)|0)>>2],$=+D[(g=p+((1|g)<<2)|0)>>2],D[rt>>2]=W+U*(B-W)*l,D[j>>2]=F+U*($-F)*l,D[Z>>2]=B+X*(W-B)*l,D[g>>2]=$+X*(F-$)*l,(0|(lt=lt+2|0))<(0|S););while((0|(Q=Q+1|0))!=(0|ct))}}function Ut(a){var l=0|n[(a|=0)>>2];(0|we[4+l>>0])<4||He(a,0|n[a+596>>2],0|n[a+600>>2],0|n[984+l>>2],0|n[a+152>>2],0|n[796+l>>2])}function He(a,l,v,S,C,p){a|=0,S|=0,C|=0,p|=0;var R,I,A,g,$,F,X,Z,B,W=0,j=0,U=0,rt=0,lt=0,Q=G;if(G=G+16|0,Z=Q+8|0,X=Q,F=(v|=0)+(12*(l|=0)|0)|0,(0|l)<=0)G=Q;else{do{l=0|n[v>>2],I=0|n[C+(l<<2)>>2],g=(l=0|n[p+(l<<2)>>2])<<1,lt=0|n[v+4>>2],W=0|n[v+8>>2],A=0|n[1028+(0|n[a>>2])>>2],$=W+(48*lt|0)|0;t:do if(0<(0|lt)){if((0|l)<=0){for(;;)if(3<=(l=0|n[W+8>>2])>>>0&&(n[Z>>2]=l,kt(0,784,Z)),$>>>0<=(W=W+48|0)>>>0)break t}do{j=S+(n[W+4>>2]<<2)|0,l=0|n[W+8>>2];e:do if(0|l)switch(lt=A+(n[j+(n[W+12>>2]<<2)>>2]<<2)|0,0|l){case 1:for(j=W+20|0,l=W+44|0,U=0;D[(rt=I+(U<<2)|0)>>2]=+D[rt>>2]+ +D[l>>2]*(+D[lt+(U<<2)>>2]*+D[j>>2]),(0|(U=U+1|0))!=(0|g););break;case 2:for(j=A+(n[j+(n[W+16>>2]<<2)>>2]<<2)|0,U=W+20|0,R=W+24|0,l=W+44|0,rt=0;D[(B=I+(rt<<2)|0)>>2]=+D[B>>2]+ +D[l>>2]*(+D[lt+(rt<<2)>>2]*+D[U>>2]+ +D[j+(rt<<2)>>2]*+D[R>>2]),(0|(rt=rt+1|0))!=(0|g););break;default:n[X>>2]=l,kt(0,784,X);break e}while(0)}while((W=W+48|0)>>>0<$>>>0)}while(0)}while((v=v+12|0)>>>0<F>>>0);G=Q}}function sr(a){var l=0|n[(a|=0)>>2];(0|we[4+l>>0])<4||He(a,0|n[a+604>>2],0|n[a+608>>2],0|n[1024+l>>2],0|n[a+444>>2],0|n[892+l>>2])}function kt(a,l,v){a|=0,l|=0,v|=0;var S,C,p=G;G=G+272|0,a=p+16|0,C=p,G=((S=0|n[904])&&(n[C>>2]=v,Ki(a,l,C),gv[1&S](a)),p)}function ur(a,l,v){v|=0;var S,C=0,p=0,R=0,I=0,A=0,g=0,$=0,F=0,Z=0,X=0,Z=0|ft[(a|=0)+4>>0];if(n[(l|=0)>>2]=628,X=0|n[(F=a+704|0)>>2],0<(0|(A=0|n[X>>2]))){for(C=0|n[a+1048>>2],p=0|n[a+720>>2],I=R=0;I=(1<<n[C+(n[p+(R<<2)>>2]<<2)>>2])+I|0,(0|(R=R+1|0))!=(0|A););C=I<<2}else C=0;if(n[l+4>>2]=12*A,n[l+8>>2]=n[X>>2]<<2,n[l+12>>2]=n[X>>2]<<2,n[l+16>>2]=n[X>>2]<<2,n[l+20>>2]=n[X>>2]<<2,n[l+24>>2]=n[X>>2]<<2,n[l+28>>2]=C,n[l+32>>2]=n[X>>2]<<2,n[l+36>>2]=C,n[l+40>>2]=C,n[l+44>>2]=n[(S=X+4|0)>>2]<<5,n[l+48>>2]=n[S>>2]<<2,n[l+52>>2]=n[S>>2]<<2,n[l+56>>2]=n[S>>2]<<2,n[l+60>>2]=n[S>>2]<<4,n[l+64>>2]=n[S>>2]<<4,0<(0|($=0|n[(S=X+8|0)>>2]))){for(p=0|n[a+796>>2],R=0|n[a+1048>>2],I=0|n[a+780>>2],C=g=A=0;C=(15+(n[p+(A<<2)>>2]<<3)&-16)+C|0,g=(1<<n[R+(n[I+(A<<2)>>2]<<2)>>2])+g|0,(0|(A=A+1|0))!=(0|$););p=g<<2}else C=p=0;if(n[l+68>>2]=24*$,n[l+72>>2]=n[S>>2]<<2,n[l+76>>2]=n[S>>2]<<2,n[l+80>>2]=n[S>>2]<<2,n[l+84>>2]=C,n[l+88>>2]=n[S>>2]<<4,n[l+92>>2]=n[S>>2]<<4,n[l+96>>2]=n[S>>2]<<2,n[l+100>>2]=p,n[l+104>>2]=n[S>>2]<<2,n[l+108>>2]=p,n[l+112>>2]=p,n[l+116>>2]=p,n[l+120>>2]=p,n[l+124>>2]=p,n[l+128>>2]=p,n[l+132>>2]=p,n[l+136>>2]=p,n[l+140>>2]=p,n[l+144>>2]=n[S>>2]<<2,n[l+148>>2]=n[S>>2]<<2,n[l+152>>2]=n[S>>2]<<2,n[l+156>>2]=n[S>>2]<<2,n[l+160>>2]=n[S>>2]<<2,n[l+164>>2]=n[S>>2]<<2,0<(0|(A=0|n[(g=X+12|0)>>2]))){for(C=0|n[a+1048>>2],p=0|n[a+812>>2],I=R=0;I=(1<<n[C+(n[p+(R<<2)>>2]<<2)>>2])+I|0,(0|(R=R+1|0))!=(0|A););C=I<<2}else C=0;if(n[l+168>>2]=12*A,n[l+172>>2]=n[g>>2]<<2,n[l+176>>2]=n[g>>2]<<2,n[l+180>>2]=n[g>>2]<<2,n[l+184>>2]=n[g>>2]<<2,n[l+188>>2]=n[g>>2]<<2,n[l+192>>2]=n[g>>2]<<2,n[l+196>>2]=n[g>>2]<<2,n[l+200>>2]=n[g>>2]<<2,n[l+204>>2]=n[g>>2]<<4,n[l+208>>2]=n[g>>2]<<4,n[l+212>>2]=n[g>>2]<<2,n[l+216>>2]=C,n[l+220>>2]=n[g>>2]<<2,n[l+224>>2]=C,n[l+228>>2]=C,n[l+232>>2]=C,n[l+236>>2]=C,n[l+240>>2]=C,n[l+244>>2]=C,n[l+248>>2]=C,n[l+252>>2]=C,n[l+256>>2]=C,n[l+260>>2]=C,n[l+264>>2]=C,n[l+268>>2]=C,n[l+272>>2]=n[g>>2]<<2,n[l+276>>2]=n[g>>2]<<2,n[l+280>>2]=n[g>>2]<<2,n[l+284>>2]=n[g>>2]<<2,n[l+288>>2]=n[g>>2]<<2,n[l+292>>2]=n[g>>2]<<2,0<(0|($=0|n[(S=X+16|0)>>2]))){for(p=0|n[a+892>>2],R=0|n[a+1048>>2],I=0|n[a+852>>2],C=g=A=0;C=(15+(n[p+(A<<2)>>2]<<3)&-16)+C|0,g=(1<<n[R+(n[I+(A<<2)>>2]<<2)>>2])+g|0,(0|(A=A+1|0))!=(0|$););p=g<<2}else C=p=0;if(n[l+296>>2]=20*$,n[l+300>>2]=n[S>>2]<<2,n[l+304>>2]=n[S>>2],n[l+308>>2]=n[S>>2]<<2,n[l+312>>2]=n[S>>2]<<2,n[l+316>>2]=n[S>>2]<<2,n[l+320>>2]=C,n[l+324>>2]=n[S>>2]<<2,n[l+328>>2]=n[S>>2]<<4,n[l+332>>2]=n[S>>2]<<4,n[l+336>>2]=n[S>>2]<<2,n[l+340>>2]=n[S>>2]<<2,n[l+344>>2]=n[S>>2]<<2,n[l+348>>2]=n[S>>2]<<4,n[l+352>>2]=n[S>>2]<<4,n[l+356>>2]=n[S>>2]<<2,n[l+360>>2]=p,n[l+364>>2]=n[S>>2]<<2,n[l+368>>2]=p,n[l+372>>2]=p,n[l+376>>2]=p,n[l+380>>2]=p,n[l+384>>2]=p,n[l+388>>2]=p,n[l+392>>2]=p,n[l+396>>2]=p,n[l+400>>2]=p,n[l+404>>2]=p,n[l+408>>2]=n[S>>2]<<2,n[l+412>>2]=n[S>>2]<<2,n[l+416>>2]=n[S>>2]<<2,n[l+420>>2]=n[S>>2]<<2,n[l+424>>2]=n[S>>2]<<2,n[l+428>>2]=n[S>>2]<<2,F=0|n[F>>2],n[l+432>>2]=52*(0|n[(p=F+20|0)>>2]),C=(S=3<(255&Z))?0:n[p>>2]<<2,n[l+436>>2]=C,n[l+440>>2]=n[p>>2]<<2,n[l+444>>2]=28*(0|n[F+52>>2]),0<(0|(A=0|n[X+48>>2]))){for(C=0|n[a+1048>>2],I=R=p=0;R=(Z=0|n[C+(p<<2)>>2])+R|0,I=(1<<Z)+I|0,(0|(p=p+1|0))!=(0|A););p=R<<2,C=I<<2}else C=p=0;if(n[l+448>>2]=36*A,n[l+452>>2]=p,n[l+456>>2]=C,n[l+460>>2]=C,n[l+488>>2]=28*(0|n[(p=X+72|0)>>2]),0<(0|(p=0|n[p>>2]))){for(R=0|n[a+1152>>2],I=0|n[a+1160>>2],C=0|n[a+1164>>2],$=g=A=0;g=(0|g)<(0|(Z=0|n[R+(A<<2)>>2]))?Z:g,$=(0|(Z=(0|n[I+(A<<2)>>2])-(0|n[C+(A<<2)>>2])|0))<(0|$)?$:Z+1|0,(0|(A=A+1|0))!=(0|p););p=g<<2,C=$<<2}else C=p=0;if(n[l+492>>2]=n[X+76>>2]<<4,n[l+496>>2]=C,n[l+500>>2]=p,n[l+504>>2]=C,0<(0|(A=0|n[(g=X+80|0)>>2]))){for(C=0|n[a+1048>>2],p=0|n[a+1188>>2],I=R=0;I=(1<<n[C+(n[p+(R<<2)>>2]<<2)>>2])+I|0,(0|(R=R+1|0))!=(0|A););C=I<<2}else C=0;if(n[l+508>>2]=24*A,n[l+512>>2]=n[g>>2]<<2,n[l+516>>2]=n[g>>2]<<2,n[l+520>>2]=C,n[l+524>>2]=n[g>>2]<<2,n[l+528>>2]=C,n[l+532>>2]=C,S){if(n[l+464>>2]=20*(0|n[F+120>>2]),n[l+468>>2]=28*(0|n[F+100>>2]),0<(0|(I=0|n[X+104>>2]))){for(C=0|n[a+1080>>2],R=p=0;R=(0|n[C+(p<<2)>>2])+R|0,(0|(p=p+1|0))!=(0|I););C=R<<2}else C=0;n[l+472>>2]=48*I,n[l+476>>2]=C,n[l+480>>2]=12*(0|n[F+108>>2]),n[l+484>>2]=12*(0|n[F+112>>2]),C=p=n[l+540>>2]=0}else{if(0<(0|(S=0|n[(F=X+20|0)>>2]))){g=0|n[a+948>>2],$=0|n[a+952>>2],I=0|n[a+1036>>2],C=A=0;do if(a=0|n[$+(A<<2)>>2],R=(p=I+(n[g+(A<<2)>>2]<<2)|0)+(a<<2)|0,0<(0|a))for(;C=(0|n[p>>2])+C|0,(p=p+4|0)>>>0<R>>>0;);while((0|(A=A+1|0))!=(0|S))}else C=0;n[l+540>>2]=S<<2,p=C<<2,C=n[F>>2]<<2}for(n[l+536>>2]=C,n[l+544>>2]=p,p=C=0;p=(a=15+(0|n[(X=l+(C<<2)|0)>>2])&-16)+(n[X>>2]=p)|0,(0|(C=C+1|0))!=137;);n[v>>2]=p}function pe(a,l,v){a|=0,l|=0,v|=0;var S,C,p,R,I,A,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=0,Ot=0,Jt=0,Dt=0,Me=0,Ce=0,$e=0,fr=0,ir=0,qe=0,De=0,cr=0,Ar=0,Je=0,nr=0,xe=0,Oe=0,ot=0,Ur=G;if(G=G+560|0,Dt=Ur+552|0,g=(U=Ur)+556|0,wi(0|U,0,548),ur(a,U,g),v>>>0<(g=0|n[g>>2])>>>0)return G=Ur,(ot=0)|ot;if(wi(0|l,0,0|g),ot=l+(0|n[U>>2])|0,n[(C=ot+8|0)>>2]=l+(0|n[U+4>>2]),n[ot+40>>2]=l+(0|n[U+8>>2]),n[ot+44>>2]=l+(0|n[U+12>>2]),n[ot+48>>2]=l+(0|n[U+16>>2]),n[(Ot=ot+52|0)>>2]=l+(0|n[U+20>>2]),n[(Jt=ot+16|0)>>2]=l+(0|n[U+24>>2]),n[ot+24>>2]=l+(0|n[U+28>>2]),n[ot+28>>2]=l+(0|n[U+32>>2]),n[ot+32>>2]=l+(0|n[U+36>>2]),n[ot+36>>2]=l+(0|n[U+40>>2]),F=0|n[(Oe=a+704|0)>>2],n[(p=ot+308|0)>>2]=l+(0|n[U+44>>2]),n[ot+312>>2]=l+(0|n[U+48>>2]),n[ot+316>>2]=l+(0|n[U+52>>2]),n[ot+320>>2]=l+(0|n[U+56>>2]),n[ot+324>>2]=l+(0|n[U+60>>2]),n[ot+328>>2]=l+(0|n[U+64>>2]),n[($e=ot+60|0)>>2]=l+(0|n[U+68>>2]),n[ot+144>>2]=l+(0|n[U+72>>2]),n[ot+148>>2]=l+(0|n[U+76>>2]),g=l+(0|n[U+80>>2])|0,n[(X=ot+152|0)>>2]=g,0<(0|(F=0|n[F+8>>2]))&&(Z=l+(0|n[U+84>>2])|0,B=a+796|0,n[g>>2]=Z,(0|F)!=1))for(g=0,$=1,v=Z;v=v+(15+(n[(0|n[B>>2])+(g<<2)>>2]<<3)&-16)|0,n[(0|n[X>>2])+($<<2)>>2]=v,!((0|F)<=(0|(g=$+1|0)));)nr=$,$=g,g=nr;if(n[ot+156>>2]=l+(0|n[U+88>>2]),n[ot+160>>2]=l+(0|n[U+92>>2]),n[(Me=ot+68|0)>>2]=l+(0|n[U+96>>2]),n[ot+76>>2]=l+(0|n[U+100>>2]),n[ot+80>>2]=l+(0|n[U+104>>2]),n[ot+84>>2]=l+(0|n[U+108>>2]),n[ot+88>>2]=l+(0|n[U+112>>2]),n[ot+92>>2]=l+(0|n[U+116>>2]),n[ot+96>>2]=l+(0|n[U+120>>2]),n[ot+100>>2]=l+(0|n[U+124>>2]),n[ot+104>>2]=l+(0|n[U+128>>2]),n[ot+108>>2]=l+(0|n[U+132>>2]),n[ot+112>>2]=l+(0|n[U+136>>2]),n[ot+116>>2]=l+(0|n[U+140>>2]),n[ot+120>>2]=l+(0|n[U+144>>2]),n[ot+124>>2]=l+(0|n[U+148>>2]),n[ot+128>>2]=l+(0|n[U+152>>2]),n[ot+132>>2]=l+(0|n[U+156>>2]),n[ot+136>>2]=l+(0|n[U+160>>2]),n[ot+140>>2]=l+(0|n[U+164>>2]),n[(R=ot+168|0)>>2]=l+(0|n[U+168>>2]),n[ot+264>>2]=l+(0|n[U+172>>2]),n[ot+268>>2]=l+(0|n[U+176>>2]),n[ot+272>>2]=l+(0|n[U+180>>2]),n[ot+276>>2]=l+(0|n[U+184>>2]),n[ot+280>>2]=l+(0|n[U+188>>2]),n[ot+284>>2]=l+(0|n[U+192>>2]),n[ot+288>>2]=l+(0|n[U+196>>2]),n[ot+292>>2]=l+(0|n[U+200>>2]),n[ot+296>>2]=l+(0|n[U+204>>2]),n[ot+300>>2]=l+(0|n[U+208>>2]),n[(Ce=ot+176|0)>>2]=l+(0|n[U+212>>2]),n[ot+184>>2]=l+(0|n[U+216>>2]),n[ot+188>>2]=l+(0|n[U+220>>2]),n[ot+192>>2]=l+(0|n[U+224>>2]),n[ot+196>>2]=l+(0|n[U+228>>2]),n[ot+200>>2]=l+(0|n[U+232>>2]),n[ot+204>>2]=l+(0|n[U+236>>2]),n[ot+208>>2]=l+(0|n[U+240>>2]),n[ot+212>>2]=l+(0|n[U+244>>2]),n[ot+216>>2]=l+(0|n[U+248>>2]),n[ot+220>>2]=l+(0|n[U+252>>2]),n[ot+224>>2]=l+(0|n[U+256>>2]),n[ot+228>>2]=l+(0|n[U+260>>2]),n[ot+232>>2]=l+(0|n[U+264>>2]),n[ot+236>>2]=l+(0|n[U+268>>2]),n[ot+240>>2]=l+(0|n[U+272>>2]),n[ot+244>>2]=l+(0|n[U+276>>2]),n[ot+248>>2]=l+(0|n[U+280>>2]),n[ot+252>>2]=l+(0|n[U+284>>2]),n[ot+256>>2]=l+(0|n[U+288>>2]),n[ot+260>>2]=l+(0|n[U+292>>2]),F=0|n[Oe>>2],n[(ir=ot+336|0)>>2]=l+(0|n[U+296>>2]),n[ot+424>>2]=l+(0|n[U+300>>2]),n[ot+432>>2]=l+(0|n[U+304>>2]),n[ot+436>>2]=l+(0|n[U+308>>2]),n[ot+440>>2]=l+(0|n[U+312>>2]),g=l+(0|n[U+316>>2])|0,n[(X=ot+444|0)>>2]=g,0<(0|(F=0|n[F+16>>2]))&&(W=l+(0|n[U+320>>2])|0,j=a+892|0,n[g>>2]=W,(0|F)!=1))for(g=0,$=1,v=W;v=v+(15+(n[(0|n[j>>2])+(g<<2)>>2]<<3)&-16)|0,n[(0|n[X>>2])+($<<2)>>2]=v,!((0|F)<=(0|(g=$+1|0)));)nr=$,$=g,g=nr;if(n[ot+448>>2]=l+(0|n[U+324>>2]),n[(qe=ot+452|0)>>2]=l+(0|n[U+328>>2]),n[(De=ot+456|0)>>2]=l+(0|n[U+332>>2]),n[ot+460>>2]=l+(0|n[U+336>>2]),n[ot+464>>2]=l+(0|n[U+340>>2]),n[ot+468>>2]=l+(0|n[U+344>>2]),n[ot+472>>2]=l+(0|n[U+348>>2]),n[ot+476>>2]=l+(0|n[U+352>>2]),n[(fr=ot+344|0)>>2]=l+(0|n[U+356>>2]),n[ot+352>>2]=l+(0|n[U+360>>2]),n[ot+356>>2]=l+(0|n[U+364>>2]),n[ot+360>>2]=l+(0|n[U+368>>2]),n[ot+364>>2]=l+(0|n[U+372>>2]),n[ot+368>>2]=l+(0|n[U+376>>2]),n[ot+372>>2]=l+(0|n[U+380>>2]),n[ot+376>>2]=l+(0|n[U+384>>2]),n[ot+380>>2]=l+(0|n[U+388>>2]),n[ot+384>>2]=l+(0|n[U+392>>2]),n[ot+388>>2]=l+(0|n[U+396>>2]),n[ot+392>>2]=l+(0|n[U+400>>2]),n[ot+396>>2]=l+(0|n[U+404>>2]),n[ot+400>>2]=l+(0|n[U+408>>2]),n[ot+404>>2]=l+(0|n[U+412>>2]),n[ot+408>>2]=l+(0|n[U+416>>2]),n[ot+412>>2]=l+(0|n[U+420>>2]),n[ot+416>>2]=l+(0|n[U+424>>2]),n[ot+420>>2]=l+(0|n[U+428>>2]),jt=0|n[U+436>>2],S=0|n[U+440>>2],n[(nr=ot+544|0)>>2]=l+(0|n[U+432>>2]),n[(pt=ot+548|0)>>2]=l+jt,n[(jt=ot+552|0)>>2]=l+S,n[(S=ot+560|0)>>2]=l+(0|n[U+444>>2]),g=0|n[Oe>>2],F=l+(0|n[U+448>>2])|0,n[(Je=ot+568|0)>>2]=F,0<(0|(g=0|n[g+48>>2])))for(v=0|n[a+1048>>2],X=l+(0|n[U+452>>2])|0,B=l+((Z=0)|n[U+456>>2])|0,j=l+(0|n[U+460>>2])|0;n[F+(36*Z|0)>>2]=X,n[F+(36*Z|0)+16>>2]=B,n[F+(36*Z|0)+20>>2]=j,W=1<<($=0|n[v+(Z<<2)>>2]),(0|(Z=Z+1|0))!=(0|g);)X=X+($<<2)|0,B=B+(W<<2)|0,j=j+(W<<2)|0;if(g=0|n[Oe>>2],$=l+(0|n[U+488>>2])|0,n[(I=ot+484|0)>>2]=$,0<(0|(g=0|n[g+72>>2])))for(v=0|n[a+1152>>2],X=l+((F=0)|n[U+492>>2])|0;X=(n[$+(28*F|0)+12>>2]=X)+(n[v+(F<<2)>>2]<<4)|0,(0|(F=F+1|0))!=(0|g););if(n[ot+488>>2]=l+(0|n[U+496>>2]),n[ot+492>>2]=l+(0|n[U+500>>2]),n[ot+496>>2]=l+(0|n[U+504>>2]),n[(cr=ot+504|0)>>2]=l+(0|n[U+508>>2]),n[ot+536>>2]=l+(0|n[U+512>>2]),n[(Ar=ot+512|0)>>2]=l+(0|n[U+516>>2]),n[ot+520>>2]=l+(0|n[U+520>>2]),n[ot+524>>2]=l+(0|n[U+524>>2]),n[ot+528>>2]=l+(0|n[U+528>>2]),n[ot+532>>2]=l+(0|n[U+532>>2]),Yt=3<(0|we[(A=a+4|0)>>0])){if(n[ot+576>>2]=l+(0|n[U+464>>2]),n[ot+584>>2]=l+(0|n[U+468>>2]),g=0|n[U+476>>2],F=0|n[Oe>>2],Z=l+(0|n[U+472>>2])|0,n[ot+592>>2]=Z,0<(0|(F=0|n[F+104>>2])))for(X=0|n[a+1080>>2],g=l+g|0,v=0;n[Z+(48*v|0)+40>>2]=g,(0|($=v+1|0))!=(0|F);)g=g+(n[X+(v<<2)>>2]<<2)|0,v=$;n[ot+600>>2]=l+(0|n[U+480>>2]),n[ot+608>>2]=l+(0|n[U+484>>2]),v=0|n[Oe>>2],g=0|n[v+20>>2]}else if(v=0|n[U+536>>2],$=0|n[U+544>>2],n[ot+616>>2]=l+(0|n[U+540>>2]),n[(U=ot+612|0)>>2]=l+v,v=0|n[Oe>>2],0<(0|(g=0|n[v+20>>2])))for(B=a+948|0,W=a+952|0,Z=a+1036|0,X=l+$|(j=0);;){if(g=0|n[(0|n[B>>2])+(j<<2)>>2],$=($t=0|n[(0|n[W>>2])+(j<<2)>>2])+g|0,0<(0|$t)){for(v=0|n[Z>>2],F=0;F=(0|n[v+(g<<2)>>2])+F|0,(0|(g=g+1|0))<(0|$););g=(0|n[U>>2])+(j<<2)|0,F?(v=X,$=F):xe=27}else g=(0|n[U>>2])+(j<<2)|0,xe=27;if((0|xe)==27&&($=v=xe=0),n[g>>2]=v,v=0|n[Oe>>2],(0|(g=0|n[v+20>>2]))<=(0|(j=j+1|0)))break;X=X+($<<2)|0}n[ot>>2]=a,n[ot+620>>2]=1,n[ot+624>>2]=1&ft[20+(0|n[a+708>>2])>>0],X=(n[ot+540>>2]=g)+-1|0;t:do if(0<(0|g)){if(l=0|n[nr>>2],rt=0|n[a+928>>2],lt=0|n[a+924>>2],ct=0|n[a+936>>2],Pt=0|n[a+932>>2],Xt=0|n[a+940>>2],Qt=0|n[a+952>>2],$t=a+948|0,U=0|n[jt>>2],j=ot+584|0,W=a+956|0,!Yt)for(;;){if(n[l+(52*X|0)>>2]=0,n[l+(52*X|0)+4>>2]=n[($=rt+(X<<2)|0)>>2],n[l+(52*X|0)+8>>2]=n[(jt=lt+(X<<2)|0)>>2],D[l+(52*X|0)+12>>2]=+D[jt>>2]-+D[$>>2],n[l+(52*X|0)+16>>2]=n[ct+(X<<2)>>2],n[l+(52*X|0)+44>>2]=n[($=Pt+(X<<2)|0)>>2],Q=+L(.10000000149011612,0|n[Xt+(X<<2)>>2]),D[l+(52*X|0)+20>>2]=Q,D[l+(52*X|0)+24>>2]=1.5*Q,jt=0|n[Qt+(X<<2)>>2],F=(n[l+(52*X|0)+32>>2]=jt)?(0|n[S>>2])+(28*(0|n[(0|n[$t>>2])+(X<<2)>>2])|0)|0:0,n[l+(52*X|0)+28>>2]=F,n[l+(52*X|0)+48>>2]=1,n[U+(X<<2)>>2]=n[$>>2],!(0<(0|X)))break t;X=X+-1|0}for(Z=0|n[a+944>>2],B=0|n[a+960>>2];n[l+(52*X|0)>>2]=n[Z+(X<<2)>>2],n[l+(52*X|0)+4>>2]=n[(F=rt+(X<<2)|0)>>2],n[l+(52*X|0)+8>>2]=n[(jt=lt+(X<<2)|0)>>2],D[l+(52*X|0)+12>>2]=+D[jt>>2]-+D[F>>2],n[l+(52*X|0)+16>>2]=n[ct+(X<<2)>>2],n[l+(52*X|0)+44>>2]=n[(F=Pt+(X<<2)|0)>>2],Q=+L(.10000000149011612,0|n[Xt+(X<<2)>>2]),D[l+(52*X|0)+20>>2]=Q,D[l+(52*X|0)+24>>2]=1.5*Q,jt=0|n[Qt+(X<<2)>>2],$=(n[l+(52*X|0)+32>>2]=jt)?(0|n[S>>2])+(28*(0|n[(0|n[$t>>2])+(X<<2)>>2])|0)|0:0,n[l+(52*X|0)+28>>2]=$,jt=0|n[B+(X<<2)>>2],$=(n[l+(52*X|0)+40>>2]=jt)?(0|n[j>>2])+(28*(0|n[(0|n[W>>2])+(X<<2)>>2])|0)|0:0,n[l+(52*X|0)+36>>2]=$,n[l+(52*X|0)+48>>2]=1,n[U+(X<<2)>>2]=n[F>>2],0<(0|X);)X=X+-1|0}while(0);if(Yt?(n[pt>>2]=n[a+944>>2],Z=v,B=a):(wi(0|n[pt>>2],0,g<<2|0),B=0|n[ot>>2],Z=0|n[B+704>>2]),g=0|n[Z+52>>2],0<(0|(n[ot+556>>2]=g)))for(v=0|n[S>>2],$=0|n[B+1036>>2],F=0|n[B+1132>>2],X=0|n[B+1032>>2];n[v+(28*(g=(pt=g)+-1|0)|0)>>2]=n[$+(g<<2)>>2],n[v+(28*g|0)+4>>2]=F+(n[X+(g<<2)>>2]<<2),n[v+(28*g|0)+8>>2]=0,D[v+(28*g|0)+12>>2]=0,n[v+(28*g|0)+16>>2]=0,n[v+(28*g|0)+20>>2]=1,(n[v+(28*g|0)+24>>2]=1)<(0|pt););if(g=0|n[Z+48>>2],0<(0|(n[ot+564>>2]=g))){W=B+1048|0,j=B+1040|0,B=B+1044|0;do if(Z=g,v=0|n[Je>>2],$=0|n[(0|n[W>>2])+((g=g+-1|0)<<2)>>2],0<(0|(n[v+(36*g|0)+4>>2]=$)))for(F=v+(36*g|0)|0,X=0;n[(0|n[F>>2])+(X<<2)>>2]=(0|n[S>>2])+(28*(0|n[(0|n[j>>2])+((0|n[(0|n[B>>2])+(g<<2)>>2])+X<<2)>>2])|0),(0|(X=X+1|0))!=(0|$););while(n[v+(36*g|0)+8>>2]=1<<$,n[v+(36*g|0)+24>>2]=1,(n[v+(36*g|0)+28>>2]=1)<(0|Z));rt=0|n[ot>>2],Z=0|n[rt+704>>2]}else rt=B;if(v=0|n[Z>>2],0<(0|(n[(l=ot+4|0)>>2]=v))){for(F=0|n[C>>2],j=0|n[Je>>2],U=0|n[rt+720>>2],X=0|n[rt+740>>2],B=0|n[rt+736>>2],W=0|n[rt+732>>2],g=0|n[Ot>>2],$=v;n[F+(12*($=(Ot=$)+-1|0)|0)>>2]=j+(36*(0|n[U+($<<2)>>2])|0),n[F+(12*$|0)+4>>2]=n[X+($<<2)>>2],n[F+(12*$|0)+8>>2]=n[B+($<<2)>>2],D[g+($<<2)>>2]=0|n[W+($<<2)>>2]?1:0,1<(0|Ot););for($=0|n[Jt>>2],g=0;Ot=0|n[j+(36*(0|n[U+((v=(Jt=v)+-1|0)<<2)>>2])|0)+8>>2],g=(n[$+(v<<2)>>2]=Ot)+g|0,1<(0|Jt););v=0|n[l>>2]}else g=0;if(n[ot+20>>2]=g,n[ot+12>>2]=v,g=0|n[Z+4>>2],0<(0|(n[ot+304>>2]=g))){B=rt+752|0,j=rt+764|0,W=rt+768|0,Z=rt+772|0,U=rt+776|0,X=rt+760|0;do switch(F=g,v=0|n[p>>2],n[v+((g=g+-1|0)<<5)>>2]=(0|n[Je>>2])+(36*(0|n[(0|n[B>>2])+(g<<2)>>2])|0),n[v+(g<<5)+4>>2]=n[(0|n[j>>2])+(g<<2)>>2],n[v+(g<<5)+8>>2]=n[(0|n[W>>2])+(g<<2)>>2],Jt=0|n[(0|n[Z>>2])+(g<<2)>>2],n[v+(g<<5)+12>>2]=Jt,$=0|n[(0|n[U>>2])+(g<<2)>>2],n[v+(g<<5)+16>>2]=$,n[v+(g<<5)+28>>2]=n[(0|n[X>>2])+(g<<2)>>2],0|Jt){case 0:n[(0|n[$e>>2])+(24*$|0)+20>>2]=g,n[v+(g<<5)+20>>2]=2,n[v+(g<<5)+24>>2]=2;break;case 1:n[(0|n[R>>2])+(12*$|0)+8>>2]=g,n[v+(g<<5)+20>>2]=3,n[v+(g<<5)+24>>2]=3;break;default:kt(0,937,Dt)}while(1<(0|F));pt=0|n[ot>>2],Yt=0|n[pt+704>>2]}else Yt=Z,pt=rt;if($=0|n[Yt+8>>2],g=(n[(l=ot+56|0)>>2]=$)+-1|0,U=0<(0|$))if(F=0|n[$e>>2],X=0|n[Je>>2],Z=0|n[pt+780>>2],B=0|n[pt+800>>2],W=0|n[pt+804>>2],j=0|n[pt+796>>2],1<(0|we[pt+4>>0]))for(v=0|n[pt+808>>2];n[F+(24*g|0)>>2]=X+(36*(0|n[Z+(g<<2)>>2])|0),n[F+(24*g|0)+4>>2]=n[B+(g<<2)>>2],n[F+(24*g|0)+8>>2]=n[W+(g<<2)>>2],n[F+(24*g|0)+16>>2]=n[j+(g<<2)>>2],n[F+(24*g|0)+12>>2]=n[v+(g<<2)>>2],0<(0|g);)g=g+-1|0;else for(;n[F+(24*g|0)>>2]=X+(36*(0|n[Z+(g<<2)>>2])|0),n[F+(24*g|0)+4>>2]=n[B+(g<<2)>>2],n[F+(24*g|0)+8>>2]=n[W+(g<<2)>>2],n[F+(24*g|0)+16>>2]=n[j+(g<<2)>>2],(n[F+(24*g|0)+12>>2]=0)<(0|g);)g=g+-1|0;if(v=0|n[Yt+12>>2],0<(0|(n[(W=ot+164|0)>>2]=v)))for(g=0|n[R>>2],F=0|n[Je>>2],X=0|n[pt+812>>2],Z=0|n[pt+828>>2],B=v;n[g+(12*(B=(Dt=B)+-1|0)|0)>>2]=F+(36*(0|n[X+(B<<2)>>2])|0),n[g+(12*B|0)+4>>2]=n[Z+(B<<2)>>2],1<(0|Dt););if(U){for(F=0|n[$e>>2],v=0|n[Me>>2],g=0;Me=0|n[8+(0|n[F+(24*($=($e=$)+-1|0)|0)>>2])>>2],g=(n[v+($<<2)>>2]=Me)+g|0,1<(0|$e););$=0|n[l>>2],v=0|n[W>>2]}else g=0;if(n[ot+72>>2]=g,n[ot+64>>2]=$,0<(0|v)){for(F=0|n[R>>2],$=0|n[Ce>>2],g=0;Ce=0|n[8+(0|n[F+(12*(v=($e=v)+-1|0)|0)>>2])>>2],g=(n[$+(v<<2)>>2]=Ce)+g|0,1<(0|$e););v=0|n[W>>2]}else g=0;if(n[ot+180>>2]=g,n[ot+172>>2]=v,jt=pt+704|0,g=0|n[Yt+16>>2],0<(0|(n[(U=ot+332|0)>>2]=g))){for(v=0|n[ir>>2],W=0|n[Je>>2],j=0|n[pt+852>>2],$=0|n[pt+876>>2],F=0|n[pt+880>>2],X=0|n[pt+892>>2],Z=0|n[pt+872>>2],B=g;n[v+(20*(B=(ir=B)+-1|0)|0)>>2]=W+(36*(0|n[j+(B<<2)>>2])|0),n[v+(20*B|0)+4>>2]=n[$+(B<<2)>>2],n[v+(20*B|0)+8>>2]=n[F+(B<<2)>>2],n[v+(20*B|0)+16>>2]=n[X+(B<<2)>>2],n[v+(20*B|0)+12>>2]=n[Z+(B<<2)>>2],1<(0|ir););for(v=0|n[fr>>2],$=0;fr=0|n[W+(36*(0|n[j+((g=(ir=g)+-1|0)<<2)>>2])|0)+8>>2],$=(n[v+(g<<2)>>2]=fr)+$|0,1<(0|ir););if(g=0|n[U>>2],n[ot+348>>2]=$,0<(0|(n[ot+340>>2]=g)))for(F=0|n[qe>>2],v=0|n[De>>2],$=g<<2;D[F+(($=(De=$)+-4|0)<<2)>>2]=1,D[F+((ir=De+-3|0)<<2)>>2]=1,D[F+((qe=De+-2|0)<<2)>>2]=1,D[F+((De=De+-1|0)<<2)>>2]=1,D[v+($<<2)>>2]=0,D[v+(ir<<2)>>2]=0,!(((D[v+(qe<<2)>>2]=0)|g)<=(D[v+(De<<2)>>2]=1));)g=g+-1|0}else n[ot+348>>2]=0,n[ot+340>>2]=g;if($t=0|n[Yt+72>>2],0<(0|(n[ot+480>>2]=$t))){g=0|n[I>>2],v=0|n[pt+1152>>2],$=0|n[pt+1156>>2],F=0|n[pt+1160>>2],X=0|n[pt+1164>>2],Z=0|n[pt+1148>>2],lt=pt+1172|0,Pt=pt+1168|0,ct=pt+1176|0,Xt=0;do if(B=0|n[v+(Xt<<2)>>2],n[g+(28*Xt|0)+4>>2]=B,n[g+(28*Xt|0)>>2]=n[$+(Xt<<2)>>2],De=0|n[F+(Xt<<2)>>2],n[g+(28*Xt|0)+16>>2]=De,W=0|n[X+(Xt<<2)>>2],n[g+(28*Xt|0)+20>>2]=W,n[g+(28*Xt|0)+24>>2]=De+1-W,W=(n[g+(28*Xt|0)+8>>2]=0)|n[Z+(Xt<<2)>>2],0<(0|B))for(j=0|n[g+(28*Xt|0)+12>>2],U=0|n[lt>>2],l=0|n[Pt>>2],rt=0|n[ct>>2],Qt=0;n[j+(Qt<<4)+4>>2]=n[U+((De=Qt+W|0)<<2)>>2],n[j+(Qt<<4)>>2]=n[l+(De<<2)>>2],n[j+(Qt<<4)+8>>2]=n[rt+(De<<2)>>2],(0|(Qt=Qt+1|(n[j+(Qt<<4)+12>>2]=0)))!=(0|B););while((0|(Xt=Xt+1|0))!=(0|$t))}v=0|n[Yt+80>>2],n[(l=ot+500|0)>>2]=v;do if(0<(0|v)){for(W=0|n[cr>>2],j=0|n[Je>>2],U=0|n[pt+1188>>2],g=0|n[pt+1200>>2],$=0|n[pt+1204>>2],F=0|n[pt+1212>>2],X=0|n[pt+1216>>2],Z=0|n[pt+1208>>2],B=0|n[pt+1220>>2];n[W+(24*(v=(Je=v)+-1|0)|0)>>2]=j+(36*(0|n[U+(v<<2)>>2])|0),n[W+(24*v|0)+4>>2]=n[g+(v<<2)>>2],n[W+(24*v|0)+8>>2]=n[$+(v<<2)>>2],n[W+(24*v|0)+12>>2]=n[F+(v<<2)>>2],cr=0|n[Z+(v<<2)>>2],n[W+(24*v|0)+16>>2]=X+(cr<<2),n[W+(24*v|0)+20>>2]=B+(cr<<1),1<(0|Je););if((0|(v=0|n[l>>2]))<=0){g=0;break}for($=0|n[Ar>>2],g=0;Ar=0|n[j+(36*(0|n[U+((v=(Je=v)+-1|0)<<2)>>2])|0)+8>>2],g=(n[$+(v<<2)>>2]=Ar)+g|0,1<(0|Je););v=0|n[l>>2]}else g=0;while(0);n[ot+516>>2]=g,n[ot+508>>2]=v;do if(3<(0|we[A>>0])){if((255&(g=0|ft[pt+4>>0]))<4)break;if(v=0|n[Yt+120>>2],0<(0|(n[ot+572>>2]=v)))for(j=0|n[ot+576>>2],$=0|n[nr>>2],F=0|n[pt+1112>>2],X=0|n[pt+1124>>2],Z=0|n[pt+1116>>2],B=0|n[pt+1128>>2],W=0|n[pt+1120>>2];n[j+(20*(v=(xe=v)+-1|0)|0)>>2]=$+(52*(0|n[F+(v<<2)>>2])|0),nr=0|n[Z+(v<<2)>>2],n[j+(20*v|0)+4>>2]=X+(nr<<2),n[j+(20*v|0)+8>>2]=B+(nr<<2),n[j+(20*v|0)+12>>2]=n[W+(v<<2)>>2],1<(0|xe););if(v=0|n[Yt+100>>2],0<(0|(n[ot+580>>2]=v)))for($=0|n[ot+584>>2],F=0|n[pt+1056>>2],X=0|n[pt+1132>>2],Z=0|n[pt+1052>>2],B=0|n[pt+1060>>2];n[$+(28*(v=(xe=v)+-1|0)|0)>>2]=n[F+(v<<2)>>2],n[$+(28*v|0)+4>>2]=X+(n[Z+(v<<2)>>2]<<2),n[$+(28*v|0)+8>>2]=n[B+(v<<2)>>2],n[$+(28*v|0)+12>>2]=0,D[$+(28*v|0)+16>>2]=0,n[$+(28*v|0)+20>>2]=1,(n[$+(28*v|0)+24>>2]=1)<(0|xe););if(v=0|n[Yt+104>>2],0<(0|(n[ot+588>>2]=v))){U=ot+592|0,rt=ot+584|0,j=pt+1064|0,lt=pt+1068|0,B=pt+1080|0,l=ot+576|0,W=pt+1108|0,Z=pt+1076|0;do if(X=v,g=0|n[U>>2],n[g+(48*(v=v+-1|0)|0)>>2]=(0|n[rt>>2])+(28*(0|n[(0|n[j>>2])+(v<<2)>>2])|0),n[g+(48*v|0)+4>>2]=n[(0|n[lt>>2])+(v<<2)>>2],n[g+(48*v|0)+8>>2]=0,n[g+(48*v|0)+28>>2]=1,n[g+(48*v|0)+32>>2]=1,F=0|n[(0|n[B>>2])+(v<<2)>>2],0<(0|(n[g+(48*v|0)+36>>2]=F)))for(g=g+(48*v|0)+40|0,$=0;n[(0|n[g>>2])+($<<2)>>2]=(0|n[l>>2])+(20*(0|n[(0|n[W>>2])+((0|n[(0|n[Z>>2])+(v<<2)>>2])+$<<2)>>2])|0),(0|($=$+1|0))!=(0|F););while(1<(0|X));j=0|n[ot>>2],g=0|ft[j+4>>0]}else j=pt;if(W=0|n[Oe>>2],v=0|n[W+108>>2],(255&g)<4)break;if(0<(0|(n[ot+596>>2]=v)))for($=0|n[ot+600>>2],F=0|n[a+1084>>2],X=0|n[a+1092>>2],Z=0|n[ot+592>>2],B=0|n[a+1088>>2],g=v;n[$+(12*(g=(Oe=g)+-1|0)|0)>>2]=n[F+(g<<2)>>2],n[$+(12*g|0)+4>>2]=n[X+(g<<2)>>2],n[$+(12*g|0)+8>>2]=Z+(48*(0|n[B+(g<<2)>>2])|0),1<(0|Oe););if(g=0|n[W+112>>2],0<(0|(n[ot+604>>2]=g)))for($=0|n[ot+608>>2],F=0|n[a+1096>>2],X=0|n[a+1104>>2],Z=0|n[ot+592>>2],v=0|n[a+1100>>2];n[$+(12*(g=(a=g)+-1|0)|0)>>2]=n[F+(g<<2)>>2],n[$+(12*g|0)+4>>2]=n[X+(g<<2)>>2],n[$+(12*g|0)+8>>2]=Z+(48*(0|n[v+(g<<2)>>2])|0),1<(0|a););if($=0|n[j+1132>>2],F=0|n[20+(0|n[j+704>>2])>>2],X=ot+612|0,n[ot+616>>2]=n[j+972>>2],g=0|n[j+964>>2],n[X>>2]=g,(0|F)<=0||(n[g>>2]=$+(n[n[(v=j+968|0)>>2]>>2]<<2),(0|F)==1))break;for(g=1;n[(0|n[X>>2])+(g<<2)>>2]=$+(n[(0|n[v>>2])+(g<<2)>>2]<<2),(0|(g=g+1|0))!=(0|F););}else{if((0|n[Yt+20>>2])<=0)break;$t=pt+948|0,Yt=pt+952|0,Pt=ot+612|0,Xt=pt+1032|0,Qt=pt+1036|0,rt=pt+1132|0,lt=ot+616|0,ct=0;do{if(g=0|n[(0|n[$t>>2])+(ct<<2)>>2],U=(a=0|n[(0|n[Yt>>2])+(ct<<2)>>2])+g|0,l=0|n[(0|n[Pt>>2])+(ct<<2)>>2],0<(0|a)){W=0|n[Xt>>2],j=0|n[Qt>>2],B=g,g=0;do if(v=0|n[W+(B<<2)>>2],Z=(a=0|n[j+(B<<2)>>2])+v|0,0<(0|a)){X=0|n[rt>>2];do{Q=+D[X+(v<<2)>>2],$=l+(g<<2)|0;t:do if(0<(0|g))for(F=l;;){if(+D[F>>2]==Q)break t;if($>>>0<=(F=F+4|0)>>>0){xe=146;break}}else xe=146;while(0)}while((0|xe)==146&&(xe=0,D[$>>2]=Q,g=g+1|0),(0|(v=v+1|0))<(0|Z))}while((0|(B=B+1|0))<(0|U))}else g=0;(function(Qe,Xe){Qe|=0;var er=0,Ae=0,ri=0,ms=0,bv=0,gs=0,Pi=0,kr=0,Ah=0,B0=0;G=(B0=G)+208|0,ri=(Xe|=0)<<2,n[(gs=kr=(Pi=B0)+192|0)>>2]=1,n[gs+4>>2]=0;t:do if(0|ri){for(n[Pi+4>>2]=4,n[Pi>>2]=4,er=Xe=4,Ae=2;Xe=Xe+4+er|0,(n[Pi+(Ae<<2)>>2]=Xe)>>>0<ri>>>0;)gs=er,er=Xe,Ae=Ae+1|0,Xe=gs;if(Qe>>>0<(ms=Qe+ri+-4|0)>>>0){bv=ms,gs=4+kr|0,er=Qe,Ae=Xe=1;do do if((3&Xe|0)!=3){if((0|n[Pi+((ri=Ae+-1|0)<<2)>>2])>>>0<(bv-er|0)>>>0?Ys(er,Ae,Pi):cs(er,Xe,0|n[gs>>2],Ae,0,Pi),(0|Ae)==1){ds(kr,1),Ae=0;break}ds(kr,ri),Ae=1;break}while(Ys(er,Ae,Pi),fs(kr,2),Ae=Ae+2|0,0);while(Xe=1|n[kr>>2],n[kr>>2]=Xe,(er=er+4|0)>>>0<ms>>>0);ri=0|n[(ms=gs)>>2]}else ms=4+kr|0,ri=0,er=Qe,Ae=Xe=1;for(cs(er,Xe,ri,Ae,0,Pi),ri=4+kr|0;;){if((0|Ae)==1&(0|Xe)==1){if(!(0|n[ri>>2]))break t;Ah=21}else(0|Ae)<2?Ah=21:(ds(kr,2),Qe=Ae+-2|0,n[kr>>2]=7^n[kr>>2],fs(kr,1),cs(er+(0-(0|n[Pi+(Qe<<2)>>2]))+-4|0,0|n[kr>>2],0|n[ms>>2],Ae+-1|0,1,Pi),ds(kr,1),Xe=1|n[kr>>2],n[kr>>2]=Xe,cs(er=er+-4|0,Xe,0|n[ms>>2],Qe,1,Pi),Ae=Qe);(0|Ah)==21&&(Qe=(Ah=0)|ea(kr),fs(kr,Qe),Xe=0|n[kr>>2],er=er+-4|0,Ae=Qe+Ae|0)}}while(0);G=B0})(l,g),n[(0|n[lt>>2])+(ct<<2)>>2]=g,ct=ct+1|0}while((0|ct)<(0|n[20+(0|n[jt>>2])>>2]))}while(0);return ei(ot),G=Ur,0|ot}function oe(a,l){return 0|((a=+D[(a|=0)>>2])<(l=+D[(l|=0)>>2])?-1:l<a&1)}function ge(a){var l=0|ft[(a|=0)+4>>0];n[a+704>>2]=a+(0|n[a+64>>2]),n[a+708>>2]=a+(0|n[a+68>>2]),n[a+712>>2]=a+(0|n[a+72>>2]),n[a+716>>2]=a+(0|n[a+76>>2]),n[a+720>>2]=a+(0|n[a+80>>2]),n[a+724>>2]=a+(0|n[a+84>>2]),n[a+728>>2]=a+(0|n[a+88>>2]),n[a+732>>2]=a+(0|n[a+92>>2]),n[a+736>>2]=a+(0|n[a+96>>2]),n[a+740>>2]=a+(0|n[a+100>>2]),n[a+744>>2]=a+(0|n[a+104>>2]),n[a+748>>2]=a+(0|n[a+108>>2]),n[a+752>>2]=a+(0|n[a+112>>2]),n[a+756>>2]=a+(0|n[a+116>>2]),n[a+760>>2]=a+(0|n[a+120>>2]),n[a+764>>2]=a+(0|n[a+124>>2]),n[a+768>>2]=a+(0|n[a+128>>2]),n[a+772>>2]=a+(0|n[a+132>>2]),n[a+776>>2]=a+(0|n[a+136>>2]),n[a+780>>2]=a+(0|n[a+140>>2]),n[a+784>>2]=a+(0|n[a+144>>2]),n[a+788>>2]=a+(0|n[a+148>>2]),n[a+796>>2]=a+(0|n[a+152>>2]),n[a+800>>2]=a+(0|n[a+156>>2]),n[a+804>>2]=a+(0|n[a+160>>2]),n[a+812>>2]=a+(0|n[a+164>>2]),n[a+816>>2]=a+(0|n[a+168>>2]),n[a+820>>2]=a+(0|n[a+172>>2]),n[a+828>>2]=a+(0|n[a+176>>2]),n[a+832>>2]=a+(0|n[a+180>>2]),n[a+836>>2]=a+(0|n[a+184>>2]),n[a+840>>2]=a+(0|n[a+188>>2]),n[a+844>>2]=a+(0|n[a+192>>2]),n[a+848>>2]=a+(0|n[a+196>>2]),n[a+852>>2]=a+(0|n[a+200>>2]),n[a+856>>2]=a+(0|n[a+204>>2]),n[a+860>>2]=a+(0|n[a+208>>2]),n[a+868>>2]=a+(0|n[a+212>>2]),n[a+872>>2]=a+(0|n[a+216>>2]),n[a+876>>2]=a+(0|n[a+220>>2]),n[a+880>>2]=a+(0|n[a+224>>2]),n[a+884>>2]=a+(0|n[a+228>>2]),n[a+888>>2]=a+(0|n[a+232>>2]),n[a+892>>2]=a+(0|n[a+236>>2]),n[a+896>>2]=a+(0|n[a+240>>2]),n[a+900>>2]=a+(0|n[a+244>>2]),n[a+904>>2]=a+(0|n[a+248>>2]),n[a+908>>2]=a+(0|n[a+252>>2]),n[a+912>>2]=a+(0|n[a+256>>2]),n[a+916>>2]=a+(0|n[a+260>>2]),n[a+920>>2]=a+(0|n[a+264>>2]),n[a+924>>2]=a+(0|n[a+268>>2]),n[a+928>>2]=a+(0|n[a+272>>2]),n[a+932>>2]=a+(0|n[a+276>>2]),n[a+936>>2]=a+(0|n[a+280>>2]),n[a+940>>2]=a+(0|n[a+284>>2]),n[a+948>>2]=a+(0|n[a+288>>2]),n[a+952>>2]=a+(0|n[a+292>>2]),n[a+976>>2]=a+(0|n[a+296>>2]),n[a+980>>2]=a+(0|n[a+300>>2]),n[a+984>>2]=a+(0|n[a+304>>2]),n[a+988>>2]=a+(0|n[a+308>>2]),n[a+992>>2]=a+(0|n[a+312>>2]),n[a+996>>2]=a+(0|n[a+316>>2]),n[a+1e3>>2]=a+(0|n[a+320>>2]),n[a+1004>>2]=a+(0|n[a+324>>2]),n[a+1008>>2]=a+(0|n[a+328>>2]),n[a+1012>>2]=a+(0|n[a+332>>2]),n[a+1016>>2]=a+(0|n[a+336>>2]),n[a+1020>>2]=a+(0|n[a+340>>2]),n[a+1024>>2]=a+(0|n[a+344>>2]),n[a+1028>>2]=a+(0|n[a+348>>2]),n[a+1040>>2]=a+(0|n[a+352>>2]),n[a+1044>>2]=a+(0|n[a+356>>2]),n[a+1048>>2]=a+(0|n[a+360>>2]),n[a+1032>>2]=a+(0|n[a+364>>2]),n[a+1036>>2]=a+(0|n[a+368>>2]),n[a+1132>>2]=a+(0|n[a+372>>2]),n[a+1136>>2]=a+(0|n[a+376>>2]),n[a+1140>>2]=a+(0|n[a+380>>2]),n[a+1144>>2]=a+(0|n[a+384>>2]),n[a+1148>>2]=a+(0|n[a+388>>2]),n[a+1152>>2]=a+(0|n[a+392>>2]),n[a+1156>>2]=a+(0|n[a+396>>2]),n[a+1160>>2]=a+(0|n[a+400>>2]),n[a+1164>>2]=a+(0|n[a+404>>2]),n[a+1168>>2]=a+(0|n[a+408>>2]),n[a+1172>>2]=a+(0|n[a+412>>2]),n[a+1176>>2]=a+(0|n[a+416>>2]),n[a+1180>>2]=a+(0|n[a+420>>2]),n[a+1184>>2]=a+(0|n[a+424>>2]),n[a+1188>>2]=a+(0|n[a+428>>2]),n[a+1192>>2]=a+(0|n[a+432>>2]),n[a+1196>>2]=a+(0|n[a+436>>2]),n[a+1200>>2]=a+(0|n[a+440>>2]),n[a+1204>>2]=a+(0|n[a+444>>2]),n[a+1208>>2]=a+(0|n[a+448>>2]),n[a+1212>>2]=a+(0|n[a+452>>2]),n[a+1216>>2]=a+(0|n[a+456>>2]),n[a+1220>>2]=a+(0|n[a+460>>2]),n[a+1224>>2]=a+(0|n[a+464>>2]),(255&l)<=1||(n[a+808>>2]=a+(0|n[a+468>>2]),(255&l)<=3||(n[a+964>>2]=a+(0|n[a+472>>2]),n[a+968>>2]=a+(0|n[a+476>>2]),n[a+972>>2]=a+(0|n[a+480>>2]),n[a+792>>2]=a+(0|n[a+484>>2]),n[a+824>>2]=a+(0|n[a+488>>2]),n[a+864>>2]=a+(0|n[a+492>>2]),n[a+1228>>2]=a+(0|n[a+496>>2]),n[a+1232>>2]=a+(0|n[a+500>>2]),n[a+1236>>2]=a+(0|n[a+504>>2]),n[a+1240>>2]=a+(0|n[a+508>>2]),n[a+1244>>2]=a+(0|n[a+512>>2]),n[a+1248>>2]=a+(0|n[a+516>>2]),n[a+944>>2]=a+(0|n[a+520>>2]),n[a+956>>2]=a+(0|n[a+524>>2]),n[a+960>>2]=a+(0|n[a+528>>2]),n[a+1052>>2]=a+(0|n[a+532>>2]),n[a+1056>>2]=a+(0|n[a+536>>2]),n[a+1060>>2]=a+(0|n[a+540>>2]),n[a+1064>>2]=a+(0|n[a+544>>2]),n[a+1068>>2]=a+(0|n[a+548>>2]),n[a+1072>>2]=a+(0|n[a+552>>2]),n[a+1076>>2]=a+(0|n[a+556>>2]),n[a+1080>>2]=a+(0|n[a+560>>2]),n[a+1084>>2]=a+(0|n[a+564>>2]),n[a+1088>>2]=a+(0|n[a+568>>2]),n[a+1092>>2]=a+(0|n[a+572>>2]),n[a+1096>>2]=a+(0|n[a+576>>2]),n[a+1100>>2]=a+(0|n[a+580>>2]),n[a+1104>>2]=a+(0|n[a+584>>2]),n[a+1108>>2]=a+(0|n[a+588>>2]),n[a+1112>>2]=a+(0|n[a+592>>2]),n[a+1116>>2]=a+(0|n[a+596>>2]),n[a+1120>>2]=a+(0|n[a+600>>2]),n[a+1124>>2]=a+(0|n[a+604>>2]),n[a+1128>>2]=a+(0|n[a+608>>2])))}function Ee(a){a|=0;var l,v,S,C=0,p=0,R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=G;if(G=G+32|0,p=W+24|0,n[(B=W)>>2]=4,n[B+4>>2]=2,n[B+8>>2]=2,function(j,U){j|=0,U|=0;var rt=0,lt=0;G=(j=G)+272|0,rt=j+16|0,n[(lt=j)>>2]=U,Ki(rt,993,lt),function(Q){Q|=0;var ct=0,Pt=0;G=(ct=G)+16|0,n[(Pt=ct)>>2]=Q,function(Xt,Qt,$t){Xt|=0,Qt|=0,$t|=0,G=(Qt=G)+16|0,n[(Xt=Qt)>>2]=$t,tn(496,2518,Xt),G=Qt}(0,0,Pt),G=ct}(rt),G=j}(0,B),0|ta(a))return kt(0,1038,W+16|0),G=W,(B=0)|B;if(4<(255&(C=0|ft[(R=a+4|0)>>0])))return n[p>>2]=4,n[p+4>>2]=255&C,kt(0,1101,p),G=W,(B=0)|B;if(0|ft[(C=a+5|0)>>0]?(je(R,1),_t(a+64|0,4,160),ft[C>>0]=0,ge(a),C=0|ft[R>>0],_t(0|n[(p=a+704|0)>>2],4,32),je(0|n[(B=a+708|0)>>2],4),je(4+(0|n[B>>2])|0,4),je(8+(0|n[B>>2])|0,4),je(12+(0|n[B>>2])|0,4),je(16+(0|n[B>>2])|0,4),je(20+(0|n[B>>2])|0,1),_t(0|n[a+720>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+724>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+728>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+732>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+736>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+740>>2],4,0|n[n[p>>2]>>2]),_t(0|n[a+752>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+756>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+760>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+764>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+768>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+772>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+776>>2],4,0|n[4+(0|n[p>>2])>>2]),_t(0|n[a+780>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+784>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+788>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+796>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+800>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+804>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+812>>2],4,0|n[12+(0|n[p>>2])>>2]),_t(0|n[a+816>>2],4,0|n[12+(0|n[p>>2])>>2]),_t(0|n[a+820>>2],4,0|n[12+(0|n[p>>2])>>2]),_t(0|n[a+828>>2],4,0|n[12+(0|n[p>>2])>>2]),_t(0|n[a+852>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+856>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+860>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+868>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+872>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+876>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+880>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+884>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+888>>2],1,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+892>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+896>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+900>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+904>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+908>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+912>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+924>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+928>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+932>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+936>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+940>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+948>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+952>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+976>>2],4,0|n[24+(0|n[p>>2])>>2]),_t(0|n[a+980>>2],4,0|n[28+(0|n[p>>2])>>2]),_t(0|n[a+984>>2],4,0|n[28+(0|n[p>>2])>>2]),_t(0|n[a+988>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+992>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+996>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+1e3>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+1004>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+1008>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+1012>>2],4,0|n[32+(0|n[p>>2])>>2]),_t(0|n[a+1016>>2],4,0|n[36+(0|n[p>>2])>>2]),_t(0|n[a+1020>>2],4,0|n[36+(0|n[p>>2])>>2]),_t(0|n[a+1024>>2],4,0|n[36+(0|n[p>>2])>>2]),_t(0|n[a+1028>>2],4,0|n[40+(0|n[p>>2])>>2]),_t(0|n[a+1040>>2],4,0|n[44+(0|n[p>>2])>>2]),_t(0|n[a+1044>>2],4,0|n[48+(0|n[p>>2])>>2]),_t(0|n[a+1048>>2],4,0|n[48+(0|n[p>>2])>>2]),_t(0|n[a+1032>>2],4,0|n[52+(0|n[p>>2])>>2]),_t(0|n[a+1036>>2],4,0|n[52+(0|n[p>>2])>>2]),_t(0|n[a+1132>>2],4,0|n[56+(0|n[p>>2])>>2]),_t(0|n[a+1136>>2],4,0|n[60+(0|n[p>>2])>>2]),_t(0|n[a+1140>>2],2,0|n[64+(0|n[p>>2])>>2]),_t(0|n[a+1144>>2],4,0|n[68+(0|n[p>>2])>>2]),_t(0|n[a+1148>>2],4,0|n[72+(0|n[p>>2])>>2]),_t(0|n[a+1152>>2],4,0|n[72+(0|n[p>>2])>>2]),_t(0|n[a+1156>>2],4,0|n[72+(0|n[p>>2])>>2]),_t(0|n[a+1160>>2],4,0|n[72+(0|n[p>>2])>>2]),_t(0|n[a+1164>>2],4,0|n[72+(0|n[p>>2])>>2]),_t(0|n[a+1168>>2],4,0|n[76+(0|n[p>>2])>>2]),_t(0|n[a+1172>>2],4,0|n[76+(0|n[p>>2])>>2]),_t(0|n[a+1176>>2],4,0|n[76+(0|n[p>>2])>>2]),_t(0|n[a+1188>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1192>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1196>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1200>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1204>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1208>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1212>>2],4,0|n[80+(0|n[p>>2])>>2]),_t(0|n[a+1216>>2],4,0|n[84+(0|n[p>>2])>>2]),_t(0|n[a+1220>>2],2,0|n[84+(0|n[p>>2])>>2]),_t(0|n[a+1224>>2],4,0|n[88+(0|n[p>>2])>>2]),1<(255&C)&&(_t(0|n[a+808>>2],4,0|n[8+(0|n[p>>2])>>2]),3<(255&C))&&(_t(0|n[a+968>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+972>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+792>>2],4,0|n[8+(0|n[p>>2])>>2]),_t(0|n[a+824>>2],4,0|n[12+(0|n[p>>2])>>2]),_t(0|n[a+864>>2],4,0|n[16+(0|n[p>>2])>>2]),_t(0|n[a+1228>>2],4,0|n[92+(0|n[p>>2])>>2]),_t(0|n[a+1232>>2],4,0|n[92+(0|n[p>>2])>>2]),_t(0|n[a+1236>>2],4,0|n[92+(0|n[p>>2])>>2]),_t(0|n[a+1240>>2],4,0|n[96+(0|n[p>>2])>>2]),_t(0|n[a+1244>>2],4,0|n[96+(0|n[p>>2])>>2]),_t(0|n[a+1248>>2],4,0|n[96+(0|n[p>>2])>>2]),_t(0|n[a+944>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+956>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+960>>2],4,0|n[20+(0|n[p>>2])>>2]),_t(0|n[a+1052>>2],4,0|n[100+(0|n[p>>2])>>2]),_t(0|n[a+1056>>2],4,0|n[100+(0|n[p>>2])>>2]),_t(0|n[a+1060>>2],4,0|n[100+(0|n[p>>2])>>2]),_t(0|n[a+1064>>2],4,0|n[104+(0|n[p>>2])>>2]),_t(0|n[a+1068>>2],4,0|n[104+(0|n[p>>2])>>2]),_t(0|n[a+1072>>2],4,0|n[104+(0|n[p>>2])>>2]),_t(0|n[a+1076>>2],4,0|n[104+(0|n[p>>2])>>2]),_t(0|n[a+1080>>2],4,0|n[104+(0|n[p>>2])>>2]),_t(0|n[a+1084>>2],4,0|n[108+(0|n[p>>2])>>2]),_t(0|n[a+1088>>2],4,0|n[108+(0|n[p>>2])>>2]),_t(0|n[a+1092>>2],4,0|n[108+(0|n[p>>2])>>2]),_t(0|n[a+1096>>2],4,0|n[112+(0|n[p>>2])>>2]),_t(0|n[a+1100>>2],4,0|n[112+(0|n[p>>2])>>2]),_t(0|n[a+1104>>2],4,0|n[112+(0|n[p>>2])>>2]),_t(0|n[a+1108>>2],4,0|n[116+(0|n[p>>2])>>2]),_t(0|n[a+1112>>2],4,0|n[120+(0|n[p>>2])>>2]),_t(0|n[a+1116>>2],4,0|n[120+(0|n[p>>2])>>2]),_t(0|n[a+1120>>2],4,0|n[120+(0|n[p>>2])>>2]),_t(0|n[a+1124>>2],4,0|n[124+(0|n[p>>2])>>2]),_t(0|n[a+1128>>2],4,0|n[124+(0|n[p>>2])>>2]))):(ge(a),p=a+704|0),0|n[905]||(n[905]=1),C=0|n[p>>2],0<(0|n[C>>2]))for(R=a+716|0,I=a+712|0,A=0;n[(0|n[I>>2])+(A<<2)>>2]=(0|n[R>>2])+(A<<6),C=0|n[p>>2],(0|(A=A+1|0))<(0|n[C>>2]););if(0<(0|n[C+4>>2]))for(R=a+748|0,I=a+744|0,A=0;n[(0|n[I>>2])+(A<<2)>>2]=(0|n[R>>2])+(A<<6),C=0|n[p>>2],(0|(A=A+1|0))<(0|n[C+4>>2]););if(0<(0|n[C+16>>2]))for(g=a+848|0,$=a+832|0,Z=a+1136|0,S=a+896|0,X=a+836|0,F=a+1140|0,l=a+900|0,v=a+840|0,R=a+1144|0,I=a+908|0,A=a+844|0,B=0;n[(0|n[$>>2])+(B<<2)>>2]=(0|n[g>>2])+(B<<6),n[(0|n[X>>2])+(B<<2)>>2]=(0|n[Z>>2])+(n[(0|n[S>>2])+(B<<2)>>2]<<2),n[(0|n[v>>2])+(B<<2)>>2]=(0|n[F>>2])+(n[(0|n[l>>2])+(B<<2)>>2]<<1),n[(0|n[A>>2])+(B<<2)>>2]=(0|n[R>>2])+(n[(0|n[I>>2])+(B<<2)>>2]<<2),C=0|n[p>>2],(0|(B=B+1|0))<(0|n[C+16>>2]););if(0<(0|n[C+20>>2]))for(R=a+920|0,I=a+916|0,A=0;n[(0|n[I>>2])+(A<<2)>>2]=(0|n[R>>2])+(A<<6),C=0|n[p>>2],(0|(A=A+1|0))<(0|n[C+20>>2]););if(0<(0|n[C+80>>2]))for(R=a+1184|0,I=a+1180|0,A=0;n[(0|n[I>>2])+(A<<2)>>2]=(0|n[R>>2])+(A<<6),C=0|n[p>>2],(0|(A=A+1|0))<(0|n[C+80>>2]););if(1&ft[20+(0|n[a+708>>2])>>0]||(0|(F=0|n[C+16>>2]))<=0)return G=W,0|(B=a);C=0|n[a+1140>>2],p=0|n[a+900>>2],R=0|n[a+904>>2],A=0;do if(I=C+(n[p+(A<<2)>>2]<<1)|0,$=(B=0|n[R+(A<<2)>>2])+-1|0,1<(0|B))for(g=0;Z=0|tr[(X=I+(g<<1)|0)>>1],tr[X>>1]=0|tr[(B=I+(g+2<<1)|0)>>1],tr[B>>1]=Z,(0|(g=g+3|0))<(0|$););while((0|(A=A+1|0))!=(0|F));p=0|n[a+1136>>2],R=0|n[a+896>>2],I=0|n[a+892>>2],g=0;do if(A=(C=p+(n[R+(g<<2)>>2]<<2)|0)+((B=0|n[I+(g<<2)>>2])<<1<<2)|0,0<(0|B))for(C=C+4|0;D[C>>2]=1-+D[C>>2],(C=C+8|0)>>>0<A>>>0;);while((0|(g=g+1|0))!=(0|F));return G=W,0|a}function be(a){var l=G;return G=G+16|0,0|ta(a|=0)?(kt(0,1210,l),G=l,(a=0)|a):(a=0|we[a+4>>0],G=l,0|a)}function Se(a){var l,v,S,C,$=0,g=0,p=0,R=0,I=0,A=0,g=(a|=0)+64|0,$=a+144|0;if(Lt(g,0|n[a+88>>2],0|n[a+148>>2],0|n[$>>2]),Le(g,0|n[a+92>>2],0|n[a+152>>2],0|n[796+(0|n[a>>2])>>2],2,0|n[$>>2]),!((0|we[4+(0|n[a>>2])>>0])<4||(Lt(g,0|n[a+96>>2],0|n[(C=a+120|0)>>2],0|n[$>>2]),Lt(g,0|n[a+100>>2],0|n[(p=a+124|0)>>2],0|n[$>>2]),Lt(g,0|n[a+104>>2],0|n[(R=a+128|0)>>2],0|n[$>>2]),Lt(g,0|n[a+108>>2],0|n[(l=a+132|0)>>2],0|n[$>>2]),Lt(g,0|n[a+112>>2],0|n[(v=a+136|0)>>2],0|n[$>>2]),Lt(g,0|n[a+116>>2],0|n[(S=a+140|0)>>2],0|n[$>>2]),$=0|n[a+156>>2],g=0|n[C>>2],p=0|n[p>>2],R=0|n[R>>2],(0|(C=0|n[a+56>>2]))<=0))){for(A=I=0;n[$+(I<<2)>>2]=n[g+(A<<2)>>2],n[$+((1|I)<<2)>>2]=n[p+(A<<2)>>2],n[$+((2|I)<<2)>>2]=n[R+(A<<2)>>2],(0|(A=A+1|0))!=(0|C);)I=I+4|0;for(A=0|n[a+160>>2],I=0|n[l>>2],R=0|n[v>>2],$=0|n[S>>2],p=g=0;n[A+(g<<2)>>2]=n[I+(p<<2)>>2],n[A+((1|g)<<2)>>2]=n[R+(p<<2)>>2],n[A+((2|g)<<2)>>2]=n[$+(p<<2)>>2],(0|(p=p+1|0))!=(0|C);)g=g+4|0}}function ee(a){var l,v,S,C,$=0,g=0,p=0,R=0,I=0,A=0,g=(a|=0)+172|0,$=a+264|0;if(Lt(g,0|n[a+196>>2],0|n[a+268>>2],0|n[$>>2]),Lt(g,0|n[a+200>>2],0|n[a+284>>2],0|n[$>>2]),Lt(g,0|n[a+204>>2],0|n[a+276>>2],0|n[$>>2]),Lt(g,0|n[a+208>>2],0|n[a+280>>2],0|n[$>>2]),Lt(g,0|n[a+212>>2],0|n[a+272>>2],0|n[$>>2]),!((0|we[4+(0|n[a>>2])>>0])<4||(Lt(g,0|n[a+216>>2],0|n[(C=a+240|0)>>2],0|n[$>>2]),Lt(g,0|n[a+220>>2],0|n[(p=a+244|0)>>2],0|n[$>>2]),Lt(g,0|n[a+224>>2],0|n[(R=a+248|0)>>2],0|n[$>>2]),Lt(g,0|n[a+228>>2],0|n[(l=a+252|0)>>2],0|n[$>>2]),Lt(g,0|n[a+232>>2],0|n[(v=a+256|0)>>2],0|n[$>>2]),Lt(g,0|n[a+236>>2],0|n[(S=a+260|0)>>2],0|n[$>>2]),$=0|n[a+296>>2],g=0|n[C>>2],p=0|n[p>>2],R=0|n[R>>2],(0|(C=0|n[a+164>>2]))<=0))){for(A=I=0;n[$+(I<<2)>>2]=n[g+(A<<2)>>2],n[$+((1|I)<<2)>>2]=n[p+(A<<2)>>2],n[$+((2|I)<<2)>>2]=n[R+(A<<2)>>2],(0|(A=A+1|0))!=(0|C);)I=I+4|0;for(A=0|n[a+300>>2],I=0|n[l>>2],R=0|n[v>>2],$=0|n[S>>2],p=g=0;n[A+(g<<2)>>2]=n[I+(p<<2)>>2],n[A+((1|g)<<2)>>2]=n[R+(p<<2)>>2],n[A+((2|g)<<2)>>2]=n[$+(p<<2)>>2],(0|(p=p+1|0))!=(0|C);)g=g+4|0}}function de(a){var l,v,S,C,$=0,g=0,p=0,R=0,I=0,A=0,g=(a|=0)+340|0,$=a+424|0;if(Lt(g,0|n[a+364>>2],0|n[a+448>>2],0|n[$>>2]),ie(g,0|n[a+368>>2],0|n[a+440>>2],0|n[$>>2]),Le(g,0|n[a+372>>2],0|n[a+444>>2],0|n[892+(0|n[a>>2])>>2],2,0|n[$>>2]),!((0|we[4+(0|n[a>>2])>>0])<4||(Lt(g,0|n[a+376>>2],0|n[(C=a+400|0)>>2],0|n[$>>2]),Lt(g,0|n[a+380>>2],0|n[(p=a+404|0)>>2],0|n[$>>2]),Lt(g,0|n[a+384>>2],0|n[(R=a+408|0)>>2],0|n[$>>2]),Lt(g,0|n[a+388>>2],0|n[(l=a+412|0)>>2],0|n[$>>2]),Lt(g,0|n[a+392>>2],0|n[(v=a+416|0)>>2],0|n[$>>2]),Lt(g,0|n[a+396>>2],0|n[(S=a+420|0)>>2],0|n[$>>2]),$=0|n[a+452>>2],g=0|n[C>>2],p=0|n[p>>2],R=0|n[R>>2],(0|(C=0|n[a+332>>2]))<=0))){for(A=I=0;n[$+(I<<2)>>2]=n[g+(A<<2)>>2],n[$+((1|I)<<2)>>2]=n[p+(A<<2)>>2],n[$+((2|I)<<2)>>2]=n[R+(A<<2)>>2],(0|(A=A+1|0))!=(0|C);)I=I+4|0;for(A=0|n[a+456>>2],I=0|n[l>>2],R=0|n[v>>2],$=0|n[S>>2],p=g=0;n[A+(g<<2)>>2]=n[I+(p<<2)>>2],n[A+((1|g)<<2)>>2]=n[R+(p<<2)>>2],n[A+((2|g)<<2)>>2]=n[$+(p<<2)>>2],(0|(p=p+1|0))!=(0|C);)g=g+4|0}}function Lt(a,l,v,S){l|=0,v|=0,S|=0;var C,p,R,I=0,A=0,g=0,$=0,F=0,X=0;if(0<(0|(I=0|n[(a|=0)+8>>2])))for(A=0|n[a+20>>2],g=0|n[a+12>>2],$=0;D[g+($<<2)>>2]=+D[l+($<<2)>>2]*+D[A+($<<2)>>2],(0|($=$+1|0))!=(0|I););if(!((0|(p=0|n[a>>2]))<=0))if(X=a+16|0,R=0|n[a+4>>2],C=a+12|0,S)for(l=$=0;;){if(0|n[S>>2]){if(A=(a=0|n[(0|n[X>>2])+(l<<2)>>2])+$|0,0<(0|a))for(I=0|n[C>>2],g=$,F=0;F+=+D[I+(g<<2)>>2],(0|(g=g+1|0))<(0|A););else F=0;D[v+(l<<2)>>2]=F}if((0|(I=l+1|0))==(0|p))break;S=S+4|0,$=(0|n[R+(l<<2)>>2])+$|0,l=I}else for($=0|n[X>>2],a=l=0;;){if(A=(X=0|n[$+(a<<2)>>2])+l|0,0<(0|X))for(I=0|n[C>>2],g=l,F=0;F+=+D[I+(g<<2)>>2],(0|(g=g+1|0))<(0|A););else F=0;if(D[v+(a<<2)>>2]=F,(0|(I=a+1|0))==(0|p))break;l=(0|n[R+(a<<2)>>2])+l|0,a=I}}function ie(a,l,v,S){l|=0,v|=0,S|=0;var C,p,R=0,I=0,A=0,g=0,$=0,F=0;if(0<(0|(R=0|n[(a|=0)+8>>2])))for(I=0|n[a+20>>2],A=0|n[a+12>>2],g=0;D[A+(g<<2)>>2]=+D[l+(g<<2)>>2]*+D[I+(g<<2)>>2],(0|(g=g+1|0))!=(0|R););if(!((0|(R=0|n[a>>2]))<=0))if(F=a+16|0,C=0|n[a+4>>2],p=a+12|0,S)for(l=g=0;;){if(0|n[S>>2]){if(I=(A=0|n[(0|n[F>>2])+(l<<2)>>2])+g|0,0<(0|A))for(R=0|n[p>>2],A=g,$=0;$+=+D[R+(A<<2)>>2],(0|(A=A+1|0))<(0|I););else $=0;n[v+(l<<2)>>2]=~~($+.0010000000474974513),R=0|n[a>>2]}if(!((0|(I=l+1|0))<(0|R)))break;S=S+4|0,g=(0|n[C+(l<<2)>>2])+g|0,l=I}else for(g=0|n[F>>2],S=l=0;;){if(I=(F=0|n[g+(S<<2)>>2])+l|0,0<(0|F))for(R=0|n[p>>2],A=l,$=0;$+=+D[R+(A<<2)>>2],(0|(A=A+1|0))<(0|I););else $=0;if(n[v+(S<<2)>>2]=~~($+.0010000000474974513),!((0|(R=S+1|0))<(0|n[a>>2])))break;l=(0|n[C+(S<<2)>>2])+l|0,S=R}}function Le(a,l,v,S,C,p){l|=0,v|=0,S|=0,C|=0,p|=0;var R,I,A,g,$,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0|n[(a|=0)>>2];if(!((0|Q)<=0))if(g=a+16|0,A=0|n[a+4>>2],I=a+20|0,R=C<<2,p)for(rt=U=0;;){if(0|n[p>>2]&&(B=0|n[v+(rt<<2)>>2],a=0|n[S+(rt<<2)>>2],j=0|z(a,C),W=(F=0|n[(0|n[g>>2])+(rt<<2)>>2])+U|0,(Z=0<(0|j))&&wi(0|B,0,0|z(R,a)),0<(0|F)&&(lt=0|n[I>>2],Z))){F=U;do for(a=0|n[l+(F<<2)>>2],X=+D[lt+(F<<2)>>2],Z=0;D[($=B+(Z<<2)|0)>>2]=+D[$>>2]+X*+D[a+(Z<<2)>>2],(0|(Z=Z+1|0))!=(0|j););while((0|(F=F+1|0))<(0|W))}if((0|(a=rt+1|0))==(0|Q))break;p=p+4|0,U=(0|n[A+(rt<<2)>>2])+U|0,rt=a}else for(U=j=0;;){if(Z=0|n[v+(U<<2)>>2],a=0|n[S+(U<<2)>>2],W=0|z(a,C),B=(p=0|n[(0|n[g>>2])+(U<<2)>>2])+j|0,(F=0<(0|W))&&wi(0|Z,0,0|z(R,a)),0<(0|p)&&(rt=0|n[I>>2],F)){p=j;do for(a=0|n[l+(p<<2)>>2],X=+D[rt+(p<<2)>>2],F=0;D[(lt=Z+(F<<2)|0)>>2]=+D[lt>>2]+X*+D[a+(F<<2)>>2],(0|(F=F+1|0))!=(0|W););while((0|(p=p+1|0))<(0|B))}if((0|(a=U+1|0))==(0|Q))break;j=(0|n[A+(U<<2)>>2])+j|0,U=a}}function yr(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|function(S){S|=0;var C,p,R=G;return G=G+560|0,C=(p=R)+548|0,wi(0|p,0,548),ur(S,p,C),G=R,0|n[C>>2]}(a),G=v,0|l):(n[l>>2]=1515,n[l+4>>2]=1533,kt(0,1269,l),G=v,(l=0)|l)}function ze(a,l,v){l|=0,v|=0;var S,C,p=0,R=0,I=G;return G=G+32|0,R=I+24|0,C=I+16|0,p=I+8|0,S=I,(a|=0)?l?((p=l)+15&-16|0)!=(0|p)?(n[C>>2]=1551,n[4+C>>2]=1342,kt(0,1269,C),G=I,(R=0)|R):(l=0|pe(a,l,v))?(G=I,0|(R=l)):(n[R>>2]=1551,n[R+4>>2]=1577,kt(0,1269,R),G=I,(R=0)|R):(n[p>>2]=1551,n[p+4>>2]=1303,kt(0,1269,p),G=I,(R=0)|R):(n[S>>2]=1551,n[S+4>>2]=1533,kt(0,1269,S),G=I,(R=0)|R)}function Ne(a,l,v,S){if(v=+v,S=+S,(l=+V(+(l=+l),+(a=+a))-+V(+S,+v))<-3.1415927410125732)for(;(l+=6.2831854820251465)<-3.1415927410125732;);if(!(3.1415927410125732<l))return+(v=l);for(;3.1415927410125732<(l+=-6.2831854820251465););return+l}function je(a,l){a|=0,l|=0;var v;if(!((l=a+l+-1|0)>>>0<=a>>>0))for(;v=0|ft[a>>0],ft[a>>0]=0|ft[l>>0],a=a+1|0,ft[l>>0]=v,a>>>0<(l=l+-1|0)>>>0;);}function _t(a,l,v){a|=0,l|=0;var S,C=0,p=0;if(v|=0)do if(v=v+-1|0,(p=a)>>>0<(C=(a=a+l|0)+-1|0)>>>0)for(;S=0|ft[p>>0],ft[p>>0]=0|ft[C>>0],p=p+1|0,ft[C>>0]=S,p>>>0<(C=C+-1|0)>>>0;);while(0|v)}function Lr(a){var l,v,S,C=0,p=0,R=0,I=0,j=0,U=0,rt=0,A=0,W=0,g=0,$=0,F=0,X=0,Z=0,B=(C=0|n[(v=(a|=0)+336|0)>>2])+(20*(A=0|n[(S=a+332|0)>>2])|0)|0,W=a+424|0,j=0|n[a+48>>2],U=0|n[a+316>>2],rt=0|n[a+308>>2];if(0<(0|A))for(A=0|n[W>>2],R=0|n[a+448>>2],I=0|n[a+444>>2];0|n[A>>2]&&((0|(p=0|n[C+4>>2]))!=-1&&(D[R>>2]=+D[j+(p<<2)>>2]*+D[R>>2]),(0|(p=0|n[C+8>>2]))!=-1&&(D[R>>2]=+D[U+(p<<2)>>2]*+D[R>>2],$=0|n[I>>2],vs[3&n[rt+(p<<5)+24>>2]](a,p,$,$,0|n[C+16>>2]))),!(B>>>0<=(C=C+20|0)>>>0);)A=A+4|0,R=R+4|0,I=I+4|0;if(!((0|we[4+(0|n[a>>2])>>0])<4||(rt=(C=0|n[v>>2])+(20*($=0|n[S>>2])|0)|0,j=0|n[a+324>>2],U=0|n[a+328>>2],(0|$)<=0)))for(I=0|n[W>>2],p=C,R=0|n[a+452>>2],C=0|n[a+456>>2];0|n[I>>2]&&(0|(g=0|n[p+8>>2]))!=-1&&(F=+D[R>>2]*+D[(S=j+((W=g<<2)<<2)|0)>>2],D[R>>2]=F,X=+D[($=R+4|0)>>2]*+D[4+S>>2],D[$>>2]=X,Z=+D[(a=R+8|0)>>2]*+D[8+S>>2],D[R>>2]=F<0?0:1<F?1:F,D[$>>2]=X<0?0:1<X?1:X,D[a>>2]=Z<0?0:1<Z?1:Z,D[R+12>>2]=1,Z=+D[C>>2],X=+D[(W=U+(W<<2)|0)>>2],D[C>>2]=X=Z+X-Z*X,Z=+D[(a=C+4|0)>>2],F=+D[W+4>>2],D[a>>2]=F=Z+F-Z*F,l=(Z=+D[($=C+8|0)>>2])+(l=+D[W+8>>2])-Z*l,D[C>>2]=X<0?0:1<X?1:X,D[a>>2]=F<0?0:1<F?1:F,D[$>>2]=l<0?0:1<l?1:l,D[C+12>>2]=1),!(rt>>>0<=(p=p+20|0)>>>0);)I=I+4|0,R=R+16|0,C=C+16|0}function rr(a){var l,v=0|n[(a|=0)+332>>2];0|n[a+428>>2]&&(Gi(0|n[a+460>>2],0|n[a+436>>2],0|(l=v<<2)),Gi(0|n[a+464>>2],0|n[a+440>>2],0|l),Gi(0|n[a+468>>2],0|n[a+448>>2],0|l),(0|we[4+(0|n[a>>2])>>0])<=3||(Gi(0|n[a+472>>2],0|n[a+452>>2],0|(l=v<<4)),Gi(0|n[a+476>>2],0|n[a+456>>2],0|l)))}function Or(a){var l,v,S,C,p,R,I,A,g,$,F,ct=0,lt=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0|ft[4+(0|n[(a|=0)>>2])>>0],Q=0|n[a+332>>2],ct=a+428|0;if(0|n[a+620>>2]){if(!(((n[ct>>2]=0)|Q)<=0))for(Z=a+424|0,B=a+432|0,ct=a+448|0,lt=0;X=0|n[(0|n[Z>>2])+(lt<<2)>>2]&&+D[(0|n[ct>>2])+(lt<<2)>>2]!=0?127:126,ft[(0|n[B>>2])+lt>>0]=X,(0|(lt=lt+1|0))!=(0|Q););}else if(0|n[ct>>2]){if(!(((n[ct>>2]=0)|Q)<=0))if(S=a+424|0,R=a+432|0,p=a+448|0,A=a+468|0,C=a+440|0,I=a+464|0,$=a+436|0,g=a+460|0,l=a+452|0,W=a+472|0,v=a+456|0,B=a+476|0,(255&lt)<=3)for(ct=0;W=(0|n[(0|n[S>>2])+(ct<<2)>>2])==0,rt=+D[(0|n[p>>2])+(ct<<2)>>2],U=(0|n[R>>2])+ct|0,j=(1&ft[U>>0])==(j=rt!=0&(1^W)&1)<<24>>24?j:2|j,j=rt!=+D[(0|n[A>>2])+(ct<<2)>>2]?4|j:j,j=(0|n[(0|n[C>>2])+(ct<<2)>>2])==(0|n[(0|n[I>>2])+(ct<<2)>>2])?j:8|j,j=(0|n[(0|n[$>>2])+(ct<<2)>>2])==(0|n[(0|n[g>>2])+(ct<<2)>>2])?j:16|j,ft[U>>0]=W?j:32|j,(0|(ct=ct+1|0))!=(0|Q););else for(Z=X=0;F=(0|n[(0|n[S>>2])+(X<<2)>>2])==0,rt=+D[(0|n[p>>2])+(X<<2)>>2],lt=(0|n[R>>2])+X|0,ct=(1&ft[lt>>0])==(ct=rt!=0&(1^F)&1)<<24>>24?ct:2|ct,ct=rt!=+D[(0|n[A>>2])+(X<<2)>>2]?4|ct:ct,ct=(0|n[(0|n[C>>2])+(X<<2)>>2])==(0|n[(0|n[I>>2])+(X<<2)>>2])?ct:8|ct,ct=(0|n[(0|n[$>>2])+(X<<2)>>2])==(0|n[(0|n[g>>2])+(X<<2)>>2])?ct:16|ct,ct=F?ct:32|ct,F=(0|n[l>>2])+(Z<<2)|0,a=(0|n[W>>2])+(Z<<2)|0,+D[F>>2]==+D[a>>2]&&+D[4+F>>2]==+D[a+4>>2]&&+D[8+F>>2]==+D[a+8>>2]&&+D[12+F>>2]==+D[a+12>>2]&&(j=(0|n[v>>2])+(Z<<2)|0,U=(0|n[B>>2])+(Z<<2)|0,+D[j>>2]==+D[U>>2])&&+D[j+4>>2]==+D[U+4>>2]&&+D[j+8>>2]==+D[U+8>>2]&&+D[j+12>>2]==+D[U+12>>2]||(ct|=64),ft[lt>>0]=ct,(0|(X=X+1|0))!=(0|Q);)Z=Z+4|0}else if(!((0|Q)<=0))for(X=a+424|0,Z=a+432|0,ct=a+448|0,lt=0;0|n[(0|n[X>>2])+(lt<<2)>>2]&&+D[(0|n[ct>>2])+(lt<<2)>>2]!=0?(U=(0|n[Z>>2])+lt|0,ft[U>>0]=1|ft[U>>0]):(U=(0|n[Z>>2])+lt|0,ft[U>>0]=-2&ft[U>>0]),(0|(lt=lt+1|0))!=(0|Q););}function br(a){var l,v,S,C,p,R,I,Dt=0,A=0,g=0,$=0,F=0,X=0,Z=0,Jt=0,Me=0,Ce=0,$e=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=0,Ot=0,Jt=0|n[(R=(a|=0)+60|0)>>2],Dt=0|n[a>>2],Me=0|n[Dt+784>>2],Ce=0|n[(I=a+56|0)>>2],$e=0|n[Dt+1028>>2];if(0<(0|Ce)){for(rt=a+80|0,ct=a+92|0,Q=a+88|0,Pt=a+84|0,lt=Dt+984|0,F=Dt+980|0,Z=X=0;;){if($=0|n[Jt+(24*X|0)>>2],(0|($t=0|n[(Dt=$+24|0)>>2]||0|n[$+28>>2]?15:$t))==15&&(n[(($t=0)|n[rt>>2])+(X<<2)>>2]=n[(U=$+12|0)>>2],0|n[Dt>>2])&&(B=0|n[Me+(X<<2)>>2],Xt=(W=0|n[$+16>>2])+((Yt=0|n[U>>2])<<2)|0,0<(0|Yt)))for(Dt=W,A=(0|n[Q>>2])+(Z<<2)|0,g=(0|n[ct>>2])+(Z<<2)|0;Yt=(0|n[Dt>>2])+B|0,n[g>>2]=$e+(n[(0|n[lt>>2])+(Yt<<2)>>2]<<2),n[A>>2]=n[(0|n[F>>2])+(Yt<<2)>>2],!(Xt>>>0<=(Dt=Dt+4|0)>>>0);)A=A+4|0,g=g+4|0;if(0|n[$+28>>2]&&(Qt=(j=0|n[$+20>>2])+((Yt=0|n[$+12>>2])<<2)|0,0<(0|Yt)))for(Dt=(0|n[Pt>>2])+(Z<<2)|0,A=j;n[Dt>>2]=n[A>>2],!(Qt>>>0<=(A=A+4|0)>>>0);)Dt=Dt+4|0;if((0|(X=X+1|0))==(0|Ce))break;Z=(0|n[$+8>>2])+Z|0}Dt=0|n[a>>2]}if(!((0|we[Dt+4>>0])<4||(p=0|n[R>>2],Yt=0|n[Dt+792>>2],(0|(R=0|n[I>>2]))<=0)))for(v=a+96|0,l=a+100|0,I=a+104|0,C=a+108|0,S=a+112|0,$t=a+116|0,Xt=Dt+1228|0,ct=Dt+1232|0,Q=Dt+1236|0,Qt=Dt+1240|0,Pt=Dt+1244|0,Jt=Dt+1248|0,Ce=Me=0;;){if(Dt=0|n[p+(24*Me|0)>>2],0|n[Dt+24>>2]&&(jt=0|n[Yt+(Me<<2)>>2],Ot=(pt=0|n[Dt+16>>2])+((a=0|n[Dt+12>>2])<<2)|0,0<(0|a)))for(A=0|n[Xt>>2],g=0|n[ct>>2],$=0|n[Q>>2],F=0|n[Qt>>2],X=0|n[Pt>>2],Z=0|n[Jt>>2],$e=pt,B=(0|n[I>>2])+(Ce<<2)|0,W=(0|n[l>>2])+(Ce<<2)|0,j=(0|n[v>>2])+(Ce<<2)|0,U=(0|n[$t>>2])+(Ce<<2)|0,rt=(0|n[S>>2])+(Ce<<2)|0,lt=(0|n[C>>2])+(Ce<<2)|0;a=(0|n[$e>>2])+jt|0,n[j>>2]=n[A+(a<<2)>>2],n[W>>2]=n[g+(a<<2)>>2],n[B>>2]=n[$+(a<<2)>>2],n[lt>>2]=n[F+(a<<2)>>2],n[rt>>2]=n[X+(a<<2)>>2],n[U>>2]=n[Z+(a<<2)>>2],!(Ot>>>0<=($e=$e+4|0)>>>0);)B=B+4|0,W=W+4|0,j=j+4|0,U=U+4|0,rt=rt+4|0,lt=lt+4|0;if((0|(Me=Me+1|0))==(0|R))break;Ce=(0|n[Dt+8>>2])+Ce|0}}function ti(a){var l,v,S,C,p,R,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,Ur=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=0,Ot=0,Jt=0,Dt=0,Me=0,Ce=0,$e=0,fr=0,ir=0,qe=0,De=0,cr=0,Ar=0,Je=0,nr=0,xe=0,Oe=0|n[(a|=0)+168>>2],ot=0|n[a>>2],Ur=0|n[816+ot>>2];if(0<(0|(ct=0|n[(R=a+164|0)>>2])))for(Ot=a+188|0,$t=a+200|0,Ce=a+204|0,fr=a+208|0,C=a+212|0,Jt=a+196|0,p=a+192|0,Qt=992+ot|0,Me=996+ot|0,$e=1e3+ot|0,S=1004+ot|0,Dt=988+ot|0,l=1008+ot|0,Yt=a+288|0,v=1012+ot|0,jt=a+292|0,De=qe=0;;){if(Pt=0|n[Oe+(12*qe|0)>>2],(0|(cr=0|n[(I=Pt+24|0)>>2]||0|n[Pt+28>>2]?14:cr))==14&&(n[((cr=0)|n[Ot>>2])+(qe<<2)>>2]=n[(pt=Pt+12|0)>>2],0|n[I>>2])){if(I=0|n[Ur+(qe<<2)>>2],B=(A=0|n[Pt+16>>2])+((Q=0|n[pt>>2])<<2)|0,0<(0|Q))for(g=0|n[Qt>>2],$=0|n[Me>>2],F=0|n[$e>>2],X=0|n[S>>2],Z=0|n[Dt>>2],W=(0|n[$t>>2])+(De<<2)|0,j=A,U=(0|n[Jt>>2])+(De<<2)|0,rt=(0|n[Ce>>2])+(De<<2)|0,lt=(0|n[fr>>2])+(De<<2)|0,Q=(0|n[C>>2])+(De<<2)|0;xe=(0|n[j>>2])+I|0,n[W>>2]=n[g+(xe<<2)>>2],n[rt>>2]=n[$+(xe<<2)>>2],n[lt>>2]=n[F+(xe<<2)>>2],n[Q>>2]=n[X+(xe<<2)>>2],n[U>>2]=n[Z+(xe<<2)>>2],!(B>>>0<=(j=j+4|0)>>>0);)W=W+4|0,U=U+4|0,rt=rt+4|0,lt=lt+4|0,Q=Q+4|0;xe=(0|n[A>>2])+I|0,n[(0|n[Yt>>2])+(qe<<2)>>2]=n[(0|n[l>>2])+(xe<<2)>>2],n[(0|n[jt>>2])+(qe<<2)>>2]=n[(0|n[v>>2])+(xe<<2)>>2]}if(0|n[Pt+28>>2]&&(ir=(Xt=0|n[Pt+20>>2])+((xe=0|n[Pt+12>>2])<<2)|0,0<(0|xe)))for(I=(0|n[p>>2])+(De<<2)|0,A=Xt;n[I>>2]=n[A>>2],!(ir>>>0<=(A=A+4|0)>>>0);)I=I+4|0;if((0|(qe=qe+1|0))==(0|ct))break;De=(0|n[Pt+8>>2])+De|0}if(!((0|we[4+ot>>0])<4||(fr=0|n[824+ot>>2],(0|(Ot=0|n[R>>2]))<=0)))for(Me=a+216|0,Dt=a+220|0,Jt=a+224|0,$e=a+228|0,Ce=a+232|0,pt=a+236|0,Yt=1228+ot|0,Qt=1232+ot|0,Xt=1236+ot|0,jt=1240+ot|0,$t=1244+ot|0,B=1248+ot|0,j=W=0;;){if(Z=0|n[Oe+(12*W|0)>>2],0|n[Z+24>>2]&&(Je=0|n[fr+(W<<2)>>2],nr=(Ar=0|n[Z+16>>2])+((xe=0|n[Z+12>>2])<<2)|0,0<(0|xe)))for(I=0|n[Yt>>2],A=0|n[Qt>>2],g=0|n[Xt>>2],$=0|n[jt>>2],F=0|n[$t>>2],X=0|n[B>>2],U=Ar,rt=(0|n[Jt>>2])+(j<<2)|0,lt=(0|n[Dt>>2])+(j<<2)|0,Q=(0|n[Me>>2])+(j<<2)|0,Ur=(0|n[pt>>2])+(j<<2)|0,ct=(0|n[Ce>>2])+(j<<2)|0,Pt=(0|n[$e>>2])+(j<<2)|0;xe=(0|n[U>>2])+Je|0,n[Q>>2]=n[I+(xe<<2)>>2],n[lt>>2]=n[A+(xe<<2)>>2],n[rt>>2]=n[g+(xe<<2)>>2],n[Pt>>2]=n[$+(xe<<2)>>2],n[ct>>2]=n[F+(xe<<2)>>2],n[Ur>>2]=n[X+(xe<<2)>>2],!(nr>>>0<=(U=U+4|0)>>>0);)rt=rt+4|0,lt=lt+4|0,Q=Q+4|0,Ur=Ur+4|0,ct=ct+4|0,Pt=Pt+4|0;if((0|(W=W+1|0))==(0|Ot))break;j=(0|n[Z+8>>2])+j|0}}function Ti(a){var l,v,S,C,Dt=0,p=0,R=0,I=0,A=0,g=0,$=0,F=0,Jt=0,Me=0,Ce=0,$e=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=0,Ot=0,Jt=0|n[(S=(a|=0)+336|0)>>2],Dt=0|n[a>>2],Me=0|n[Dt+856>>2],Ce=0|n[(C=a+332|0)>>2],$e=0|n[Dt+1028>>2];if(0<(0|Ce)){for(j=a+356|0,ct=a+372|0,lt=a+364|0,U=a+368|0,Pt=a+360|0,rt=Dt+1024|0,Q=Dt+1016|0,g=Dt+1020|0,F=$=0;;){if(A=0|n[Jt+(20*$|0)>>2],(0|($t=0|n[(Dt=A+24|0)>>2]||0|n[A+28>>2]?15:$t))==15&&(n[(($t=0)|n[j>>2])+($<<2)>>2]=n[(W=A+12|0)>>2],0|n[Dt>>2])&&(X=0|n[Me+($<<2)>>2],Xt=(Z=0|n[A+16>>2])+((Yt=0|n[W>>2])<<2)|0,0<(0|Yt)))for(Dt=(0|n[U>>2])+(F<<2)|0,p=Z,R=(0|n[lt>>2])+(F<<2)|0,I=(0|n[ct>>2])+(F<<2)|0;Yt=(0|n[p>>2])+X|0,n[I>>2]=$e+(n[(0|n[rt>>2])+(Yt<<2)>>2]<<2),n[R>>2]=n[(0|n[Q>>2])+(Yt<<2)>>2],n[Dt>>2]=n[(0|n[g>>2])+(Yt<<2)>>2],!(Xt>>>0<=(p=p+4|0)>>>0);)Dt=Dt+4|0,R=R+4|0,I=I+4|0;if(0|n[A+28>>2]&&(Qt=(B=0|n[A+20>>2])+((Yt=0|n[A+12>>2])<<2)|0,0<(0|Yt)))for(Dt=(0|n[Pt>>2])+(F<<2)|0,p=B;n[Dt>>2]=n[p>>2],!(Qt>>>0<=(p=p+4|0)>>>0);)Dt=Dt+4|0;if((0|($=$+1|0))==(0|Ce))break;F=(0|n[A+8>>2])+F|0}Dt=0|n[a>>2]}if(!((0|we[Dt+4>>0])<4||(v=0|n[S>>2],Yt=0|n[Dt+864>>2],(0|(Xt=0|n[C>>2]))<=0)))for(S=a+376|0,$t=a+380|0,Qt=a+384|0,l=a+388|0,C=a+392|0,Pt=a+396|0,Q=Dt+1228|0,rt=Dt+1232|0,U=Dt+1236|0,ct=Dt+1240|0,lt=Dt+1244|0,F=Dt+1248|0,Me=Jt=0;;){if(Dt=0|n[v+(20*Jt|0)>>2],0|n[Dt+24>>2]&&(jt=0|n[Yt+(Jt<<2)>>2],Ot=(pt=0|n[Dt+16>>2])+((a=0|n[Dt+12>>2])<<2)|0,0<(0|a)))for(p=0|n[Q>>2],R=0|n[rt>>2],I=0|n[U>>2],A=0|n[ct>>2],g=0|n[lt>>2],$=0|n[F>>2],Ce=pt,$e=(0|n[Qt>>2])+(Me<<2)|0,X=(0|n[$t>>2])+(Me<<2)|0,Z=(0|n[S>>2])+(Me<<2)|0,B=(0|n[Pt>>2])+(Me<<2)|0,W=(0|n[C>>2])+(Me<<2)|0,j=(0|n[l>>2])+(Me<<2)|0;a=(0|n[Ce>>2])+jt|0,n[Z>>2]=n[p+(a<<2)>>2],n[X>>2]=n[R+(a<<2)>>2],n[$e>>2]=n[I+(a<<2)>>2],n[j>>2]=n[A+(a<<2)>>2],n[W>>2]=n[g+(a<<2)>>2],n[B>>2]=n[$+(a<<2)>>2],!(Ot>>>0<=(Ce=Ce+4|0)>>>0);)$e=$e+4|0,X=X+4|0,Z=Z+4|0,B=B+4|0,W=W+4|0,j=j+4|0;if((0|(Jt=Jt+1|0))==(0|Xt))break;Me=(0|n[Dt+8>>2])+Me|0}}function ei(a){var l,v,S,C=0;if(rr(a|=0),function(p){p|=0;var R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0;if(R=0|n[p+4>>2],$=0|n[p>>2],F=R+(52*$|0)|0,!((0|$)<=0))for($=0|n[p+12>>2];I=+D[$>>2],g=(0|n[R+16>>2])==0,p=R+4|0,I=g?(Z=+D[p>>2],X=+D[R+8>>2],I<Z?Z:X<I?X:I):(Z=+D[R+12>>2],(X=+D[p>>2])+Z*((I=(I-X)/Z)-(0|~~+x(+I)))),p=R+48|0,+D[(A=R+44|0)>>2]!=I?(n[p>>2]=1,D[A>>2]=I):n[p>>2]=0,g&&(D[$>>2]=I),!(F>>>0<=(R=R+52|0)>>>0);)$=$+4|0}(a+540|0),function(p){p|=0;var R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0;if(R=0|n[p+544>>2],j=0|n[p+540>>2],ct=R+(52*j|0)|0,!((0|j)<=0)){j=(0|n[p+620>>2])==0;do{t:do if(!(0|n[R>>2])&&(U=+D[R+44>>2],rt=+D[R+20>>2],lt=+D[R+24>>2],Q=0|n[R+28>>2],B=0|n[R+32>>2],Pt=Q+(28*B|0)|0,0<(0|B))){if(!j)for(B=Q;;){$=0|n[B>>2];do if(1<=(0|$)){if(g=0|n[B+4>>2],A=+D[g>>2],I=A-rt,(0|$)==1){$=!(U<rt+A)|!(I<U),I=p=0,W=41;break}if(U<I){g=B+16|0,F=1,I=p=0,W=43;break}if(U<rt+A)I=p=$=0,W=41;else{for(p=1;I=+D[g+(p<<2)>>2],!(U<rt+I);){if(!((0|(p=p+1|0))<(0|$))){W=40;break}A=I}if((0|W)==40){g=B+16|0,p=$+-(F=1)|0,I=0,W=43;break}W=(I=I-rt<U?$=0:(p=p+-1|0,(I-=A)<lt?$=0:($=0,(U-A)/I)),41)}}else I=p=$=0,W=41;while(0);if((0|W)==41&&($|(W=0)==(0|n[(g=B+16|0)>>2])?(F=1&$,W=43):(n[B+24>>2]=1,n[B+20>>2]=1,Z=B+8|0,X=B+12|0,$=0)),(0|W)==43&&(A=+D[(X=B+12|(W=0))>>2],Xt=A!=I,$=1&((0|n[(Z=B+8|0)>>2])!=(0|p)|Xt&(I==0|A==0)),n[B+24>>2]=1&Xt,n[B+20>>2]=$,$=F),D[X>>2]=I,n[Z>>2]=p,n[g>>2]=$,Pt>>>0<=(B=B+28|0)>>>0)break t}if(!(0|n[R+48>>2])){for(p=Q;;)if(n[p+24>>2]=0,n[p+20>>2]=0,Pt>>>0<=(p=p+28|0)>>>0)break t}B=Q;do{$=0|n[B>>2];do if(1<=(0|$)){if(g=0|n[B+4>>2],A=+D[g>>2],I=A-rt,(0|$)==1){$=!(U<rt+A)|!(I<U),I=p=0,W=24;break}if(U<I){g=B+16|0,F=1,I=p=0,W=26;break}if(U<rt+A)I=p=$=0,W=24;else{for(p=1;I=+D[g+(p<<2)>>2],!(U<rt+I);){if(!((0|(p=p+1|0))<(0|$))){W=21;break}A=I}if((0|W)==21){g=B+16|0,p=$+-(F=1)|0,I=0,W=26;break}W=(I=I-rt<U?$=0:(p=p+-1|0,(I-=A)<lt?$=0:($=0,(U-A)/I)),24)}}else I=p=$=0,W=24;while(0)}while((0|W)==24&&($|(W=0)==(0|n[(g=B+16|0)>>2])?(F=1&$,W=26):(n[B+24>>2]=1,n[B+20>>2]=1,Z=B+8|0,X=B+12|0,$=0)),(0|W)==26&&(A=+D[(X=B+12|(W=0))>>2],Xt=A!=I,$=1&((0|n[(Z=B+8|0)>>2])!=(0|p)|Xt&(I==0|A==0)),n[B+24>>2]=1&Xt,n[B+20>>2]=$,$=F),D[X>>2]=I,n[Z>>2]=p,n[g>>2]=$,(B=B+28|0)>>>0<Pt>>>0)}while(0)}while((R=R+52|0)>>>0<ct>>>0)}}(a),hi(a),function(p){p|=0;var R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0;if(R=0|n[p+568>>2],rt=0|n[p+564>>2],Pt=R+(36*rt|0)|0,!((0|rt)<=0)){rt=(0|n[p+620>>2])==0;do{U=0|n[R+4>>2];t:do if(0<(0|U))for(F=0|n[R>>2],A=p=I=X=0;;){if(g=0|n[F+(X<<2)>>2],0|n[g+16>>2]){A=1,p=I=0;break t}if(A=A||0|n[g+24>>2],p=p||0|n[g+20>>2],I=I+(+D[g+12>>2]!=0&1)|0,(0|U)<=(0|(X=X+1|0))){F=I,$t=11;break}}else A=p=F=0,$t=11;while(0);t:do if((0|$t)==11)if(I=rt?p:1,($t=0)!=((p=rt?A:1)|I|0)&&(Qt=1<<F,n[R+12>>2]=Qt,lt=0|n[R>>2],Q=0|n[R+16>>2],ct=0|n[R+20>>2],Xt=Q+(Qt<<2)|0,(0|F)!=31)){for(wi(0|Q,0,((A=Q+4|0)>>>0<Xt>>>0?Xt:A)+~Q+4&-4|0),A=ct+(Qt<<2)|0,g=ct;D[g>>2]=1,(g=g+4|0)>>>0<A>>>0;);if(1<=(0|U)){if(!F)for(F=0,Z=1;;){if(g=0|n[lt+(F<<2)>>2],X=0|z(0|n[g+8>>2],Z),($=+D[g+12>>2])==0)for(A=0;n[(j=Q+(A<<2)|0)>>2]=(0|n[j>>2])+X,(0|(A=A+1|0))!=(0|Qt););else n[Q>>2]=(0|n[Q>>2])+X,D[ct>>2]=(1-$)*+D[ct>>2];if(Z=0|z(0|n[g>>2],Z),(0|(F=F+1|0))==(0|U)){A=0;break t}}W=0,j=A=1;do if(B=0|n[lt+(W<<2)>>2],g=0|n[8+B>>2],Z=0|z(g,j),($=+D[(X=12+B|0)>>2])==0)for(g=0;n[(X=Q+(g<<2)|0)>>2]=(0|n[X>>2])+Z,(0|(g=g+1|0))!=(0|Qt););else{for(F=0|z(g+1|0,j),n[Q>>2]=(0|n[Q>>2])+Z,D[ct>>2]=(1-$)*+D[ct>>2],g=1;$=+D[X>>2],jt=(g&A|0)!=0,n[(Yt=Q+(g<<2)|0)>>2]=(jt?F:Z)+(0|n[Yt>>2]),D[(Yt=ct+(g<<2)|0)>>2]=(jt?$:1-$)*+D[Yt>>2],(0|(g=g+1|0))!=(0|Qt););A<<=1}while(j=0|z(0|n[B>>2],j),(0|(W=W+1|0))!=(0|U));A=0}else A=0}else A=0;while(0)}while(n[R+28>>2]=p,n[R+24>>2]=I,n[R+32>>2]=A,(R=R+36|0)>>>0<Pt>>>0)}}(a),Tr(a),v=0|n[a+4>>2],l=(C=0|n[a+52>>2])+(v<<2)|0,0<(0|v))for(;S=+D[C>>2],D[C>>2]=S<0?0:1<S?1:S,(C=C+4|0)>>>0<l>>>0;);(function(p,R,I){p|=0,R|=0,I|=0;var A=0,g=0;if(g=R+(12*p|0)|0,!((0|p)<=0))for(A=I;;){do if(0|n[R+8>>2]){if((0|(p=0|n[R+4>>2]))!=-1&&!(0|n[I+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[R>>2])>>2])==0}else p=0;while(0);if(n[A>>2]=1&p,g>>>0<=(R=R+12|0)>>>0)break;A=A+4|0}})(v,0|n[a+8>>2],0|n[a+40>>2]),function(p){var R,I,A,g,$,Pt=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0|n[(p|=0)+8>>2],Pt=0|n[p>>2],Xt=0|n[Pt+724>>2],Qt=0|n[p+4>>2];if(!((0|Qt)<=0))for(g=p+28|0,$=p+36|0,A=p+32|0,I=Pt+976|0,Z=X=0;;){if(R=0|n[ct+(12*X|0)>>2],(0|(Q=0|n[(p=24+R|0)>>2]||0|n[28+R>>2]?6:Q))==6&&(n[((Q=0)|n[g>>2])+(X<<2)>>2]=n[(U=12+R|0)>>2],0|n[p>>2])&&(j=0|n[Xt+(X<<2)>>2],rt=(B=0|n[16+R>>2])+((F=0|n[U>>2])<<2)|0,0<(0|F)))for(p=0|n[I>>2],Pt=(0|n[$>>2])+(Z<<2)|0,F=B;n[Pt>>2]=n[p+((0|n[F>>2])+j<<2)>>2],!(rt>>>0<=(F=F+4|0)>>>0);)Pt=Pt+4|0;if(0|n[28+R>>2]&&(lt=(W=0|n[20+R>>2])+((F=0|n[12+R>>2])<<2)|0,0<(0|F)))for(p=(0|n[A>>2])+(Z<<2)|0,Pt=W;n[p>>2]=n[Pt>>2],!(lt>>>0<=(Pt=Pt+4|0)>>>0);)p=p+4|0;if((0|(X=X+1|0))==(0|Qt))break;Z=(0|n[8+R>>2])+Z|0}}(a),function(p){ie((p|=0)+12|0,0|n[p+36>>2],0|n[p+44>>2],0|n[p+40>>2])}(a),function(p){var R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0;if(G=(B=G)+16|0,Z=B,R=n[(p=p|0)+308>>2]|0,A=n[p+304>>2]|0,X=R+(A<<5)|0,g=n[p+40>>2]|0,$=n[p+312>>2]|0,F=n[p+144>>2]|0,I=n[p+264>>2]|0,(0|A)<=0)G=B;else{for(A=$;;){do if(0|n[R+28>>2]){if((0|(p=0|n[R+4>>2]))!=-1&&!(0|n[g+(p<<2)>>2])){p=0;break}if((0|(p=0|n[R+8>>2]))!=-1&&!(0|n[$+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[R>>2])>>2])==0}else p=0;while(0);switch(p&=1,n[A>>2]=p,0|n[R+12>>2]){case 0:n[F+(n[R+16>>2]<<2)>>2]=p;break;case 1:n[I+(n[R+16>>2]<<2)>>2]=p;break;default:kt(0,2458,Z)}if(X>>>0<=(R=R+32|0)>>>0)break;A=A+4|0}G=B}}(a),br(a),ti(a),Se(a),ee(a),function(p){p|=0;var R=0,I=0,A=0,g=0,$=0;if(R=0|n[p+336>>2],I=0|n[p+332>>2],$=R+(20*I|0)|0,A=0|n[p+40>>2],g=0|n[p+312>>2],!((0|I)<=0))for(I=0|n[p+424>>2];;){do if(0|n[R+12>>2]){if((0|(p=0|n[R+4>>2]))!=-1&&!(0|n[A+(p<<2)>>2])){p=0;break}if((0|(p=0|n[R+8>>2]))!=-1&&!(0|n[g+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[R>>2])>>2])==0}else p=0;while(0);if(n[I>>2]=1&p,$>>>0<=(R=R+20|0)>>>0)break;I=I+4|0}}(a),Ti(a),de(a),function(p){var R,I,A,g,$,Pt=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0|n[(p|=0)+504>>2],Pt=0|n[p>>2],Xt=0|n[Pt+1192>>2],Qt=0|n[p+500>>2];if(!((0|Qt)<=0))for(g=p+524|0,$=p+532|0,A=p+528|0,I=Pt+1224|0,Z=X=0;;){if(R=0|n[ct+(24*X|0)>>2],(0|(Q=0|n[(p=24+R|0)>>2]||0|n[28+R>>2]?6:Q))==6&&(n[((Q=0)|n[g>>2])+(X<<2)>>2]=n[(U=12+R|0)>>2],0|n[p>>2])&&(j=0|n[Xt+(X<<2)>>2],rt=(B=0|n[16+R>>2])+((F=0|n[U>>2])<<2)|0,0<(0|F)))for(p=0|n[I>>2],Pt=(0|n[$>>2])+(Z<<2)|0,F=B;n[Pt>>2]=n[p+((0|n[F>>2])+j<<2)>>2],!(rt>>>0<=(F=F+4|0)>>>0);)Pt=Pt+4|0;if(0|n[28+R>>2]&&(lt=(W=0|n[20+R>>2])+((F=0|n[12+R>>2])<<2)|0,0<(0|F)))for(p=(0|n[A>>2])+(Z<<2)|0,Pt=W;n[p>>2]=n[Pt>>2],!(lt>>>0<=(Pt=Pt+4|0)>>>0);)p=p+4|0;if((0|(X=X+1|0))==(0|Qt))break;Z=(0|n[8+R>>2])+Z|0}}(a),function(p){Lt((p|=0)+508|0,0|n[p+532>>2],0|n[p+536>>2],0)}(a),Ut(a),sr(a),function(p){var R=0,I=0,A=0,g=0,$=0,F=(R=0|n[(p|=0)+8>>2])+(12*($=0|n[p+4>>2])|0)|0,X=0|n[p+48>>2];if(!((0|$)<=0))for($=0|n[p+40>>2],I=X,p=0|n[p+52>>2];0|n[$>>2]&&(A=+D[p>>2],D[I>>2]=A,(0|(g=0|n[R+4>>2]))!=-1)&&(D[I>>2]=A*+D[X+(g<<2)>>2]),!(F>>>0<=(R=R+12|0)>>>0);)$=$+4|0,I=I+4|0,p=p+4|0}(a),function(p){var R=0,I=0,A=0,g=0|n[(p|=0)+304>>2];if(!((0|g)<=0))for(R=0|n[p+312>>2],I=0|n[p+308>>2],A=0;0|n[R>>2]&&yv[3&n[I+20>>2]](p,A),(0|(A=A+1|0))!=(0|g);)R=R+4|0,I=I+32|0}(a),Lr(a),Mt(a),function(p){p|=0;var R,I,A=0,g=0,$=0,F=0,X=0;if(!(0|n[p+624>>2]||(R=(A=0|n[p+336>>2])+(20*(F=0|n[p+332>>2])|0)|0,(0|F)<=0)))for(F=0|n[p+424>>2],p=0|n[p+444>>2];;){if(0|n[F>>2]&&($=0|n[p>>2],X=(g=0|n[A+16>>2])<<1,0<(0|g)))for(g=1;D[(I=$+(g<<2)|0)>>2]=-+D[I>>2],(0|(g=g+2|0))<(0|X););if(R>>>0<=(A=A+20|0)>>>0)break;F=F+4|0,p=p+4|0}}(a),function(p){p|=0;var R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0;if(Q=0|n[p+480>>2],ct=0|n[p+484>>2],Z=ct+(28*Q|0)|0,R=0|n[p+440>>2],I=0|n[p+44>>2],A=0|n[p+40>>2],g=0|n[p+424>>2],!((0|Q)<=0)){B=ct;do if(0<(0|($=0|n[B+4>>2])))for(F=0|n[B+12>>2],X=B+20|0,W=0;lt=0|n[F+(W<<4)+4>>2],rt=(0|n[F+(W<<4)>>2])==1,n[F+(W<<4)+12>>2]=n[(0|n[(rt?A:g)+(lt<<2)>>2]?(rt?I:R)+(lt<<2)|0:X)>>2],(0|(W=W+1|0))!=(0|$););while((B=B+28|0)>>>0<Z>>>0);U=0|n[p+436>>2],rt=p+488|0,lt=p+492|0,W=p+496|0,j=0;do{if(0<(0|n[(p=ct+(28*j|0)+24|0)>>2])){for(R=0|n[rt>>2],A=0;n[R+(A<<2)>>2]=-1,A=A+1|0,I=0|n[p>>2],(0|A)<(0|I););if(0<(0|I))for(R=0|n[W>>2],I=0;n[R+(I<<2)>>2]=-1,(0|(I=I+1|0))<(0|n[p>>2]););}if(0<(0|n[(B=ct+(28*j|0)+4|0)>>2])){for(Z=0|n[lt>>2],I=0;n[Z+(I<<2)>>2]=-1,I=I+1|0,R=0|n[B>>2],(0|I)<(0|R););if(0<(0|R))for(A=0|n[ct+(28*j|0)+12>>2],$=ct+(28*j|0)+20|0,g=0|n[W>>2],X=0;I=(0|n[A+(X<<4)+12>>2])-(0|n[$>>2])|0,R=(0|(R=0|n[(F=g+(I<<2)|0)>>2]))==-1?(0|n[rt>>2])+(I<<2)|0:Z+(R<<2)|0,n[R>>2]=X,(0|(X=(n[F>>2]=X)+1|0))<(0|n[B>>2]););}if(0<(0|(R=0|n[p>>2]))){X=0|n[rt>>2],Z=ct+(28*j|0)+12|0,I=(F=0)|n[ct+(28*j|0)+8>>2];do if((0|(A=0|n[X+(F<<2)>>2]))!=-1){for(g=0|n[Z>>2],$=0|n[lt>>2];R=(0|n[g+(A<<4)>>2])==1?(R=0|n[g+(A<<4)+8>>2],n[ct+(28*R|0)+8>>2]=I,0|n[ct+(28*R|0)>>2]):(n[U+(n[g+(A<<4)+4>>2]<<2)>>2]=I,1),I=R+I|0,!((0|(A=0|n[$+((B=A)<<2)>>2]))<=(0|B)|(0|A)==-1););R=0|n[p>>2]}while((0|(F=F+1|0))<(0|R))}}while((0|(j=j+1|0))!=(0|Q))}}(a),Or(a),n[a+620>>2]=0}function hi(a){a|=0;var l,v,S=0,C=0,p=0,R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0;if(!((0|we[4+(0|n[a>>2])>>0])<4||(v=(S=0|n[a+544>>2])+(52*(l=0|n[a+540>>2])|0)|0,(0|l)<=0))){l=(0|n[a+620>>2])==0;do{t:do if((0|n[S>>2])==1&&(B=+D[S+44>>2],W=0|n[S+36>>2],g=0|n[S+40>>2],j=W+(28*g|0)|0,0<(0|g))){if(!l)for(A=W;;){p=0|n[A>>2];do if(2<=(0|p)&&(X=0|n[A+4>>2],!(B<=(Z=+D[X>>2])))){for(R=1,I=Z;;){if(a=R+1|0,B<(C=+D[X+(R<<2)>>2])){g=25;break}if(!((0|a)<(0|p))){g=26;break}R=a,I=C}if((0|g)==25){a=R+-1|0,C=(B-I)/(C-I);break}if((0|g)==26){a=p+-1|0,C=0;break}}else C=a=0;while(0);if(I=+D[(R=A+16|0)>>2],p=1&((0|n[(g=A+12|0)>>2])!=(0|a)|(U=I!=C)&(C==0|I==0)),n[A+24>>2]=1&U,n[A+20>>2]=p,D[R>>2]=C,n[g>>2]=a,j>>>0<=(A=A+28|0)>>>0)break t}if(!(0|n[S+48>>2])){for(a=W;;)if(n[a+24>>2]=0,j>>>(n[a+20>>2]=0)<=(a=a+28|0)>>>0)break t}A=W;do{p=0|n[A>>2];do if(2<=(0|p)&&($=0|n[A+4>>2],!(B<=(F=+D[$>>2])))){for(R=1,I=F;;){if(a=R+1|0,B<(C=+D[$+(R<<2)>>2])){g=17;break}if(!((0|a)<(0|p))){g=18;break}R=a,I=C}if((0|g)==17){a=R+-1|0,C=(B-I)/(C-I);break}if((0|g)==18){a=p+-1|0,C=0;break}}else C=a=0;while(0)}while(I=+D[(g=A+16|0)>>2],R=1&((0|n[(U=A+12|0)>>2])!=(0|a)|(p=I!=C)&(C==0|I==0)),n[A+24>>2]=1&p,n[A+20>>2]=R,D[g>>2]=C,n[U>>2]=a,(A=A+28|0)>>>0<j>>>0)}while(0)}while((S=S+52|0)>>>0<v>>>0)}}function Tr(a){a|=0;var l,v,S,C,p=0,R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0;if(!((0|we[4+(0|n[a>>2])>>0])<4||(C=(p=0|n[a+592>>2])+(48*(S=0|n[a+588>>2])|0)|0,(0|S)<=0))){S=(0|n[a+620>>2])==0;do{if(a=0|n[p>>2],I=S?0|n[a+24>>2]:1,(X=S?0|n[a+20>>2]:1)|I){F=0|n[a+12>>2],R=+D[a+16>>2],$=(0|F)==(0|(a=0|n[a+8>>2]));do if(R!=0){if(g=F+1|0,$){R=(I=a=n[p+8>>2]=1)-R,$=11;break}a=(0|g)==(0|a)?1:2,$=10;break}while(a=1&(1^$),$=10,0);(0|$)==10&&($=0,n[p+8>>2]=a,I?(g=F,a=X,$=11):(g=F,a=X,I=0)),(0|$)==11&&(D[p+20>>2]=1-R,D[p+24>>2]=R),a?(n[p+12>>2]=g,n[p+16>>2]=g+1):a=0}else a=X;l=0|n[p+36>>2];t:do if(0<(0|l)){if(v=0|n[p+40>>2],!S)for(j=0,R=1;;){W=0|n[v+(j<<2)>>2],$=0|n[W+4>>2],F=0|n[W+8>>2],X=0|n[W+12>>2],B=+D[44+(0|n[W>>2])>>2];do if(1<=(0|X)){if((0|X)==1){A=+D[F>>2];break}if(B<=(A=+D[$>>2])){A=+D[F>>2];break}for(g=1;;){if(B<(Z=+D[$+(g<<2)>>2])){$=40;break}if(!((0|(g=g+1|0))<(0|X))){$=41;break}A=Z}if((0|$)==40){A=(1-(A=(B-A)/(Z-A)))*+D[F+(g+-1<<2)>>2]+A*+D[F+(g<<2)>>2];break}if((0|$)==41){A=+D[F+(X+-1<<2)>>2];break}}else A=1;while(0);if(R=R<(D[W+16>>2]=A)?R:A,(0|(j=j+1|0))==(0|l))break t}j=0,R=1;do if(W=0|n[v+(j<<2)>>2],g=0|n[W>>2],0|n[g+48>>2]){$=0|n[W+4>>2],F=0|n[W+8>>2],X=0|n[W+12>>2],B=+D[g+44>>2];do if(1<=(0|X)){if((0|X)==1){A=+D[F>>2];break}if(B<=(A=+D[$>>2])){A=+D[F>>2];break}for(g=1;;){if(B<(Z=+D[$+(g<<2)>>2])){$=28;break}if(!((0|(g=g+1|0))<(0|X))){$=27;break}A=Z}if((0|$)==27){A=+D[F+(X+-1<<2)>>2];break}if((0|$)==28){A=(1-(A=(B-A)/(Z-A)))*+D[F+(g+-1<<2)>>2]+A*+D[F+(g<<2)>>2];break}}else A=1;while(0);D[W+16>>2]=A}else A=+D[W+16>>2];while(R=R<A?R:A,(0|(j=j+1|0))!=(0|l))}else R=1;while(0)}while(D[p+44>>2]=R,n[p+28>>2]=a,n[p+32>>2]=I,(p=p+48|0)>>>0<C>>>0)}}function Ki(a,l,v){a|=0,l|=0,v|=0;var S,C,p,R=0,I=G;G=G+144|0,Gi(0|(C=I),640,144),n[C+48>>2]=R=(R=-2-a|0)>>>0<256?R:256,n[(S=C+20|0)>>2]=a,p=(n[C+44>>2]=a)+R|0,n[(a=C+16|0)>>2]=p,n[C+28>>2]=p,tn(C,l,v),0|R&&(p=0|n[S>>2],ft[p+(((0|p)==(0|n[a>>2]))<<31>>31)>>0]=0),G=I}function tn(a,l,v){en(a|=0,l|=0,v|=0)}function ui(a,l,v,S,C,p){a|=0,l=+l,v|=0,S|=0,C|=0,p|=0;var R,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=G;G=G+560|0,$=pt+32|0,$t=(g=(Yt=jt=pt)+540|0)+12|(n[(U=pt+536|0)>>2]=0),Qo(l),Xt=(0|(I=0|et()))<0?(Qo(l=-l),I=0|et(),Qt=1,2539):(Qt=(2049&C|0)!=0&1,2048&C|0?2542:1&C|0?2545:2540);do if(!0&(2146435072&I|0)==2146435072)jt=(32&p|0)!=0,Mr(a,32,v,I=Qt+3|0,-65537&C),Ie(a,Xt,Qt),Ie(a,l!=l|!1?jt?2566:2570:jt?2558:2562,3),Mr(a,32,v,I,8192^C);else{if((I=(B=2*+Ko(l,U))!=0)&&(n[U>>2]=(0|n[U>>2])-1),(0|(lt=32|p))==97){W=0|(X=32&p)?Xt+9|0:Xt,Z=2|Qt,I=12-S|0;do if(!(11<S>>>0|(0|I)==0)){for(l=8;l*=16,(0|(I=I+-1|0))!=0;);if((0|ft[W>>0])==45){l=-(l+(-B-l));break}l=B+l-l;break}while(l=B,0);for((0|(I=0|pn(I=(0|(A=0|n[U>>2]))<0?0-A|0:A,((0|I)<0)<<31>>31,$t)))==(0|$t)&&(ft[(I=g+11|0)>>0]=48),ft[I+-1>>0]=43+(A>>31&2),ft[(F=I+-2|0)>>0]=p+15,A=(0|S)<1,g=(8&C|0)==0,I=jt;$=I+1|0,ft[I>>0]=X|we[480+(Qt=~~l)>>0],l=16*(l-(0|Qt)),($-Yt|0)!=1||g&A&l==0||(ft[$>>0]=46,$=I+2|0),l!=0;)I=$;Mr(a,32,v,$t=(I=0|S&&(-2-Yt+$|0)<(0|S)?S+2+(A=$t)-(g=F)|0:(A=$t)-Yt-(g=F)+$|0)+Z|0,C),Ie(a,W,Z),Mr(a,48,v,$t,65536^C),Ie(a,jt,Yt=$-Yt|0),Mr(a,48,I-(Yt+(jt=A-g|0))|0,0,0),Ie(a,F,jt),Mr(a,32,v,$t,8192^C),I=$t;break}for(A=(0|S)<0?6:S,l=I?(g=(0|n[U>>2])-28|0,n[U>>2]=g,268435456*B):(g=0|n[U>>2],B),$=R=(0|g)<0?$:$+288|0;n[$>>2]=ct=~~l>>>0,$=$+4|0,(l=1e9*(l-(ct>>>0)))!=0;);if(ct=R,0<(0|g)){I=R;do{if(X=(0|g)<29?g:29,I>>>0<=(g=$+-4|0)>>>0){for(F=0;j=0|mn(0|(j=0|pv(0|n[g>>2],0,0|X)),0|et(),0|F,0),Q=0|mn(0|j,0|(rt=0|et()),0|(Q=0|Ln(0|(F=0|oa(0|j,0|rt,1e9,0)),0|et(),-1e9,-1)),0|et()),et(),n[g>>2]=Q,I>>>0<=(g=g+-4|0)>>>0;);F&&(n[(I=I+-4|0)>>2]=F)}t:do if(I>>>0<$>>>0)for(;;){if(0|n[(g=$+-4|0)>>2])break t;if(!(I>>>0<g>>>0)){$=g;break}$=g}while(0)}while(g=(0|n[U>>2])-X|0,0<(0|(n[U>>2]=g)))}else I=R;if((0|g)<0){S=1+((A+25|0)/9|0)|0,j=(0|lt)==102;do if(W=(0|(W=0-g|0))<9?W:9,I>>>0<$>>>0){for(X=(1<<W)-1|0,F=W?1e9>>>W:1e9,Z=0,g=I;Q=0|n[g>>2],n[g>>2]=(W?Q>>>W:Q)+Z,Z=0|z(Q&X,F),(g=g+4|0)>>>0<$>>>0;);I=0|n[I>>2]?I:I+4|0,Z&&(n[$>>2]=Z,$=$+4|0)}else I=0|n[I>>2]?I:I+4|0;while($=(0|S)<((Q=$-(g=j?R:I)|0)>>2|0)?g+(S<<2)|0:$,g=(0|n[U>>2])+W|0,(0|(n[U>>2]=g))<0);j=$}else j=$;if(I>>>0<j>>>0){if(g=9*((g=ct-I|0)>>2)|0,10<=(F=0|n[I>>2])>>>0)for($=10;g=g+1|0,($=10*$|0)>>>0<=F>>>0;);}else g=0;if((0|($=A-((0|lt)==102?0:g)+(((rt=(0|A)!=0)&(U=(0|lt)==103))<<31>>31)|0))<((9*((Q=j-ct|0)>>2)|0)-9|0)){if(S=R+4+(($=(0|(Q=$+9216|0))/9|0)+-1024<<2)|0,(0|($=Q+(0|z($,-9))|0))<8)for(F=10;F=10*F|0,(0|$)<7;)$=$+1|0;else F=10;if((Z=(S+4|0)==(0|j))&(0|(X=(X=0|n[S>>2])-(W=0|z($=(X>>>0)/(F>>>0)|0,F))|0))==0)$=S;else if(B=1&$|0?9007199254740994:9007199254740992,l=X>>>0<(Q=F>>>1)>>>0?.5:Z&(0|X)==(0|Q)?1:1.5,Qt&&(B=(Q=(0|ft[Xt>>0])==45)?-B:B,l=Q?-l:l),n[S>>2]=W,B+l!=B){if(999999999<(n[S>>2]=Q=W+F|0)>>>0)for(g=S;($=g+-4|0)>>>(n[g>>2]=0)<I>>>0&&(n[(I=I+-4|0)>>2]=0),Q=1+(0|n[$>>2])|0,999999999<(n[$>>2]=Q)>>>0;)g=$;else $=S;if(g=9*((g=ct-I|0)>>2)|0,10<=(X=0|n[I>>2])>>>0)for(F=10;g=g+1|0,(F=10*F|0)>>>0<=X>>>0;);}else $=S;Q=I,I=(lt=$+4|0)>>>0<j>>>0?lt:j}else Q=I,I=j;W=0-g|0;t:do if(Q>>>0<I>>>0)for(;;){if(0|n[($=I+-4|0)>>2]){j=1,lt=I;break t}if(!(Q>>>0<$>>>0)){j=0,lt=$;break}I=$}else j=0,lt=I;while(0);do if(U){if(F=(0|g)<(0|(I=A+(1&(1^rt))|0))&-5<(0|g)?(A=I+-1-g|0,p+-1|0):(A=I+-1|0,p+-2|0),!(8&C)){if(j&&0|(Pt=0|n[lt+-4>>2]))if((Pt>>>0)%10|0)$=0;else for(I=10,$=0;$=$+1|0,!((Pt>>>0)%((I=10*I|0)>>>0)|0););else $=9;if(I=(9*((I=lt-ct|0)>>2)|0)-9|0,(32|F)==102){A=(0|A)<(0|(p=0<(0|(p=I-$|0))?p:0))?A:p;break}A=(0|A)<(0|(p=0<(0|(p=I+g-$|0))?p:0))?A:p;break}}else F=p;while(0);if(X=(S=(0|A)!=0)?1:C>>>3&1,Z=(32|F)==102)I=(rt=0)<(0|g)?g:0;else{if((($=$t)-(I=0|pn(I=(0|g)<0?W:g,((0|I)<0)<<31>>31,$t))|0)<2)for(;ft[(I=I+-1|0)>>0]=48,($-I|0)<2;);ft[I+-1>>0]=43+(g>>31&2),ft[(I=I+-2|0)>>0]=F,I=$-(rt=I)|0}if(Mr(a,32,v,I=Qt+1+A+X+I|0,C),Ie(a,Xt,Qt),Mr(a,48,v,I,65536^C),Z){Z=W=jt+9|0,F=jt+8|0,$=X=R>>>0<Q>>>0?R:Q;do if(g=0|pn(0|n[$>>2],0,W),(0|$)==(0|X))(0|g)==(0|W)&&(ft[F>>0]=48,g=F);else if(jt>>>0<g>>>0)for(wi(0|jt,48,g-Yt|0);jt>>>0<(g=g+-1|0)>>>0;);while(Ie(a,g,Z-g|0),($=$+4|0)>>>0<=R>>>0);if((8&C|0)==0&(1^S)||Ie(a,2574,1),$>>>0<lt>>>0&0<(0|A))for(;;){if(jt>>>0<(g=0|pn(0|n[$>>2],0,W))>>>0)for(wi(0|jt,48,g-Yt|0);jt>>>0<(g=g+-1|0)>>>0;);if(Ie(a,g,(0|A)<9?A:9),g=A+-9|0,!(($=$+4|0)>>>0<lt>>>0&9<(0|A))){A=g;break}A=g}Mr(a,48,A+9|0,9,0)}else{if(Q>>>0<(S=j?lt:Q+4|0)>>>0&-1<(0|A)){U=(8&C|0)==0,j=W=jt+9|0,F=0-Yt|0,Z=jt+8|0,X=Q;do{(0|(g=0|pn(0|n[X>>2],0,W)))==(0|W)&&(ft[Z>>0]=48,g=Z);do if((0|X)==(0|Q)){if($=g+1|0,Ie(a,g,1),U&(0|A)<1){g=$;break}Ie(a,2574,1),g=$}else{if(g>>>0<=jt>>>0)break;for(wi(0|jt,48,g+F|0);jt>>>0<(g=g+-1|0)>>>0;);}while(0)}while(Ie(a,g,(0|(Yt=j-g|0))<(0|A)?Yt:A),(X=X+4|0)>>>0<S>>>0&-1<(0|(A=A-Yt|0)))}Mr(a,48,A+18|0,18,0),Ie(a,rt,$t-rt|0)}Mr(a,32,v,I,8192^C)}while(0);return G=pt,0|((0|I)<(0|v)?v:I)}function en(a,l,v){a|=0,l|=0,v|=0;var S,C,p,R,I,A,g,$,F=0,X=0,Z=G;for(G=G+224|0,I=Z+208|0,g=Z+80|0,X=(F=$=(A=Z)+160|0)+40|0;(0|(F=F+4|(n[F>>2]=0)))<(0|X););n[I>>2]=n[v>>2],0<=(0|li(0,l,I,g,$))&&(R=32&(v=0|n[a>>2]),(0|ft[a+74>>0])<1&&(n[a>>2]=-33&v),0|n[(X=a+48|0)>>2]?li(a,l,I,g,$):(v=0|n[(F=a+44|0)>>2],n[F>>2]=A,n[(S=a+28|0)>>2]=A,n[(p=a+20|0)>>2]=A,n[X>>2]=80,n[(C=a+16|0)>>2]=A+80,li(a,l,I,g,$),0|v&&(Th[3&n[a+36>>2]](a,0,0),n[F>>2]=v,n[X>>2]=0,n[C>>2]=0,n[S>>2]=0,n[p>>2]=0)),n[a>>2]=n[a>>2]|R),G=Z}function li(a,l,v,S,C){a|=0,v|=0,S|=0,C|=0;var p,R,I,A,g,$,F,X,Z,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=G;G=G+64|0,$=jt+40|0,Z=(R=jt)+48|0,F=jt+60|0,n[(X=jt+56|0)>>2]=l|=0,g=(0|a)!=0,A=p=R+40|0,R=R+39|0,I=4+Z|0,U=B=l=0;t:for(;;){do{do if(-1<(0|l)){if((2147483647-l|0)<(0|B)){n[922]=61,l=-1;break}l=B+l|0;break}while(0);if(Q=0|n[X>>2],!((B=0|ft[Q>>0])<<24>>24)){$t=91;break t}W=Q;e:for(;;){switch(B<<24>>24){case 37:$t=10;break e;case 0:B=W;break e}n[X>>2]=Qt=W+1|0,B=0|ft[Qt>>0],W=Qt}e:do if((0|$t)==10){$t=0,B=j=W;do if((0|ft[j+1>>0])!=37)break e;while(B=B+1|0,n[X>>2]=j=j+2|0,(0|ft[j>>0])==37)}while(0)}while(B=B-Q|0,g&&Ie(a,Q,B),(0|B)!=0);if(j=0|n[X>>2],lt=0|Nn(B=0|ft[j+1>>0])?(W=(lt=(0|ft[j+2>>0])==36)?3:1,Pt=lt?B+-48|0:-1,lt?1:U):(Pt=-(W=1),U),n[X>>2]=W=j+W|0,31<(j=((B=0|ft[W>>0])<<24>>24)-32|0)>>>0|(1<<j&75913|0)==0)rt=0;else for(B=0;;){if(U=1<<j|B,n[X>>2]=W=W+1|0,31<(j=((B=0|ft[W>>0])<<24>>24)-32|0)>>>0|(1<<j&75913|0)==0){rt=U;break}B=U}if(B<<24>>24==42){if(0|Nn(B=0|ft[(j=W+1|0)>>0])&&(0|ft[W+2>>0])==36)n[C+(B+-48<<2)>>2]=10,U=1,B=W+3|0,W=0|n[S+((0|ft[j>>0])-48<<3)>>2];else{if(0|lt){l=-1;break}g?(U=3+(0|n[v>>2])&-4,W=0|n[U>>2],n[v>>2]=U+4,U=0,B=j):(B=j,W=U=0)}j=n[X>>2]=B,ct=(Xt=(0|W)<0)?8192|rt:rt,Qt=U,Xt=Xt?0-W|0:W}else{if((0|(B=0|Ai(X)))<0){l=-1;break}j=0|n[X>>2],ct=rt,Qt=lt,Xt=B}do if((0|ft[j>>0])==46){if((0|ft[(B=j+1|0)>>0])!=42){n[X>>2]=B,rt=0|Ai(X),B=0|n[X>>2];break}if(0|Nn(W=0|ft[(B=j+2|0)>>0])&&(0|ft[j+3>>0])==36){n[C+(W+-48<<2)>>2]=10,rt=0|n[S+((0|ft[B>>0])-48<<3)>>2],n[X>>2]=B=j+4|0;break}if(0|Qt){l=-1;break t}g?(lt=3+(0|n[v>>2])&-4,W=0|n[lt>>2],n[v>>2]=lt+4):W=0,n[X>>2]=B,rt=W}else B=j,rt=-1;while(0);for(lt=0;;){if(57<((0|ft[B>>0])-65|0)>>>0){l=-1;break t}if(n[X>>2]=W=B+1|0,!(((U=255&(j=0|ft[(0|ft[B>>0])-65+(16+(58*lt|0))>>0]))+-1|0)>>>0<8))break;B=W,lt=U}if(!(j<<24>>24)){l=-1;break}W=-1<(0|Pt);do if(j<<24>>24==19){if(W){l=-1;break t}$t=52}else{if(W){n[C+(Pt<<2)>>2]=U,Pt=0|n[(U=S+(Pt<<3)|0)+4>>2],n[($t=$)>>2]=n[U>>2],n[$t+4>>2]=Pt,$t=52;break}if(!g){l=0;break t}Ui($,U,v),$t=53}while(0);(0|$t)==52&&($t=0,g?$t=53:B=0);e:do if((0|$t)==53){j=($t=0)!=(0|lt)&(15&(j=0|ft[B>>0])|0)==3?-33&j:j,B=-65537&ct,Pt=8192&ct|0?B:ct;r:do switch(0|j){case 110:switch((255&lt)<<24>>24){case 0:case 1:n[n[$>>2]>>2]=l,B=0;break e;case 2:B=0|n[$>>2],n[B>>2]=l,n[B+4>>2]=((0|l)<0)<<31>>31,B=0;break e;case 3:tr[n[$>>2]>>1]=l,B=0;break e;case 4:ft[n[$>>2]>>0]=l,B=0;break e;case 6:n[n[$>>2]>>2]=l,B=0;break e;case 7:B=0|n[$>>2],n[B>>2]=l,n[B+4>>2]=((0|l)<0)<<31>>31,B=0;break e;default:B=0;break e}case 112:B=8|Pt,W=8<rt>>>0?rt:8,U=120,$t=65;break;case 88:case 120:B=Pt,W=rt,U=j,$t=65;break;case 111:rt=(8&(B=Pt)|0)==0|(0|(j=A-(lt=0|function(pt,Ot,Jt){if(Jt|=0,!((0|(pt|=0))==0&(0|(Ot|=0))==0))for(;ft[(Jt=Jt+-1|0)>>0]=7&pt|48,pt=0|xh(0|pt,0|Ot,3),Ot=0|et(),!((0|pt)==0&(0|Ot)==0););return 0|Jt}(Q=0|n[(ct=$)>>2],ct=0|n[ct+4>>2],p))|0))<(0|rt)?rt:j+1|0,j=0,W=2522,$t=71;break;case 105:case 100:if(B=0|n[(W=$)>>2],(0|(W=0|n[W+4>>2]))<0){B=0|Jr(0,0,0|B,0|W),W=0|et(),n[(j=$)>>2]=B,n[j+4>>2]=W,j=1,U=2522,$t=70;break r}j=(2049&Pt|0)!=0&1,U=2048&Pt|0?2523:1&Pt|0?2524:2522,$t=70;break r;case 117:B=0|n[(W=$)>>2],W=0|n[W+4>>2],j=0,U=2522,$t=70;break;case 99:ft[R>>0]=n[$>>2],Q=R,lt=B,U=1,j=0,W=2522,B=A;break;case 115:Q=ct=0|(ct=0|n[$>>2])?ct:2532,lt=B,U=(Yt=(0|(Pt=0|function(pt,Ot){pt|=0;var Jt=0,Dt=0;Jt=(0|(Ot|=0))!=0;i:do if(Jt&(3&pt|0)!=0)for(;;){if(!(0|ft[pt>>0]))break i;if(!((Jt=(0|(Ot=Ot+-1|0))!=0)&(3&(pt=pt+1|0)|0)!=0)){Dt=5;break}}else Dt=5;while(0);i:do if((0|Dt)==5){do if(Jt){if(!(0|ft[pt>>0])){if(Ot)break i;break}n:do if(3<Ot>>>0)for(;;){if((-2139062144&(Jt=0|n[pt>>2])^-2139062144)&Jt+-16843009|0)break n;if(pt=pt+4|0,(Ot=Ot+-4|0)>>>0<=3){Dt=11;break}}else Dt=11;while(0);if((0|Dt)==11&&!Ot)break;for(;;){if(!(0|ft[pt>>0]))break i;if(!(Ot=Ot+-1|0))break;pt=pt+1|0}}while(0);pt=0}while(0);return 0|pt}(ct,rt)))==0)?rt:Pt-ct|0,j=0,W=2522,B=Yt?ct+rt|0:Pt;break;case 67:n[Z>>2]=n[$>>2],n[I>>2]=0,j=n[$>>2]=Z,rt=-1,$t=78;break;case 83:if(rt){j=0|n[$>>2],$t=78;break r}Mr(a,32,Xt,0,Pt),B=0,$t=88;break r;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:B=0|ui(a,+f[$>>3],Xt,rt,Pt,j);break e;default:lt=Pt,U=rt,j=0,W=2522,B=A}while(0);r:do if((0|$t)==65)lt=0|mh(Q=0|n[(ct=$)>>2],ct=0|n[ct+4>>2],p,32&U),rt=W,j=(Yt=(8&B|0)==0|(0|Q)==0&(0|ct)==0)?0:2,W=Yt?2522:2522+(U>>>4)|0,$t=71;else if((0|$t)==70)lt=0|pn(Q=B,ct=W,p),B=Pt,W=U,$t=71;else if((0|$t)==78){for(B=$t=0,lt=j;W=0|n[lt>>2];){if((U=(0|(W=0|Jo(F,W)))<0)|(rt-B|0)>>>0<W>>>0){$t=82;break}if(!((B=W+B|0)>>>0<rt>>>0))break;lt=lt+4|0}if((0|$t)==82&&($t=0,U)){l=-1;break t}if(Mr(a,32,Xt,B,Pt),B)for(U=0;;){if(!(W=0|n[j>>2])){$t=88;break r}if((0|B)<(0|(U=(W=0|Jo(F,W))+U|0))){$t=88;break r}if(Ie(a,F,W),B>>>0<=U>>>0){$t=88;break}j=j+4|0}else B=0,$t=88}while(0);if((0|$t)==71)Yt=($t=0)!=(0|rt)|(U=(0|Q)!=0|(0|ct)!=0),U=A-lt+(1&(1^U))|0,Q=Yt?lt:p,lt=-1<(0|rt)?-65537&B:B,U=Yt?(0|U)<(0|rt)?rt:U:0,B=A;else if((0|$t)==88){$t=0,Mr(a,32,Xt,B,8192^Pt),B=(0|B)<(0|Xt)?Xt:B;break}Mr(a,32,B=(0|Xt)<(0|(Yt=(ct=(0|U)<(0|(Pt=B-Q|0))?Pt:U)+j|0))?Yt:Xt,Yt,lt),Ie(a,W,j),Mr(a,48,B,Yt,65536^lt),Mr(a,48,ct,Pt,0),Ie(a,Q,Pt),Mr(a,32,B,Yt,8192^lt)}while(0);U=Qt}t:do if((0|$t)==91&&!a)if(U){for(l=1;B=0|n[C+(l<<2)>>2];)if(Ui(S+(l<<3)|0,B,v),10<=(l=l+1|0)>>>0){l=1;break t}for(B=0;;){if(l=l+1|0,0|B){l=-1;break t}if(10<=l>>>0){l=1;break t}B=0|n[C+(l<<2)>>2]}}else l=0;while(0);return G=jt,0|l}function Ie(a,l,v){l|=0,v|=0,32&n[(a|=0)>>2]||yh(l,v,a)}function Nn(a){return((a|=0)+-48|0)>>>0<10|0}function Ai(a){var l=0,S=0,v=0,S=0|n[(a|=0)>>2];if(0|Nn((l=0|ft[S>>0])<<24>>24))for(v=l,l=0;l=(10*l|0)-48+(v<<24>>24)|0,n[a>>2]=S=S+1|0,(0|Nn((v=0|ft[S>>0])<<24>>24))!=0;);else l=0;return 0|l}function Ui(a,l,v){a|=0,l|=0,v|=0;var S,C=0,p=0;t:do if(l>>>0<=20)switch(0|l){case 9:C=3+(0|n[v>>2])&-4,l=0|n[C>>2],n[v>>2]=C+4,n[a>>2]=l;break t;case 10:C=3+(0|n[v>>2])&-4,l=0|n[C>>2],n[v>>2]=C+4,n[(C=a)>>2]=l,n[C+4>>2]=((0|l)<0)<<31>>31;break t;case 11:C=3+(0|n[v>>2])&-4,l=0|n[C>>2],n[v>>2]=C+4,n[(C=a)>>2]=l,n[C+4>>2]=0;break t;case 12:C=7+(0|n[v>>2])&-8,p=0|n[(l=C)>>2],l=0|n[l+4>>2],n[v>>2]=C+8,n[(C=a)>>2]=p,n[C+4>>2]=l;break t;case 13:p=3+(0|n[v>>2])&-4,C=0|n[p>>2],n[v>>2]=p+4,n[(p=a)>>2]=C=(65535&C)<<16>>16,n[p+4>>2]=((0|C)<0)<<31>>31;break t;case 14:p=3+(0|n[v>>2])&-4,C=0|n[p>>2],n[v>>2]=p+4,n[(p=a)>>2]=65535&C,n[p+4>>2]=0;break t;case 15:p=3+(0|n[v>>2])&-4,C=0|n[p>>2],n[v>>2]=p+4,n[(p=a)>>2]=C=(255&C)<<24>>24,n[p+4>>2]=((0|C)<0)<<31>>31;break t;case 16:p=3+(0|n[v>>2])&-4,C=0|n[p>>2],n[v>>2]=p+4,n[(p=a)>>2]=255&C,n[p+4>>2]=0;break t;case 17:p=7+(0|n[v>>2])&-8,S=+f[p>>3],n[v>>2]=p+8,f[a>>3]=S;break t;case 18:(function(R,I){R|=0;var A=7+(0|n[(I|=0)>>2])&-8,g=+f[A>>3];n[I>>2]=8+A,f[R>>3]=g})(a,v);break t;default:break t}while(0)}function mh(a,l,v,S){if(v|=0,S|=0,!((0|(a|=0))==0&(0|(l|=0))==0))for(;ft[(v=v+-1|0)>>0]=0|we[480+(15&a)>>0]|S,!((0|(a=0|xh(0|a,0|l,4)))==0&(0|(l=0|et()))==0););return 0|v}function pn(a,l,v){v|=0;var S,C=0,p=0;if(0<(l|=0)>>>0|(0|l)==0&4294967295<(a|=0)>>>0)for(;p=0|mn(0|(S=a),0|(C=l),0|(p=0|Ln(0|(a=0|oa(0|a,0|l,10,0)),0|(l=0|et()),-10,-1)),0|et()),et(),ft[(v=v+-1|0)>>0]=255&p|48,9<C>>>0|(0|C)==9&4294967295<S>>>0;);if(a)for(;C=255&((p=a)+(0|z(a=(a>>>0)/10|0,-10))|48),ft[(v=v+-1|0)>>0]=C,10<=p>>>0;);return 0|v}function Mr(a,l,v,S,C){a|=0,l|=0;var p,R=G;if(G=G+256|0,p=R,(0|(S|=0))<(0|(v|=0))&(73728&(C|=0)|0)==0){if(wi(0|p,l<<24>>24|0,0|((C=v-S|0)>>>0<256?C:256)),255<C>>>0){for(S=C;Ie(a,p,256),255<(S=S+-256|0)>>>0;);C&=255}Ie(a,p,C)}G=R}function Jo(a,l){return l|=0,0|(a=(a|=0)?0|gh(a,l):0)}function gh(a,l){a|=0,l|=0;do if(a){if(l>>>0<128){ft[a>>0]=l,a=1;break}if(!(0|n[916])){if((-128&l|0)==57216){ft[a>>0]=l,a=1;break}n[922]=25,a=-1;break}if(l>>>0<2048){ft[a>>0]=l>>>6|192,ft[a+1>>0]=63&l|128,a=2;break}if(l>>>0<55296|(-8192&l|0)==57344){ft[a>>0]=l>>>12|224,ft[a+1>>0]=l>>>6&63|128,ft[a+2>>0]=63&l|128,a=3;break}if((l+-65536|0)>>>0<1048576){ft[a>>0]=l>>>18|240,ft[a+1>>0]=l>>>12&63|128,ft[a+2>>0]=l>>>6&63|128,ft[a+3>>0]=63&l|128,a=4;break}n[922]=25,a=-1;break}while(a=1,0);return 0|a}function yh(a,l,v){a|=0,l|=0;var S,C=0,p=0,R=0;(C=0|n[(p=(v|=0)+16|0)>>2])?R=5:0|function(I){var A=0,g=0;return g=0|ft[(A=74+(I|=0)|0)>>0],ft[A>>0]=255+g|g,A=8&(A=0|n[I>>2])?(n[I>>2]=32|A,-1):(n[I+8>>2]=0,n[I+4>>2]=0,A=0|n[I+44>>2],n[I+28>>2]=A,n[I+20>>2]=A,n[I+16>>2]=A+(0|n[I+48>>2]),0),0|A}(v)||(C=0|n[p>>2],R=5);t:do if((0|R)==5){if((C-(p=R=0|n[(S=v+20|0)>>2])|0)>>>0<l>>>0){Th[3&n[v+36>>2]](v,a,l);break}e:do if((0|ft[v+75>>0])<0|(0|l)==0)C=l;else{for(R=l;(0|ft[a+(C=R+-1|0)>>0])!=10;){if(!C){C=l;break e}R=C}if((0|Th[3&n[v+36>>2]](v,a,R))>>>0<R>>>0)break t;p=0|n[S>>2],C=l-R|0,a=a+R|0}while(0);Gi(0|p,0|a,0|C),n[S>>2]=(0|n[S>>2])+C}while(0)}function Qo(a){return f[d>>3]=a=+a,a=0|n[d>>2],tt(0|n[d+4>>2]),0|a}function Ko(a,l){l|=0;var v,S,C=0;switch(f[d>>3]=a=+a,S=0|xh(0|(C=0|n[d>>2]),0|(v=0|n[d+4>>2]),52),et(),2047&S){case 0:C=a!=0?(a=+Ko(18446744073709552e3*a,l),(0|n[l>>2])-64|0):0,n[l>>2]=C;break;case 2047:break;default:n[l>>2]=(2047&S)-1022,n[d>>2]=C,n[d+4>>2]=-2146435073&v|1071644672,a=+f[d>>3]}return+a}function ta(a){var l,C=0,v=0,S=0,C=0|ft[(a|=0)>>0];t:do if(C<<24>>24)for(v=a,S=4,a=1033;;){if(!(C<<24>>24==(l=0|ft[a>>0])<<24>>24&(0|(S=S+-1|0))!=0&l<<24>>24!=0))break t;if(a=a+1|0,!((C=0|ft[(v=v+1|0)>>0])<<24>>24)){C=0;break}}else C=0,a=1033;while(0);return(255&C)-(0|we[a>>0])|0}function Ys(a,l,v){l|=0,v|=0;var S,C,p,R=0,I=0,A=G;G=G+240|0,n[(p=A)>>2]=a|=0;t:do if(1<(0|l))for(I=R=a,a=1;;){if(-1<(0|oe(R,S=(I=I+-4|0)+(0-(0|n[v+((C=l+-2|0)<<2)>>2]))|0))&&-1<(0|oe(R,I))||(R=p+(a<<2)|0,a=a+1|0,(0|(l=-1<(0|oe(S,I))?(I=n[R>>2]=S,l+-1|0):(n[R>>2]=I,C)))<=1))break t;R=0|n[p>>2]}else a=1;while(0);ia(p,a),G=A}function fs(a,l){var v=0,S=0,C=(a|=0)+4|0;31<(l|=0)>>>0?(v=0|n[C>>2],n[a>>2]=v,l=l+-32|(S=n[C>>2]=0)):(v=0|n[a>>2],S=0|n[C>>2]),n[a>>2]=S<<32-l|(l?v>>>l:v),n[C>>2]=l?S>>>l:S}function cs(a,l,v,S,C,p){a|=0,v|=0,S|=0,C|=0,p|=0;var R,I,A,g=0,$=0,F=G;G=G+240|0,n[(I=(A=F)+232|0)>>2]=l|=0,n[(R=4+I|0)>>2]=v,n[A>>2]=a;t:do if((0|l)!=1|(0|v)!=0&&(g=a+(0-(0|n[p+(S<<2)>>2]))|0,1<=(0|oe(g,a))))for(l=g,$=1,g=(0|C)==0;;){if(g&1<(0|S)){if(-1<(0|oe(g=a+-4|0,l))){l=a,g=$,v=10;break t}if(-1<(0|oe(g+(0-(0|n[p+(S+-2<<2)>>2]))|0,l))){l=a,g=$,v=10;break t}}if(v=$+1|0,n[A+($<<2)>>2]=l,fs(I,C=0|ea(I)),S=C+S|0,!((0|n[I>>2])!=1|(0|n[R>>2])!=0)){g=v,v=10;break t}if((0|oe(g=l+(0-(0|n[p+(S<<2)>>2]))|0,0|n[A>>2]))<1){g=v,v=10;break}a=l,l=g,$=v,g=1}else v=9;while(0);(0|v)==9&&!(0|C)&&(l=a,g=1,v=10),(0|v)==10&&(ia(A,g),Ys(l,S,p)),G=F}function ds(a,l){var v=0,S=0,C=(a|=0)+4|0;31<(l|=0)>>>0?(v=0|n[a>>2],n[C>>2]=v,l=l+-32|(S=n[a>>2]=0)):(v=0|n[C>>2],S=0|n[a>>2]),n[C>>2]=((C=32-l|0)?S>>>C:S)|v<<l,n[a>>2]=S<<l}function ea(a){var l;return(l=0|ra((0|n[(a|=0)>>2])-1|0))?0|l:0|(0|(a=0|ra(0|n[a+4>>2]))?a+32|0:0)}function ra(a){var l=0;if(a|=0)if(1&a)l=0;else for(l=0;l=l+1|0,!(2&a);)a>>>=1;else l=32;return 0|l}function ia(a,l){a|=0;var v,S=0,C=G;if(G=G+256|0,S=C,2<=(0|(l|=0)))for(Gi(0|(n[a+(l<<2)>>2]=S),0|n[a>>2],4),S=0;Gi(0|n[(v=a+(S<<2)|0)>>2],0|n[a+((S=S+1|0)<<2)>>2],4),n[v>>2]=4+(0|n[v>>2]),(0|S)!=(0|l););G=C}function vn(a){a|=0;var l=0,v=0,S=0,C=0,p=0,R=0,I=0,A=0,g=0,$=0,F=0,X=0,Z=0,B=0,W=0,j=0,U=0,rt=0,lt=0,Q=0,ct=G;G=G+16|0,X=ct;do if(a>>>0<245){if(F=0|n[923],3&(v=(a=(g=a>>>0<11?16:a+11&-8)>>>3)?F>>>a:F)|0)return a=0|n[(l=(C=3732+((S=(1&v^1)+a|0)<<1<<2)|0)+8|0)>>2],(0|(v=0|n[(p=a+8|0)>>2]))==(0|C)?n[923]=F&~(1<<S):(n[v+12>>2]=C,n[l>>2]=v),n[a+4>>2]=3|(Q=S<<3),n[(Q=a+Q+4|0)>>2]=1|n[Q>>2],G=ct,0|(Q=p);if(($=0|n[925])>>>0<g>>>0){if(0|v)return p=0|n[(l=(v=3732+((S=((a=(S=(I=(S=((S=v<<a&((S=2<<a)|0-S))&0-S)-1|0)>>>12&16)?S>>>I:S)>>>5&8)|I|(p=(S=a?S>>>a:S)>>>2&4)|(l=(S=p?S>>>p:S)>>>1&2)|(v=(S=l?S>>>l:S)>>>1&1))+(v?S>>>v:S)|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|n[(I=p+8|0)>>2]))==(0|v)?n[923]=a=F&~(1<<S):(n[a+12>>2]=v,n[l>>2]=a,a=F),R=(Q=S<<3)-g|0,n[p+4>>2]=3|g,n[(C=p+g|0)+4>>2]=1|R,n[p+Q>>2]=R,0|$&&(S=0|n[928],v=3732+((l=$>>>3)<<1<<2)|0,a=a&(l=1<<l)?0|n[(l=a=v+8|0)>>2]:(n[923]=a|l,l=v+8|0,v),n[l>>2]=S,n[a+12>>2]=S,n[S+8>>2]=a,n[S+12>>2]=v),n[925]=R,n[928]=C,G=ct,0|(Q=I);if(p=0|n[924]){for(A=0|n[3996+(((S=(A=(C=(A=(p&0-p)-1|0)>>>12&16)?A>>>C:A)>>>5&8)|C|(R=(A=S?A>>>S:A)>>>2&4)|(v=(A=R?A>>>R:A)>>>1&2)|(I=(A=v?A>>>v:A)>>>1&1))+(I?A>>>I:A)<<2)>>2],I=(-8&n[A+4>>2])-g|0,v=A;!(!(a=0|n[v+16>>2])&&!(a=0|n[v+20>>2]));)I=(R=(v=(-8&n[a+4>>2])-g|0)>>>0<I>>>0)?v:I,v=a,A=R?a:A;if(A>>>0<(R=A+g|0)>>>0){C=0|n[A+24>>2],l=0|n[A+12>>2];do if((0|l)==(0|A)){if(!(l=0|n[(a=A+20|0)>>2])&&!(l=0|n[(a=A+16|0)>>2])){v=0;break}for(;;)if(v=0|n[(S=l+20|0)>>2])l=v,a=S;else{if(!(v=0|n[(S=l+16|0)>>2]))break;l=v,a=S}n[a>>2]=0,v=l}else v=0|n[A+8>>2],n[v+12>>2]=l,n[l+8>>2]=v,v=l;while(0);do if(0|C){if(l=0|n[A+28>>2],(0|A)==(0|n[(a=3996+(l<<2)|0)>>2])){if(!(n[a>>2]=v)){n[924]=p&~(1<<l);break}}else if(!(n[((0|n[(Q=C+16|0)>>2])==(0|A)?Q:C+20|0)>>2]=v))break;n[v+24>>2]=C,0|(l=0|n[A+16>>2])&&(n[v+16>>2]=l,n[l+24>>2]=v),0|(l=0|n[A+20>>2])&&(n[v+20>>2]=l,n[l+24>>2]=v)}while(0);return I>>>0<16?(n[A+4>>2]=3|(Q=I+g|0),n[(Q=A+Q+4|0)>>2]=1|n[Q>>2]):(n[A+4>>2]=3|g,n[R+4>>2]=1|I,n[R+I>>2]=I,0|$&&(S=0|n[928],v=3732+((l=$>>>3)<<1<<2)|0,a=(l=1<<l)&F?0|n[(l=a=v+8|0)>>2]:(n[923]=l|F,l=v+8|0,v),n[l>>2]=S,n[a+12>>2]=S,n[S+8>>2]=a,n[S+12>>2]=v),n[925]=I,n[928]=R),G=ct,0|(Q=A+8|0)}F=g}else F=g}else F=g}else if(a>>>0<=4294967231)if(g=-8&(a=a+11|0),S=0|n[924]){v=0-g|0,A=(a>>>=8)?16777215<g>>>0?31:1&((j=(A=14-((I=(I=(A=a<<(F=(F=a+1048320|0)>>>16&8))+520192|0)>>>16&4)|F|(j=(j=(A<<=I)+245760|0)>>>16&2))+((A<<=j)>>>15)|0)+7|0)?g>>>j:g)|A<<1:0,a=0|n[3996+(A<<2)>>2];t:do if(a)for(R=g<<(((C=0)|A)==31?0:25-(A>>>1)|0),I=a,a=0;;){if((p=(-8&n[I+4>>2])-g|0)>>>0<v>>>0){if(!p){v=0,a=C=I,j=65;break t}v=p,a=I}if(C=(0|(j=0|n[I+20>>2]))==0|(0|j)==(0|(I=0|n[I+16+(R>>>31<<2)>>2]))?C:j,!I){j=61;break}R<<=1}else a=C=0,j=61;while(0);if((0|j)==61){if((0|C)==0&(0|a)==0){if(!(a=((a=2<<A)|0-a)&S)){F=g;break}C=0|n[3996+(((R=(C=(I=(C=(a&0-a)-1|0)>>>12&16)?C>>>I:C)>>>5&8)|I|(A=(C=R?C>>>R:C)>>>2&4)|(F=(C=A?C>>>A:C)>>>1&2)|(a=(C=F?C>>>F:C)>>>1&1))+(a?C>>>a:C)<<2)>>2],a=0}C?j=65:(I=v,p=a)}if((0|j)==65)for(;;){if(v=(p=(F=(-8&n[C+4>>2])-g|0)>>>0<v>>>0)?F:v,p=p?C:a,!(a=(a=0|n[C+16>>2])||0|n[C+20>>2])){I=v;break}C=a,a=p}if(0|p&&I>>>0<((0|n[925])-g|0)>>>0&&p>>>0<($=p+g|0)>>>0){R=0|n[p+24>>2],l=0|n[p+12>>2];do if((0|l)==(0|p)){if(!(l=0|n[(a=p+20|0)>>2])&&!(l=0|n[(a=p+16|0)>>2])){l=0;break}for(;;)if(v=0|n[(C=l+20|0)>>2])l=v,a=C;else{if(!(v=0|n[(C=l+16|0)>>2]))break;l=v,a=C}n[a>>2]=0}else Q=0|n[p+8>>2],n[Q+12>>2]=l,n[l+8>>2]=Q;while(0);do if(R){if(a=0|n[p+28>>2],(0|p)==(0|n[(v=3996+(a<<2)|0)>>2])){if(!(n[v>>2]=l)){S&=~(1<<a),n[924]=S;break}}else if(!(n[((0|n[(Q=R+16|0)>>2])==(0|p)?Q:R+20|0)>>2]=l))break;n[l+24>>2]=R,0|(a=0|n[p+16>>2])&&(n[l+16>>2]=a,n[a+24>>2]=l),(a=0|n[p+20>>2])&&(n[l+20>>2]=a,n[a+24>>2]=l)}while(0);t:do if(I>>>0<16)n[p+4>>2]=3|(Q=I+g|0),n[(Q=p+Q+4|0)>>2]=1|n[Q>>2];else{if(n[p+4>>2]=3|g,n[$+4>>2]=1|I,l=(n[$+I>>2]=I)>>>3,I>>>0<256){v=3732+(l<<1<<2)|0,a=(a=0|n[923])&(l=1<<l)?0|n[(l=a=v+8|0)>>2]:(n[923]=a|l,l=v+8|0,v),n[l>>2]=$,n[a+12>>2]=$,n[$+8>>2]=a,n[$+12>>2]=v;break}if(l=3996+((v=(l=I>>>8)?16777215<I>>>0?31:1&((Q=(v=14-((rt=(rt=(v=l<<(lt=(lt=l+1048320|0)>>>16&8))+520192|0)>>>16&4)|lt|(Q=(Q=(v<<=rt)+245760|0)>>>16&2))+((v<<=Q)>>>15)|0)+7|0)?I>>>Q:I)|v<<1:0)<<2)|0,n[$+28>>2]=v,n[(a=$+16|0)+4>>2]=0,n[a>>2]=0,!(S&(a=1<<v))){n[924]=S|a,n[l>>2]=$,n[$+24>>2]=l,n[$+12>>2]=$,n[$+8>>2]=$;break}l=0|n[l>>2];e:do if((-8&n[l+4>>2]|0)!=(0|I)){for(S=I<<((0|v)==31?0:25-(v>>>1)|0);a=0|n[(v=l+16+(S>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|I)){l=a;break e}S<<=1,l=a}n[v>>2]=$,n[$+24>>2]=l,n[$+12>>2]=$,n[$+8>>2]=$;break t}while(0);Q=0|n[(lt=l+8|0)>>2],n[Q+12>>2]=$,n[lt>>2]=$,n[$+8>>2]=Q,n[$+12>>2]=l,n[$+24>>2]=0}while(0);return G=ct,0|(Q=p+8|0)}F=g}else F=g;else F=-1;while(0);if(F>>>0<=(v=0|n[925])>>>0)return l=0|n[928],15<(a=v-F|0)>>>0?(n[928]=Q=l+F|0,n[925]=a,n[Q+4>>2]=1|a,n[l+v>>2]=a,n[l+4>>2]=3|F):(n[925]=0,n[928]=0,n[l+4>>2]=3|v,n[(Q=l+v+4|0)>>2]=1|n[Q>>2]),G=ct,0|(Q=l+8|0);if(F>>>0<(R=0|n[926])>>>0)return n[926]=rt=R-F|0,Q=0|n[929],n[929]=lt=Q+F|0,n[lt+4>>2]=1|rt,n[Q+4>>2]=3|F,G=ct,0|(Q=Q+8|0);if(I=F+48|0,(g=(p=(a=0|n[1041]?0|n[1043]:(n[1043]=4096,n[1042]=4096,n[1044]=-1,n[1045]=-1,n[1046]=0,n[1034]=0,n[1041]=-16&X^1431655768,4096))+(A=F+47|0)|0)&(S=0-a|0))>>>0<=F>>>0||0|(a=0|n[1033])&&(X=($=0|n[1031])+g|0)>>>0<=$>>>0|a>>>0<X>>>0)return G=ct,(Q=0)|Q;t:do if(4&n[1034])l=0,j=143;else{v=0|n[929];e:do if(v){for(C=4140;!((a=0|n[C>>2])>>>0<=v>>>0&&(a+(0|n[(W=C+4|0)>>2])|0)>>>0>v>>>0);){if(!(a=0|n[C+8>>2])){j=128;break e}C=a}if((l=p-R&S)>>>0<2147483647)if((0|(a=0|rn(l)))==((0|n[C>>2])+(0|n[W>>2])|0)){if((0|a)!=-1){R=a,p=l,j=145;break t}}else S=a,j=136;else l=0}else j=128;while(0);do if((0|j)==128)if((0|(v=0|rn(0)))!=-1&&(l=v,B=(l=((B=(Z=0|n[1042])+-1|0)&l|0?(B+l&0-Z)-l|0:0)+g|0)+(Z=0|n[1031])|0,F>>>0<l>>>0&l>>>0<2147483647)){if(0|(W=0|n[1033])&&B>>>0<=Z>>>0|W>>>0<B>>>0){l=0;break}if((0|(a=0|rn(l)))==(0|v)){R=v,p=l,j=145;break t}S=a,j=136}else l=0;while(0);do if((0|j)==136){if(v=0-l|0,!(l>>>0<I>>>0&l>>>0<2147483647&(0|S)!=-1)){if((0|S)==-1){l=0;break}R=S,p=l,j=145;break t}if(2147483647<=(a=A-l+(a=0|n[1043])&0-a)>>>0){R=S,p=l,j=145;break t}if((0|rn(a))==-1){rn(v),l=0;break}R=S,p=a+l|0,j=145;break t}while(0);n[1034]=4|n[1034],j=143}while(0);if((0|j)==143&&g>>>0<2147483647&&!((0|(U=0|rn(g)))==-1|1^(rt=(F+40|0)>>>0<(lt=(W=0|rn(0))-U|0)>>>0)|U>>>0<W>>>0&(0|U)!=-1&(0|W)!=-1^1)&&(R=U,p=rt?lt:l,j=145),(0|j)==145){l=(0|n[1031])+p|0,(n[1031]=l)>>>0>(0|n[1032])>>>0&&(n[1032]=l),A=0|n[929];t:do if(A){for(C=4140;;){if((0|R)==((l=0|n[C>>2])+(a=0|n[(S=C+4|0)>>2])|0)){j=154;break}if(!(v=0|n[C+8>>2]))break;C=v}if((0|j)==154&&!(8&n[C+12>>2]|0)&&A>>>0<R>>>0&l>>>0<=A>>>0){n[S>>2]=a+p,lt=A+(rt=7&(rt=A+8|0)|0?0-rt&7:0)|0,rt=(Q=(0|n[926])+p|0)-rt|0,n[929]=lt,n[926]=rt,n[lt+4>>2]=1|rt,n[A+Q+4>>2]=40,n[930]=n[1045];break}for(R>>>0<(0|n[927])>>>0&&(n[927]=R),v=R+p|0,a=4140;;){if((0|n[a>>2])==(0|v)){j=162;break}if(!(l=0|n[a+8>>2]))break;a=l}if((0|j)==162&&!(8&n[a+12>>2]|0)){n[a>>2]=R,n[($=a+4|0)>>2]=(0|n[$>>2])+p,g=($=R+(7&($=R+8|0)|0?0-$&7:0)|0)+F|0,I=(l=v+(7&(l=v+8|0)|0?0-l&7:0)|0)-$-F|0,n[$+4>>2]=3|F;e:do if((0|A)==(0|l))Q=(0|n[926])+I|0,n[926]=Q,n[929]=g,n[g+4>>2]=1|Q;else{if((0|n[928])==(0|l)){Q=(0|n[925])+I|0,n[925]=Q,n[928]=g,n[g+4>>2]=1|Q,n[g+Q>>2]=Q;break}if((3&(a=0|n[l+4>>2])|0)==1){R=-8&a,S=a>>>3;r:do{if(a>>>0<256){if(a=0|n[l+8>>2],(0|(v=0|n[l+12>>2]))==(0|a)){n[923]=n[923]&~(1<<S);break}n[a+12>>2]=v,n[v+8>>2]=a;break}p=0|n[l+24>>2],a=0|n[l+12>>2];do if((0|a)==(0|l)){if(!(a=0|n[(v=(S=l+16|0)+4|0)>>2])){if(!(a=0|n[S>>2])){a=0;break}v=S}for(;;)if(S=0|n[(C=a+20|0)>>2])a=S,v=C;else{if(!(S=0|n[(C=a+16|0)>>2]))break;a=S,v=C}n[v>>2]=0}else Q=0|n[l+8>>2],n[Q+12>>2]=a,n[a+8>>2]=Q;while(0);if(!p)break;S=3996+((v=0|n[l+28>>2])<<2)|0;do{if((0|n[S>>2])==(0|l)){if(0|(n[S>>2]=a))break;n[924]=n[924]&~(1<<v);break r}if(!(n[((0|n[(Q=p+16|0)>>2])==(0|l)?Q:p+20|0)>>2]=a))break r}while(0)}while(n[a+24>>2]=p,0|(v=0|n[(S=l+16|0)>>2])&&(n[a+16>>2]=v,n[v+24>>2]=a),(v=0|n[S+4>>2])&&(n[a+20>>2]=v,n[v+24>>2]=a,0));l=l+R|0,C=R+I|0}else C=I;if(n[(l=l+4|0)>>2]=-2&n[l>>2],n[g+4>>2]=1|C,l=(n[g+C>>2]=C)>>>3,C>>>0<256){v=3732+(l<<1<<2)|0,a=(a=0|n[923])&(l=1<<l)?0|n[(l=a=v+8|0)>>2]:(n[923]=a|l,l=v+8|0,v),n[l>>2]=g,n[a+12>>2]=g,n[g+8>>2]=a,n[g+12>>2]=v;break}l=C>>>8;do if(l){if(16777215<C>>>0){S=31;break}S=1&((Q=(S=14-((rt=(rt=(S=l<<(lt=(lt=l+1048320|0)>>>16&8))+520192|0)>>>16&4)|lt|(Q=(Q=(S<<=rt)+245760|0)>>>16&2))+((S<<=Q)>>>15)|0)+7|0)?C>>>Q:C)|S<<1}else S=0;while(0);if(a=3996+(S<<2)|0,n[g+28>>2]=S,n[(l=g+16|0)+4>>2]=0,!((l=(n[l>>2]=0)|n[924])&(v=1<<S))){n[924]=l|v,n[a>>2]=g,n[g+24>>2]=a,n[g+12>>2]=g,n[g+8>>2]=g;break}l=0|n[a>>2];r:do if((-8&n[l+4>>2]|0)!=(0|C)){for(S=C<<((0|S)==31?0:25-(S>>>1)|0);a=0|n[(v=l+16+(S>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|C)){l=a;break r}S<<=1,l=a}n[v>>2]=g,n[g+24>>2]=l,n[g+12>>2]=g,n[g+8>>2]=g;break e}while(0);Q=0|n[(lt=l+8|0)>>2],n[Q+12>>2]=g,n[lt>>2]=g,n[g+8>>2]=Q,n[g+12>>2]=l,n[g+24>>2]=0}while(0);return G=ct,0|(Q=$+8|0)}for(a=4140;!((l=0|n[a>>2])>>>0<=A>>>0&&A>>>0<(Q=l+(0|n[a+4>>2])|0)>>>0);)a=0|n[a+8>>2];for(l=(a=(a=(C=Q+-47|0)+(7&(a=C+8|0)|0?0-a&7:0)|0)>>>0<(C=A+16|0)>>>0?A:a)+8|0,lt=R+(rt=7&(rt=R+8|0)|0?0-rt&7:0)|0,rt=(v=p+-40|0)-rt|0,n[929]=lt,n[926]=rt,n[lt+4>>2]=1|rt,n[R+v+4>>2]=40,n[930]=n[1045],n[(v=a+4|0)>>2]=27,n[l>>2]=n[1035],n[l+4>>2]=n[1036],n[l+8>>2]=n[1037],n[l+12>>2]=n[1038],n[1035]=R,n[1036]=p,n[1038]=0,n[1037]=l,l=a+24|0;n[(l=(lt=l)+4|0)>>2]=7,(lt+8|0)>>>0<Q>>>0;);if((0|a)!=(0|A)){if(p=a-A|0,n[v>>2]=-2&n[v>>2],n[A+4>>2]=1|p,l=(n[a>>2]=p)>>>3,p>>>0<256){v=3732+(l<<1<<2)|0,a=(a=0|n[923])&(l=1<<l)?0|n[(l=a=v+8|0)>>2]:(n[923]=a|l,l=v+8|0,v),n[l>>2]=A,n[a+12>>2]=A,n[A+8>>2]=a,n[A+12>>2]=v;break}if(v=3996+((S=(l=p>>>8)?16777215<p>>>0?31:1&((Q=(S=14-((rt=(rt=(S=l<<(lt=(lt=l+1048320|0)>>>16&8))+520192|0)>>>16&4)|lt|(Q=(Q=(S<<=rt)+245760|0)>>>16&2))+((S<<=Q)>>>15)|0)+7|0)?p>>>Q:p)|S<<1:0)<<2)|0,n[A+28>>2]=S,n[A+20>>2]=0,!((l=(n[C>>2]=0)|n[924])&(a=1<<S))){n[924]=l|a,n[v>>2]=A,n[A+24>>2]=v,n[A+12>>2]=A,n[A+8>>2]=A;break}l=0|n[v>>2];e:do if((-8&n[l+4>>2]|0)!=(0|p)){for(S=p<<((0|S)==31?0:25-(S>>>1)|0);a=0|n[(v=l+16+(S>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|p)){l=a;break e}S<<=1,l=a}n[v>>2]=A,n[A+24>>2]=l,n[A+12>>2]=A,n[A+8>>2]=A;break t}while(0);Q=0|n[(lt=l+8|0)>>2],n[Q+12>>2]=A,n[lt>>2]=A,n[A+8>>2]=Q,n[A+12>>2]=l,n[A+24>>2]=0}}else(0|(Q=0|n[927]))==0|R>>>0<Q>>>0&&(n[927]=R),n[1035]=R,n[1036]=p,n[1038]=0,n[932]=n[1041],n[931]=-1,n[936]=3732,n[935]=3732,n[938]=3740,n[937]=3740,n[940]=3748,n[939]=3748,n[942]=3756,n[941]=3756,n[944]=3764,n[943]=3764,n[946]=3772,n[945]=3772,n[948]=3780,n[947]=3780,n[950]=3788,n[949]=3788,n[952]=3796,n[951]=3796,n[954]=3804,n[953]=3804,n[956]=3812,n[955]=3812,n[958]=3820,n[957]=3820,n[960]=3828,n[959]=3828,n[962]=3836,n[961]=3836,n[964]=3844,n[963]=3844,n[966]=3852,n[965]=3852,n[968]=3860,n[967]=3860,n[970]=3868,n[969]=3868,n[972]=3876,n[971]=3876,n[974]=3884,n[973]=3884,n[976]=3892,n[975]=3892,n[978]=3900,n[977]=3900,n[980]=3908,n[979]=3908,n[982]=3916,n[981]=3916,n[984]=3924,n[983]=3924,n[986]=3932,n[985]=3932,n[988]=3940,n[987]=3940,n[990]=3948,n[989]=3948,n[992]=3956,n[991]=3956,n[994]=3964,n[993]=3964,n[996]=3972,n[995]=3972,n[998]=3980,n[997]=3980,lt=R+(rt=7&(rt=R+8|0)|0?0-rt&7:0)|0,rt=(Q=p+-40|0)-rt|0,n[929]=lt,n[926]=rt,n[lt+4>>2]=1|rt,n[R+Q+4>>2]=40,n[930]=n[1045];while(0);if(F>>>0<(l=0|n[926])>>>0)return n[926]=rt=l-F|0,Q=0|n[929],n[929]=lt=Q+F|0,n[lt+4>>2]=1|rt,n[Q+4>>2]=3|F,G=ct,0|(Q=Q+8|0)}return n[922]=48,G=ct,(Q=0)|Q}function _s(a){var l=0,v=0,S=0,C=0,p=0,R=0,I=0,A=0,g=0;if(a|=0){S=0|n[927],g=(v=a+-8|0)+(l=-8&(a=0|n[a+-4>>2]))|0;do if(1&a)A=I=v;else{if(C=0|n[v>>2],!(3&a)||(R=C+l|0,(p=v+(0-C)|0)>>>0<S>>>0))return;if((0|n[928])==(0|p)){if((3&(a=0|n[(l=g+4|0)>>2])|0)==3)return n[925]=R,n[l>>2]=-2&a,n[p+4>>2]=1|R,void(n[p+R>>2]=R);A=I=p,l=R;break}if(v=C>>>3,C>>>0<256){if(a=0|n[p+8>>2],(0|(l=0|n[p+12>>2]))==(0|a)){n[923]=n[923]&~(1<<v),A=I=p,l=R;break}n[a+12>>2]=l,n[l+8>>2]=a,A=I=p,l=R;break}C=0|n[p+24>>2],a=0|n[p+12>>2];do if((0|a)==(0|p)){if(!(a=0|n[(l=(v=p+16|0)+4|0)>>2])){if(!(a=0|n[v>>2])){v=0;break}l=v}for(;;)if(v=0|n[(S=a+20|0)>>2])a=v,l=S;else{if(!(v=0|n[(S=a+16|0)>>2]))break;a=v,l=S}n[l>>2]=0,v=a}else v=0|n[p+8>>2],n[v+12>>2]=a,n[a+8>>2]=v,v=a;while(0);if(C){if(a=0|n[p+28>>2],(0|n[(l=3996+(a<<2)|0)>>2])==(0|p)){if(!(n[l>>2]=v)){n[924]=n[924]&~(1<<a),A=I=p,l=R;break}}else if(!(n[((0|n[(A=C+16|0)>>2])==(0|p)?A:C+20|0)>>2]=v)){A=I=p,l=R;break}n[v+24>>2]=C,0|(a=0|n[(l=p+16|0)>>2])&&(n[v+16>>2]=a,n[a+24>>2]=v),l=(A=I=((a=0|n[l+4>>2])&&(n[v+20>>2]=a,n[a+24>>2]=v),p),R)}else A=I=p,l=R}while(0);if(!(g>>>0<=I>>>0)&&1&(v=0|n[(a=g+4|0)>>2])){if(2&v)n[a>>2]=-2&v,n[A+4>>2]=1|l,C=n[I+l>>2]=l;else{if((0|n[929])==(0|g))return g=(0|n[926])+l|0,n[926]=g,n[929]=A,n[A+4>>2]=1|g,void((0|A)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|g))return g=(0|n[925])+l|0,n[925]=g,n[928]=I,n[A+4>>2]=1|g,void(n[I+g>>2]=g);C=(-8&v)+l|0,S=v>>>3;do{if(v>>>0<256){if(l=0|n[g+8>>2],(0|(a=0|n[g+12>>2]))==(0|l)){n[923]=n[923]&~(1<<S);break}n[l+12>>2]=a,n[a+8>>2]=l;break}p=0|n[g+24>>2],a=0|n[g+12>>2];do if((0|a)==(0|g)){if(!(a=0|n[(l=(v=g+16|0)+4|0)>>2])){if(!(a=0|n[v>>2])){v=0;break}l=v}for(;;)if(v=0|n[(S=a+20|0)>>2])a=v,l=S;else{if(!(v=0|n[(S=a+16|0)>>2]))break;a=v,l=S}n[l>>2]=0,v=a}else v=0|n[g+8>>2],n[v+12>>2]=a,n[a+8>>2]=v,v=a;while(0);if(0|p){if(a=0|n[g+28>>2],(0|n[(l=3996+(a<<2)|0)>>2])==(0|g)){if(!(n[l>>2]=v)){n[924]=n[924]&~(1<<a);break}}else if(!(n[((0|n[(R=p+16|0)>>2])==(0|g)?R:p+20|0)>>2]=v))break;n[v+24>>2]=p,0|(a=0|n[(l=g+16|0)>>2])&&(n[v+16>>2]=a,n[a+24>>2]=v),0|(a=0|n[l+4>>2])&&(n[v+20>>2]=a,n[a+24>>2]=v)}}while(0);if(n[A+4>>2]=1|C,n[I+C>>2]=C,(0|A)==(0|n[928]))return void(n[925]=C)}if(a=C>>>3,C>>>0<256)return v=3732+(a<<1<<2)|0,l=(l=0|n[923])&(a=1<<a)?0|n[(a=l=v+8|0)>>2]:(n[923]=l|a,a=v+8|0,v),n[a>>2]=A,n[l+12>>2]=A,n[A+8>>2]=l,void(n[A+12>>2]=v);l=3996+((S=(a=C>>>8)?16777215<C>>>0?31:1&((g=(S=14-((R=(R=(S=a<<(I=(I=a+1048320|0)>>>16&8))+520192|0)>>>16&4)|I|(g=(g=(S<<=R)+245760|0)>>>16&2))+((S<<=g)>>>15)|0)+7|0)?C>>>g:C)|S<<1:0)<<2)|0,n[A+28>>2]=S,n[A+20>>2]=0,a=(n[A+16>>2]=0)|n[924],v=1<<S;t:do if(a&v){a=0|n[l>>2];e:do if((-8&n[a+4>>2]|0)!=(0|C)){for(S=C<<((0|S)==31?0:25-(S>>>1)|0);l=0|n[(v=a+16+(S>>>31<<2)|0)>>2];){if((-8&n[l+4>>2]|0)==(0|C)){a=l;break e}S<<=1,a=l}n[v>>2]=A,n[A+24>>2]=a,n[A+12>>2]=A,n[A+8>>2]=A;break t}while(0);g=0|n[(I=a+8|0)>>2],n[g+12>>2]=A,n[I>>2]=A,n[A+8>>2]=g,n[A+12>>2]=a,n[A+24>>2]=0}else n[924]=a|v,n[l>>2]=A,n[A+24>>2]=l,n[A+12>>2]=A,n[A+8>>2]=A;while(0);if(g=(0|n[931])-1|0,!(0|(n[931]=g))){for(a=4148;a=0|n[a>>2];)a=a+8|0;n[931]=-1}}}}function ps(a,l){var A=0,v=0,S=0,C=0,p=0,R=0,I=0,I=(a|=0)+(l|=0)|0,A=0|n[a+4>>2];do if(1&A)R=a,a=l;else{if(v=0|n[a>>2],!(3&A))return;if(p=v+l|0,(0|n[928])==(0|(C=a+(0-v)|0))){if((3&(A=0|n[(a=I+4|0)>>2])|0)==3)return n[925]=p,n[a>>2]=-2&A,n[C+4>>2]=1|p,void(n[I>>2]=p);R=C,a=p;break}if(l=v>>>3,v>>>0<256){if(A=0|n[C+8>>2],(0|(a=0|n[C+12>>2]))==(0|A)){n[923]=n[923]&~(1<<l),R=C,a=p;break}n[A+12>>2]=a,n[a+8>>2]=A,R=C,a=p;break}S=0|n[C+24>>2],A=0|n[C+12>>2];do if((0|A)==(0|C)){if(!(A=0|n[(a=(l=C+16|0)+4|0)>>2])){if(!(A=0|n[l>>2])){l=0;break}a=l}for(;;)if(l=0|n[(v=A+20|0)>>2])A=l,a=v;else{if(!(l=0|n[(v=A+16|0)>>2]))break;A=l,a=v}n[a>>2]=0,l=A}else l=0|n[C+8>>2],n[l+12>>2]=A,n[A+8>>2]=l,l=A;while(0);if(S){if(A=0|n[C+28>>2],(0|n[(a=3996+(A<<2)|0)>>2])==(0|C)){if(!(n[a>>2]=l)){n[924]=n[924]&~(1<<A),R=C,a=p;break}}else if(!(n[((0|n[(R=S+16|0)>>2])==(0|C)?R:S+20|0)>>2]=l)){R=C,a=p;break}n[l+24>>2]=S,0|(A=0|n[(a=C+16|0)>>2])&&(n[l+16>>2]=A,n[A+24>>2]=l),a=(R=((A=0|n[a+4>>2])&&(n[l+20>>2]=A,n[A+24>>2]=l),C),p)}else R=C,a=p}while(0);if(2&(l=0|n[(A=I+4|0)>>2]))n[A>>2]=-2&l,n[R+4>>2]=1|a,n[R+a>>2]=a;else{if((0|n[929])==(0|I))return I=(0|n[926])+a|0,n[926]=I,n[929]=R,n[R+4>>2]=1|I,void((0|R)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|I))return I=(0|n[925])+a|0,n[925]=I,n[928]=R,n[R+4>>2]=1|I,void(n[R+I>>2]=I);C=(-8&l)+a|0,v=l>>>3;do{if(l>>>0<256){if(a=0|n[I+8>>2],(0|(A=0|n[I+12>>2]))==(0|a)){n[923]=n[923]&~(1<<v);break}n[a+12>>2]=A,n[A+8>>2]=a;break}S=0|n[I+24>>2],A=0|n[I+12>>2];do if((0|A)==(0|I)){if(!(A=0|n[(a=(l=I+16|0)+4|0)>>2])){if(!(A=0|n[l>>2])){l=0;break}a=l}for(;;)if(l=0|n[(v=A+20|0)>>2])A=l,a=v;else{if(!(l=0|n[(v=A+16|0)>>2]))break;A=l,a=v}n[a>>2]=0,l=A}else l=0|n[I+8>>2],n[l+12>>2]=A,n[A+8>>2]=l,l=A;while(0);if(0|S){if(A=0|n[I+28>>2],(0|n[(a=3996+(A<<2)|0)>>2])==(0|I)){if(!(n[a>>2]=l)){n[924]=n[924]&~(1<<A);break}}else if(!(n[((0|n[(p=S+16|0)>>2])==(0|I)?p:S+20|0)>>2]=l))break;n[l+24>>2]=S,0|(A=0|n[(a=I+16|0)>>2])&&(n[l+16>>2]=A,n[A+24>>2]=l),0|(A=0|n[a+4>>2])&&(n[l+20>>2]=A,n[A+24>>2]=l)}}while(0);if(n[R+4>>2]=1|C,n[R+C>>2]=C,(0|R)==(0|n[928]))return void(n[925]=C);a=C}if(A=a>>>3,a>>>0<256)return l=3732+(A<<1<<2)|0,a=(a=0|n[923])&(A=1<<A)?0|n[(A=a=l+8|0)>>2]:(n[923]=a|A,A=l+8|0,l),n[A>>2]=R,n[a+12>>2]=R,n[R+8>>2]=a,void(n[R+12>>2]=l);if(l=3996+((S=(A=a>>>8)?16777215<a>>>0?31:1&((I=(S=14-((C=(C=(S=A<<(p=(p=A+1048320|0)>>>16&8))+520192|0)>>>16&4)|p|(I=(I=(S<<=C)+245760|0)>>>16&2))+((S<<=I)>>>15)|0)+7|0)?a>>>I:a)|S<<1:0)<<2)|0,n[R+28>>2]=S,n[R+20>>2]=0,!((A=(n[R+16>>2]=0)|n[924])&(v=1<<S)))return n[924]=A|v,n[l>>2]=R,n[R+24>>2]=l,n[R+12>>2]=R,void(n[R+8>>2]=R);A=0|n[l>>2];t:do if((-8&n[A+4>>2]|0)!=(0|a)){for(S=a<<((0|S)==31?0:25-(S>>>1)|0);l=0|n[(v=A+16+(S>>>31<<2)|0)>>2];){if((-8&n[l+4>>2]|0)==(0|a)){A=l;break t}S<<=1,A=l}return n[v>>2]=R,n[R+24>>2]=A,n[R+12>>2]=R,void(n[R+8>>2]=R)}while(0);I=0|n[(p=A+8|0)>>2],n[I+12>>2]=R,n[p>>2]=R,n[R+8>>2]=I,n[R+12>>2]=A,n[R+24>>2]=0}function na(a,l,v){a|=0;var S;return(3&(l|=0)|0)!=0|(0|(S=l>>>2))==0||1073741823+S&S|0?0|(a=28):!((-64-l|0)>>>0<(v|=0)>>>0)&&(l=0|function(C,p){p|=0;var R,I=0,A=0,g=0,$=0,F=0;if((I=16<(C|=0)>>>0?C:16)+-1&I)for(C=16;C>>>0<I>>>0;)C<<=1;else C=I;if((-64-C|0)>>>0<=p>>>0)return n[922]=48,($=0)|$;if(!(I=0|vn(12+(R=p>>>0<11?16:p+11&-8)+C|0)))return($=0)|$;g=I+-8|0;do if(C+-1&I){if(A=15<((A=(I+C+-1&0-C)-8|0)-(p=g)|0)>>>0?A:A+C|0,I=(-8&(F=0|n[(C=I+-4|0)>>2]))-(p=A-p|0)|0,3&F){n[(F=A+4|0)>>2]=I|1&n[F>>2]|2,n[(I=A+I+4|0)>>2]=1|n[I>>2],n[C>>2]=p|1&n[C>>2]|2,n[F>>2]=1|n[F>>2],ps(g,p),C=p=A;break}n[A>>2]=(0|n[g>>2])+p,n[A+4>>2]=I,C=p=A;break}while(C=p=g,0);return 3&(C=0|n[(I=C+4|0)>>2])|0&&(16+R|0)>>>0<($=-8&C)>>>0&&(F=$-R|0,g=p+R|0,n[I>>2]=R|1&C|2,n[g+4>>2]=3|F,n[($=p+$+4|0)>>2]=1|n[$>>2],ps(g,F)),0|(F=p+8|0)}(16<l>>>0?l:16,v))?(n[a>>2]=l,(a=0)|a):0|(a=48)}function rn(a){var l,v=0;return(a=(l=0|n[(v=4208)>>2])+(a|=0)|0)>>>0>(0|It())>>>0&&!(0|Bt(0|a))?(n[922]=48,0|(v=-1)):(n[v>>2]=a,0|(v=l))}function Ln(a,l,v,S){l|=0,S|=0;var C=0,p=0;return v=0|function(R,I){var A,g,$,F;return R=(($=0|z(g=65535&(I|=0),A=65535&(R|=0)))>>>16)+(0|z(g,F=R>>>16))|0,I=0|z(g=I>>>16,A),0|(tt((R>>>16)+(0|z(g,F))+(((65535&R)+I|0)>>>16)|0),R+I<<16|65535&$|0)}(C=a|=0,p=v|=0),a=0|et(),0|(tt((0|z(l,p))+(0|z(S,C))+a|0&a|0),0|v)}function mn(a,l,v,S){return 0|(tt((l|=0)+(S|=0)+((v=(a|=0)+(v|=0)>>>0)>>>0<a>>>0|0)>>>0|0),0|v)}function Jr(a,l,v,S){return 0|(tt(0|(S=(l|=0)-(S|=0)-((a|=0)>>>0<(v|=0)>>>0|0)>>>0)),a-v>>>0|0)}function sa(a){return 0|((a|=0)?31-(0|k(a^a-1))|0:32)}function bh(a,l,v,S,C){C|=0;var p=0,Z=0,B=0,R=0,I=0,X=0,A=0,g=0,$=0,F=0,X=a|=0,Z=v|=0,B=g=S|=0;if(!(I=R=l|=0))return p=(0|C)!=0,B?(p&&(n[C>>2]=0|a,n[C+4>>2]=0&l),(C=g=0)|(tt(0|g),C)):(p&&(n[C>>2]=(X>>>0)%(Z>>>0),n[C+4>>2]=0),C=(X>>>(g=0))/(Z>>>0)>>>0,0|(tt(0|g),C));p=(0|B)==0;do{if(Z){if(!p){if((p=(0|k(0|B))-(0|k(0|I))|0)>>>0<=31){a=X>>>((Z=A=p+1|0)>>>0)&(l=p-31>>31)|I<<(B=31-p|0),l&=I>>>(A>>>0),p=0,B=X<<B;break}return C&&(n[C>>2]=0|a,n[C+4>>2]=R|0&l),(C=g=0)|(tt(0|g),C)}if((p=Z-1|0)&Z|0){a=(A=32-(B=33+(0|k(0|Z))-(0|k(0|I))|0)|0)-1>>31&I>>>(($=B-32|0)>>>0)|(I<<A|X>>>((Z=B)>>>0))&(l=$>>31),l&=I>>>(B>>>0),p=X<<(F=64-B|0)&(R=A>>31),B=(I<<F|X>>>($>>>0))&R|X<<A&B-33>>31;break}return 0|C&&(n[C>>2]=p&X,n[C+4>>2]=0),(0|Z)==1?(F=0|a,0|(tt(0|($=R|0&l)),F)):($=I>>>((F=0|sa(0|Z))>>>0)|0,F=I<<32-F|X>>>(F>>>0)|0,0|(tt(0|$),F))}if(p)return 0|C&&(n[C>>2]=(I>>>0)%(Z>>>0),n[C+4>>2]=0),F=(I>>>($=0))/(Z>>>0)>>>0,0|(tt(0|$),F);if(!X)return 0|C&&(n[C>>2]=0,n[C+4>>2]=(I>>>0)%(B>>>0)),F=(I>>>($=0))/(B>>>0)>>>0,0|(tt(0|$),F);if(!((p=B-1|0)&B))return 0|C&&(n[C>>2]=0|a,n[C+4>>2]=p&I|0&l),F=I>>>((($=0)|sa(0|B))>>>0),0|(tt(0|$),F);if((p=(0|k(0|B))-(0|k(0|I))|0)>>>0<=30){a=I<<(B=31-p|0)|X>>>((Z=l=p+1|0)>>>0),l=I>>>(l>>>0),p=0,B=X<<B;break}return C&&(n[C>>2]=0|a,n[C+4>>2]=R|0&l),(F=$=0)|(tt(0|$),F)}while(0);if(Z){for(I=0|mn(0|(A=0|v),0|(X=g|0&S),-1,-1),v=0|et(),R=B,B=0;R=p>>>31|(S=R)<<1,p=B|p<<1,Jr(0|I,0|v,0|(S=a<<1|S>>>31|0),0|(g=a>>>31|l<<1|0)),B=1&($=(F=0|et())>>31|((0|F)<0?-1:0)<<1),a=0|Jr(0|S,0|g,$&A|0,(((0|F)<0?-1:0)>>31|((0|F)<0?-1:0)<<1)&X|0),l=0|et(),(0|(Z=Z-1|0))!=0;);I=R,R=0}else I=B,B=R=0;return(Z=0)|C&&(n[C>>2]=a,n[C+4>>2]=l),F=-2&(p<<1|0)|B,0|(tt(0|($=(0|p)>>>31|(I|Z)<<1|0&(Z<<1|p>>>31)|R)),F)}function oa(a,l,v,S){return 0|bh(a|=0,l|=0,v|=0,S|=0,0)}function xh(a,l,v){return a|=0,l|=0,(0|(v|=0))<32?(tt(l>>>v|0),a>>>v|(l&(1<<v)-1)<<32-v):(tt(0),l>>>v-32|0)}function pv(a,l,v){return a|=0,l|=0,(0|(v|=0))<32?(tt(l<<v|(a&(1<<v)-1<<32-v)>>>32-v|0),a<<v):(tt(a<<v-32|0),0)}function YI(){return 4208}function Gi(a,l,v){a|=0,l|=0;var S,C,p;if(8192<=(0|(v|=0)))return re(0|a,0|l,0|v),0|a;if(p=0|a,C=a+v|0,(3&a)==(3&l)){for(;3&a;){if(!v)return 0|p;ft[a>>0]=0|ft[l>>0],a=a+1|0,l=l+1|0,v=v-1|0}for(S=(v=-4&C|0)-64|0;(0|a)<=(0|S);)n[a>>2]=n[l>>2],n[a+4>>2]=n[l+4>>2],n[a+8>>2]=n[l+8>>2],n[a+12>>2]=n[l+12>>2],n[a+16>>2]=n[l+16>>2],n[a+20>>2]=n[l+20>>2],n[a+24>>2]=n[l+24>>2],n[a+28>>2]=n[l+28>>2],n[a+32>>2]=n[l+32>>2],n[a+36>>2]=n[l+36>>2],n[a+40>>2]=n[l+40>>2],n[a+44>>2]=n[l+44>>2],n[a+48>>2]=n[l+48>>2],n[a+52>>2]=n[l+52>>2],n[a+56>>2]=n[l+56>>2],n[a+60>>2]=n[l+60>>2],a=a+64|0,l=l+64|0;for(;(0|a)<(0|v);)n[a>>2]=n[l>>2],a=a+4|0,l=l+4|0}else for(v=C-4|0;(0|a)<(0|v);)ft[a>>0]=0|ft[l>>0],ft[a+1>>0]=0|ft[l+1>>0],ft[a+2>>0]=0|ft[l+2>>0],ft[a+3>>0]=0|ft[l+3>>0],a=a+4|0,l=l+4|0;for(;(0|a)<(0|C);)ft[a>>0]=0|ft[l>>0],a=a+1|0,l=l+1|0;return 0|p}function wi(a,l,v){var S,C,p,R=(a|=0)+(v|=0)|0;if(l=(l|0)&255,67<=(0|v)){for(;3&a;)ft[a>>0]=l,a=a+1|0;for(p=l|l<<8|l<<16|l<<24,C=(S=-4&R|0)-64|0;(0|a)<=(0|C);)n[a>>2]=p,n[a+4>>2]=p,n[a+8>>2]=p,n[a+12>>2]=p,n[a+16>>2]=p,n[a+20>>2]=p,n[a+24>>2]=p,n[a+28>>2]=p,n[a+32>>2]=p,n[a+36>>2]=p,n[a+40>>2]=p,n[a+44>>2]=p,n[a+48>>2]=p,n[a+52>>2]=p,n[a+56>>2]=p,n[a+60>>2]=p,a=a+64|0;for(;(0|a)<(0|S);)n[a>>2]=p,a=a+4|0}for(;(0|a)<(0|R);)ft[a>>0]=l,a=a+1|0;return R-v|0}function vv(a){return q(0),0}function mv(a,l,v,S){return q(2),0}var qI=[vv,function(a){return 0|ht(0,0|(a|=0))},function(a){return 0},vv],Th=[function(a,l,v){return q(1),0},function(a,l,v){return 0|gt(0,0|(a|=0),0|(l|=0),0|(v|=0))},function(a,l,v){l|=0,v|=0;var S,C,p,R,I,A,g,$=0,F=0,X=0,Z=0,B=G;for(G=G+32|0,C=(F=B)+16|0,$=0|n[(p=(a|=0)+28|0)>>2],n[F>>2]=$,$=(0|n[(R=a+20|0)>>2])-$|0,n[F+4>>2]=$,n[F+8>>2]=l,S=a+60|0,$=$+(n[F+12>>(X=2)]=v)|0;;){if((0|$)==(0|(l=0|function(W){return 0|(W=(W|=0)<<16>>16?(n[922]=65535&W,-1):0)}(0|St(0|n[S>>2],0|F,0|X,0|C))?n[C>>2]=-1:0|n[C>>2]))){l=6;break}if((0|l)<0){l=8;break}Z=0|n[F+4>>2],n[(A=(I=Z>>>0<l>>>0)?F+8|0:F)>>2]=(0|n[A>>2])+(Z=l-(I?Z:0)|0),n[(g=A+4|0)>>2]=(0|n[g>>2])-Z,F=A,X=X+(I<<31>>31)|0,$=$-l|0}return(0|l)==6?(Z=0|n[a+44>>2],n[a+16>>2]=Z+(0|n[a+48>>2]),n[p>>2]=Z,n[R>>2]=Z):(0|l)==8&&(n[a+16>>2]=0,n[p>>2]=0,n[R>>2]=0,n[a>>2]=32|n[a>>2],v=(0|X)==2?0:v-(0|n[F+4>>2])|0),G=B,0|v},function(a,l,v){var S,C;return Gi(0|(C=0|n[(S=(a|=0)+20|0)>>2]),0|(l|=0),0|(a=(v|=0)>>>0<(a=(0|n[a+16>>2])-C|0)>>>0?v:a)),n[S>>2]=(0|n[S>>2])+a,0|v}],ZI=[mv,function(a,l,v,S){return 0|xt(0,0|(a|=0),0|(l|=0),0|(v|=0),0|(S|=0))},function(a,l,v,S){return tt(0),0},mv],gv=[function(a){q(3)},function(a){ut(0,0|(a|=0))}],yv=[function(a,l){q(4)},function(a,l){Ct(0,0|(a|=0),0|(l|=0))},function(a,l){var v,A=0,g=0,$=0,S=0,C=0,p=0,R=0,I=0,A=0|n[(v=(a|=0)+308|0)>>2],g=0|n[a+316>>2],$=0|n[a+320>>2];(0|(S=0|n[(C=A+((l|=0)<<5)+8|0)>>2]))==-1?(n[g+(l<<2)>>2]=n[(0|n[a+148>>2])+(n[A+(l<<5)+16>>2]<<2)>>2],D[$+(l<<2)>>2]=1):(R=0|n[(p=A+(l<<5)+16|0)>>2],I=0|n[(0|n[a+152>>2])+(R<<2)>>2],vs[3&n[A+(S<<5)+24>>2]](a,S,I,I,0|n[(0|n[a+60>>2])+(24*R|0)+16>>2]),C=0|n[C>>2],D[g+(l<<2)>>2]=+D[(0|n[a+148>>2])+(n[p>>2]<<2)>>2]*+D[g+(C<<2)>>2],n[$+(l<<2)>>2]=n[$+(C<<2)>>2]),(0|we[4+(0|n[a>>2])>>0])<4||(A=0|n[v>>2],g=0|n[a+324>>2],v=0|n[a+328>>2],$=l<<2,S=n[A+(l<<5)+16>>2]<<2,(0|(A=0|n[A+(l<<5)+8>>2]))==-1?(A=0|n[a+156>>2],n[g+($<<2)>>2]=n[A+(S<<2)>>2],n[g+((l=1|$)<<2)>>2]=n[A+((C=1|S)<<2)>>2],n[g+((I=2|$)<<2)>>2]=n[A+((R=2|S)<<2)>>2],D[g+((A=3|$)<<2)>>2]=1,p=0|n[a+160>>2],n[v+($<<2)>>2]=n[p+(S<<2)>>2],n[v+(l<<2)>>2]=n[p+(C<<2)>>2],n[v+(I<<2)>>2]=n[p+(R<<2)>>2]):(R=A<<2,p=(0|n[a+156>>2])+(S<<2)|0,D[(A=g+($<<2)|0)>>2]=+D[p>>2]*+D[(I=g+(R<<2)|0)>>2],D[A+4>>2]=+D[p+4>>2]*+D[I+4>>2],D[A+8>>2]=+D[p+8>>2]*+D[I+8>>2],D[g+((A=3|$)<<2)>>2]=1,p=(0|n[a+160>>2])+(S<<2)|0,l=+D[p>>2],C=+D[(R=v+(R<<2)|0)>>2],D[(I=v+($<<2)|0)>>2]=l+C-l*C,C=+D[p+4>>2],l=+D[R+4>>2],D[I+4>>2]=C+l-C*l,l=+D[p+8>>2],C=+D[R+8>>2],D[I+8>>2]=l+C-l*C),D[v+(A<<2)>>2]=1)},function(a,l){var v,S,C,p,R,I,A,g,$,F,X,Z,B,W,j,U=0,rt=0,lt=0,Q=0,ct=0,Pt=0,Xt=0,Qt=0,$t=0,Yt=0,jt=0,pt=0,Ot=0,Jt=G;if(G=G+48|0,A=Jt+8|0,R=Jt+40|0,p=Jt+32|0,C=(I=Jt)+24|0,pt=Jt+16|0,U=0|n[(X=(a|=0)+308|0)>>2],$=0|n[a+316>>2],F=0|n[a+320>>2],(0|(S=0|n[(W=U+((l|=0)<<5)+8|0)>>2]))==-1)Ot=0|n[U+(l<<5)+16>>2],n[$+(l<<2)>>2]=n[(0|n[a+268>>2])+(Ot<<2)>>2],n[F+(l<<2)>>2]=n[(0|n[a+272>>2])+(Ot<<2)>>2];else{for(g=0|n[(j=U+(l<<5)+16|0)>>2],ct=0|n[(0|n[(Z=a+276|0)>>2])+(g<<2)>>2],n[pt>>2]=ct,g=0|n[(0|n[(B=a+280|0)>>2])+(g<<2)>>2],n[(Yt=pt+4|0)>>2]=g,jt=(0|n[U+(S<<5)+12>>2])==1?-10:-.10000000149011612,n[R>>2]=ct,n[(ct=4+R|0)>>2]=g,vs[3&n[(g=U+(S<<5)+24|0)>>2]](a,S,R,p,1),lt=4+C|0,U=4+p|0,rt=I+4|0,Q=9,$t=1;D[C>>2]=(Qt=0*$t)+ +D[R>>2],D[lt>>2]=(v=jt*$t)+ +D[ct>>2],vs[3&n[g>>2]](a,S,C,I,1),Xt=+D[I>>2]-+D[p>>2],D[I>>2]=Xt,Pt=+D[rt>>2]-+D[U>>2],!(Xt!=0|(D[rt>>2]=Pt)!=0);){if(D[C>>2]=+D[R>>2]-Qt,D[lt>>2]=+D[ct>>2]-v,vs[3&n[g>>2]](a,S,C,I,1),Pt=+D[I>>2]-+D[p>>2],D[I>>2]=Pt,Qt=+D[rt>>2]-+D[U>>2],Pt!=0|(D[rt>>2]=Qt)!=0){Ot=6;break}if(!Q){Ot=8;break}Q=Q+-1|0,$t*=.10000000149011612}(0|Ot)==6?(Xt=-Pt,Pt=-Qt):(0|Ot)==8&&(kt(0,2397,A),Pt=Xt=0),jt=180*+Ne(0,jt,Xt,Pt)/3.1415927410125732,vs[3&n[g>>2]](a,0|n[W>>2],pt,pt,1),Ot=0|n[j>>2],n[(0|n[Z>>2])+(Ot<<2)>>2]=n[pt>>2],n[(0|n[B>>2])+(Ot<<2)>>2]=n[Yt>>2],pt=(0|n[a+284>>2])+(Ot<<2)|0,D[pt>>2]=+D[pt>>2]-jt,pt=0|n[W>>2],D[$+(l<<2)>>2]=+D[(0|n[a+268>>2])+(Ot<<2)>>2]*+D[$+(pt<<2)>>2],Ot=(0|n[a+272>>2])+(Ot<<2)|0,jt=+D[Ot>>2]*+D[F+(pt<<2)>>2],D[F+(l<<2)>>2]=jt,D[Ot>>2]=jt}G=((0|we[4+(0|n[a>>2])>>0])<4||(U=0|n[X>>2],rt=0|n[a+324>>2],ct=0|n[a+328>>2],lt=l<<2,Q=n[U+(l<<5)+16>>2]<<2,(0|(U=0|n[U+(l<<5)+8>>2]))==-1?(U=0|n[a+296>>2],n[rt+(lt<<2)>>2]=n[U+(Q<<2)>>2],n[rt+((pt=1|lt)<<2)>>2]=n[U+((Yt=1|Q)<<2)>>2],n[rt+((l=2|lt)<<2)>>2]=n[U+((Ot=2|Q)<<2)>>2],D[rt+((U=3|lt)<<2)>>2]=1,a=0|n[a+300>>2],n[ct+(lt<<2)>>2]=n[a+(Q<<2)>>2],n[ct+(pt<<2)>>2]=n[a+(Yt<<2)>>2],n[ct+(l<<2)>>2]=n[a+(Ot<<2)>>2]):(pt=U<<2,Ot=(0|n[a+296>>2])+(Q<<2)|0,D[(U=rt+(lt<<2)|0)>>2]=+D[Ot>>2]*+D[(l=rt+(pt<<2)|0)>>2],D[U+4>>2]=+D[Ot+4>>2]*+D[l+4>>2],D[U+8>>2]=+D[Ot+8>>2]*+D[l+8>>2],D[rt+((U=3|lt)<<2)>>2]=1,Ot=(0|n[a+300>>2])+(Q<<2)|0,$t=+D[Ot>>2],jt=+D[(a=ct+(pt<<2)|0)>>2],D[(l=ct+(lt<<2)|0)>>2]=$t+jt-$t*jt,jt=+D[Ot+4>>2],$t=+D[a+4>>2],D[l+4>>2]=jt+$t-jt*$t,$t=+D[Ot+8>>2],jt=+D[a+8>>2],D[l+8>>2]=$t+jt-$t*jt),D[ct+(U<<2)>>2]=1),Jt)}],vs=[function(a,l,v,S,C){q(5)},function(a,l,v,S,C){wt(0,0|(a|=0),0|(l|=0),0|(v|=0),0|(S|=0),0|(C|=0))},function(a,l,v,S,C){v|=0,S|=0;var p,R,I,A,g,$,F,X,Z,B,W,j,U,rt,lt,Q,ct,Pt,Xt,Qt,$t,Yt,jt,pt=0,Ot=0,Jt=0,Dt=0,Me=0,Ce=0,$e=0,fr=0,ir=0,qe=0,De=0,cr=0,Ar=0,Je=0,nr=0,xe=0,Oe=0,ot=0,Ur=0,Qe=0,Xe=0,er=0,Ae=0,ri=G;if(G=G+32|0,Xt=ri,l=0|n[(0|n[(a|=0)+308>>2])+((l|=0)<<5)+16>>2],pt=0|n[a+60>>2],U=0|n[(0|n[a+152>>2])+(l<<2)>>2],rt=0|n[pt+(24*l|0)+8>>2],lt=0|n[pt+(24*l|0)+4>>2],Q=1+rt|0,(0|(C|=0))<=0)G=ri;else{ct=0|rt,Pt=0|lt,j=(0|n[pt+(24*l|0)+12>>2])==0,R=U+(rt<<3)|0,I=U+((Z=0|z(lt,Q))<<3)|0,A=U+((X=Z+rt|0)<<3)|0,g=4+U|0,$=U+(rt<<3)+4|0,F=U+(Z<<3)+4|0,X=U+(X<<3)+4|0,W=rt-1|0,B=lt-1|0,cr=Ar=Je=nr=Ot=Jt=De=qe=ir=fr=Xe=Qe=$e=Ce=Me=Dt=er=ot=0;do{xe=(p=+D[v+(er<<3)>>2])*ct,Ur=(Oe=+D[v+(er<<3)+4>>2])*Pt,a=!(1<=p),pt=!(1<=Oe);do{if(pt&a&!(p<0)&!(Oe<0)){if(a=~~xe,l=(0|z(Q,pt=~~Ur))+a|0,Jt=xe-(0|a),Ot=Ur-(0|pt),!j){D[S+(er<<3)>>2]=(xe=1-Ot)*((Oe=1-Jt)*+D[U+(l<<3)>>2])+xe*(Jt*+D[U+((Ae=l+1|0)<<3)>>2])+Ot*(Oe*+D[U+((a=l+Q|0)<<3)>>2])+Ot*(Jt*+D[U+((pt=a+1|0)<<3)>>2]),Oe=xe*(Oe*+D[U+(l<<3)+4>>2])+xe*(Jt*+D[U+(Ae<<3)+4>>2])+Ot*(Oe*+D[U+(a<<3)+4>>2]),xe=Ot*(Jt*+D[U+(pt<<3)+4>>2]);break}if(Jt+Ot<=1){D[S+(er<<3)>>2]=(Oe=1-Jt-Ot)*+D[U+(l<<3)>>2]+Jt*+D[U+((pt=l+1|0)<<3)>>2]+Ot*+D[U+((Ae=l+Q|0)<<3)>>2],Oe=Oe*+D[U+(l<<3)+4>>2]+Jt*+D[U+(pt<<3)+4>>2],xe=Ot*+D[U+(Ae<<3)+4>>2];break}D[S+(er<<3)>>2]=(Ur=Jt+-1+Ot)*+D[U+((a=(pt=l+Q|0)+1|0)<<3)>>2]+(Oe=1-Jt)*+D[U+(pt<<3)>>2]+(xe=1-Ot)*+D[U+((Ae=l+1|0)<<3)>>2],Oe=Ur*+D[U+(a<<3)+4>>2]+Oe*+D[U+(pt<<3)+4>>2],xe*=+D[U+(Ae<<3)+4>>2];break}if(ot||(jt=+D[U>>2],Yt=+D[R>>2],$t=+D[I>>2],Qe=+D[A>>2],Qt=+D[g>>2],cr=(Je=+D[$>>2])-(nr=+D[F>>2]),ot=1,Qe=.25*(jt+Yt+$t+Qe)-.5*(jt=Qe-jt),Xe=.25*(Qt+Je+nr+(Xe=+D[X>>2]))-.5*(Qt=Xe-Qt),nr=.5*((Ar=Yt-$t)+jt),Je=.5*(cr+Qt),Ar=.5*(jt-Ar),cr=.5*(Qt-cr)),!(Oe<3&-2<p&p<3&-2<Oe)){D[S+(er<<3)>>2]=Oe*Ar+(p*nr+Qe),Oe*=cr,xe=p*Je+Xe;break}do{if(p<=0){if(Oe<=0){Dt=Qe-(Ce=2*Ar),Me=Xe-($e=2*cr),Ce=(qe=Qe-2*nr)-Ce,$e=(De=Xe-2*Je)-$e,fr=+D[U>>2],ir=+D[g>>2],Jt=.5*(2+p),Ot=.5*(Oe+2);break}if(pt){$e=(Ot=0|(pt=(0|lt)==(0|(pt=~~Ur))?B:pt))/Pt,Jt=(0|(Ae=pt+1|0))/Pt,pt=0|z(pt,Q),Ae=0|z(Ae,Q),Dt=+D[U+(pt<<3)>>2],Me=+D[U+(pt<<3)+4>>2],Ce=$e*Ar+(qe=Qe-2*nr),$e=$e*cr+(De=Xe-2*Je),fr=+D[U+(Ae<<3)>>2],ir=+D[U+(Ae<<3)+4>>2],qe=Jt*Ar+qe,De=Jt*cr+De,Jt=.5*(2+p),Ot=Ur-Ot;break}Dt=+D[I>>2],Me=+D[F>>2],Ce=Ar+(qe=Qe-2*nr),$e=cr+(De=Xe-2*Je),fr=(Ot=3*Ar)+Qe,ir=(Jt=3*cr)+Xe,qe=Ot+qe,De=Jt+De,Jt=.5*(2+p),Ot=.5*(Oe+-1);break}if(l=Oe<=0,a){if(l){Dt=(Me=(0|(pt=(Ae=(0|rt)==(0|(Ae=~~xe))?W:Ae)+1|0))/ct)*nr+Qe-(Ce=2*Ar),Me=Me*Je+Xe-($e=2*cr),Ce=(fr=(Jt=0|Ae)/ct)*nr+Qe-Ce,$e=fr*Je+Xe-$e,fr=+D[U+(pt<<3)>>2],ir=+D[U+(pt<<3)+4>>2],qe=+D[U+(Ae<<3)>>2],De=+D[U+(Ae<<3)+4>>2],Jt=xe-Jt,Ot=.5*(Oe+2);break}if(pt){n[Xt>>2]=er,f[Xt+8>>3]=p,f[Xt+16>>3]=Oe,kt(0,865,Xt);break}Jt=0|(Ae=(0|rt)==(0|(Ae=~~xe))?W:Ae),ir=(0|(pt=Ae+1|0))/ct,Dt=+D[U+((pt=pt+Z|0)<<3)>>2],Me=+D[U+(pt<<3)+4>>2],Ce=+D[U+((Ae=Ae+Z|0)<<3)>>2],$e=+D[U+(Ae<<3)+4>>2],fr=(qe=3*Ar)+(ir*nr+Qe),ir=(Ot=3*cr)+(ir*Je+Xe),qe+=(De=Jt/ct)*nr+Qe,De=Ot+(De*Je+Xe),Jt=xe-Jt,Ot=.5*(Oe+-1);break}if(l){Dt=(fr=3*nr+Qe)-(Ce=2*Ar),Me=(ir=3*Je+Xe)-($e=2*cr),Ce=nr+Qe-Ce,$e=Je+Xe-$e,qe=+D[R>>2],De=+D[$>>2],Jt=.5*(p-1),Ot=.5*(Oe+2);break}if(pt){Me=(Ot=0|(pt=(0|lt)==(0|(pt=~~Ur))?B:pt))/Pt,qe=(0|(Ae=pt+1|0))/Pt,pt=(0|z(pt,Q))+rt|0,Ae=(0|z(Ae,Q))+rt|0,Dt=Me*Ar+(fr=3*nr+Qe),Me=Me*cr+(ir=3*Je+Xe),Ce=+D[U+(pt<<3)>>2],$e=+D[U+(pt<<3)+4>>2],fr=qe*Ar+fr,ir=qe*cr+ir,qe=+D[U+(Ae<<3)>>2],De=+D[U+(Ae<<3)+4>>2],Jt=.5*(p-1),Ot=Ur-Ot;break}Dt=Ar+(fr=3*nr+Qe),Me=cr+(ir=3*Je+Xe),Ce=+D[A>>2],$e=+D[X>>2],fr=(qe=3*Ar)+fr,ir=(De=3*cr)+ir,qe+=nr+Qe,De+=Je+Xe,Jt=.5*(p-1),Ot=.5*(Oe+-1);break}while(0);if(Jt+Ot<=1){D[S+(er<<3)>>2]=Ce+(Dt-Ce)*Jt+(qe-Ce)*Ot,Oe=$e+(Me-$e)*Jt,xe=(De-$e)*Ot;break}D[S+(er<<3)>>2]=fr+(qe-fr)*(Oe=1-Jt)+(Dt-fr)*(xe=1-Ot),Oe=ir+(De-ir)*Oe,xe*=Me-ir;break}while(0)}while(D[S+(er<<3)+4>>2]=Oe+xe,(0|(er=er+1|0))!=(0|C));G=ri}},function(a,l,v,S,C){a|=0,l|=0,v|=0,S|=0,C|=0;var p,R,I,A,g=0,$=0,F=0,X=0;if(l=0|n[(0|n[a+308>>2])+(l<<5)+16>>2],$=3.1415927410125732*(+D[(0|n[a+168>>2])+(12*l|0)+4>>2]+ +D[(0|n[a+284>>2])+(l<<2)>>2])/180,g=+N($),$=+M($),R=($*=p=+D[(0|n[a+272>>2])+(l<<2)>>2])*(F=0|n[(0|n[a+288>>2])+(l<<2)>>2]?-1:1),p=(g*=p)*(X=0|n[(0|n[a+292>>2])+(l<<2)>>2]?-1:1),F*=g,X*=$,$=+D[(0|n[a+276>>2])+(l<<2)>>2],g=+D[(0|n[a+280>>2])+(l<<2)>>2],!((0|C)<=0))for(l=0;A=+D[v+(l<<3)>>2],I=+D[v+(l<<3)+4>>2],D[S+(l<<3)>>2]=R*A-p*I+$,D[S+(l<<3)+4>>2]=F*A+X*I+g,(0|(l=l+1|0))!=(0|C););}];return{___errno_location:function(){return 3688},___muldi3:Ln,___udivdi3:oa,_bitshift64Lshr:xh,_bitshift64Shl:pv,_csmFree:function(a){_s(a|=0)},_csmGetDrawableConstantFlags:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[888+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1896,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableCount:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+332>>2],G=v,0|l):(n[l>>2]=1858,n[l+4>>2]=1411,kt(0,1269,l),G=v,0|(l=-1))},_csmGetDrawableDrawOrders:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+440>>2],G=v,0|l):(n[l>>2]=1980,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableDynamicFlags:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+432>>2],G=v,0|l):(n[l>>2]=1924,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableIds:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[832+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1878,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableIndexCounts:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[904+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2182,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableIndices:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[840+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2208,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableMaskCounts:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[912+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2056,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableMasks:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[844+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2081,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableMultiplyColors:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+452>>2],G=v,0|l):(n[l>>2]=2230,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableOpacities:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+448>>2],G=v,0|l):(n[l>>2]=2032,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableParentPartIndices:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[876+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2286,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableRenderOrders:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+436>>2],G=v,0|l):(n[l>>2]=2005,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableScreenColors:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+456>>2],G=v,0|l):(n[l>>2]=2259,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableTextureIndices:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[884+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1951,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableVertexCounts:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[892+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2101,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableVertexPositions:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+444>>2],G=v,0|l):(n[l>>2]=2128,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetDrawableVertexUvs:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[836+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=2158,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(a,l){l|=0;var v=G;return G=G+16|0,l=v,(a|=0)?(a=0|be(a),G=v,0|a):(n[l>>2]=1286,n[l+4>>2]=1303,kt(0,1269,l),G=v,(a=0)|a)},_csmGetParameterCount:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+540>>2],G=v,0|l):(n[l>>2]=1610,n[l+4>>2]=1411,kt(0,1269,l),G=v,0|(l=-1))},_csmGetParameterDefaultValues:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[932+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1729,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterIds:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[916+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1631,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterKeyCounts:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+616>>2],G=v,0|l):(n[l>>2]=2347,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterKeyValues:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+612>>2],G=v,0|l):(n[l>>2]=2372,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterMaximumValues:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[924+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1700,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterMinimumValues:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[928+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1671,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterTypes:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+548>>2],G=v,0|l):(n[l>>2]=1650,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetParameterValues:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+552>>2],G=v,0|l):(n[l>>2]=1758,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetPartCount:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+4>>2],G=v,0|l):(n[l>>2]=1780,n[l+4>>2]=1411,kt(0,1269,l),G=v,0|(l=-1))},_csmGetPartIds:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[712+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1796,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetPartOpacities:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[a+52>>2],G=v,0|l):(n[l>>2]=1810,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetPartParentPartIndices:function(a){var l=0,v=G;return G=G+16|0,l=v,(a|=0)?(l=0|n[740+(0|n[a>>2])>>2],G=v,0|l):(n[l>>2]=1830,n[l+4>>2]=1411,kt(0,1269,l),G=v,(l=0)|l)},_csmGetSizeofModel:yr,_csmGetVersion:function(){return 67239938},_csmInitializeModelInPlace:ze,_csmMalloc:function(a){return 0|vn(a|=0)},_csmMallocMoc:function(a){var l,v=G;return G=G+16|0,na(l=v,64,a|=0),G=v,0|n[l>>2]},_csmMallocModelAndInitialize:function(a){var l=0,v=0,S=G;return G=G+16|0,l=S,0|(a|=0)&&!(0|na(l,16,v=0|yr(a)))?(l=0|ze(a,a=0|n[l>>2],v))||(_s(a),l=0):l=0,G=S,0|l},_csmReadCanvasInfo:function(a,l,v,S){l|=0,v|=0,S|=0;var C,p,R,I=0,A=G;if(G=G+32|0,p=A+24|0,I=A+16|0,R=A+8|0,C=A,a|=0)return l?v?void(G=(S?(I=0|n[708+(0|n[a>>2])>>2],n[l>>2]=n[I+12>>2],n[l+4>>2]=n[I+16>>2],n[v>>2]=n[I+4>>2],n[v+4>>2]=n[I+8>>2],n[S>>2]=n[I>>2]):(n[p>>2]=1393,n[4+p>>2]=1487,kt(0,1269,p)),A)):(n[I>>2]=1393,n[I+4>>2]=1458,kt(0,1269,I),void(G=A)):(n[R>>2]=1393,n[4+R>>2]=1431,kt(0,1269,R),void(G=A));n[C>>2]=1393,n[C+4>>2]=1411,kt(0,1269,C),G=A},_csmResetDrawableDynamicFlags:function(a){var l,v=G;G=G+16|0,l=v,G=((a|=0)?n[a+428>>2]=1:(n[l>>2]=2318,n[l+4>>2]=1411,kt(0,1269,l)),v)},_csmReviveMocInPlace:function(a,l){l|=0;var v,S=0,C=0,p=G;return G=G+32|0,C=p+16|0,v=p+8|0,S=p,(a|=0)?((S=a)+63&-64|0)!=(0|S)?(n[v>>2]=1322,n[4+v>>2]=1342,kt(0,1269,v),G=p,(C=0)|C):0|l&&(l+63&-64|0)==(0|l)?(C=0|Ee(a),G=p,0|C):(n[C>>2]=1322,n[C+4>>2]=1374,kt(0,1269,C),G=p,(C=0)|C):(n[S>>2]=1322,n[S+4>>2]=1303,kt(0,1269,S),G=p,(C=0)|C)},_csmSetLogFunction:function(a){n[904]=a|=0},_csmUpdateModel:function(a){var l,v=G;G=G+16|0,l=v,G=((a|=0)?ei(a):(n[l>>2]=1595,n[l+4>>2]=1411,kt(0,1269,l)),v)},_emscripten_get_sbrk_ptr:YI,_emscripten_replace_memory:function(a){return ft=new Int8Array(a),we=new Uint8Array(a),tr=new Int16Array(a),Re=new Uint16Array(a),n=new Int32Array(a),D=new Float32Array(a),f=new Float64Array(a),!0},_free:_s,_i64Add:mn,_i64Subtract:Jr,_malloc:vn,_memcpy:Gi,_memset:wi,dynCall_ii:function(a,l){return 0|qI[3&(a|=0)](0|(l|=0))},dynCall_iiii:function(a,l,v,S){return 0|Th[3&(a|=0)](0|(l|=0),0|(v|=0),0|(S|=0))},dynCall_iiiii:function(a,l,v,S,C){return 0|ZI[3&(a|=0)](0|(l|=0),0|(v|=0),0|(S|=0),0|(C|=0))},dynCall_vi:function(a,l){gv[1&(a|=0)](0|(l|=0))},dynCall_vii:function(a,l,v){yv[3&(a|=0)](0|(l|=0),0|(v|=0))},dynCall_viiiii:function(a,l,v,S,C,p){vs[3&(a|=0)](0|(l|=0),0|(v|=0),0|(S|=0),0|(C|=0),0|(p|=0))},establishStackSpace:function(a,l){G=a|=0},stackAlloc:function(a){var l=G;return G=(G=G+(a|=0)|0)+15&-16,0|l},stackRestore:function(a){G=a|=0},stackSave:function(){return 0|G}}}({Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},{a:ue,b:function(nt){Ft=nt},c:function(){return Ft},d:function(nt,mt){return Rt[nt](mt)},e:function(nt,mt,Wt,ft){return Rt[nt](mt,Wt,ft)},f:function(nt,mt,Wt,ft,tr){return Rt[nt](mt,Wt,ft,tr)},g:function(nt,mt){Rt[nt](mt)},h:function(nt,mt,Wt){Rt[nt](mt,Wt)},i:function(nt,mt,Wt,ft,tr,n){Rt[nt](mt,Wt,ft,tr,n)},j:function(){return Br.apply(null,arguments)},k:ai,l:function(nt,mt,Wt){he.set(he.subarray(mt,mt+Wt),nt)},m:function(nt){if(2130706432<nt)return!1;for(var mt=Math.max(ai(),16777216);mt<nt;)mt=mt<=536870912?vt(2*mt):Math.min(vt((3*mt+2147483648)/4),2130706432);return!!Ze(mt)},n:Br,o:function(){ue("OOM")},p:function(nt){return nt},q:Ge,r:Ze,s:function(){var nt=P._fflush;nt&&nt(0),ce[1].length&&Vr(1,10),ce[2].length&&Vr(2,10)},t:Ke,u:function(){var nt=Ke();return P.extraStackTrace&&(nt+=`
`+P.extraStackTrace()),Ge(nt)},v:4400},zt),pr=(P.___errno_location=qt.___errno_location,P.___muldi3=qt.___muldi3,P.___udivdi3=qt.___udivdi3,P._bitshift64Lshr=qt._bitshift64Lshr,P._bitshift64Shl=qt._bitshift64Shl,P._csmFree=qt._csmFree,P._csmGetDrawableConstantFlags=qt._csmGetDrawableConstantFlags,P._csmGetDrawableCount=qt._csmGetDrawableCount,P._csmGetDrawableDrawOrders=qt._csmGetDrawableDrawOrders,P._csmGetDrawableDynamicFlags=qt._csmGetDrawableDynamicFlags,P._csmGetDrawableIds=qt._csmGetDrawableIds,P._csmGetDrawableIndexCounts=qt._csmGetDrawableIndexCounts,P._csmGetDrawableIndices=qt._csmGetDrawableIndices,P._csmGetDrawableMaskCounts=qt._csmGetDrawableMaskCounts,P._csmGetDrawableMasks=qt._csmGetDrawableMasks,P._csmGetDrawableMultiplyColors=qt._csmGetDrawableMultiplyColors,P._csmGetDrawableOpacities=qt._csmGetDrawableOpacities,P._csmGetDrawableParentPartIndices=qt._csmGetDrawableParentPartIndices,P._csmGetDrawableRenderOrders=qt._csmGetDrawableRenderOrders,P._csmGetDrawableScreenColors=qt._csmGetDrawableScreenColors,P._csmGetDrawableTextureIndices=qt._csmGetDrawableTextureIndices,P._csmGetDrawableVertexCounts=qt._csmGetDrawableVertexCounts,P._csmGetDrawableVertexPositions=qt._csmGetDrawableVertexPositions,P._csmGetDrawableVertexUvs=qt._csmGetDrawableVertexUvs,P._csmGetLatestMocVersion=qt._csmGetLatestMocVersion,P._csmGetMocVersion=qt._csmGetMocVersion,P._csmGetParameterCount=qt._csmGetParameterCount,P._csmGetParameterDefaultValues=qt._csmGetParameterDefaultValues,P._csmGetParameterIds=qt._csmGetParameterIds,P._csmGetParameterKeyCounts=qt._csmGetParameterKeyCounts,P._csmGetParameterKeyValues=qt._csmGetParameterKeyValues,P._csmGetParameterMaximumValues=qt._csmGetParameterMaximumValues,P._csmGetParameterMinimumValues=qt._csmGetParameterMinimumValues,P._csmGetParameterTypes=qt._csmGetParameterTypes,P._csmGetParameterValues=qt._csmGetParameterValues,P._csmGetPartCount=qt._csmGetPartCount,P._csmGetPartIds=qt._csmGetPartIds,P._csmGetPartOpacities=qt._csmGetPartOpacities,P._csmGetPartParentPartIndices=qt._csmGetPartParentPartIndices,P._csmGetSizeofModel=qt._csmGetSizeofModel,P._csmGetVersion=qt._csmGetVersion,P._csmInitializeModelInPlace=qt._csmInitializeModelInPlace,P._csmMalloc=qt._csmMalloc,P._csmMallocMoc=qt._csmMallocMoc,P._csmMallocModelAndInitialize=qt._csmMallocModelAndInitialize,P._csmReadCanvasInfo=qt._csmReadCanvasInfo,P._csmResetDrawableDynamicFlags=qt._csmResetDrawableDynamicFlags,P._csmReviveMocInPlace=qt._csmReviveMocInPlace,P._csmSetLogFunction=qt._csmSetLogFunction,P._csmUpdateModel=qt._csmUpdateModel,P._emscripten_get_sbrk_ptr=qt._emscripten_get_sbrk_ptr,P._emscripten_replace_memory=qt._emscripten_replace_memory),Mi=(P._free=qt._free,P._i64Add=qt._i64Add,P._i64Subtract=qt._i64Subtract,P._malloc=qt._malloc,P._memcpy=qt._memcpy,P._memset=qt._memset,P.establishStackSpace=qt.establishStackSpace,P.stackAlloc=qt.stackAlloc),Sn=P.stackRestore=qt.stackRestore,zr=P.stackSave=qt.stackSave;function lr(){function nt(){if(!Qi&&(Qi=!0,!ne)){if(Gt(Pe),Gt(Zt),P.onRuntimeInitialized&&P.onRuntimeInitialized(),P.postRun)for(typeof P.postRun=="function"&&(P.postRun=[P.postRun]);P.postRun.length;){var mt=P.postRun.shift();ke.unshift(mt)}Gt(ke)}}if(!(0<_e)){if(P.preRun)for(typeof P.preRun=="function"&&(P.preRun=[P.preRun]);P.preRun.length;)(function(){var mt=P.preRun.shift();se.unshift(mt)})();Gt(se),0<_e||(P.setStatus?(P.setStatus("Running..."),setTimeout(function(){setTimeout(function(){P.setStatus("")},1),nt()},1)):nt())}}if(P.dynCall_ii=qt.dynCall_ii,P.dynCall_iiii=qt.dynCall_iiii,P.dynCall_iiiii=qt.dynCall_iiiii,P.dynCall_vi=qt.dynCall_vi,P.dynCall_vii=qt.dynCall_vii,P.dynCall_viiiii=qt.dynCall_viiiii,P.asm=qt,P.ccall=function(nt,mt,Wt,ft){var tr={string:function(f){var d=0;if(f!=null&&f!==0){var x=1+(f.length<<2),L=d=Mi(x),M=he;if(0<x){for(var x=L+x-1,N=0;N<f.length;++N){var V=f.charCodeAt(N);if((V=55296<=V&&V<=57343?65536+((1023&V)<<10)|1023&f.charCodeAt(++N):V)<=127){if(x<=L)break;M[L++]=V}else{if(V<=2047){if(x<=L+1)break;M[L++]=192|V>>6}else{if(V<=65535){if(x<=L+2)break;M[L++]=224|V>>12}else{if(x<=L+3)break;M[L++]=240|V>>18,M[L++]=128|V>>12&63}M[L++]=128|V>>6&63}M[L++]=128|63&V}}M[L]=0}}return d},array:function(f){var d=Mi(f.length);return Vt.set(f,d),d}},n=function(f){var d=P["_"+f];return ae(d,"Cannot call unknown function "+f+", make sure it is exported"),d}(nt),we=[];if(nt=0,ft)for(var Re=0;Re<ft.length;Re++){var D=tr[Wt[Re]];D?(nt===0&&(nt=zr()),we[Re]=D(ft[Re])):we[Re]=ft[Re]}return Wt=function(f){return mt==="string"?bt(f):mt==="boolean"?!!f:f}(Wt=n.apply(null,we)),nt!==0&&Sn(nt),Wt},P.UTF8ToString=bt,P.addFunction=function(nt){for(var mt=0;mt<1;mt++)if(!Rt[mt])return Rt[mt]=nt,1+mt;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},me&&((String.prototype.startsWith?me.startsWith(Nt):me.indexOf(Nt)===0)||(it=me,me=P.locateFile?P.locateFile(it,At):At+it),st||K?(qt=J(me),he.set(qt,8)):(_e++,P.monitorRunDependencies&&P.monitorRunDependencies(_e),Zr=function(nt){nt.byteLength&&(nt=new Uint8Array(nt)),he.set(nt,8),P.memoryInitializerRequest&&delete P.memoryInitializerRequest.response,_e--,P.monitorRunDependencies&&P.monitorRunDependencies(_e),_e==0&&fe&&(nt=fe,fe=null,nt())},Ve=function(){H(function(){throw"could not load memory initializer "+me})},(At=xi(me))?Zr(At.buffer):P.memoryInitializerRequest?(it=function(){var nt=P.memoryInitializerRequest,mt=nt.response;if(nt.status!==200&&nt.status!==0){if(!(mt=xi(P.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+nt.status+", retrying "+me),void Ve();mt=mt.buffer}Zr(mt)},P.memoryInitializerRequest.response?setTimeout(it,0):P.memoryInitializerRequest.addEventListener("load",it)):Ve())),P.then=function(nt){var mt;return Qi?nt(P):(mt=P.onRuntimeInitialized,P.onRuntimeInitialized=function(){mt&&mt(),nt(P)}),P},fe=function nt(){Qi||lr(),Qi||(fe=nt)},P.run=lr,P.preInit)for(typeof P.preInit=="function"&&(P.preInit=[P.preInit]);0<P.preInit.length;)P.preInit.pop()();return lr(),T}}();typeof or=="object"&&typeof module=="object"?module.exports=w:typeof define=="function"&&define.amd?define([],function(){return w}):typeof or=="object"&&(or._em_module=w);var b=w()})(jr||(jr={})),window.Live2DCubismCore=jr;function fi(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function wh(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(t);if(s.length===0)return r([]);var o=s.length;function h(c,_){if(_&&(typeof _=="object"||typeof _=="function")){var y=_.then;if(typeof y=="function"){y.call(_,function(w){h(c,w)},function(w){s[c]={status:"rejected",reason:w},--o===0&&r(s)});return}}s[c]={status:"fulfilled",value:_},--o===0&&r(s)}for(var u=0;u<s.length;u++)h(u,s[u])})}function qs(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}qs.prototype=Error.prototype;function Ph(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(t);if(s.length===0)return i();for(var o=[],h=0;h<s.length;h++)try{e.resolve(s[h]).then(r).catch(function(u){o.push(u),o.length===s.length&&i(new qs(o,"All promises were rejected"))})}catch(u){i(u)}})}var Eh=setTimeout;function ys(t){return Boolean(t&&typeof t.length!="undefined")}function nn(){}function Zs(t,e){return function(){t.apply(e,arguments)}}function Ir(t){if(!(this instanceof Ir))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],X0(t,this)}function k0(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,Ir._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?Ih:Js)(e.promise,t._value);return}var i;try{i=r(t._value)}catch(s){Js(e.promise,s);return}Ih(e.promise,i)})}function Ih(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof Ir){t._state=3,t._value=e,Ch(t);return}else if(typeof r=="function"){X0(Zs(r,e),t);return}}t._state=1,t._value=e,Ch(t)}catch(i){Js(t,i)}}function Js(t,e){t._state=2,t._value=e,Ch(t)}function Ch(t){t._state===2&&t._deferreds.length===0&&Ir._immediateFn(function(){t._handled||Ir._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)k0(t,t._deferreds[e]);t._deferreds=null}function xv(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function X0(t,e){var r=!1;try{t(function(i){r||(r=!0,Ih(e,i))},function(i){r||(r=!0,Js(e,i))})}catch(i){if(r)return;r=!0,Js(e,i)}}Ir.prototype.catch=function(t){return this.then(null,t)},Ir.prototype.then=function(t,e){var r=new this.constructor(nn);return k0(this,new xv(t,e,r)),r},Ir.prototype.finally=fi,Ir.all=function(t){return new Ir(function(e,r){if(!ys(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var s=i.length;function o(u,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var _=c.then;if(typeof _=="function"){_.call(c,function(y){o(u,y)},r);return}}i[u]=c,--s===0&&e(i)}catch(y){r(y)}}for(var h=0;h<i.length;h++)o(h,i[h])})},Ir.any=Ph,Ir.allSettled=wh,Ir.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Ir?t:new Ir(function(e){e(t)})},Ir.reject=function(t){return new Ir(function(e,r){r(t)})},Ir.race=function(t){return new Ir(function(e,r){if(!ys(t))return r(new TypeError("Promise.race accepts an array"));for(var i=0,s=t.length;i<s;i++)Ir.resolve(t[i]).then(e,r)})},Ir._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){Eh(t,0)},Ir._unhandledRejectionFn=function(e){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var $h=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var V0=Object.getOwnPropertySymbols,Tv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable;function wv(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Pv(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(i.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(o){s[o]=o}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}var Ev=Pv()?Object.assign:function(t,e){for(var r,i=wv(t),s,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var h in r)Tv.call(r,h)&&(i[h]=r[h]);if(V0){s=V0(r);for(var u=0;u<s.length;u++)Av.call(r,s[u])&&(i[s[u]]=r[s[u]])}}return i};/*!
 * @pixi/polyfill - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=Ir),Object.assign||(Object.assign=Ev);var Iv=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(globalThis.performance&&globalThis.performance.now)){var Cv=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-Cv}}for(var Rh=Date.now(),H0=["ms","moz","webkit","o"],Sh=0;Sh<H0.length&&!globalThis.requestAnimationFrame;++Sh){var Nh=H0[Sh];globalThis.requestAnimationFrame=globalThis[Nh+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Nh+"CancelAnimationFrame"]||globalThis[Nh+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=Iv+Rh-e;return r<0&&(r=0),Rh=e,globalThis.self.setTimeout(function(){Rh=Date.now(),t(performance.now())},r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var z0;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(z0||(z0={}));var j0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(j0||(j0={}));var W0;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(W0||(W0={}));var Y0;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Y0||(Y0={}));var q0;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(q0||(q0={}));var Z0;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Z0||(Z0={}));var J0;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(J0||(J0={}));var Q0;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Q0||(Q0={}));var K0;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(K0||(K0={}));var Lh;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Lh||(Lh={}));var Oh;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Oh||(Oh={}));var Fh;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Fh||(Fh={}));var tf;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(tf||(tf={}));var ef;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ef||(ef={}));var Mh;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Mh||(Mh={}));var Qs;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Qs||(Qs={}));var rf;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(rf||(rf={}));var nf;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(nf||(nf={}));var Uh;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Uh||(Uh={}));var sf;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(sf||(sf={}));var of={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Gh=/iPhone/i,af=/iPod/i,hf=/iPad/i,lf=/\biOS-universal(?:.+)Mac\b/i,Dh=/\bAndroid(?:.+)Mobile\b/i,uf=/Android/i,bs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,aa=/Silk/i,sn=/Windows Phone/i,ff=/\bWindows(?:.+)ARM\b/i,cf=/BlackBerry/i,df=/BB10/i,_f=/Opera Mini/i,pf=/\b(CriOS|Chrome)(?:.+)Mobile/i,vf=/Mobile(?:.+)Firefox\b/i,mf=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function $v(t){return function(e){return e.test(t)}}function Rv(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var s=$v(r),o={apple:{phone:s(Gh)&&!s(sn),ipod:s(af),tablet:!s(Gh)&&(s(hf)||mf(e))&&!s(sn),universal:s(lf),device:(s(Gh)||s(af)||s(hf)||s(lf)||mf(e))&&!s(sn)},amazon:{phone:s(bs),tablet:!s(bs)&&s(aa),device:s(bs)||s(aa)},android:{phone:!s(sn)&&s(bs)||!s(sn)&&s(Dh),tablet:!s(sn)&&!s(bs)&&!s(Dh)&&(s(aa)||s(uf)),device:!s(sn)&&(s(bs)||s(aa)||s(Dh)||s(uf))||s(/\bokhttp\b/i)},windows:{phone:s(sn),tablet:s(ff),device:s(sn)||s(ff)},other:{blackberry:s(cf),blackberry10:s(df),opera:s(_f),firefox:s(vf),chrome:s(pf),device:s(cf)||s(df)||s(_f)||s(vf)||s(pf)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var ci=Rv(globalThis.navigator);function Sv(){return!ci.apple.device}function Nv(t){var e=!0;if(ci.tablet||ci.phone){if(ci.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(ci.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var te={ADAPTER:of,MIPMAP_TEXTURES:Fh.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Uh.NONE,SPRITE_MAX_TEXTURES:Nv(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Mh.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Oh.CLAMP,SCALE_MODE:Lh.LINEAR,PRECISION_VERTEX:Qs.HIGH,PRECISION_FRAGMENT:ci.apple.device?Qs.HIGH:Qs.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Sv(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ei={},Lv={get exports(){return Ei},set exports(t){Ei=t}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(c,_,y){this.fn=c,this.context=_,this.once=y||!1}function o(c,_,y,w,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var E=new s(y,w||c,b),T=r?r+_:_;return c._events[T]?c._events[T].fn?c._events[T]=[c._events[T],E]:c._events[T].push(E):(c._events[T]=E,c._eventsCount++),c}function h(c,_){--c._eventsCount===0?c._events=new i:delete c._events[_]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var _=[],y,w;if(this._eventsCount===0)return _;for(w in y=this._events)e.call(y,w)&&_.push(r?w.slice(1):w);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(y)):_},u.prototype.listeners=function(_){var y=r?r+_:_,w=this._events[y];if(!w)return[];if(w.fn)return[w.fn];for(var b=0,E=w.length,T=new Array(E);b<E;b++)T[b]=w[b].fn;return T},u.prototype.listenerCount=function(_){var y=r?r+_:_,w=this._events[y];return w?w.fn?1:w.length:0},u.prototype.emit=function(_,y,w,b,E,T){var P=r?r+_:_;if(!this._events[P])return!1;var O=this._events[P],H=arguments.length,Y,J;if(O.fn){switch(O.once&&this.removeListener(_,O.fn,void 0,!0),H){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,y),!0;case 3:return O.fn.call(O.context,y,w),!0;case 4:return O.fn.call(O.context,y,w,b),!0;case 5:return O.fn.call(O.context,y,w,b,E),!0;case 6:return O.fn.call(O.context,y,w,b,E,T),!0}for(J=1,Y=new Array(H-1);J<H;J++)Y[J-1]=arguments[J];O.fn.apply(O.context,Y)}else{var it=O.length,st;for(J=0;J<it;J++)switch(O[J].once&&this.removeListener(_,O[J].fn,void 0,!0),H){case 1:O[J].fn.call(O[J].context);break;case 2:O[J].fn.call(O[J].context,y);break;case 3:O[J].fn.call(O[J].context,y,w);break;case 4:O[J].fn.call(O[J].context,y,w,b);break;default:if(!Y)for(st=1,Y=new Array(H-1);st<H;st++)Y[st-1]=arguments[st];O[J].fn.apply(O[J].context,Y)}}return!0},u.prototype.on=function(_,y,w){return o(this,_,y,w,!1)},u.prototype.once=function(_,y,w){return o(this,_,y,w,!0)},u.prototype.removeListener=function(_,y,w,b){var E=r?r+_:_;if(!this._events[E])return this;if(!y)return h(this,E),this;var T=this._events[E];if(T.fn)T.fn===y&&(!b||T.once)&&(!w||T.context===w)&&h(this,E);else{for(var P=0,O=[],H=T.length;P<H;P++)(T[P].fn!==y||b&&!T[P].once||w&&T[P].context!==w)&&O.push(T[P]);O.length?this._events[E]=O.length===1?O[0]:O:h(this,E)}return this},u.prototype.removeAllListeners=function(_){var y;return _?(y=r?r+_:_,this._events[y]&&h(this,y)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u})(Lv);var xs={},Ov={get exports(){return xs},set exports(t){xs=t}};Ov.exports=ha,xs.default=ha;function ha(t,e,r){r=r||2;var i=e&&e.length,s=i?e[0]*r:t.length,o=gf(t,0,s,r,!0),h=[];if(!o||o.next===o.prev)return h;var u,c,_,y,w,b,E;if(i&&(o=Dv(t,e,o,r)),t.length>80*r){u=_=t[0],c=y=t[1];for(var T=r;T<s;T+=r)w=t[T],b=t[T+1],w<u&&(u=w),b<c&&(c=b),w>_&&(_=w),b>y&&(y=b);E=Math.max(_-u,y-c),E=E!==0?32767/E:0}return Ks(o,h,r,u,c,E,0),h}function gf(t,e,r,i,s){var o,h;if(s===Xh(t,e,r,i)>0)for(o=e;o<r;o+=i)h=xf(o,t[o],t[o+1],h);else for(o=r-i;o>=e;o-=i)h=xf(o,t[o],t[o+1],h);return h&&la(h,h.next)&&(eo(h),h=h.next),h}function On(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(la(r,r.next)||Cr(r.prev,r,r.next)===0)){if(eo(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function Ks(t,e,r,i,s,o,h){if(t){!h&&o&&Hv(t,i,s,o);for(var u=t,c,_;t.prev!==t.next;){if(c=t.prev,_=t.next,o?Mv(t,i,s,o):Fv(t)){e.push(c.i/r|0),e.push(t.i/r|0),e.push(_.i/r|0),eo(t),t=_.next,u=_.next;continue}if(t=_,t===u){h?h===1?(t=Uv(On(t),e,r),Ks(t,e,r,i,s,o,2)):h===2&&Gv(t,e,r,i,s,o):Ks(On(t),e,r,i,s,o,1);break}}}}function Fv(t){var e=t.prev,r=t,i=t.next;if(Cr(e,r,i)>=0)return!1;for(var s=e.x,o=r.x,h=i.x,u=e.y,c=r.y,_=i.y,y=s<o?s<h?s:h:o<h?o:h,w=u<c?u<_?u:_:c<_?c:_,b=s>o?s>h?s:h:o>h?o:h,E=u>c?u>_?u:_:c>_?c:_,T=i.next;T!==e;){if(T.x>=y&&T.x<=b&&T.y>=w&&T.y<=E&&Ts(s,u,o,c,h,_,T.x,T.y)&&Cr(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function Mv(t,e,r,i){var s=t.prev,o=t,h=t.next;if(Cr(s,o,h)>=0)return!1;for(var u=s.x,c=o.x,_=h.x,y=s.y,w=o.y,b=h.y,E=u<c?u<_?u:_:c<_?c:_,T=y<w?y<b?y:b:w<b?w:b,P=u>c?u>_?u:_:c>_?c:_,O=y>w?y>b?y:b:w>b?w:b,H=Bh(E,T,e,r,i),Y=Bh(P,O,e,r,i),J=t.prevZ,it=t.nextZ;J&&J.z>=H&&it&&it.z<=Y;){if(J.x>=E&&J.x<=P&&J.y>=T&&J.y<=O&&J!==s&&J!==h&&Ts(u,y,c,w,_,b,J.x,J.y)&&Cr(J.prev,J,J.next)>=0||(J=J.prevZ,it.x>=E&&it.x<=P&&it.y>=T&&it.y<=O&&it!==s&&it!==h&&Ts(u,y,c,w,_,b,it.x,it.y)&&Cr(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;J&&J.z>=H;){if(J.x>=E&&J.x<=P&&J.y>=T&&J.y<=O&&J!==s&&J!==h&&Ts(u,y,c,w,_,b,J.x,J.y)&&Cr(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;it&&it.z<=Y;){if(it.x>=E&&it.x<=P&&it.y>=T&&it.y<=O&&it!==s&&it!==h&&Ts(u,y,c,w,_,b,it.x,it.y)&&Cr(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function Uv(t,e,r){var i=t;do{var s=i.prev,o=i.next.next;!la(s,o)&&yf(s,i,i.next,o)&&to(s,o)&&to(o,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(o.i/r|0),eo(i),eo(i.next),i=t=o),i=i.next}while(i!==t);return On(i)}function Gv(t,e,r,i,s,o){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&Wv(h,u)){var c=bf(h,u);h=On(h,h.next),c=On(c,c.next),Ks(h,e,r,i,s,o,0),Ks(c,e,r,i,s,o,0);return}u=u.next}h=h.next}while(h!==t)}function Dv(t,e,r,i){var s=[],o,h,u,c,_;for(o=0,h=e.length;o<h;o++)u=e[o]*i,c=o<h-1?e[o+1]*i:t.length,_=gf(t,u,c,i,!1),_===_.next&&(_.steiner=!0),s.push(jv(_));for(s.sort(Bv),o=0;o<s.length;o++)r=kv(s[o],r);return r}function Bv(t,e){return t.x-e.x}function kv(t,e){var r=Xv(t,e);if(!r)return e;var i=bf(r,t);return On(i,i.next),On(r,r.next)}function Xv(t,e){var r=e,i=t.x,s=t.y,o=-1/0,h;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>o&&(o=u,h=r.x<r.next.x?r:r.next,u===i))return h}r=r.next}while(r!==e);if(!h)return null;var c=h,_=h.x,y=h.y,w=1/0,b;r=h;do i>=r.x&&r.x>=_&&i!==r.x&&Ts(s<y?i:o,s,_,y,s<y?o:i,s,r.x,r.y)&&(b=Math.abs(s-r.y)/(i-r.x),to(r,t)&&(b<w||b===w&&(r.x>h.x||r.x===h.x&&Vv(h,r)))&&(h=r,w=b)),r=r.next;while(r!==c);return h}function Vv(t,e){return Cr(t.prev,t,e.prev)<0&&Cr(e.next,t,t.next)<0}function Hv(t,e,r,i){var s=t;do s.z===0&&(s.z=Bh(s.x,s.y,e,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,zv(s)}function zv(t){var e,r,i,s,o,h,u,c,_=1;do{for(r=t,t=null,o=null,h=0;r;){for(h++,i=r,u=0,e=0;e<_&&(u++,i=i.nextZ,!!i);e++);for(c=_;u>0||c>0&&i;)u!==0&&(c===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,u--):(s=i,i=i.nextZ,c--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;r=i}o.nextZ=null,_*=2}while(h>1);return t}function Bh(t,e,r,i,s){return t=(t-r)*s|0,e=(e-i)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function jv(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Ts(t,e,r,i,s,o,h,u){return(s-h)*(e-u)>=(t-h)*(o-u)&&(t-h)*(i-u)>=(r-h)*(e-u)&&(r-h)*(o-u)>=(s-h)*(i-u)}function Wv(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Yv(t,e)&&(to(t,e)&&to(e,t)&&qv(t,e)&&(Cr(t.prev,t,e.prev)||Cr(t,e.prev,e))||la(t,e)&&Cr(t.prev,t,t.next)>0&&Cr(e.prev,e,e.next)>0)}function Cr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function la(t,e){return t.x===e.x&&t.y===e.y}function yf(t,e,r,i){var s=fa(Cr(t,e,r)),o=fa(Cr(t,e,i)),h=fa(Cr(r,i,t)),u=fa(Cr(r,i,e));return!!(s!==o&&h!==u||s===0&&ua(t,r,e)||o===0&&ua(t,i,e)||h===0&&ua(r,t,i)||u===0&&ua(r,e,i))}function ua(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function fa(t){return t>0?1:t<0?-1:0}function Yv(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&yf(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function to(t,e){return Cr(t.prev,t,t.next)<0?Cr(t,e,t.next)>=0&&Cr(t,t.prev,e)>=0:Cr(t,e,t.prev)<0||Cr(t,t.next,e)<0}function qv(t,e){var r=t,i=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function bf(t,e){var r=new kh(t.i,t.x,t.y),i=new kh(e.i,e.x,e.y),s=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function xf(t,e,r,i){var s=new kh(t,e,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function eo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kh(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ha.deviation=function(t,e,r,i){var s=e&&e.length,o=s?e[0]*r:t.length,h=Math.abs(Xh(t,0,o,r));if(s)for(var u=0,c=e.length;u<c;u++){var _=e[u]*r,y=u<c-1?e[u+1]*r:t.length;h-=Math.abs(Xh(t,_,y,r))}var w=0;for(u=0;u<i.length;u+=3){var b=i[u]*r,E=i[u+1]*r,T=i[u+2]*r;w+=Math.abs((t[b]-t[T])*(t[E+1]-t[b+1])-(t[b]-t[E])*(t[T+1]-t[b+1]))}return h===0&&w===0?0:Math.abs((w-h)/h)};function Xh(t,e,r,i){for(var s=0,o=e,h=r-i;o<r;o+=i)s+=(t[h]-t[o])*(t[o+1]+t[h+1]),h=o;return s}ha.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,s=0;s<t.length;s++){for(var o=0;o<t[s].length;o++)for(var h=0;h<e;h++)r.vertices.push(t[s][o][h]);s>0&&(i+=t[s-1].length,r.holes.push(i))}return r};var ca={},Zv={get exports(){return ca},set exports(t){ca=t}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,o=typeof $h=="object"&&$h;(o.global===o||o.window===o||o.self===o)&&(r=o);var h,u=2147483647,c=36,_=1,y=26,w=38,b=700,E=72,T=128,P="-",O=/^xn--/,H=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,J={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=c-_,st=Math.floor,K=String.fromCharCode,At;function Tt(at){throw RangeError(J[at])}function dt(at,bt){for(var vt=at.length,le=[];vt--;)le[vt]=bt(at[vt]);return le}function Et(at,bt){var vt=at.split("@"),le="";vt.length>1&&(le=vt[0]+"@",at=vt[1]),at=at.replace(Y,".");var Gt=at.split("."),se=dt(Gt,bt).join(".");return le+se}function Rt(at){for(var bt=[],vt=0,le=at.length,Gt,se;vt<le;)Gt=at.charCodeAt(vt++),Gt>=55296&&Gt<=56319&&vt<le?(se=at.charCodeAt(vt++),(se&64512)==56320?bt.push(((Gt&1023)<<10)+(se&1023)+65536):(bt.push(Gt),vt--)):bt.push(Gt);return bt}function Ft(at){return dt(at,function(bt){var vt="";return bt>65535&&(bt-=65536,vt+=K(bt>>>10&1023|55296),bt=56320|bt&1023),vt+=K(bt),vt}).join("")}function ne(at){return at-48<10?at-22:at-65<26?at-65:at-97<26?at-97:c}function ae(at,bt){return at+22+75*(at<26)-((bt!=0)<<5)}function zt(at,bt,vt){var le=0;for(at=vt?st(at/b):at>>1,at+=st(at/bt);at>it*y>>1;le+=c)at=st(at/it);return st(le+(it+1)*at/(at+w))}function Vt(at){var bt=[],vt=at.length,le,Gt=0,se=T,Pe=E,Zt,ke,_e,fe,ue,me,Nt,Ge,Ke;for(Zt=at.lastIndexOf(P),Zt<0&&(Zt=0),ke=0;ke<Zt;++ke)at.charCodeAt(ke)>=128&&Tt("not-basic"),bt.push(at.charCodeAt(ke));for(_e=Zt>0?Zt+1:0;_e<vt;){for(fe=Gt,ue=1,me=c;_e>=vt&&Tt("invalid-input"),Nt=ne(at.charCodeAt(_e++)),(Nt>=c||Nt>st((u-Gt)/ue))&&Tt("overflow"),Gt+=Nt*ue,Ge=me<=Pe?_:me>=Pe+y?y:me-Pe,!(Nt<Ge);me+=c)Ke=c-Ge,ue>st(u/Ke)&&Tt("overflow"),ue*=Ke;le=bt.length+1,Pe=zt(Gt-fe,le,fe==0),st(Gt/le)>u-se&&Tt("overflow"),se+=st(Gt/le),Gt%=le,bt.splice(Gt++,0,se)}return Ft(bt)}function he(at){var bt,vt,le,Gt,se,Pe,Zt,ke,_e,fe,ue,me=[],Nt,Ge,Ke,ce;for(at=Rt(at),Nt=at.length,bt=T,vt=0,se=E,Pe=0;Pe<Nt;++Pe)ue=at[Pe],ue<128&&me.push(K(ue));for(le=Gt=me.length,Gt&&me.push(P);le<Nt;){for(Zt=u,Pe=0;Pe<Nt;++Pe)ue=at[Pe],ue>=bt&&ue<Zt&&(Zt=ue);for(Ge=le+1,Zt-bt>st((u-vt)/Ge)&&Tt("overflow"),vt+=(Zt-bt)*Ge,bt=Zt,Pe=0;Pe<Nt;++Pe)if(ue=at[Pe],ue<bt&&++vt>u&&Tt("overflow"),ue==bt){for(ke=vt,_e=c;fe=_e<=se?_:_e>=se+y?y:_e-se,!(ke<fe);_e+=c)ce=ke-fe,Ke=c-fe,me.push(K(ae(fe+ce%Ke,0))),ke=st(ce/Ke);me.push(K(ae(ke,0))),se=zt(vt,Ge,le==Gt),vt=0,++le}++vt,++bt}return me.join("")}function Kt(at){return Et(at,function(bt){return O.test(bt)?Vt(bt.slice(4).toLowerCase()):bt})}function ve(at){return Et(at,function(bt){return H.test(bt)?"xn--"+he(bt):bt})}if(h={version:"1.3.2",ucs2:{decode:Rt,encode:Ft},decode:Vt,encode:he,toASCII:ve,toUnicode:Kt},i&&s)if(t.exports==i)s.exports=h;else for(At in h)h.hasOwnProperty(At)&&(i[At]=h[At]);else r.punycode=h})($h)})(Zv,ca);var Jv={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},ro={};function Qv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Kv=function(t,e,r,i){e=e||"&",r=r||"=";var s={};if(typeof t!="string"||t.length===0)return s;var o=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var c=0;c<u;++c){var _=t[c].replace(o,"%20"),y=_.indexOf(r),w,b,E,T;y>=0?(w=_.substr(0,y),b=_.substr(y+1)):(w=_,b=""),E=decodeURIComponent(w),T=decodeURIComponent(b),Qv(s,E)?Array.isArray(s[E])?s[E].push(T):s[E]=[s[E],T]:s[E]=T}return s},io=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},tm=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var o=encodeURIComponent(io(s))+r;return Array.isArray(t[s])?t[s].map(function(h){return o+encodeURIComponent(io(h))}).join(e):o+encodeURIComponent(io(t[s]))}).join(e):i?encodeURIComponent(io(i))+r+encodeURIComponent(io(t)):""};ro.decode=ro.parse=Kv,ro.encode=ro.stringify=tm;var em=ca,Di=Jv,rm=da,im=_m,nm=dm;function Ii(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var sm=/^([a-z0-9.+-]+:)/i,om=/:[0-9]*$/,am=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hm=["<",">",'"',"`"," ","\r",`
`,"	"],lm=["{","}","|","\\","^","`"].concat(hm),Vh=["'"].concat(lm),Tf=["%","/","?",";","#"].concat(Vh),Af=["/","?","#"],um=255,wf=/^[+a-z0-9A-Z_-]{0,63}$/,fm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,cm={javascript:!0,"javascript:":!0},Hh={javascript:!0,"javascript:":!0},As={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},zh=ro;function da(t,e,r){if(t&&Di.isObject(t)&&t instanceof Ii)return t;var i=new Ii;return i.parse(t,e,r),i}Ii.prototype.parse=function(t,e,r){if(!Di.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=i!==-1&&i<t.indexOf("#")?"?":"#",o=t.split(s),h=/\\/g;o[0]=o[0].replace(h,"/"),t=o.join(s);var u=t;if(u=u.trim(),!r&&t.split("#").length===1){var c=am.exec(u);if(c)return this.path=u,this.href=u,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=zh.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=sm.exec(u);if(_){_=_[0];var y=_.toLowerCase();this.protocol=y,u=u.substr(_.length)}if(r||_||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var w=u.substr(0,2)==="//";w&&!(_&&Hh[_])&&(u=u.substr(2),this.slashes=!0)}if(!Hh[_]&&(w||_&&!As[_])){for(var b=-1,E=0;E<Af.length;E++){var T=u.indexOf(Af[E]);T!==-1&&(b===-1||T<b)&&(b=T)}var P,O;b===-1?O=u.lastIndexOf("@"):O=u.lastIndexOf("@",b),O!==-1&&(P=u.slice(0,O),u=u.slice(O+1),this.auth=decodeURIComponent(P)),b=-1;for(var E=0;E<Tf.length;E++){var T=u.indexOf(Tf[E]);T!==-1&&(b===-1||T<b)&&(b=T)}b===-1&&(b=u.length),this.host=u.slice(0,b),u=u.slice(b),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var Y=this.hostname.split(/\./),E=0,J=Y.length;E<J;E++){var it=Y[E];if(it&&!it.match(wf)){for(var st="",K=0,At=it.length;K<At;K++)it.charCodeAt(K)>127?st+="x":st+=it[K];if(!st.match(wf)){var Tt=Y.slice(0,E),dt=Y.slice(E+1),Et=it.match(fm);Et&&(Tt.push(Et[1]),dt.unshift(Et[2])),dt.length&&(u="/"+dt.join(".")+u),this.hostname=Tt.join(".");break}}}this.hostname.length>um?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=em.toASCII(this.hostname));var Rt=this.port?":"+this.port:"",Ft=this.hostname||"";this.host=Ft+Rt,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!cm[y])for(var E=0,J=Vh.length;E<J;E++){var ne=Vh[E];if(u.indexOf(ne)!==-1){var ae=encodeURIComponent(ne);ae===ne&&(ae=escape(ne)),u=u.split(ne).join(ae)}}var zt=u.indexOf("#");zt!==-1&&(this.hash=u.substr(zt),u=u.slice(0,zt));var Vt=u.indexOf("?");if(Vt!==-1?(this.search=u.substr(Vt),this.query=u.substr(Vt+1),e&&(this.query=zh.parse(this.query)),u=u.slice(0,Vt)):e&&(this.search="",this.query={}),u&&(this.pathname=u),As[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Rt=this.pathname||"",he=this.search||"";this.path=Rt+he}return this.href=this.format(),this};function dm(t){return Di.isString(t)&&(t=da(t)),t instanceof Ii?t.format():Ii.prototype.format.call(t)}Ii.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&Di.isObject(this.query)&&Object.keys(this.query).length&&(o=zh.stringify(this.query));var h=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||As[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),h&&h.charAt(0)!=="?"&&(h="?"+h),r=r.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),h=h.replace("#","%23"),e+s+r+h+i};function _m(t,e){return da(t,!1,!0).resolve(e)}Ii.prototype.resolve=function(t){return this.resolveObject(da(t,!1,!0)).format()},Ii.prototype.resolveObject=function(t){if(Di.isString(t)){var e=new Ii;e.parse(t,!1,!0),t=e}for(var r=new Ii,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var c=h[u];c!=="protocol"&&(r[c]=t[c])}return As[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!As[t.protocol]){for(var _=Object.keys(t),y=0;y<_.length;y++){var w=_[y];r[w]=t[w]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Hh[t.protocol]){for(var J=(t.pathname||"").split("/");J.length&&!(t.host=J.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),J[0]!==""&&J.unshift(""),J.length<2&&J.unshift(""),r.pathname=J.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var b=r.pathname||"",E=r.search||"";r.path=b+E}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var T=r.pathname&&r.pathname.charAt(0)==="/",P=t.host||t.pathname&&t.pathname.charAt(0)==="/",O=P||T||r.host&&t.pathname,H=O,Y=r.pathname&&r.pathname.split("/")||[],J=t.pathname&&t.pathname.split("/")||[],it=r.protocol&&!As[r.protocol];if(it&&(r.hostname="",r.port=null,r.host&&(Y[0]===""?Y[0]=r.host:Y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(J[0]===""?J[0]=t.host:J.unshift(t.host)),t.host=null),O=O&&(J[0]===""||Y[0]==="")),P)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,Y=J;else if(J.length)Y||(Y=[]),Y.pop(),Y=Y.concat(J),r.search=t.search,r.query=t.query;else if(!Di.isNullOrUndefined(t.search)){if(it){r.hostname=r.host=Y.shift();var st=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;st&&(r.auth=st.shift(),r.host=r.hostname=st.shift())}return r.search=t.search,r.query=t.query,(!Di.isNull(r.pathname)||!Di.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!Y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var K=Y.slice(-1)[0],At=(r.host||t.host||Y.length>1)&&(K==="."||K==="..")||K==="",Tt=0,dt=Y.length;dt>=0;dt--)K=Y[dt],K==="."?Y.splice(dt,1):K===".."?(Y.splice(dt,1),Tt++):Tt&&(Y.splice(dt,1),Tt--);if(!O&&!H)for(;Tt--;Tt)Y.unshift("..");O&&Y[0]!==""&&(!Y[0]||Y[0].charAt(0)!=="/")&&Y.unshift(""),At&&Y.join("/").substr(-1)!=="/"&&Y.push("");var Et=Y[0]===""||Y[0]&&Y[0].charAt(0)==="/";if(it){r.hostname=r.host=Et?"":Y.length?Y.shift():"";var st=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;st&&(r.auth=st.shift(),r.host=r.hostname=st.shift())}return O=O||r.host&&Y.length,O&&!Et&&Y.unshift(""),Y.length?r.pathname=Y.join("/"):(r.pathname=null,r.path=null),(!Di.isNull(r.pathname)||!Di.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Ii.prototype.parseHost=function(){var t=this.host,e=om.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Bi;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Bi||(Bi={}));var ws;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ws||(ws={}));var no;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(no||(no={}));var Te;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Te||(Te={}));var di;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(di||(di={}));var Ht;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ht||(Ht={}));var yn;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(yn||(yn={}));var ye;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(ye||(ye={}));var so;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(so||(so={}));var ki;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ki||(ki={}));var Xi;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Xi||(Xi={}));var Vi;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Vi||(Vi={}));var _i;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(_i||(_i={}));var on;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(on||(on={}));var _a;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(_a||(_a={}));var Ci;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ci||(Ci={}));var Gr;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Gr||(Gr={}));var jh;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(jh||(jh={}));var Fr;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Fr||(Fr={}));var $i;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})($i||($i={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hi={parse:rm,format:nm,resolve:im};function Ri(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function pm(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vm(t,e,r){return t.replace(new RegExp(pm(e),"g"),r)}function mm(t,e){for(var r="",i=0,s=-1,o=0,h,u=0;u<=t.length;++u){if(u<t.length)h=t.charCodeAt(u);else{if(h===47)break;h=47}if(h===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",i=0):(r=r.slice(0,c),i=r.length-1-r.lastIndexOf("/")),s=u,o=0;continue}}else if(r.length===2||r.length===1){r="",i=0,s=u,o=0;continue}}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(s+1,u):r=t.slice(s+1,u),i=u-s-1;s=u,o=0}else h===46&&o!==-1?++o:o=-1}return r}var Pf={toPosix:function(t){return vm(t,"\\","/")},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){Ri(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),s=/^[^/:]+:\//.exec(t);if(r||i||s){var o=(r==null?void 0:r[0])||(i==null?void 0:i[0])||(s==null?void 0:s[0]);e=o,t=t.slice(o.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var i=this.toPosix(e!=null?e:te.ADAPTER.getBaseUrl()),s=this.toPosix(r!=null?r:this.rootname(i));if(Ri(t),t=this.toPosix(t),t.startsWith("/"))return Pf.join(s,t.slice(1));var o=this.isAbsolute(t)?t:this.join(i,t);return o},normalize:function(t){if(t=this.toPosix(t),Ri(t),t.length===0)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var i=t.endsWith("/");return t=mm(t,!1),t.length>0&&i&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return Ri(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join:function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length===0)return".";for(var i,s=0;s<e.length;++s){var o=e[s];Ri(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":this.normalize(i)},dirname:function(t){if(Ri(t),t.length===0)return".";t=this.toPosix(t);var e=t.charCodeAt(0),r=e===47,i=-1,s=!0,o=this.getProtocol(t),h=t;t=t.slice(o.length);for(var u=t.length-1;u>=1;--u)if(e=t.charCodeAt(u),e===47){if(!s){i=u;break}}else s=!1;return i===-1?r?"/":this.isUrl(h)?o+t:o:r&&i===1?"//":o+t.slice(0,i)},rootname:function(t){Ri(t),t=this.toPosix(t);var e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename:function(t,e){Ri(t),e&&Ri(e),t=this.toPosix(t);var r=0,i=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var h=e.length-1,u=-1;for(o=t.length-1;o>=0;--o){var c=t.charCodeAt(o);if(c===47){if(!s){r=o+1;break}}else u===-1&&(s=!1,u=o+1),h>=0&&(c===e.charCodeAt(h)?--h===-1&&(i=o):(h=-1,i=u))}return r===i?i=u:i===-1&&(i=t.length),t.slice(r,i)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===47){if(!s){r=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":t.slice(r,i)},extname:function(t){Ri(t),t=this.toPosix(t);for(var e=-1,r=0,i=-1,s=!0,o=0,h=t.length-1;h>=0;--h){var u=t.charCodeAt(h);if(u===47){if(!s){r=h+1;break}continue}i===-1&&(s=!1,i=h+1),u===46?e===-1?e=h:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===r+1?"":t.slice(e,i)},parse:function(t){Ri(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);var r=t.charCodeAt(0),i=this.isAbsolute(t),s;e.root=this.rootname(t),i||this.hasProtocol(t)?s=1:s=0;for(var o=-1,h=0,u=-1,c=!0,_=t.length-1,y=0;_>=s;--_){if(r=t.charCodeAt(_),r===47){if(!c){h=_+1;break}continue}u===-1&&(c=!1,u=_+1),r===46?o===-1?o=_:y!==1&&(y=1):o!==-1&&(y=-1)}return o===-1||u===-1||y===0||y===1&&o===u-1&&o===h+1?u!==-1&&(h===0&&i?e.base=e.name=t.slice(1,u):e.base=e.name=t.slice(h,u)):(h===0&&i?(e.name=t.slice(1,o),e.base=t.slice(1,u)):(e.name=t.slice(h,o),e.base=t.slice(h,u)),e.ext=t.slice(o,u)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};te.RETINA_PREFIX=/@([0-9\.]+)x/,te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Wh=!1,Ef="6.5.2";function If(){Wh=!0}function Cf(t){var e;if(!Wh){if(te.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+Ef+" -  "+t+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+Ef+" - "+t+" - http://www.pixijs.com/");Wh=!0}}var Yh;function $f(){return typeof Yh=="undefined"&&(Yh=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!te.ADAPTER.getWebGLRenderingContext())return!1;var r=te.ADAPTER.createCanvas(),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),s=!!(i&&i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch(h){return!1}}()),Yh}var gm="#f0f8ff",ym="#faebd7",bm="#00ffff",xm="#7fffd4",Tm="#f0ffff",Am="#f5f5dc",wm="#ffe4c4",Pm="#000000",Em="#ffebcd",Im="#0000ff",Cm="#8a2be2",$m="#a52a2a",Rm="#deb887",Sm="#5f9ea0",Nm="#7fff00",Lm="#d2691e",Om="#ff7f50",Fm="#6495ed",Mm="#fff8dc",Um="#dc143c",Gm="#00ffff",Dm="#00008b",Bm="#008b8b",km="#b8860b",Xm="#a9a9a9",Vm="#006400",Hm="#a9a9a9",zm="#bdb76b",jm="#8b008b",Wm="#556b2f",Ym="#ff8c00",qm="#9932cc",Zm="#8b0000",Jm="#e9967a",Qm="#8fbc8f",Km="#483d8b",tg="#2f4f4f",eg="#2f4f4f",rg="#00ced1",ig="#9400d3",ng="#ff1493",sg="#00bfff",og="#696969",ag="#696969",hg="#1e90ff",lg="#b22222",ug="#fffaf0",fg="#228b22",cg="#ff00ff",dg="#dcdcdc",_g="#f8f8ff",pg="#daa520",vg="#ffd700",mg="#808080",gg="#008000",yg="#adff2f",bg="#808080",xg="#f0fff0",Tg="#ff69b4",Ag="#cd5c5c",wg="#4b0082",Pg="#fffff0",Eg="#f0e68c",Ig="#fff0f5",Cg="#e6e6fa",$g="#7cfc00",Rg="#fffacd",Sg="#add8e6",Ng="#f08080",Lg="#e0ffff",Og="#fafad2",Fg="#d3d3d3",Mg="#90ee90",Ug="#d3d3d3",Gg="#ffb6c1",Dg="#ffa07a",Bg="#20b2aa",kg="#87cefa",Xg="#778899",Vg="#778899",Hg="#b0c4de",zg="#ffffe0",jg="#00ff00",Wg="#32cd32",Yg="#faf0e6",qg="#ff00ff",Zg="#800000",Jg="#66cdaa",Qg="#0000cd",Kg="#ba55d3",t1="#9370db",e1="#3cb371",r1="#7b68ee",i1="#00fa9a",n1="#48d1cc",s1="#c71585",o1="#191970",a1="#f5fffa",h1="#ffe4e1",l1="#ffe4b5",u1="#ffdead",f1="#000080",c1="#fdf5e6",d1="#808000",_1="#6b8e23",p1="#ffa500",v1="#ff4500",m1="#da70d6",g1="#eee8aa",y1="#98fb98",b1="#afeeee",x1="#db7093",T1="#ffefd5",A1="#ffdab9",w1="#cd853f",P1="#ffc0cb",E1="#dda0dd",I1="#b0e0e6",C1="#800080",$1="#663399",R1="#ff0000",S1="#bc8f8f",N1="#4169e1",L1="#8b4513",O1="#fa8072",F1="#f4a460",M1="#2e8b57",U1="#fff5ee",G1="#a0522d",D1="#c0c0c0",B1="#87ceeb",k1="#6a5acd",X1="#708090",V1="#708090",H1="#fffafa",z1="#00ff7f",j1="#4682b4",W1="#d2b48c",Y1="#008080",q1="#d8bfd8",Z1="#ff6347",J1="#40e0d0",Q1="#ee82ee",K1="#f5deb3",ty="#ffffff",ey="#f5f5f5",ry="#ffff00",iy="#9acd32",ny={aliceblue:gm,antiquewhite:ym,aqua:bm,aquamarine:xm,azure:Tm,beige:Am,bisque:wm,black:Pm,blanchedalmond:Em,blue:Im,blueviolet:Cm,brown:$m,burlywood:Rm,cadetblue:Sm,chartreuse:Nm,chocolate:Lm,coral:Om,cornflowerblue:Fm,cornsilk:Mm,crimson:Um,cyan:Gm,darkblue:Dm,darkcyan:Bm,darkgoldenrod:km,darkgray:Xm,darkgreen:Vm,darkgrey:Hm,darkkhaki:zm,darkmagenta:jm,darkolivegreen:Wm,darkorange:Ym,darkorchid:qm,darkred:Zm,darksalmon:Jm,darkseagreen:Qm,darkslateblue:Km,darkslategray:tg,darkslategrey:eg,darkturquoise:rg,darkviolet:ig,deeppink:ng,deepskyblue:sg,dimgray:og,dimgrey:ag,dodgerblue:hg,firebrick:lg,floralwhite:ug,forestgreen:fg,fuchsia:cg,gainsboro:dg,ghostwhite:_g,goldenrod:pg,gold:vg,gray:mg,green:gg,greenyellow:yg,grey:bg,honeydew:xg,hotpink:Tg,indianred:Ag,indigo:wg,ivory:Pg,khaki:Eg,lavenderblush:Ig,lavender:Cg,lawngreen:$g,lemonchiffon:Rg,lightblue:Sg,lightcoral:Ng,lightcyan:Lg,lightgoldenrodyellow:Og,lightgray:Fg,lightgreen:Mg,lightgrey:Ug,lightpink:Gg,lightsalmon:Dg,lightseagreen:Bg,lightskyblue:kg,lightslategray:Xg,lightslategrey:Vg,lightsteelblue:Hg,lightyellow:zg,lime:jg,limegreen:Wg,linen:Yg,magenta:qg,maroon:Zg,mediumaquamarine:Jg,mediumblue:Qg,mediumorchid:Kg,mediumpurple:t1,mediumseagreen:e1,mediumslateblue:r1,mediumspringgreen:i1,mediumturquoise:n1,mediumvioletred:s1,midnightblue:o1,mintcream:a1,mistyrose:h1,moccasin:l1,navajowhite:u1,navy:f1,oldlace:c1,olive:d1,olivedrab:_1,orange:p1,orangered:v1,orchid:m1,palegoldenrod:g1,palegreen:y1,paleturquoise:b1,palevioletred:x1,papayawhip:T1,peachpuff:A1,peru:w1,pink:P1,plum:E1,powderblue:I1,purple:C1,rebeccapurple:$1,red:R1,rosybrown:S1,royalblue:N1,saddlebrown:L1,salmon:O1,sandybrown:F1,seagreen:M1,seashell:U1,sienna:G1,silver:D1,skyblue:B1,slateblue:k1,slategray:X1,slategrey:V1,snow:H1,springgreen:z1,steelblue:j1,tan:W1,teal:Y1,thistle:q1,tomato:Z1,turquoise:J1,violet:Q1,wheat:K1,white:ty,whitesmoke:ey,yellow:ry,yellowgreen:iy};function Fn(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function qh(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function Zh(t){return typeof t=="string"&&(t=ny[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function sy(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function oy(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[Te.NORMAL_NPM]=Te.NORMAL,t[Te.ADD_NPM]=Te.ADD,t[Te.SCREEN_NPM]=Te.SCREEN,e[Te.NORMAL]=Te.NORMAL_NPM,e[Te.ADD]=Te.ADD_NPM,e[Te.SCREEN]=Te.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}var Jh=oy();function Qh(t,e){return Jh[e?1:0][t]}function Rf(t,e,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function pa(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,i=t>>8&255,s=t&255;return r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0,(e*255<<24)+(r<<16)+(i<<8)+s}function Kh(t,e,r,i){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(i||i===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Sf(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,s=0;i<r;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function va(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var ay={Float32Array,Uint32Array,Int32Array,Uint8Array};function hy(t,e){for(var r=0,i=0,s={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;for(var h=new ArrayBuffer(r*4),u=null,c=0,o=0;o<t.length;o++){var _=e[o],y=t[o],w=va(y);s[w]||(s[w]=new ay[w](h)),u=s[w];for(var b=0;b<y.length;b++){var E=(b/_|0)*i+c,T=b%_;u[E+T]=y[b]}c+=_}return new Float32Array(h)}function oo(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function tl(t){return!(t&t-1)&&!!t}function el(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Mn(t,e,r){var i=t.length,s;if(!(e>=i||r===0)){r=e+r>i?i-e:r;var o=i-r;for(s=e;s<o;++s)t[s]=t[s+r];t.length=o}}function Un(t){return t===0?0:t<0?-1:1}var ly=0;function bn(){return++ly}var Nf={};function ii(t,e,r){if(r===void 0&&(r=3),!Nf[e]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Nf[e]=!0}}var rl={},ni=Object.create(null),pi=Object.create(null);function uy(){var t;for(t in ni)ni[t].destroy();for(t in pi)pi[t].destroy()}function fy(){var t;for(t in ni)delete ni[t];for(t in pi)delete pi[t]}var il=function(){function t(e,r,i){this.canvas=te.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||te.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function Lf(t){var e=t.width,r=t.height,i=t.getContext("2d"),s=i.getImageData(0,0,e,r),o=s.data,h=o.length,u={top:null,left:null,right:null,bottom:null},c=null,_,y,w;for(_=0;_<h;_+=4)o[_+3]!==0&&(y=_/4%e,w=~~(_/4/e),u.top===null&&(u.top=w),(u.left===null||y<u.left)&&(u.left=y),(u.right===null||u.right<y)&&(u.right=y+1),(u.bottom===null||u.bottom<w)&&(u.bottom=w));return u.top!==null&&(e=u.right-u.left,r=u.bottom-u.top+1,c=i.getImageData(u.left,u.top,e,r)),{height:r,width:e,data:c}}var Of=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function cy(t){var e=Of.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var ma;function Ff(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,ma||(ma=document.createElement("a")),ma.href=t;var r=Hi.parse(ma.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function ao(t,e){var r=te.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const dy=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:pi,CanvasRenderTarget:il,DATA_URI:Of,EventEmitter:Ei,ProgramCache:rl,TextureCache:ni,clearTextureCache:fy,correctBlendMode:Qh,createIndicesForQuads:Sf,decomposeDataUri:cy,deprecation:ii,destroyTextureCache:uy,determineCrossOrigin:Ff,get earcut(){return xs},getBufferType:va,getResolutionOfUrl:ao,hex2rgb:Fn,hex2string:qh,interleaveTypedArrays:hy,isMobile:ci,isPow2:tl,isWebGLSupported:$f,log2:el,nextPow2:oo,path:Pf,premultiplyBlendMode:Jh,premultiplyRgba:Rf,premultiplyTint:pa,premultiplyTintToRgba:Kh,removeItems:Mn,rgb2hex:sy,sayHello:Cf,sign:Un,skipHello:If,string2hex:Zh,trimCanvas:Lf,uid:bn,url:Hi},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ho=Math.PI*2,Mf=180/Math.PI,Uf=Math.PI/180,Xr;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(Xr||(Xr={}));var dr=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),ga=[new dr,new dr,new dr,new dr],We=function(){function t(e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=Xr.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var i=this.x<e.x?e.x:this.x,s=this.right>e.right?e.right:this.right;if(s<=i)return!1;var o=this.y<e.y?e.y:this.y,h=this.bottom>e.bottom?e.bottom:this.bottom;return h>o}var u=this.left,c=this.right,_=this.top,y=this.bottom;if(c<=u||y<=_)return!1;var w=ga[0].set(e.left,e.top),b=ga[1].set(e.left,e.bottom),E=ga[2].set(e.right,e.top),T=ga[3].set(e.right,e.bottom);if(E.x<=w.x||b.y<=w.y)return!1;var P=Math.sign(r.a*r.d-r.b*r.c);if(P===0||(r.apply(w,w),r.apply(b,b),r.apply(E,E),r.apply(T,T),Math.max(w.x,b.x,E.x,T.x)<=u||Math.min(w.x,b.x,E.x,T.x)>=c||Math.max(w.y,b.y,E.y,T.y)<=_||Math.min(w.y,b.y,E.y,T.y)>=y))return!1;var O=P*(b.y-w.y),H=P*(w.x-b.x),Y=O*u+H*_,J=O*c+H*_,it=O*u+H*y,st=O*c+H*y;if(Math.max(Y,J,it,st)<=O*w.x+H*w.y||Math.min(Y,J,it,st)>=O*T.x+H*T.y)return!1;var K=P*(w.y-E.y),At=P*(E.x-w.x),Tt=K*u+At*_,dt=K*c+At*_,Et=K*u+At*y,Rt=K*c+At*y;return!(Math.max(Tt,dt,Et,Rt)<=K*w.x+At*w.y||Math.min(Tt,dt,Et,Rt)>=K*T.x+At*T.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(o-s,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=s-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=s,this.height=o-s,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Gf=function(){function t(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.radius=i,this.type=Xr.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-e,o=this.y-r;return s*=s,o*=o,s+o<=i},t.prototype.getBounds=function(){return new We(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),Df=function(){function t(e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=e,this.y=r,this.width=i,this.height=s,this.type=Xr.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,s=(r-this.y)/this.height;return i*=i,s*=s,i+s<=1},t.prototype.getBounds=function(){return new We(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),lo=function(){function t(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var s=Array.isArray(r[0])?r[0]:r;if(typeof s[0]!="number"){for(var o=[],h=0,u=s.length;h<u;h++)o.push(s[h].x,s[h].y);s=o}this.points=s,this.type=Xr.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var i=!1,s=this.points.length/2,o=0,h=s-1;o<s;h=o++){var u=this.points[o*2],c=this.points[o*2+1],_=this.points[h*2],y=this.points[h*2+1],w=c>r!=y>r&&e<(_-u)*((r-c)/(y-c))+u;w&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),Bf=function(){function t(e,r,i,s,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=20),this.x=e,this.y=r,this.width=i,this.height=s,this.radius=o,this.type=Xr.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var s=e-(this.x+i),o=r-(this.y+i),h=i*i;if(s*s+o*o<=h||(s=e-(this.x+this.width-i),s*s+o*o<=h)||(o=r-(this.y+this.height-i),s*s+o*o<=h)||(s=e-(this.x+i),s*s+o*o<=h))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),xn=function(){function t(e,r,i,s){i===void 0&&(i=0),s===void 0&&(s=0),this._x=i,this._y=s,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),wr=function(){function t(e,r,i,s,o,h){e===void 0&&(e=1),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=0),h===void 0&&(h=0),this.array=null,this.a=e,this.b=r,this.c=i,this.d=s,this.tx=o,this.ty=h}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,i,s,o,h){return this.a=e,this.b=r,this.c=i,this.d=s,this.tx=o,this.ty=h,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(e,r){r=r||new dr;var i=e.x,s=e.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new dr;var i=1/(this.a*this.d+this.c*-this.b),s=e.x,o=e.y;return r.x=this.d*i*s+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*o+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),i=Math.sin(e),s=this.a,o=this.c,h=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=o*r-this.d*i,this.d=o*i+this.d*r,this.tx=h*r-this.ty*i,this.ty=h*i+this.ty*r,this},t.prototype.append=function(e){var r=this.a,i=this.b,s=this.c,o=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*i+e.b*o,this.c=e.c*r+e.d*s,this.d=e.c*i+e.d*o,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*o+this.ty,this},t.prototype.setTransform=function(e,r,i,s,o,h,u,c,_){return this.a=Math.cos(u+_)*o,this.b=Math.sin(u+_)*o,this.c=-Math.sin(u-c)*h,this.d=Math.cos(u-c)*h,this.tx=e-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,i=this.b,s=this.c,o=this.d,h=e.pivot,u=-Math.atan2(-s,o),c=Math.atan2(i,r),_=Math.abs(u+c);return _<1e-5||Math.abs(ho-_)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=u,e.skew.y=c),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(s*s+o*o),e.position.x=this.tx+(h.x*r+h.y*s),e.position.y=this.ty+(h.x*i+h.y*o),e},t.prototype.invert=function(){var e=this.a,r=this.b,i=this.c,s=this.d,o=this.tx,h=e*s-r*i;return this.a=s/h,this.b=-r/h,this.c=-i/h,this.d=e/h,this.tx=(i*this.ty-s*o)/h,this.ty=-(e*this.ty-r*o)/h,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Gn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Dn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Bn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],kn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],nl=[],kf=[],ya=Math.sign;function _y(){for(var t=0;t<16;t++){var e=[];nl.push(e);for(var r=0;r<16;r++)for(var i=ya(Gn[t]*Gn[r]+Bn[t]*Dn[r]),s=ya(Dn[t]*Gn[r]+kn[t]*Dn[r]),o=ya(Gn[t]*Bn[r]+Bn[t]*kn[r]),h=ya(Dn[t]*Bn[r]+kn[t]*kn[r]),u=0;u<16;u++)if(Gn[u]===i&&Dn[u]===s&&Bn[u]===o&&kn[u]===h){e.push(u);break}}for(var t=0;t<16;t++){var c=new wr;c.set(Gn[t],Dn[t],Bn[t],kn[t],0,0),kf.push(c)}}_y();var Pr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Gn[t]},uY:function(t){return Dn[t]},vX:function(t){return Bn[t]},vY:function(t){return kn[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return nl[t][e]},sub:function(t,e){return nl[t][Pr.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?Pr.S:Pr.N:Math.abs(e)*2<=Math.abs(t)?t>0?Pr.E:Pr.W:e>0?t>0?Pr.SE:Pr.SW:t>0?Pr.NE:Pr.NW},matrixAppendRotationInv:function(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var s=kf[Pr.inv(e)];s.tx=r,s.ty=i,t.append(s)}},ba=function(){function t(){this.worldTransform=new wr,this.localTransform=new wr,this.position=new xn(this.onChange,this,0,0),this.scale=new xn(this.onChange,this,1,1),this.pivot=new xn(this.onChange,this,0,0),this.skew=new xn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,s=this.worldTransform;s.a=r.a*i.a+r.b*i.c,s.b=r.a*i.b+r.b*i.d,s.c=r.c*i.a+r.d*i.c,s.d=r.c*i.b+r.d*i.d,s.tx=r.tx*i.a+r.ty*i.c+i.tx,s.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.SORTABLE_CHILDREN=!1;var uo=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?We.EMPTY:(e=e||new We(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,s=e.b,o=e.c,h=e.d,u=e.tx,c=e.ty,_=i*r.x+o*r.y+u,y=s*r.x+h*r.y+c;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,y),this.maxY=Math.max(this.maxY,y)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,s=this.maxX,o=this.maxY,h=e[0],u=e[1];r=h<r?h:r,i=u<i?u:i,s=h>s?h:s,o=u>o?u:o,h=e[2],u=e[3],r=h<r?h:r,i=u<i?u:i,s=h>s?h:s,o=u>o?u:o,h=e[4],u=e[5],r=h<r?h:r,i=u<i?u:i,s=h>s?h:s,o=u>o?u:o,h=e[6],u=e[7],r=h<r?h:r,i=u<i?u:i,s=h>s?h:s,o=u>o?u:o,this.minX=r,this.minY=i,this.maxX=s,this.maxY=o},t.prototype.addFrame=function(e,r,i,s,o){this.addFrameMatrix(e.worldTransform,r,i,s,o)},t.prototype.addFrameMatrix=function(e,r,i,s,o){var h=e.a,u=e.b,c=e.c,_=e.d,y=e.tx,w=e.ty,b=this.minX,E=this.minY,T=this.maxX,P=this.maxY,O=h*r+c*i+y,H=u*r+_*i+w;b=O<b?O:b,E=H<E?H:E,T=O>T?O:T,P=H>P?H:P,O=h*s+c*i+y,H=u*s+_*i+w,b=O<b?O:b,E=H<E?H:E,T=O>T?O:T,P=H>P?H:P,O=h*r+c*o+y,H=u*r+_*o+w,b=O<b?O:b,E=H<E?H:E,T=O>T?O:T,P=H>P?H:P,O=h*s+c*o+y,H=u*s+_*o+w,b=O<b?O:b,E=H<E?H:E,T=O>T?O:T,P=H>P?H:P,this.minX=b,this.minY=E,this.maxX=T,this.maxY=P},t.prototype.addVertexData=function(e,r,i){for(var s=this.minX,o=this.minY,h=this.maxX,u=this.maxY,c=r;c<i;c+=2){var _=e[c],y=e[c+1];s=_<s?_:s,o=y<o?y:o,h=_>h?_:h,u=y>u?y:u}this.minX=s,this.minY=o,this.maxX=h,this.maxY=u},t.prototype.addVertices=function(e,r,i,s){this.addVerticesMatrix(e.worldTransform,r,i,s)},t.prototype.addVerticesMatrix=function(e,r,i,s,o,h){o===void 0&&(o=0),h===void 0&&(h=o);for(var u=e.a,c=e.b,_=e.c,y=e.d,w=e.tx,b=e.ty,E=this.minX,T=this.minY,P=this.maxX,O=this.maxY,H=i;H<s;H+=2){var Y=r[H],J=r[H+1],it=u*Y+_*J+w,st=y*J+c*Y+b;E=Math.min(E,it-o),P=Math.max(P,it+o),T=Math.min(T,st-h),O=Math.max(O,st+h)}this.minX=E,this.minY=T,this.maxX=P,this.maxY=O},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,s=this.maxX,o=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>o?e.maxY:o},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,o=e.maxX<r.maxX?e.maxX:r.maxX,h=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=o&&s<=h){var u=this.minX,c=this.minY,_=this.maxX,y=this.maxY;this.minX=i<u?i:u,this.minY=s<c?s:c,this.maxX=o>_?o:_,this.maxY=h>y?h:y}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,o=e.maxX<r.x+r.width?e.maxX:r.x+r.width,h=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=o&&s<=h){var u=this.minX,c=this.minY,_=this.maxX,y=this.maxY;this.minX=i<u?i:u,this.minY=s<c?s:c,this.maxX=o>_?o:_,this.maxY=h>y?h:y}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,s,o,h){e-=o,r-=h,i+=o,s+=h,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var sl=function(t,e){return sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},sl(t,e)};function ol(t,e){sl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nr=function(t){ol(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new ba,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new uo,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),s=0;s<i.length;++s){var o=i[s];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new We),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new We),r=this._localBoundsRect),this._localBounds||(this._localBounds=new uo);var i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,h=this._boundsID;this._bounds=this._localBounds;var u=this.getBounds(!1,r);return this.parent=s,this.transform=i,this._bounds=o,this._bounds.updateID+=this._boundsID-h,u},e.prototype.toGlobal=function(r,i,s){return s===void 0&&(s=!1),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,s,o){return i&&(r=i.toGlobal(r,s,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,s)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,s,o,h,u,c,_,y){return r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=1),h===void 0&&(h=0),u===void 0&&(u=0),c===void 0&&(c=0),_===void 0&&(_=0),y===void 0&&(y=0),this.position.x=r,this.position.y=i,this.scale.x=s||1,this.scale.y=o||1,this.rotation=h,this.skew.x=u,this.skew.y=c,this.pivot.x=_,this.pivot.y=y,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new al),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Mf},set:function(r){this.transform.rotation=r*Uf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=r,this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(Ei),al=function(t){ol(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Nr);Nr.prototype.displayObjectUpdateTransform=Nr.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Xf;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Xf||(Xf={}));var Vf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Vf||(Vf={}));var Hf;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Hf||(Hf={}));var zf;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(zf||(zf={}));var jf;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(jf||(jf={}));var Wf;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Wf||(Wf={}));var Yf;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Yf||(Yf={}));var qf;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(qf||(qf={}));var Zf;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Zf||(Zf={}));var Jf;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Jf||(Jf={}));var Qf;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Qf||(Qf={}));var Kf;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Kf||(Kf={}));var tc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(tc||(tc={}));var ec;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ec||(ec={}));var rc;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(rc||(rc={}));var ic;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ic||(ic={}));var hl;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(hl||(hl={}));var nc;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(nc||(nc={}));var sc;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(sc||(sc={}));var oc;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(oc||(oc={}));function py(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var vi=function(t){ol(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=te.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(i.length>1)for(var o=0;o<i.length;o++)this.addChild(i[o]);else{var h=i[0];h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.push(h),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",h,this,this.children.length-1),h.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var s=this.getChildIndex(r),o=this.getChildIndex(i);this.children[s]=i,this.children[o]=r,this.onChildrenChange(s<o?s:o)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var s=this.getChildIndex(r);Mn(this.children,s,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(i.length>1)for(var o=0;o<i.length;o++)this.removeChild(i[o]);else{var h=i[0],u=this.children.indexOf(h);if(u===-1)return null;h.parent=null,h.transform._parentID=-1,Mn(this.children,u,1),this._boundsID++,this.onChildrenChange(u),h.emit("removed",this),this.emit("childRemoved",h,this,u)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,Mn(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var s=r,o=i,h=o-s,u;if(h>0&&h<=o){u=this.children.splice(s,h);for(var c=0;c<u.length;++c)u[c].parent=null,u[c].transform&&(u[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<u.length;++c)u[c].emit("removed",this),this.emit("childRemoved",u[c],this,c);return u}else if(h===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,s=this.children.length;i<s;++i){var o=this.children[i];o._lastSortedIndex=i,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(py),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r];s.visible&&s.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var s=i._mask.isMaskData?i._mask.maskObject:i._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(i._bounds,s._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var s=t.prototype.getLocalBounds.call(this,r);if(!i)for(var o=0,h=this.children.length;o<h;++o){var u=this.children[o];u.visible&&u.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var s,o;if(this.cullArea?(s=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(s=this.getBounds(!0)),s&&i.intersects(s,o))this._render(r);else if(this.cullArea)return;for(var h=0,u=this.children.length;h<u;++h){var c=this.children[h],_=c.cullable;c.cullable=_||!this.cullArea,c.render(r),c.cullable=_}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,s=this.children.length;i<s;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){var i=this.filters,s=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}var h=i&&this._enabledFilters&&this._enabledFilters.length||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==hl.NONE));if(h&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),s&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,u=this.children.length;o<u;++o)this.children[o].render(r)}h&&r.batch.flush(),s&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,s=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<s.length;++o)s[o].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Nr);vi.prototype.containerUpdateTransform=vi.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var fo=function(){return fo=Object.assign||function(e){for(var r=arguments,i,s=1,o=arguments.length;s<o;s++){i=r[s];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},fo.apply(this,arguments)},ar;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(ar||(ar={}));var ac=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e=typeof t.extension!="object"?{type:t.extension}:t.extension;t=fo(fo({},e),{ref:t})}if(typeof t=="object")t=fo({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},zi={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(ac).forEach(function(s){s.type.forEach(function(o){var h,u;return(u=(h=e._removeHandlers)[o])===null||u===void 0?void 0:u.call(h,s)})}),this},add:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(ac).forEach(function(s){s.type.forEach(function(o){var h=e._addHandlers,u=e._queue;h[o]?h[o](s):(u[o]=u[o]||[],u[o].push(s))})}),this},handle:function(t,e,r){var i=this._addHandlers=this._addHandlers||{},s=this._removeHandlers=this._removeHandlers||{};if(i[t]||s[t])throw new Error("Extension type "+t+" already has a handler");i[t]=e,s[t]=r;var o=this._queue;return o[t]&&(o[t].forEach(function(h){return e(h)}),delete o[t]),this},handleByMap:function(t,e){return this.handle(t,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(t,e){return this.handle(t,function(r){var i,s;e.push(r.ref),t===ar.Loader&&((s=(i=r.ref).add)===null||s===void 0||s.call(i))},function(r){var i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};/*!
 * @pixi/runner - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wr=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,i,s,o,h,u,c){if(arguments.length>8)throw new Error("max arguments reached");var _=this,y=_.name,w=_.items;this._aliasCount++;for(var b=0,E=w.length;b<E;b++)w[b][y](e,r,i,s,o,h,u,c);return w===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Wr.prototype,{dispatch:{value:Wr.prototype.emit},run:{value:Wr.prototype.emit}});/*!
 * @pixi/ticker - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.TARGET_FPMS=.06;var ji;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(ji||(ji={}));var ll=function(){function t(e,r,i,s){r===void 0&&(r=null),i===void 0&&(i=0),s===void 0&&(s=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=s}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),Hr=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ll(null,null,1/0),this.deltaMS=1/te.TARGET_FPMS,this.elapsedMS=1/te.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,i){return i===void 0&&(i=ji.NORMAL),this._addListener(new ll(e,r,i))},t.prototype.addOnce=function(e,r,i){return i===void 0&&(i=ji.NORMAL),this._addListener(new ll(e,r,i,!0))},t.prototype._addListener=function(e){var r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var i=this._head.next;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*te.TARGET_FPMS;for(var s=this._head,o=s.next;o;)o=o.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,te.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),hc=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,ji.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Hr.shared:new Hr,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t.extension=ar.Application,t}();/*!
 * @pixi/core - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.PREFER_ENV=ci.any?Bi.WEBGL:Bi.WEBGL2,te.STRICT_TEXTURE_CACHE=!1;var co=[];function xa(t,e){if(!t)return null;var r="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var s=co.length-1;s>=0;--s){var o=co[s];if(o.test&&o.test(t,r))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ul=function(t,e){return ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},ul(t,e)};function vr(t,e){ul(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fl=function(){return fl=Object.assign||function(e){for(var r=arguments,i,s=1,o=arguments.length;s<o;s++){i=r[s];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},fl.apply(this,arguments)};function vy(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}var Xn=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Wr("setRealSize"),this.onUpdate=new Wr("update"),this.onError=new Wr("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),Vn=function(t){vr(e,t);function e(r,i){var s=this,o=i||{},h=o.width,u=o.height;if(!h||!u)throw new Error("BufferResource width or height invalid");return s=t.call(this,h,u)||this,s.data=r,s}return e.prototype.upload=function(r,i,s){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===_i.UNPACK);var h=i.realWidth,u=i.realHeight;return s.width===h&&s.height===u?o.texSubImage2D(i.target,0,0,0,h,u,i.format,s.type,this.data):(s.width=h,s.height=u,o.texImage2D(i.target,0,s.internalFormat,h,u,0,i.format,s.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(Xn),my={scaleMode:ki.NEAREST,format:Ht.RGBA,alphaMode:_i.NPM},Ye=function(t){vr(e,t);function e(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var s=t.call(this)||this;i=i||{};var o=i.alphaMode,h=i.mipmap,u=i.anisotropicLevel,c=i.scaleMode,_=i.width,y=i.height,w=i.wrapMode,b=i.format,E=i.type,T=i.target,P=i.resolution,O=i.resourceOptions;return r&&!(r instanceof Xn)&&(r=xa(r,O),r.internal=!0),s.resolution=P||te.RESOLUTION,s.width=Math.round((_||0)*s.resolution)/s.resolution,s.height=Math.round((y||0)*s.resolution)/s.resolution,s._mipmap=h!==void 0?h:te.MIPMAP_TEXTURES,s.anisotropicLevel=u!==void 0?u:te.ANISOTROPIC_LEVEL,s._wrapMode=w||te.WRAP_MODE,s._scaleMode=c!==void 0?c:te.SCALE_MODE,s.format=b||Ht.RGBA,s.type=E||ye.UNSIGNED_BYTE,s.target=T||yn.TEXTURE_2D,s.alphaMode=o!==void 0?o:_i.UNPACK,s.uid=bn(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=_>0&&y>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(r),s}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,i){var s;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,s=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,s=!0),s&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,i,s){return s=s||this.resolution,this.setRealSize(r*s,i*s,s)},e.prototype.setRealSize=function(r,i,s){return this.resolution=s||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=tl(this.realWidth)&&tl(this.realHeight)},e.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete pi[this.cacheId],delete ni[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,i,s){s===void 0&&(s=te.STRICT_TEXTURE_CACHE);var o=typeof r=="string",h=null;if(o)h=r;else{if(!r._pixiId){var u=i&&i.pixiIdPrefix||"pixiid";r._pixiId=u+"_"+bn()}h=r._pixiId}var c=pi[h];if(o&&s&&!c)throw new Error('The cacheId "'+h+'" does not exist in BaseTextureCache.');return c||(c=new e(r,i),c.cacheId=h,e.addToCache(c,h)),c},e.fromBuffer=function(r,i,s,o){r=r||new Float32Array(i*s*4);var h=new Vn(r,{width:i,height:s}),u=r instanceof Float32Array?ye.FLOAT:ye.UNSIGNED_BYTE;return new e(h,Object.assign(my,o||{width:i,height:s,type:u}))},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),pi[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),pi[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=pi[r];if(i){var s=i.textureCacheIds.indexOf(r);return s>-1&&i.textureCacheIds.splice(s,1),delete pi[r],i}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete pi[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(Ei),Ta=function(t){vr(e,t);function e(r,i){var s=this,o=i||{},h=o.width,u=o.height;s=t.call(this,h,u)||this,s.items=[],s.itemDirtyIds=[];for(var c=0;c<r;c++){var _=new Ye;s.items.push(_),s.itemDirtyIds.push(-2)}return s.length=r,s._load=null,s.baseTexture=null,s}return e.prototype.initFromArray=function(r,i){for(var s=0;s<this.length;s++)r[s]&&(r[s].castToBaseTexture?this.addBaseTextureAt(r[s].castToBaseTexture(),s):r[s]instanceof Xn?this.addResourceAt(r[s],s):this.addResourceAt(xa(r[s],i),s))},e.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(o){return o.resource}).filter(function(o){return o}),s=i.map(function(o){return o.load()});return this._load=Promise.all(s).then(function(){var o=r.items[0],h=o.realWidth,u=o.realHeight;return r.resize(h,u),Promise.resolve(r)}),this._load},e}(Xn),cl=function(t){vr(e,t);function e(r,i){var s=this,o=i||{},h=o.width,u=o.height,c,_;return Array.isArray(r)?(c=r,_=r.length):_=r,s=t.call(this,_,{width:h,height:u})||this,c&&s.initFromArray(c,i),s}return e.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=yn.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,i,s){var o=this,h=o.length,u=o.itemDirtyIds,c=o.items,_=r.gl;s.dirtyId<0&&_.texImage3D(_.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,h,0,i.format,s.type,null);for(var y=0;y<h;y++){var w=c[y];u[y]<w.dirtyId&&(u[y]=w.dirtyId,w.valid&&_.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,y,w.resource.width,w.resource.height,1,i.format,s.type,w.resource.source))}return!0},e}(Ta),Wi=function(t){vr(e,t);function e(r){var i=this,s=r,o=s.naturalWidth||s.videoWidth||s.width,h=s.naturalHeight||s.videoHeight||s.height;return i=t.call(this,o,h)||this,i.source=r,i.noSubImage=!1,i}return e.crossOrigin=function(r,i,s){s===void 0&&i.indexOf("data:")!==0?r.crossOrigin=Ff(i):s!==!1&&(r.crossOrigin=typeof s=="string"?s:"anonymous")},e.prototype.upload=function(r,i,s,o){var h=r.gl,u=i.realWidth,c=i.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===_i.UNPACK),!this.noSubImage&&i.target===h.TEXTURE_2D&&s.width===u&&s.height===c?h.texSubImage2D(h.TEXTURE_2D,0,0,0,i.format,s.type,o):(s.width=u,s.height=c,h.texImage2D(i.target,0,s.internalFormat,i.format,s.type,o)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;this.resize(i,s),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Xn),dl=function(t){vr(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var i=globalThis.OffscreenCanvas;return i&&r instanceof i?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(Wi),_l=function(t){vr(e,t);function e(r,i){var s=this,o=i||{},h=o.width,u=o.height,c=o.autoLoad,_=o.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");s=t.call(this,6,{width:h,height:u})||this;for(var y=0;y<e.SIDES;y++)s.items[y].target=yn.TEXTURE_CUBE_MAP_POSITIVE_X+y;return s.linkBaseTexture=_!==!1,r&&s.initFromArray(r,i),c!==!1&&s.load(),s}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=yn.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,i,s){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=yn.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},e.prototype.upload=function(r,i,s){for(var o=this.itemDirtyIds,h=0;h<e.SIDES;h++){var u=this.items[h];(o[h]<u.dirtyId||s.dirtyId<i.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(r,u,s),o[h]=u.dirtyId):o[h]<-1&&(r.gl.texImage2D(u.target,0,s.internalFormat,i.realWidth,i.realHeight,0,i.format,s.type,null),o[h]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(Ta),Aa=function(t){vr(e,t);function e(r,i){var s=this;if(i=i||{},!(r instanceof HTMLImageElement)){var o=new Image;Wi.crossOrigin(o,r,i.crossorigin),o.src=r,r=o}return s=t.call(this,r)||this,!r.complete&&s._width&&s._height&&(s._width=0,s._height=0),s.url=r.src,s._process=null,s.preserveBitmap=!1,s.createBitmap=(i.createBitmap!==void 0?i.createBitmap:te.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,s.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,s.bitmap=null,s._load=null,i.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(s,o){var h=i.source;i.url=h.src;var u=function(){i.destroyed||(h.onload=null,h.onerror=null,i.resize(h.width,h.height),i._load=null,i.createBitmap?s(i.process()):s(i))};h.complete&&h.src?u():(h.onload=u,h.onerror=function(c){o(c),i.onError.emit(c)})}),this._load)},e.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var s=globalThis.createImageBitmap,o=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:o?"cors":"no-cors"}).then(function(h){return h.blob()}).then(function(h){return s(h,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===_i.UNPACK?"premultiply":"none"})}).then(function(h){return r.destroyed?Promise.reject():(r.bitmap=h,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,i,s,this.bitmap),!this.preserveBitmap){var o=!0,h=i._glTextures;for(var u in h){var c=h[u];if(c!==s&&c.dirtyId!==i.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(Wi),pl=function(t){vr(e,t);function e(r,i){var s=this;return i=i||{},s=t.call(this,te.ADAPTER.createCanvas())||this,s._width=0,s._height=0,s.svg=r,s.scale=i.scale||1,s._overrideWidth=i.width,s._overrideHeight=i.height,s._resolve=null,s._crossorigin=i.crossorigin,s._load=null,i.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,i=new Image;Wi.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(s){r._resolve&&(i.onerror=null,r.onError.emit(s))},i.onload=function(){if(r._resolve){var s=i.width,o=i.height;if(!s||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var h=s*r.scale,u=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(h=r._overrideWidth||r._overrideHeight/o*s,u=r._overrideHeight||r._overrideWidth/s*o),h=Math.round(h),u=Math.round(u);var c=r.source;c.width=h,c.height=u,c._pixiId="canvas_"+bn(),c.getContext("2d").drawImage(i,0,0,s,o,0,0,h,u),r._resolve(),r._resolve=null}}},e.getSize=function(r){var i=e.SVG_SIZE.exec(r),s={};return i&&(s[i[1]]=Math.round(parseFloat(i[3])),s[i[5]]=Math.round(parseFloat(i[7]))),s},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Wi),vl=function(t){vr(e,t);function e(r,i){var s=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var h=r[0].src||r[0];Wi.crossOrigin(o,h,i.crossorigin);for(var u=0;u<r.length;++u){var c=document.createElement("source"),_=r[u],y=_.src,w=_.mime;y=y||r[u];var b=y.split("?").shift().toLowerCase(),E=b.slice(b.lastIndexOf(".")+1);w=w||e.MIME_TYPES[E]||"video/"+E,c.src=y,c.type=w,o.appendChild(c)}r=o}return s=t.call(this,r)||this,s.noSubImage=!0,s._autoUpdate=!0,s._isConnectedToTicker=!1,s._updateFPS=i.updateFPS||0,s._msToNextUpdate=0,s.autoPlay=i.autoPlay!==!1,s._load=null,s._resolve=null,s._onCanPlay=s._onCanPlay.bind(s),s._onError=s._onError.bind(s),i.autoLoad!==!1&&s.load(),s}return e.prototype.update=function(r){if(!this.destroyed){var i=Hr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(s){r.valid?s(r):(r._resolve=s,i.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Hr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Hr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Hr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Hr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Hr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,i){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Wi),ml=function(t){vr(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap},e}(Wi);co.push(Aa,ml,dl,vl,pl,Vn,_l,cl);var lc={__proto__:null,Resource:Xn,BaseImageResource:Wi,INSTALLED:co,autoDetectResource:xa,AbstractMultiResource:Ta,ArrayResource:cl,BufferResource:Vn,CanvasResource:dl,CubeResource:_l,ImageResource:Aa,SVGResource:pl,VideoResource:vl,ImageBitmapResource:ml},gy=function(t){vr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,i,s){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===_i.UNPACK);var h=i.realWidth,u=i.realHeight;return s.width===h&&s.height===u?o.texSubImage2D(i.target,0,0,0,h,u,i.format,s.type,this.data):(s.width=h,s.height=u,o.texImage2D(i.target,0,s.internalFormat,h,u,0,i.format,s.type,this.data)),!0},e}(Vn),wa=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wr("disposeFramebuffer"),this.multisample=Fr.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new Ye(null,{scaleMode:ki.NEAREST,resolution:1,mipmap:Vi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Ye(new gy(null,{width:this.width,height:this.height}),{scaleMode:ki.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Vi.OFF,format:Ht.DEPTH_COMPONENT,type:ye.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var s=this.colorTextures[i],o=s.resolution;s.setSize(e/o,r/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,r/o)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),gl=function(t){vr(e,t);function e(r){r===void 0&&(r={});var i=this;if(typeof r=="number"){var s=arguments[0],o=arguments[1],h=arguments[2],u=arguments[3];r={width:s,height:o,scaleMode:h,resolution:u}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Fr.NONE,i=t.call(this,null,r)||this,i.mipmap=Vi.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new wa(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Ye),yl=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,i){var s=r.width,o=r.height;if(i){var h=e.width/2/s,u=e.height/2/o,c=e.x/s+h,_=e.y/o+u;i=Pr.add(i,Pr.NW),this.x0=c+h*Pr.uX(i),this.y0=_+u*Pr.uY(i),i=Pr.add(i,2),this.x1=c+h*Pr.uX(i),this.y1=_+u*Pr.uY(i),i=Pr.add(i,2),this.x2=c+h*Pr.uX(i),this.y2=_+u*Pr.uY(i),i=Pr.add(i,2),this.x3=c+h*Pr.uX(i),this.y3=_+u*Pr.uY(i)}else this.x0=e.x/s,this.y0=e.y/o,this.x1=(e.x+e.width)/s,this.y1=e.y/o,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/o,this.x3=e.x/s,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),uc=new yl;function Pa(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Fe=function(t){vr(e,t);function e(r,i,s,o,h,u){var c=t.call(this)||this;if(c.noFrame=!1,i||(c.noFrame=!0,i=new We(0,0,1,1)),r instanceof e&&(r=r.baseTexture),c.baseTexture=r,c._frame=i,c.trim=o,c.valid=!1,c._uvs=uc,c.uvMatrix=null,c.orig=s||i,c._rotate=Number(h||0),h===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=u?new dr(u.x,u.y):new dr(0,0),c._updateID=0,c.textureCacheIds=[],r.valid?c.noFrame?r.valid&&c.onBaseTextureUpdated(r):c.frame=i:r.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&r.on("update",c.onBaseTextureUpdated,c),c}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&ni[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),s=new e(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(s._frame=r),s},e.prototype.updateUvs=function(){this._uvs===uc&&(this._uvs=new yl),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,i,s){i===void 0&&(i={}),s===void 0&&(s=te.STRICT_TEXTURE_CACHE);var o=typeof r=="string",h=null;if(o)h=r;else if(r instanceof Ye){if(!r.cacheId){var u=i&&i.pixiIdPrefix||"pixiid";r.cacheId=u+"-"+bn(),Ye.addToCache(r,r.cacheId)}h=r.cacheId}else{if(!r._pixiId){var u=i&&i.pixiIdPrefix||"pixiid";r._pixiId=u+"_"+bn()}h=r._pixiId}var c=ni[h];if(o&&s&&!c)throw new Error('The cacheId "'+h+'" does not exist in TextureCache.');return!c&&!(r instanceof Ye)?(i.resolution||(i.resolution=ao(r)),c=new e(new Ye(r,i)),c.baseTexture.cacheId=h,Ye.addToCache(c.baseTexture,h),e.addToCache(c,h)):!c&&r instanceof Ye&&(c=new e(r),e.addToCache(c,h)),c},e.fromURL=function(r,i){var s=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),o=e.from(r,Object.assign({resourceOptions:s},i),!1),h=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):h.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(r,i,s,o){return new e(Ye.fromBuffer(r,i,s,o))},e.fromLoader=function(r,i,s,o){var h=new Ye(r,Object.assign({scaleMode:te.SCALE_MODE,resolution:ao(i)},o)),u=h.resource;u instanceof Aa&&(u.url=i);var c=new e(h);return s||(s=i),Ye.addToCache(c.baseTexture,s),e.addToCache(c,s),s!==i&&(Ye.addToCache(c.baseTexture,i),e.addToCache(c,i)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(_){c.baseTexture.once("loaded",function(){return _(c)})})},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),ni[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),ni[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=ni[r];if(i){var s=i.textureCacheIds.indexOf(r);return s>-1&&i.textureCacheIds.splice(s,1),delete ni[r],i}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)ni[r.textureCacheIds[o]]===r&&delete ni[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,s=r.y,o=r.width,h=r.height,u=i+o>this.baseTexture.width,c=s+h>this.baseTexture.height;if(u||c){var _=u&&c?"and":"or",y="X: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.width,w="Y: "+s+" + "+h+" = "+(s+h)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(y+" "+_+" "+w))}this.valid=o&&h&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Ye),Pa(e._EMPTY),Pa(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=te.ADAPTER.createCanvas(16,16),i=r.getContext("2d");r.width=16,r.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(Ye.from(r)),Pa(e._WHITE),Pa(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Ei),Tn=function(t){vr(e,t);function e(r,i){var s=t.call(this,r,i)||this;return s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i,s){s===void 0&&(s=!0);var o=this.baseTexture.resolution,h=Math.round(r*o)/o,u=Math.round(i*o)/o;this.valid=h>0&&u>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=u,s&&this.baseTexture.resize(h,u),this.updateUvs()},e.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},e.create=function(r){for(var i=arguments,s=[],o=1;o<arguments.length;o++)s[o-1]=i[o];return typeof r=="number"&&(ii("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:s[0],scaleMode:s[1],resolution:s[2]}),new e(new gl(r))},e}(Fe),fc=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,i){i===void 0&&(i=Fr.NONE);var s=new gl(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new Tn(s)},t.prototype.getOptimalTexture=function(e,r,i,s){i===void 0&&(i=1),s===void 0&&(s=Fr.NONE);var o;e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=oo(e),r=oo(r),o=((e&65535)<<16|r&65535)>>>0,s>1&&(o+=s*4294967296)):o=s>1?-s:-1,this.texturePool[o]||(this.texturePool[o]=[]);var h=this.texturePool[o].pop();return h||(h=this.createTexture(e,r,s)),h.filterPoolKey=o,h.setResolution(i),h},t.prototype.getFilterTexture=function(e,r,i){var s=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fr.NONE);return s.filterFrame=e.filterFrame,s},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),bl=function(){function t(e,r,i,s,o,h,u){r===void 0&&(r=0),i===void 0&&(i=!1),s===void 0&&(s=ye.FLOAT),this.buffer=e,this.size=r,this.normalized=i,this.type=s,this.stride=o,this.start=h,this.instance=u}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,s,o){return new t(e,r,i,s,o)},t}(),yy=0,Dr=function(){function t(e,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=yy++,this.disposeRunner=new Wr("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===$i.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?$i.ELEMENT_ARRAY_BUFFER:$i.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),by={Float32Array,Uint32Array,Int32Array,Uint8Array};function xy(t,e){for(var r=0,i=0,s={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;for(var h=new ArrayBuffer(r*4),u=null,c=0,o=0;o<t.length;o++){var _=e[o],y=t[o],w=va(y);s[w]||(s[w]=new by[w](h)),u=s[w];for(var b=0;b<y.length;b++){var E=(b/_|0)*i+c,T=b%_;u[E+T]=y[b]}c+=_}return new Float32Array(h)}var cc={5126:4,5123:2,5121:1},Ty=0,Ay={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ps=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Ty++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wr("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,i,s,o,h,u,c){if(i===void 0&&(i=0),s===void 0&&(s=!1),c===void 0&&(c=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Dr||(r instanceof Array&&(r=new Float32Array(r)),r=new Dr(r));var _=e.split("|");if(_.length>1){for(var y=0;y<_.length;y++)this.addAttribute(_[y],r,i,s,o);return this}var w=this.buffers.indexOf(r);return w===-1&&(this.buffers.push(r),w=this.buffers.length-1),this.attributes[e]=new bl(w,i,s,o,h,u,c),this.instanced=this.instanced||c,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof Dr||(e instanceof Array&&(e=new Uint16Array(e)),e=new Dr(e)),e.type=$i.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],i=new Dr,s;for(s in this.attributes){var o=this.attributes[s],h=this.buffers[o.buffer];e.push(h.data),r.push(o.size*cc[o.type]/4),o.buffer=0}for(i.data=xy(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new Dr(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new bl(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=$i.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,i=[],s=[],o=[],h,u=0;u<e.length;u++){h=e[u];for(var c=0;c<h.buffers.length;c++)s[c]=s[c]||0,s[c]+=h.buffers[c].data.length,o[c]=0}for(var u=0;u<h.buffers.length;u++)i[u]=new Ay[va(h.buffers[u].data)](s[u]),r.buffers[u]=new Dr(i[u]);for(var u=0;u<e.length;u++){h=e[u];for(var c=0;c<h.buffers.length;c++)i[c].set(h.buffers[c].data,o[c]),o[c]+=h.buffers[c].data.length}if(r.attributes=h.attributes,h.indexBuffer){r.indexBuffer=r.buffers[h.buffers.indexOf(h.indexBuffer)],r.indexBuffer.type=$i.ELEMENT_ARRAY_BUFFER;for(var _=0,y=0,w=0,b=0,u=0;u<h.buffers.length;u++)if(h.buffers[u]!==h.indexBuffer){b=u;break}for(var u in h.attributes){var E=h.attributes[u];(E.buffer|0)===b&&(y+=E.size*cc[E.type]/4)}for(var u=0;u<e.length;u++){for(var T=e[u].indexBuffer.data,c=0;c<T.length;c++)r.indexBuffer.data[c+w]+=_;_+=e[u].buffers[b].data.length/y,w+=T.length}}return r},t}(),dc=function(t){vr(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(Ps),xl=function(t){vr(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Dr(r.vertices),r.uvBuffer=new Dr(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,i){var s=0,o=0;return this.uvs[0]=s,this.uvs[1]=o,this.uvs[2]=s+i.width/r.width,this.uvs[3]=o,this.uvs[4]=s+i.width/r.width,this.uvs[5]=o+i.height/r.height,this.uvs[6]=s,this.uvs[7]=o+i.height/r.height,s=i.x,o=i.y,this.vertices[0]=s,this.vertices[1]=o,this.vertices[2]=s+i.width,this.vertices[3]=o,this.vertices[4]=s+i.width,this.vertices[5]=o+i.height,this.vertices[6]=s,this.vertices[7]=o+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Ps),wy=0,An=function(){function t(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=wy++,this.static=!!r,this.ubo=!!i,e instanceof Dr?(this.buffer=e,this.buffer.type=$i.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Dr(new Float32Array(1)),this.buffer.type=$i.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,i){if(!this.ubo)this.uniforms[e]=new t(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,i){return new t(e,r,i)},t.uboFrom=function(e,r){return new t(e,r!=null?r:!0,!0)},t}(),_c=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Fr.NONE,this.sourceFrame=new We,this.destinationFrame=new We,this.bindingSourceFrame=new We,this.bindingDestinationFrame=new We,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Ea=[new dr,new dr,new dr,new dr],Tl=new wr,Al=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new fc,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new dc,this.quadUv=new xl,this.tempRect=new We,this.activeState={},this.globalUniforms=new An({outputFrame:new We,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var i,s,o=this.renderer,h=this.defaultFilterStack,u=this.statePool.pop()||new _c,c=this.renderer.renderTexture,_=r[0].resolution,y=r[0].multisample,w=r[0].padding,b=r[0].autoFit,E=(i=r[0].legacy)!==null&&i!==void 0?i:!0,T=1;T<r.length;T++){var P=r[T];_=Math.min(_,P.resolution),y=Math.min(y,P.multisample),w=this.useMaxPadding?Math.max(w,P.padding):w+P.padding,b=b&&P.autoFit,E=E||((s=P.legacy)!==null&&s!==void 0?s:!0)}h.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),h.push(u),u.resolution=_,u.multisample=y,u.legacy=E,u.target=e,u.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),u.sourceFrame.pad(w);var O=this.tempRect.copyFrom(c.sourceFrame);o.projection.transform&&this.transformAABB(Tl.copyFrom(o.projection.transform).invert(),O),b?(u.sourceFrame.fit(O),(u.sourceFrame.width<=0||u.sourceFrame.height<=0)&&(u.sourceFrame.width=0,u.sourceFrame.height=0)):u.sourceFrame.intersects(O)||(u.sourceFrame.width=0,u.sourceFrame.height=0),this.roundFrame(u.sourceFrame,c.current?c.current.resolution:o.resolution,c.sourceFrame,c.destinationFrame,o.projection.transform),u.renderTexture=this.getOptimalFilterTexture(u.sourceFrame.width,u.sourceFrame.height,_,y),u.filters=r,u.destinationFrame.width=u.renderTexture.width,u.destinationFrame.height=u.renderTexture.height;var H=this.tempRect;H.x=0,H.y=0,H.width=u.sourceFrame.width,H.height=u.sourceFrame.height,u.renderTexture.filterFrame=u.sourceFrame,u.bindingSourceFrame.copyFrom(c.sourceFrame),u.bindingDestinationFrame.copyFrom(c.destinationFrame),u.transform=o.projection.transform,o.projection.transform=null,c.bind(u.renderTexture,u.sourceFrame,H),o.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;var s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;var o=s.inputSize,h=s.inputPixel,u=s.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*r.resolution),h[1]=Math.round(o[1]*r.resolution),h[2]=1/h[0],h[3]=1/h[1],u[0]=.5*h[2],u[1]=.5*h[3],u[2]=r.sourceFrame.width*o[2]-.5*h[2],u[3]=r.sourceFrame.height*o[3]-.5*h[3],r.legacy){var c=s.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var _=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,_.renderTexture,on.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var y=r.renderTexture,w=this.getOptimalFilterTexture(y.width,y.height,r.resolution);w.filterFrame=y.filterFrame;var b=0;for(b=0;b<i.length-1;++b){b===1&&r.multisample>1&&(w=this.getOptimalFilterTexture(y.width,y.height,r.resolution),w.filterFrame=y.filterFrame),i[b].apply(this,y,w,on.CLEAR,r);var E=y;y=w,w=E}i[b].apply(this,y,_.renderTexture,on.BLEND,r),b>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(y),this.returnFilterTexture(w)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=on.CLEAR);var i=this.renderer,s=i.renderTexture,o=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var h=this.tempRect;h.x=0,h.y=0,h.width=e.filterFrame.width,h.height=e.filterFrame.height,s.bind(e,e.filterFrame,h)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var u=o.stateId&1||this.forceClear;(r===on.CLEAR||r===on.BLIT&&u)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,i,s){var o=this.renderer;o.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(di.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(di.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var i=this.activeState,s=i.sourceFrame,o=i.destinationFrame,h=r._texture.orig,u=e.set(o.width,0,0,o.height,s.x,s.y),c=r.worldTransform.copyTo(wr.TEMP_MATRIX);return c.invert(),u.prepend(c),u.scale(1/h.width,1/h.height),u.translate(r.anchor.x,r.anchor.y),u},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,i,s){return i===void 0&&(i=1),s===void 0&&(s=Fr.NONE),this.texturePool.getOptimalTexture(e,r,i,s)},t.prototype.getFilterTexture=function(e,r,i){if(typeof e=="number"){var s=e;e=r,r=s}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fr.NONE);return o.filterFrame=e.filterFrame,o},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var i=Ea[0],s=Ea[1],o=Ea[2],h=Ea[3];i.set(r.left,r.top),s.set(r.left,r.bottom),o.set(r.right,r.top),h.set(r.right,r.bottom),e.apply(i,i),e.apply(s,s),e.apply(o,o),e.apply(h,h);var u=Math.min(i.x,s.x,o.x,h.x),c=Math.min(i.y,s.y,o.y,h.y),_=Math.max(i.x,s.x,o.x,h.x),y=Math.max(i.y,s.y,o.y,h.y);r.x=u,r.y=c,r.width=_-u,r.height=y-c},t.prototype.roundFrame=function(e,r,i,s,o){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(o){var h=o.a,u=o.b,c=o.c,_=o.d;if((Math.abs(u)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(_)>1e-4))return}o=o?Tl.copyFrom(o):Tl.identity(),o.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(o,e),e.ceil(r),this.transformAABB(o.invert(),e)}},t}(),_o=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),wl=function(){function t(e){this.renderer=e,this.emptyRenderer=new _o(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var i=this.renderer.texture.boundTextures,s=r-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)},t.prototype.boundArray=function(e,r,i,s){for(var o=e.elements,h=e.ids,u=e.count,c=0,_=0;_<u;_++){var y=o[_],w=y._batchLocation;if(w>=0&&w<s&&r[w]===y){h[_]=w;continue}for(;c<s;){var b=r[c];if(b&&b._batchEnabled===i&&b._batchLocation===c){c++;continue}h[_]=c,y._batchLocation=c,r[c]=y;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),pc=0,Pl=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=pc++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=pc++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var i;if(te.PREFER_ENV>=Bi.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),vc=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Fr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),Py=new We,El=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new wa(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new We,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;te.PREFER_ENV===Bi.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=function(s){return r.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,i){i===void 0&&(i=0);var s=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=i),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var h=0;h<e.colorTextures.length;h++){var u=e.colorTextures[h];this.renderer.texture.unbind(u.parentTextureArray||u)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var c=r.width>>i,_=r.height>>i,y=c/r.width;this.setViewport(r.x*y,r.y*y,c,_)}else{var c=e.width>>i,_=e.height>>i;this.setViewport(0,0,c,_)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,i,s){var o=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),s=Math.round(s),(o.width!==i||o.height!==s||o.x!==e||o.y!==r)&&(o.x=e,o.y=r,o.width=i,o.height=s,this.gl.viewport(e,r,i,s))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,i,s,o){o===void 0&&(o=no.COLOR|no.DEPTH);var h=this.gl;h.clearColor(e,r,i,s),h.clear(o)},t.prototype.initFramebuffer=function(e){var r=this.gl,i=new vc(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(e){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var s=e.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1));for(var h=0;h<o;h++){var u=s[h],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var i=this.gl,s=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,h=o.length;i.drawBuffers||(h=Math.min(h,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?(s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));for(var u=[],c=0;c<h;c++){var _=o[c],y=_.parentTextureArray||_;this.renderer.texture.bind(y,0),!(c===0&&s.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,_.target,y._glTextures[this.CONTEXT_UID].texture,r),u.push(i.COLOR_ATTACHMENT0+c))}if(u.length>1&&i.drawBuffers(u),e.depthTexture){var w=this.writeDepthTexture;if(w){var b=e.depthTexture;this.renderer.texture.bind(b,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,b._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil)):s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,i=Fr.NONE;if(e<=1||r===null)return i;for(var s=0;s<r.length;s++)if(r[s]<=e){i=r[s];break}return i===1&&(i=Fr.NONE),i},t.prototype.blit=function(e,r,i){var s=this,o=s.current,h=s.renderer,u=s.gl,c=s.CONTEXT_UID;if(h.context.webGLVersion===2&&o){var _=o.glFramebuffers[c];if(_){if(!e){if(!_.msaaBuffer)return;var y=o.colorTextures[0];if(!y)return;_.blitFramebuffer||(_.blitFramebuffer=new wa(o.width,o.height),_.blitFramebuffer.addColorTexture(0,y)),e=_.blitFramebuffer,e.colorTextures[0]!==y&&(e.colorTextures[0]=y,e.dirtyId++,e.dirtyFormat++),(e.width!==o.width||e.height!==o.height)&&(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}r||(r=Py,r.width=o.width,r.height=o.height),i||(i=r);var w=r.width===i.width&&r.height===i.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,_.framebuffer),u.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,u.COLOR_BUFFER_BIT,w?u.NEAREST:u.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var i=e.width,s=e.height,o=this.gl,h=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h),r.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,r.multisample,o.DEPTH24_STENCIL8,i,s):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i,s),r.stencil=h,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,h)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new We},t.prototype.destroy=function(){this.renderer=null},t}(),Il={5126:4,5123:2,5121:1},Cl=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;te.PREFER_ENV===Bi.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(o){return i.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return i.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(o,h){return s.vertexAttribDivisorANGLE(o,h)},e.drawElementsInstanced=function(o,h,u,c,_){return s.drawElementsInstancedANGLE(o,h,u,c,_)},e.drawArraysInstanced=function(o,h,u,c){return s.drawArraysInstancedANGLE(o,h,u,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var i=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},o=!0);var h=s[r.program.id]||this.initGeometryVao(e,r,o);this._activeGeometry=e,this._activeVao!==h&&(this._activeVao=h,this.hasVao?i.bindVertexArray(h):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,i=0;i<e.buffers.length;i++){var s=e.buffers[i];r.update(s)}},t.prototype.checkCompatibility=function(e,r){var i=e.attributes,s=r.attributeData;for(var o in s)if(!i[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},t.prototype.getSignature=function(e,r){var i=e.attributes,s=r.attributeData,o=["g",e.id];for(var h in i)s[h]&&o.push(h,s[h].location);return o.join("-")},t.prototype.initGeometryVao=function(e,r,i){i===void 0&&(i=!0);var s=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,u=r.program;u.glPrograms[o]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,u);var c=this.getSignature(e,u),_=e.glVertexArrayObjects[this.CONTEXT_UID],y=_[c];if(y)return _[u.id]=y,y;var w=e.buffers,b=e.attributes,E={},T={};for(var P in w)E[P]=0,T[P]=0;for(var P in b)!b[P].size&&u.attributeData[P]?b[P].size=u.attributeData[P].size:b[P].size||console.warn("PIXI Geometry attribute '"+P+"' size cannot be determined (likely the bound shader does not have the attribute)"),E[b[P].buffer]+=b[P].size*Il[b[P].type];for(var P in b){var O=b[P],H=O.size;O.stride===void 0&&(E[O.buffer]===H*Il[O.type]?O.stride=0:O.stride=E[O.buffer]),O.start===void 0&&(O.start=T[O.buffer],T[O.buffer]+=H*Il[O.type])}y=s.createVertexArray(),s.bindVertexArray(y);for(var Y=0;Y<w.length;Y++){var J=w[Y];h.bind(J),i&&J._glBuffers[o].refCount++}return this.activateVao(e,u),this._activeVao=y,_[u.id]=y,_[c]=y,y},t.prototype.disposeGeometry=function(e,r){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var s=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,h=e.buffers,u=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!s){if(u)for(var c=0;c<h.length;c++){var _=h[c]._glBuffers[this.CONTEXT_UID];_&&(_.refCount--,_.refCount===0&&!r&&u.dispose(h[c],r))}if(!r){for(var y in s)if(y[0]==="g"){var w=s[y];this._activeVao===w&&this.unbind(),o.deleteVertexArray(w)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)},t.prototype.activateVao=function(e,r){var i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,h=e.buffers,u=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var c=null;for(var _ in u){var y=u[_],w=h[y.buffer],b=w._glBuffers[s];if(r.attributeData[_]){c!==b&&(o.bind(w),c=b);var E=r.attributeData[_].location;if(i.enableVertexAttribArray(E),i.vertexAttribPointer(E,y.size,y.type||i.FLOAT,y.normalized,y.stride,y.start),y.instance)if(this.hasInstance)i.vertexAttribDivisor(E,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,i,s){var o=this.gl,h=this._activeGeometry;if(h.indexBuffer){var u=h.indexBuffer.data.BYTES_PER_ELEMENT,c=u===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(e,r||h.indexBuffer.data.length,c,(i||0)*u,s||1):o.drawElements(e,r||h.indexBuffer.data.length,c,(i||0)*u):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(e,i,r||h.getSize(),s||1):o.drawArrays(e,i,r||h.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),mc=function(){function t(e){e===void 0&&(e=null),this.type=Gr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=te.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Gr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function gc(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function yc(t,e){var r=t.getShaderSource(e).split(`
`).map(function(_,y){return y+": "+_}),i=t.getShaderInfoLog(e),s=i.split(`
`),o={},h=s.map(function(_){return parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(_){return _&&!o[_]?(o[_]=!0,!0):!1}),u=[""];h.forEach(function(_){r[_-1]="%c"+r[_-1]+"%c",u.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=r.join(`
`);u[0]=c,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,u),console.groupEnd()}function Ey(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||yc(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||yc(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function $l(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function bc(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return $l(2*e);case"bvec3":return $l(3*e);case"bvec4":return $l(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xc={},po=xc;function Tc(){if(po===xc||po&&po.isContextLost()){var t=te.ADAPTER.createCanvas(),e=void 0;te.PREFER_ENV>=Bi.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),po=e}return po}var Ia;function Iy(){if(!Ia){Ia=Ci.MEDIUM;var t=Tc();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Ia=e.precision?Ci.HIGH:Ci.MEDIUM}}return Ia}function Ac(t,e,r){if(t.substring(0,9)!=="precision"){var i=e;return e===Ci.HIGH&&r!==Ci.HIGH&&(i=Ci.MEDIUM),"precision "+i+` float;
`+t}else if(r!==Ci.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var Cy={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function wc(t){return Cy[t]}var Ca=null,Pc={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ec(t,e){if(!Ca){var r=Object.keys(Pc);Ca={};for(var i=0;i<r.length;++i){var s=r[i];Ca[t[s]]=Pc[s]}}return Ca[e]}var Hn=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],$y={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ry={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Sy(t,e){var r,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var s in t.uniforms){var o=e[s];if(!o){!((r=t.uniforms[s])===null||r===void 0)&&r.group&&(t.uniforms[s].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+s+", '"+s+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+s+`, syncData);
                    `));continue}for(var h=t.uniforms[s],u=!1,c=0;c<Hn.length;c++)if(Hn[c].test(o,h)){i.push(Hn[c].code(s,h)),u=!0;break}if(!u){var _=o.size===1?$y:Ry,y=_[o.type].replace("location",'ud["'+s+'"].location');i.push(`
            cu = ud["`+s+`"];
            cv = cu.value;
            v = uv["`+s+`"];
            `+y+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var Ny=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ly(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Ic(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Ny.replace(/%forloop%/gi,Ly(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var vo;function Oy(){if(typeof vo=="boolean")return vo;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");vo=t({a:"b"},"a","b")===!0}catch(e){vo=!1}return vo}var Fy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,My=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Uy=0,$a={},Es=function(){function t(e,r,i){i===void 0&&(i="pixi-shader"),this.id=Uy++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),$a[i]?($a[i]++,i+="-"+$a[i]):$a[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Ac(this.vertexSrc,te.PRECISION_VERTEX,Ci.HIGH),this.fragmentSrc=Ac(this.fragmentSrc,te.PRECISION_FRAGMENT,Iy())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return My},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Fy},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var s=e+r,o=rl[s];return o||(rl[s]=o=new t(e,r,i)),o},t}(),an=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof An?this.uniformGroup=r:this.uniformGroup=new An(r):this.uniformGroup=new An({})}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var i in r.uniforms){var s=r.uniforms[i];if(s.group&&this.checkUniformExists(e,s))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var s=Es.from(e,r);return new t(s,i)},t}(),Rl=0,Sl=1,Nl=2,Ll=3,Ol=4,Fl=5,wn=function(){function t(){this.data=0,this.blendMode=Te.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<Rl)},set:function(e){!!(this.data&1<<Rl)!==e&&(this.data^=1<<Rl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<Sl)},set:function(e){!!(this.data&1<<Sl)!==e&&(this.data^=1<<Sl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<Nl)},set:function(e){!!(this.data&1<<Nl)!==e&&(this.data^=1<<Nl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<Ll)},set:function(e){!!(this.data&1<<Ll)!==e&&(this.data^=1<<Ll)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<Fl)},set:function(e){!!(this.data&1<<Fl)!==e&&(this.data^=1<<Fl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Ol)},set:function(e){!!(this.data&1<<Ol)!==e&&(this.data^=1<<Ol)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Te.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Gy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Dy=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,hn=function(t){vr(e,t);function e(r,i,s){var o=this,h=Es.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return o=t.call(this,h,s)||this,o.padding=0,o.resolution=te.FILTER_RESOLUTION,o.multisample=te.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new wn,o}return e.prototype.apply=function(r,i,s,o,h){r.applyFilter(this,i,s,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Dy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return Gy},enumerable:!1,configurable:!0}),e}(an),By=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,ky=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Cc=new wr,Ra=function(){function t(e,r){this._texture=e,this.mapCoord=new wr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r=="undefined"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var i=this.mapCoord,s=0;s<e.length;s+=2){var o=e[s],h=e[s+1];r[s]=o*i.a+h*i.c+i.tx,r[s+1]=o*i.b+h*i.d+i.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var s=r.orig,o=r.trim;o&&(Cc.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Cc));var h=r.baseTexture,u=this.uClampFrame,c=this.clampMargin/h.resolution,_=this.clampOffset;return u[0]=(r._frame.x+c+_)/h.width,u[1]=(r._frame.y+c+_)/h.height,u[2]=(r._frame.x+r._frame.width-c+_)/h.width,u[3]=(r._frame.y+r._frame.height-c+_)/h.height,this.uClampOffset[0]=_/h.realWidth,this.uClampOffset[1]=_/h.realHeight,this.isSimple=r._frame.width===h.width&&r._frame.height===h.height&&r.rotate===0,!0},t}(),$c=function(t){vr(e,t);function e(r,i,s){var o=this,h=null;return typeof r!="string"&&i===void 0&&s===void 0&&(h=r,r=void 0,i=void 0,s=void 0),o=t.call(this,r||By,i||ky,s)||this,o.maskSprite=h,o.maskMatrix=new wr,o}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,i,s,o){var h=this._maskSprite,u=h._texture;u.valid&&(u.uvMatrix||(u.uvMatrix=new Ra(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,h).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=h.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,r.applyFilter(this,i,s,o))},e}(hn),Ml=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var i=r;if(!i.isMaskData){var s=this.maskDataPool.pop()||new mc;s.pooled=!0,s.maskObject=r,i=s}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(o),i._colorMask=o?o._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Gr.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Gr.SCISSOR:this.renderer.scissor.push(i);break;case Gr.STENCIL:this.renderer.stencil.push(i);break;case Gr.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Gr.COLOR:this.pushColorMask(i);break}i.type===Gr.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Gr.SCISSOR:this.renderer.scissor.pop(r);break;case Gr.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Gr.SPRITE:this.popSpriteMask(r);break;case Gr.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===Gr.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=Gr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Gr.SCISSOR:e.type=Gr.STENCIL:e.type=Gr.COLOR},t.prototype.pushSpriteMask=function(e){var r,i,s=e.maskObject,o=e._target,h=e._filters;h||(h=this.alphaMaskPool[this.alphaMaskIndex],h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new $c]));var u=this.renderer,c=u.renderTexture,_,y;if(c.current){var w=c.current;_=e.resolution||w.resolution,y=(r=e.multisample)!==null&&r!==void 0?r:w.multisample}else _=e.resolution||u.resolution,y=(i=e.multisample)!==null&&i!==void 0?i:u.multisample;h[0].resolution=_,h[0].multisample=y,h[0].maskSprite=s;var b=o.filterArea;o.filterArea=s.getBounds(!0),u.filter.push(o,h),o.filterArea=b,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(e){var r=e._colorMask,i=e._colorMask=r&e.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.popColorMask=function(e){var r=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),Rc=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==i&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Sc=new wr,Nc=[],Ul=function(t){vr(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=te.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var i;if(!r._scissorRectLocal){var s=r._scissorRect,o=r.maskObject,h=this.renderer,u=h.renderTexture,c=o.getBounds(!0,(i=Nc.pop())!==null&&i!==void 0?i:new We);this.roundFrameToPixels(c,u.current?u.current.resolution:h.resolution,u.sourceFrame,u.destinationFrame,h.projection.transform),s&&c.fit(s),r._scissorRectLocal=c}},e.isMatrixRotated=function(r){if(!r)return!1;var i=r.a,s=r.b,o=r.c,h=r.d;return(Math.abs(s)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(h)>1e-4)},e.prototype.testScissor=function(r){var i=r.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var s=r._scissorRectLocal;return s.width>0&&s.height>0},e.prototype.roundFrameToPixels=function(r,i,s,o,h){e.isMatrixRotated(h)||(h=h?Sc.copyFrom(h):Sc.identity(),h.translate(-s.x,-s.y).scale(o.width/s.width,o.height/s.height).translate(o.x,o.y),this.renderer.filter.transformAABB(h,r),r.fit(o),r.x=Math.round(r.x*i),r.y=Math.round(r.y*i),r.width=Math.round(r.width*i),r.height=Math.round(r.height*i))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var i=this.renderer.gl;r._scissorRect||i.enable(i.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;r&&Nc.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=r.y:i=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,i,r.width,r.height)},e}(Rc),Gl=function(t){vr(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=te.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var i=r.maskObject,s=this.renderer.gl,o=r._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),r._stencilCounter++;var h=r._colorMask;h!==0&&(r._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,o,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,h!==0&&(r._colorMask=h,s.colorMask((h&1)!==0,(h&2)!==0,(h&4)!==0,(h&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=s?s._colorMask:15;o!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,o!==0&&(s._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(Rc),Dl=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new wr,this.transform=null}return t.prototype.update=function(e,r,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,i,s){var o=this.projectionMatrix,h=s?-1:1;o.identity(),o.a=1/r.width*2,o.d=h*(1/r.height*2),o.tx=-1-r.x*o.a,o.ty=-h-r.y*o.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),zn=new We,mo=new We,Bl=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new We,this.destinationFrame=new We,this.viewportFrame=new We}return t.prototype.bind=function(e,r,i){e===void 0&&(e=null);var s=this.renderer;this.current=e;var o,h,u;e?(o=e.baseTexture,u=o.resolution,r||(zn.width=e.frame.width,zn.height=e.frame.height,r=zn),i||(mo.x=e.frame.x,mo.y=e.frame.y,mo.width=r.width,mo.height=r.height,i=mo),h=o.framebuffer):(u=s.resolution,r||(zn.width=s.screen.width,zn.height=s.screen.height,r=zn),i||(i=zn,i.width=r.width,i.height=r.height));var c=this.viewportFrame;c.x=i.x*u,c.y=i.y*u,c.width=i.width*u,c.height=i.height*u,e||(c.y=s.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(h,c),this.renderer.projection.update(i,r,u,!h),e?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=i.width!==s.width||i.height!==s.height;if(o){var h=this.viewportFrame,u=h.x,c=h.y,_=h.width,y=h.height;u=Math.round(u),c=Math.round(c),_=Math.round(_),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,c,_,y)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),o&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Xy(t,e,r,i,s){r.buffer.update(s)}var Vy={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Lc={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Oc(t){for(var e=t.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),r=0,i=0,s=0,o=0;o<e.length;o++){var h=e[o];if(r=Lc[h.data.type],h.data.size>1&&(r=Math.max(r,16)*h.data.size),h.dataLen=r,i%r!==0&&i<16){var u=i%r%16;i+=u,s+=u}i+r>16?(s=Math.ceil(s/16)*16,h.offset=s,s+=r,i=r):(h.offset=s,i+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function Fc(t,e){var r=[];for(var i in t)e[i]&&r.push(e[i]);return r.sort(function(s,o){return s.index-o.index}),r}function Mc(t,e){if(!t.autoManage)return{size:0,syncFunc:Xy};for(var r=Fc(t.uniforms,e),i=Oc(r),s=i.uboElements,o=i.size,h=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],u=0;u<s.length;u++){for(var c=s[u],_=t.uniforms[c.data.name],y=c.data.name,w=!1,b=0;b<Hn.length;b++){var E=Hn[b];if(E.codeUbo&&E.test(c.data,_)){h.push("offset = "+c.offset/4+";",Hn[b].codeUbo(c.data.name,_)),w=!0;break}}if(!w)if(c.data.size>1){var T=wc(c.data.type),P=Math.max(Lc[c.data.type]/16,1),O=T/P,H=(4-O%4)%4;h.push(`
                cv = ud.`+y+`.value;
                v = uv.`+y+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*P+`; i++)
                {
                    for(var j = 0; j < `+O+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+H+`;
                }

                `)}else{var Y=Vy[c.data.type];h.push(`
                cv = ud.`+y+`.value;
                v = uv.`+y+`;
                offset = `+c.offset/4+`;
                `+Y+`;
                `)}}return h.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",h.join(`
`))}}var Hy=function(){function t(){}return t}(),Uc=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function zy(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<i;s++){var o=e.getActiveAttrib(t,s);if(o.name.indexOf("gl_")!==0){var h=Ec(e,o.type),u={type:h,name:o.name,size:wc(h),location:e.getAttribLocation(t,o.name)};r[o.name]=u}}return r}function jy(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<i;s++){var o=e.getActiveUniform(t,s),h=o.name.replace(/\[.*?\]$/,""),u=!!o.name.match(/\[.*?\]$/),c=Ec(e,o.type);r[h]={name:h,index:s,type:c,size:o.size,isArray:u,value:bc(c,o.size)}}return r}function Gc(t,e){var r=gc(t,t.VERTEX_SHADER,e.vertexSrc),i=gc(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||Ey(t,s,r,i),e.attributeData=zy(s,t),e.uniformData=jy(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(y,w){return y>w?1:-1});for(var h=0;h<o.length;h++)e.attributeData[o[h]].location=h,t.bindAttribLocation(s,h,o[h]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(i);var u={};for(var h in e.uniformData){var c=e.uniformData[h];u[h]={location:t.getUniformLocation(s,h),value:bc(c.type,c.size)}}var _=new Uc(s,u);return _}var Wy=0,Sa={textureCount:0,uboCount:0},kl=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Wy++}return t.prototype.systemCheck=function(){if(!Oy())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),r||(Sa.textureCount=0,Sa.uboCount=0,this.syncUniformGroup(e.uniformGroup,Sa)),s},t.prototype.setUniforms=function(e){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))},t.prototype.syncUniforms=function(e,r,i){var s=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);s(r.uniformData,e.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Sy(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,Sa,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,i){var s=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var h=this.getSignature(e,this.shader.program.uniformData,"ubo"),u=this._uboCache[h];if(u||(u=this._uboCache[h]=Mc(e,this.shader.program.uniformData)),e.autoManage){var c=new Float32Array(u.size/4);e.buffer.update(c)}return r.uniformGroups[e.id]=u.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,i){var s=e.uniforms,o=[i+"-"];for(var h in s)o.push(h),r[h]&&o.push(r[h].type);return o.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,i=e.program,s=Gc(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function Yy(t,e){return e===void 0&&(e=[]),e[Te.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.ADD]=[t.ONE,t.ONE],e[Te.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.NONE]=[0,0],e[Te.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Te.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Te.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Te.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Te.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Te.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Te.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Te.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Te.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Te.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Te.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var qy=0,Zy=1,Jy=2,Qy=3,Ky=4,tb=5,Xl=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Te.NONE,this._blendEq=!1,this.map=[],this.map[qy]=this.setBlend,this.map[Zy]=this.setOffset,this.map[Jy]=this.setCullFace,this.map[Qy]=this.setDepthTest,this.map[Ky]=this.setFrontFace,this.map[tb]=this.setDepthMask,this.checks=[],this.defaultState=new wn,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=Yy(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,i=0;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Vl=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=te.GC_MAX_IDLE,this.checkCountMax=te.GC_MAX_CHECK_COUNT,this.mode=te.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==_a.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,i=!1,s=0;s<r.length;s++){var o=r[s];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),r[s]=null,i=!0)}if(i){for(var h=0,s=0;s<r.length;s++)r[s]!==null&&(r[h++]=r[s]);r.length=h}},t.prototype.unload=function(e){var r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},t.prototype.destroy=function(){this.renderer=null},t}();function eb(t){var e,r,i,s,o,h,u,c,_,y,w,b,E,T,P,O,H,Y,J,it,st,K,At;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?At=(e={},e[ye.UNSIGNED_BYTE]=(r={},r[Ht.RGBA]=t.RGBA8,r[Ht.RGB]=t.RGB8,r[Ht.RG]=t.RG8,r[Ht.RED]=t.R8,r[Ht.RGBA_INTEGER]=t.RGBA8UI,r[Ht.RGB_INTEGER]=t.RGB8UI,r[Ht.RG_INTEGER]=t.RG8UI,r[Ht.RED_INTEGER]=t.R8UI,r[Ht.ALPHA]=t.ALPHA,r[Ht.LUMINANCE]=t.LUMINANCE,r[Ht.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[ye.BYTE]=(i={},i[Ht.RGBA]=t.RGBA8_SNORM,i[Ht.RGB]=t.RGB8_SNORM,i[Ht.RG]=t.RG8_SNORM,i[Ht.RED]=t.R8_SNORM,i[Ht.RGBA_INTEGER]=t.RGBA8I,i[Ht.RGB_INTEGER]=t.RGB8I,i[Ht.RG_INTEGER]=t.RG8I,i[Ht.RED_INTEGER]=t.R8I,i),e[ye.UNSIGNED_SHORT]=(s={},s[Ht.RGBA_INTEGER]=t.RGBA16UI,s[Ht.RGB_INTEGER]=t.RGB16UI,s[Ht.RG_INTEGER]=t.RG16UI,s[Ht.RED_INTEGER]=t.R16UI,s[Ht.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,s),e[ye.SHORT]=(o={},o[Ht.RGBA_INTEGER]=t.RGBA16I,o[Ht.RGB_INTEGER]=t.RGB16I,o[Ht.RG_INTEGER]=t.RG16I,o[Ht.RED_INTEGER]=t.R16I,o),e[ye.UNSIGNED_INT]=(h={},h[Ht.RGBA_INTEGER]=t.RGBA32UI,h[Ht.RGB_INTEGER]=t.RGB32UI,h[Ht.RG_INTEGER]=t.RG32UI,h[Ht.RED_INTEGER]=t.R32UI,h[Ht.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,h),e[ye.INT]=(u={},u[Ht.RGBA_INTEGER]=t.RGBA32I,u[Ht.RGB_INTEGER]=t.RGB32I,u[Ht.RG_INTEGER]=t.RG32I,u[Ht.RED_INTEGER]=t.R32I,u),e[ye.FLOAT]=(c={},c[Ht.RGBA]=t.RGBA32F,c[Ht.RGB]=t.RGB32F,c[Ht.RG]=t.RG32F,c[Ht.RED]=t.R32F,c[Ht.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[ye.HALF_FLOAT]=(_={},_[Ht.RGBA]=t.RGBA16F,_[Ht.RGB]=t.RGB16F,_[Ht.RG]=t.RG16F,_[Ht.RED]=t.R16F,_),e[ye.UNSIGNED_SHORT_5_6_5]=(y={},y[Ht.RGB]=t.RGB565,y),e[ye.UNSIGNED_SHORT_4_4_4_4]=(w={},w[Ht.RGBA]=t.RGBA4,w),e[ye.UNSIGNED_SHORT_5_5_5_1]=(b={},b[Ht.RGBA]=t.RGB5_A1,b),e[ye.UNSIGNED_INT_2_10_10_10_REV]=(E={},E[Ht.RGBA]=t.RGB10_A2,E[Ht.RGBA_INTEGER]=t.RGB10_A2UI,E),e[ye.UNSIGNED_INT_10F_11F_11F_REV]=(T={},T[Ht.RGB]=t.R11F_G11F_B10F,T),e[ye.UNSIGNED_INT_5_9_9_9_REV]=(P={},P[Ht.RGB]=t.RGB9_E5,P),e[ye.UNSIGNED_INT_24_8]=(O={},O[Ht.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,O),e[ye.FLOAT_32_UNSIGNED_INT_24_8_REV]=(H={},H[Ht.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,H),e):At=(Y={},Y[ye.UNSIGNED_BYTE]=(J={},J[Ht.RGBA]=t.RGBA,J[Ht.RGB]=t.RGB,J[Ht.ALPHA]=t.ALPHA,J[Ht.LUMINANCE]=t.LUMINANCE,J[Ht.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,J),Y[ye.UNSIGNED_SHORT_5_6_5]=(it={},it[Ht.RGB]=t.RGB,it),Y[ye.UNSIGNED_SHORT_4_4_4_4]=(st={},st[Ht.RGBA]=t.RGBA,st),Y[ye.UNSIGNED_SHORT_5_5_5_1]=(K={},K[Ht.RGBA]=t.RGBA,K),Y),At}var Na=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ye.UNSIGNED_BYTE,this.internalFormat=Ht.RGBA,this.samplerType=0}return t}(),Hl=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ye,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=eb(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var s=new Na(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Na(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,i=r.gl,s=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<s.length;o++)s[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<s.length;o++)s[o]===e&&(this.currentLocation!==o&&(i.activeTexture(i.TEXTURE0+o),this.currentLocation=o),i.bindTexture(e.target,this.emptyTextures[e.target].texture),s[o]=null)},t.prototype.ensureSamplerType=function(e){var r=this,i=r.boundTextures,s=r.hasIntegerTextures,o=r.CONTEXT_UID;if(s)for(var h=e-1;h>=0;--h){var u=i[h];if(u){var c=u._glTextures[o];c.samplerType!==so.FLOAT&&this.renderer.texture.unbind(u)}}},t.prototype.initTexture=function(e){var r=new Na(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var i,s;r.internalFormat=(s=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&s!==void 0?s:e.format,this.webGLVersion===2&&e.type===ye.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(i,e,r))r.samplerType!==so.FLOAT&&(this.hasIntegerTextures=!0);else{var s=e.realWidth,o=e.realHeight,h=i.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,h.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var s=this.managedTextures.indexOf(e);s!==-1&&Mn(this.managedTextures,s,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Vi.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Xi.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var i=this.gl;if(r.mipmap&&e.mipmap!==Vi.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===ki.LINEAR){var o=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),Dc={__proto__:null,FilterSystem:Al,BatchSystem:wl,ContextSystem:Pl,FramebufferSystem:El,GeometrySystem:Cl,MaskSystem:Ml,ScissorSystem:Ul,StencilSystem:Gl,ProjectionSystem:Dl,RenderTextureSystem:Bl,ShaderSystem:kl,StateSystem:Xl,TextureGCSystem:Vl,TextureSystem:Hl},zl=new wr,Bc=function(t){vr(e,t);function e(r,i){r===void 0&&(r=ws.UNKNOWN);var s=t.call(this)||this;return i=Object.assign({},te.RENDER_OPTIONS,i),s.options=i,s.type=r,s.screen=new We(0,0,i.width,i.height),s.view=i.view||te.ADAPTER.createCanvas(),s.resolution=i.resolution||te.RESOLUTION,s.useContextAlpha=i.useContextAlpha,s.autoDensity=!!i.autoDensity,s.preserveDrawingBuffer=i.preserveDrawingBuffer,s.clearBeforeRender=i.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=i.backgroundColor||s._backgroundColor,s.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(ii("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=i.transparent,s.backgroundAlpha=i.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return e.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var s=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=s,this.screen.height=o,this.autoDensity&&(this.view.style.width=s+"px",this.view.style.height=o+"px"),this.emit("resize",s,o)},e.prototype.generateTexture=function(r,i,s,o){i===void 0&&(i={}),typeof i=="number"&&(ii("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:s,region:o});var h=i.region,u=vy(i,["region"]);o=h||r.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var c=Tn.create(fl({width:o.width,height:o.height},u));return zl.tx=-o.x,zl.ty=-o.y,this.render(r,{renderTexture:c,clear:!1,transform:zl,skipUpdateTransform:!!r.parent}),c},e.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var s=this;s.plugins=null,s.type=ws.UNKNOWN,s.view=null,s.screen=null,s._tempDisplayObjectParent=null,s.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=qh(r),Fn(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(Ei),rb=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),ib=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,i=r.gl,s=r.CONTEXT_UID,o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBuffer(e.type,o.buffer)},t.prototype.bindBufferBase=function(e,r){var i=this,s=i.gl,o=i.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var h=e._glBuffers[o]||this.createGLBuffer(e);this.boundBufferBases[r]=e,s.bindBufferBase(s.UNIFORM_BUFFER,r,h.buffer)}},t.prototype.bindBufferRange=function(e,r,i){var s=this,o=s.gl,h=s.CONTEXT_UID;i=i||0;var u=e._glBuffers[h]||this.createGLBuffer(e);o.bindBufferRange(o.UNIFORM_BUFFER,r||0,u.buffer,i*256,256)},t.prototype.update=function(e){var r=this,i=r.gl,s=r.CONTEXT_UID,o=e._glBuffers[s];if(e._updateID!==o.updateID)if(o.updateID=e._updateID,i.bindBuffer(e.type,o.buffer),o.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var h=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;o.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,h)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(r||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)},t.prototype.createGLBuffer=function(e){var r=this,i=r.CONTEXT_UID,s=r.gl;return e._glBuffers[i]=new rb(s.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},t}(),jl=function(t){vr(e,t);function e(r){var i=t.call(this,ws.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Wr("destroy"),contextChange:new Wr("contextChange"),reset:new Wr("reset"),update:new Wr("update"),postrender:new Wr("postrender"),prerender:new Wr("prerender"),resize:new Wr("resize")},i.runners.contextChange.add(i),i.globalUniforms=new An({projectionMatrix:new wr},!0),i.addSystem(Ml,"mask").addSystem(Pl,"context").addSystem(Xl,"state").addSystem(kl,"shader").addSystem(Hl,"texture").addSystem(ib,"buffer").addSystem(Cl,"geometry").addSystem(El,"framebuffer").addSystem(Ul,"scissor").addSystem(Gl,"stencil").addSystem(Dl,"projection").addSystem(Vl,"textureGC").addSystem(Al,"filter").addSystem(Bl,"renderTexture").addSystem(wl,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Cf(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(r){if($f())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var s=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,s)}else{var s=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,s)}i>=Fr.HIGH?this.multisample=Fr.HIGH:i>=Fr.MEDIUM?this.multisample=Fr.MEDIUM:i>=Fr.LOW?this.multisample=Fr.LOW:this.multisample=Fr.NONE},e.prototype.addSystem=function(r,i){var s=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=s;for(var o in this.runners)this.runners[o].add(s);return this},e.prototype.render=function(r,i){var s,o,h,u;if(i&&(i instanceof Tn?(ii("6.0.0","Renderer#render arguments changed, use options instead."),s=i,o=arguments[2],h=arguments[3],u=arguments[4]):(s=i.renderTexture,o=i.clear,h=i.transform,u=i.skipUpdateTransform)),this.renderingToScreen=!s,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=h,!this.context.isLost){if(s||(this._lastObjectRendered=r),!u){var c=r.enableTempParent();r.updateTransform(),r.disableTempParent(c)}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,i,s,o){i===void 0&&(i={});var h=t.prototype.generateTexture.call(this,r,i,s,o);return this.framebuffer.blit(),h},e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return ii("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,i){ii("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),zi.add({name:r,type:ar.RendererPlugin,ref:i})},e.__plugins={},e}(Bc);zi.handleByMap(ar.RendererPlugin,jl.__plugins);function kc(t){return jl.create(t)}var nb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Xc=nb,Wl=sb,ob=function(){function t(e){ii("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),La=function(){function t(){this.texArray=null,this.blend=0,this.type=di.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),Oa=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),Fa=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),Vc=function(t){vr(e,t);function e(r){var i=t.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=wn.for2d(),i.size=te.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var r=this.renderer.gl;te.PREFER_ENV===Bi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),te.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Ic(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,i=e._textureArrayPool,s=this.size/4,o=Math.floor(s/this.MAX_TEXTURES)+1;r.length<s;)r.push(new La);for(;i.length<o;)i.push(new Oa);for(var h=0;h<this.MAX_TEXTURES;h++)this._tempBoundTextures[h]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,s=r.MAX_TEXTURES,o=e._textureArrayPool,h=this.renderer.batch,u=this._tempBoundTextures,c=this.renderer.textureGC.count,_=++Ye._globalBatch,y=0,w=o[0],b=0;h.copyBoundTextures(u,s);for(var E=0;E<this._bufferSize;++E){var T=i[E];i[E]=null,T._batchEnabled!==_&&(w.count>=s&&(h.boundArray(w,u,_,s),this.buildDrawCalls(w,b,E),b=E,w=o[++y],++_),T._batchEnabled=_,T.touched=c,w.elements[w.count++]=T)}w.count>0&&(h.boundArray(w,u,_,s),this.buildDrawCalls(w,b,this._bufferSize),++y,++_);for(var E=0;E<u.length;E++)u[E]=null;Ye._globalBatch=_},e.prototype.buildDrawCalls=function(r,i,s){var o=this,h=o._bufferedElements,u=o._attributeBuffer,c=o._indexBuffer,_=o.vertexSize,y=e._drawCallPool,w=this._dcIndex,b=this._aIndex,E=this._iIndex,T=y[w];T.start=this._iIndex,T.texArray=r;for(var P=i;P<s;++P){var O=h[P],H=O._texture.baseTexture,Y=Jh[H.alphaMode?1:0][O.blendMode];h[P]=null,i<P&&T.blend!==Y&&(T.size=E-T.start,i=P,T=y[++w],T.texArray=r,T.start=E),this.packInterleavedGeometry(O,u,c,b,E),b+=O.vertexData.length/2*_,E+=O.indices.length,T.blend=Y}i<s&&(T.size=E-T.start,++w),this._dcIndex=w,this._aIndex=b,this._iIndex=E},e.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,s=0;s<r.count;s++)i.bind(r.elements[s],r.ids[s]),r.elements[s]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,s=r._attributeBuffer,o=r._indexBuffer;te.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,s=i.gl,o=i.state,h=e._drawCallPool,u=null,c=0;c<r;c++){var _=h[c],y=_.texArray,w=_.type,b=_.size,E=_.start,T=_.blend;u!==y&&(u=y,this.bindAndClearTexArray(y)),this.state.blendMode=T,o.set(this.state),s.drawElements(w,b,s.UNSIGNED_SHORT,E*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),te.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var i=oo(Math.ceil(r/8)),s=el(i),o=i*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._aBuffers[o];return h||(this._aBuffers[o]=h=new Fa(o*this.vertexSize*4)),h},e.prototype.getIndexBuffer=function(r){var i=oo(Math.ceil(r/12)),s=el(i),o=i*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._iBuffers[s];return h||(this._iBuffers[s]=h=new Uint16Array(o)),h},e.prototype.packInterleavedGeometry=function(r,i,s,o,h){for(var u=i.uint32View,c=i.float32View,_=o/this.vertexSize,y=r.uvs,w=r.indices,b=r.vertexData,E=r._texture.baseTexture._batchLocation,T=Math.min(r.worldAlpha,1),P=T<1&&r._texture.baseTexture.alphaMode?pa(r._tintRGB,T):r._tintRGB+(T*255<<24),O=0;O<b.length;O+=2)c[o++]=b[O],c[o++]=b[O+1],c[o++]=y[O],c[o++]=y[O+1],u[o++]=P,c[o++]=E;for(var O=0;O<w.length;O++)s[h++]=_+w[O]},e._drawCallPool=[],e._textureArrayPool=[],e}(_o),Hc=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=i;this.defaultGroupCache[e]=An.from({uSamplers:r},!0);var s=this.fragTemplate;s=s.replace(/%count%/gi,""+e),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Es(this.vertexSrc,s)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new wr,default:this.defaultGroupCache[e]};return new an(this.programCache[e],o)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),Yl=function(t){vr(e,t);function e(r){r===void 0&&(r=!1);var i=t.call(this)||this;return i._buffer=new Dr(null,r,!1),i._indexBuffer=new Dr(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ye.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ye.FLOAT).addAttribute("aColor",i._buffer,4,!0,ye.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ye.FLOAT).addIndex(i._indexBuffer),i}return e}(Ps),zc=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,jc=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Wc=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:zc,fragment:jc,geometryClass:Yl,vertexSize:6},e),i=r.vertex,s=r.fragment,o=r.vertexSize,h=r.geometryClass;return function(u){vr(c,u);function c(_){var y=u.call(this,_)||this;return y.shaderGenerator=new Hc(i,s),y.geometryClass=h,y.vertexSize=o,y}return c}(Vc)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return zc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return jc},enumerable:!1,configurable:!0}),t}(),ql=Wc.create();Object.assign(ql,{extension:{name:"batch",type:ar.RendererPlugin}});var Yc={},ab=function(t){Object.defineProperty(Yc,t,{get:function(){return ii("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),lc[t]}})};for(var Zl in lc)ab(Zl);var qc={},hb=function(t){Object.defineProperty(qc,t,{get:function(){return ii("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Dc[t]}})};for(var Zl in Dc)hb(Zl);var lb="6.5.2";/*!
 * @pixi/accessibility - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zc={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nr.mixin(Zc);var ub=9,Ma=100,fb=0,cb=0,Jc=2,Qc=1,db=-1e3,_b=-1e3,pb=2,Kc=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ci.tablet||ci.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=Ma+"px",r.style.height=Ma+"px",r.style.position="absolute",r.style.top=fb+"px",r.style.left=cb+"px",r.style.zIndex=Jc.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=Qc+"px",r.style.height=Qc+"px",r.style.position="absolute",r.style.top=db+"px",r.style.left=_b+"px",r.style.zIndex=pb.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}},t.prototype.update=function(){var e=performance.now();if(!(ci.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),i=r.left,s=r.top,o=r.width,h=r.height,u=this.renderer,c=u.width,_=u.height,y=u.resolution,w=o/c*y,b=h/_*y,E=this.div;E.style.left=i+"px",E.style.top=s+"px",E.style.width=c+"px",E.style.height=_+"px";for(var T=0;T<this.children.length;T++){var P=this.children[T];if(P.renderId!==this.renderId)P._accessibleActive=!1,Mn(this.children,T,1),this.div.removeChild(P._accessibleDiv),this.pool.push(P._accessibleDiv),P._accessibleDiv=null,T--;else{E=P._accessibleDiv;var O=P.hitArea,H=P.worldTransform;P.hitArea?(E.style.left=(H.tx+O.x*H.a)*w+"px",E.style.top=(H.ty+O.y*H.d)*b+"px",E.style.width=O.width*H.a*w+"px",E.style.height=O.height*H.d*b+"px"):(O=P.getBounds(),this.capHitArea(O),E.style.left=O.x*w+"px",E.style.top=O.y*b+"px",E.style.width=O.width*w+"px",E.style.height=O.height*b+"px",E.title!==P.accessibleTitle&&P.accessibleTitle!==null&&(E.title=P.accessibleTitle),E.getAttribute("aria-label")!==P.accessibleHint&&P.accessibleHint!==null&&E.setAttribute("aria-label",P.accessibleHint)),(P.accessibleTitle!==E.title||P.tabIndex!==E.tabIndex)&&(E.title=P.accessibleTitle,E.tabIndex=P.tabIndex,this.debug&&this.updateDebugHTML(E))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,i=r.width,s=r.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>s&&(e.height=s-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=Ma+"px",r.style.height=Ma+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=Jc.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"click",s),r.dispatchEvent(i,"pointertap",s),r.dispatchEvent(i,"tap",s)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"mouseover",s)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"mouseout",s)},t.prototype._onKeyDown=function(e){e.keyCode===ub&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[ar.RendererPlugin,ar.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Jl=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new dr,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ql=function(t,e){return Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Ql(t,e)};function vb(t,e){Ql(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var td=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Ua=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),t}(),mb=function(){function t(){this._tempPoint=new dr}return t.prototype.recursiveFindHit=function(e,r,i,s,o){var h;if(!r||!r.visible)return!1;var u=e.data.global;o=r.interactive||o;var c=!1,_=o,y=!0;if(r.hitArea)s&&(r.worldTransform.applyInverse(u,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?c=!0:(s=!1,y=!1)),_=!1;else if(r._mask&&s){var w=r._mask.isMaskData?r._mask.maskObject:r._mask;w&&!(!((h=w.containsPoint)===null||h===void 0)&&h.call(w,u))&&(s=!1)}if(y&&r.interactiveChildren&&r.children)for(var b=r.children,E=b.length-1;E>=0;E--){var T=b[E],P=this.recursiveFindHit(e,T,i,s,_);if(P){if(!T.parent)continue;_=!1,P&&(e.target&&(s=!1),c=!0)}}return o&&(s&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(u)&&(c=!0),r.interactive&&(c&&!e.target&&(e.target=r),i&&i(e,r,!!c))),c},t.prototype.findHit=function(e,r,i,s){this.recursiveFindHit(e,r,i,s,!1)},t}(),ed={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Nr.mixin(ed);var Ga=1,Da={target:null,data:{global:null}},rd=function(t){vb(e,t);function e(r,i){var s=t.call(this)||this;return i=i||{},s.renderer=r,s.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,s.interactionFrequency=i.interactionFrequency||10,s.mouse=new Jl,s.mouse.identifier=Ga,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[Ga]=s.mouse,s.interactionDataPool=[],s.eventData=new td,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!("PointerEvent"in globalThis),s.supportsTouchEvents="ontouchstart"in globalThis,s.supportsPointerEvents=!!globalThis.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new mb,s._tempDisplayObject=new al,s._eventListenerOptions={capture:!0,passive:!1},s._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,i){return Da.target=null,Da.data.global=r,i||(i=this.lastObjectRendered),this.processInteractive(Da,i,null,!0),Da.target},e.prototype.setTargetElement=function(r,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Hr.system.add(this.tickerUpdate,this,ji.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Hr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var s=this.cursorStyles[r];if(s)switch(typeof s){case"string":i&&(this.interactionDOMElement.style.cursor=s);break;case"function":s(r);break;case"object":i&&Object.assign(this.interactionDOMElement.style,s);break}else i&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,i,s){(!s.stopPropagationHint||r===s.stopsPropagatingAt)&&(s.currentTarget=r,s.type=i,r.emit(i,s),r[i]&&r[i](s))},e.prototype.delayDispatchEvent=function(r,i,s){this.delayedEvents.push({displayObject:r,eventString:i,eventData:s})},e.prototype.mapPositionToPoint=function(r,i,s){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var h=1/this.resolution;r.x=(i-o.left)*(this.interactionDOMElement.width/o.width)*h,r.y=(s-o.top)*(this.interactionDOMElement.height/o.height)*h},e.prototype.processInteractive=function(r,i,s,o){var h=this.search.findHit(r,i,s,o),u=this.delayedEvents;if(!u.length)return h;r.stopPropagationHint=!1;var c=u.length;this.delayedEvents=[];for(var _=0;_<c;_++){var y=u[_],w=y.displayObject,b=y.eventString,E=y.eventData;E.stopsPropagatingAt===w&&(E.stopPropagationHint=!0),this.dispatchEvent(w,b,E)}return h},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);if(this.autoPreventDefault&&i[0].isNormalized){var s=r.cancelable||!("cancelable"in r);s&&r.preventDefault()}for(var o=i.length,h=0;h<o;h++){var u=i[h],c=this.getInteractionDataForPointerId(u),_=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(_.data.originalEvent=r,this.processInteractive(_,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",_),u.pointerType==="touch")this.emit("touchstart",_);else if(u.pointerType==="mouse"||u.pointerType==="pen"){var y=u.button===2;this.emit(y?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,i,s){var o=r.data,h=r.data.identifier;if(s){if(i.trackedPointers[h]||(i.trackedPointers[h]=new Ua(h)),this.dispatchEvent(i,"pointerdown",r),o.pointerType==="touch")this.dispatchEvent(i,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var u=o.button===2;u?i.trackedPointers[h].rightDown=!0:i.trackedPointers[h].leftDown=!0,this.dispatchEvent(i,u?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,i,s){var o=this.normalizeToPointerData(r),h=o.length,u=r.target;r.composedPath&&r.composedPath().length>0&&(u=r.composedPath()[0]);for(var c=u!==this.interactionDOMElement?"outside":"",_=0;_<h;_++){var y=o[_],w=this.getInteractionDataForPointerId(y),b=this.configureInteractionEventForDOMEvent(this.eventData,y,w);if(b.data.originalEvent=r,this.processInteractive(b,this.lastObjectRendered,s,i||!c),this.emit(i?"pointercancel":"pointerup"+c,b),y.pointerType==="mouse"||y.pointerType==="pen"){var E=y.button===2;this.emit(E?"rightup"+c:"mouseup"+c,b)}else y.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+c,b),this.releaseInteractionDataForPointerId(y.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,i){var s=r.data,o=r.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.dispatchEvent(i,"pointercancel",r),s.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,i,s){var o=r.data,h=r.data.identifier,u=i.trackedPointers[h],c=o.pointerType==="touch",_=o.pointerType==="mouse"||o.pointerType==="pen",y=!1;if(_){var w=o.button===2,b=Ua.FLAGS,E=w?b.RIGHT_DOWN:b.LEFT_DOWN,T=u!==void 0&&u.flags&E;s?(this.dispatchEvent(i,w?"rightup":"mouseup",r),T&&(this.dispatchEvent(i,w?"rightclick":"click",r),y=!0)):T&&this.dispatchEvent(i,w?"rightupoutside":"mouseupoutside",r),u&&(w?u.rightDown=!1:u.leftDown=!1)}s?(this.dispatchEvent(i,"pointerup",r),c&&this.dispatchEvent(i,"touchend",r),u&&((!_||y)&&this.dispatchEvent(i,"pointertap",r),c&&(this.dispatchEvent(i,"tap",r),u.over=!1))):u&&(this.dispatchEvent(i,"pointerupoutside",r),c&&this.dispatchEvent(i,"touchendoutside",r)),u&&u.none&&delete i.trackedPointers[h]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var s=i.length,o=0;o<s;o++){var h=i[o],u=this.getInteractionDataForPointerId(h),c=this.configureInteractionEventForDOMEvent(this.eventData,h,u);c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),h.pointerType==="touch"&&this.emit("touchmove",c),(h.pointerType==="mouse"||h.pointerType==="pen")&&this.emit("mousemove",c)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,i,s){var o=r.data,h=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen";u&&this.processPointerOverOut(r,i,s),(!this.moveWhenInside||s)&&(this.dispatchEvent(i,"pointermove",r),h&&this.dispatchEvent(i,"touchmove",r),u&&this.dispatchEvent(i,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),s=i[0];s.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,o);h.data.originalEvent=s,this.processInteractive(h,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",h),s.pointerType==="mouse"||s.pointerType==="pen"?this.emit("mouseout",h):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(r,i,s){var o=r.data,h=r.data.identifier,u=o.pointerType==="mouse"||o.pointerType==="pen",c=i.trackedPointers[h];s&&!c&&(c=i.trackedPointers[h]=new Ua(h)),c!==void 0&&(s&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(i,"pointerover",r),u&&this.delayDispatchEvent(i,"mouseover",r)),u&&this.cursor===null&&(this.cursor=i.cursor)):c.over&&(c.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),u&&this.dispatchEvent(i,"mouseout",r),c.none&&delete i.trackedPointers[h]))},e.prototype.onPointerOver=function(r){var i=this.normalizeToPointerData(r),s=i[0],o=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,o);h.data.originalEvent=s,s.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",h),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mouseover",h)},e.prototype.getInteractionDataForPointerId=function(r){var i=r.pointerId,s;return i===Ga||r.pointerType==="mouse"?s=this.mouse:this.activeInteractionData[i]?s=this.activeInteractionData[i]:(s=this.interactionDataPool.pop()||new Jl,s.identifier=i,this.activeInteractionData[i]=s),s.copyEvent(r),s},e.prototype.releaseInteractionDataForPointerId=function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(r,i,s){return r.data=s,this.mapPositionToPoint(s.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=s.global.x,i.globalY=s.global.y),s.originalEvent=i,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var s=0,o=r.changedTouches.length;s<o;s++){var h=r.changedTouches[s];typeof h.button=="undefined"&&(h.button=r.touches.length?1:0),typeof h.buttons=="undefined"&&(h.buttons=r.touches.length?1:0),typeof h.isPrimary=="undefined"&&(h.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof h.width=="undefined"&&(h.width=h.radiusX||1),typeof h.height=="undefined"&&(h.height=h.radiusY||1),typeof h.tiltX=="undefined"&&(h.tiltX=0),typeof h.tiltY=="undefined"&&(h.tiltY=0),typeof h.pointerType=="undefined"&&(h.pointerType="touch"),typeof h.pointerId=="undefined"&&(h.pointerId=h.identifier||0),typeof h.pressure=="undefined"&&(h.pressure=h.force||.5),typeof h.twist=="undefined"&&(h.twist=0),typeof h.tangentialPressure=="undefined"&&(h.tangentialPressure=0),typeof h.layerX=="undefined"&&(h.layerX=h.offsetX=h.clientX),typeof h.layerY=="undefined"&&(h.layerY=h.offsetY=h.clientY),h.isNormalized=!0,i.push(h)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var u=r;typeof u.isPrimary=="undefined"&&(u.isPrimary=!0),typeof u.width=="undefined"&&(u.width=1),typeof u.height=="undefined"&&(u.height=1),typeof u.tiltX=="undefined"&&(u.tiltX=0),typeof u.tiltY=="undefined"&&(u.tiltY=0),typeof u.pointerType=="undefined"&&(u.pointerType="mouse"),typeof u.pointerId=="undefined"&&(u.pointerId=Ga),typeof u.pressure=="undefined"&&(u.pressure=.5),typeof u.twist=="undefined"&&(u.twist=0),typeof u.tangentialPressure=="undefined"&&(u.tangentialPressure=0),u.isNormalized=!0,i.push(u)}else i.push(r);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[ar.RendererPlugin,ar.CanvasRendererPlugin]},e}(Ei);/*!
 * @pixi/extract - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nd=new We,sd=4,od=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,i){var s=new Image;return s.src=this.base64(e,r,i),s},t.prototype.base64=function(e,r,i){return this.canvas(e).toDataURL(r,i)},t.prototype.canvas=function(e,r){var i=this.renderer,s,o=!1,h,u=!1;e&&(e instanceof Tn?h=e:(h=this.renderer.generateTexture(e),u=!0)),h?(s=h.baseTexture.resolution,r=r!=null?r:h.frame,o=!1,i.renderTexture.bind(h)):(s=i.resolution,r||(r=nd,r.width=i.width,r.height=i.height),o=!0,i.renderTexture.bind(null));var c=Math.round(r.width*s),_=Math.round(r.height*s),y=new il(c,_,1),w=new Uint8Array(sd*c*_),b=i.gl;b.readPixels(Math.round(r.x*s),Math.round(r.y*s),c,_,b.RGBA,b.UNSIGNED_BYTE,w);var E=y.context.getImageData(0,0,c,_);if(t.arrayPostDivide(w,E.data),y.context.putImageData(E,0,0),o){var T=new il(y.width,y.height,1);T.context.scale(1,-1),T.context.drawImage(y.canvas,0,-_),y.destroy(),y=T}return u&&h.destroy(!0),y.canvas},t.prototype.pixels=function(e,r){var i=this.renderer,s,o,h=!1;e&&(e instanceof Tn?o=e:(o=this.renderer.generateTexture(e),h=!0)),o?(s=o.baseTexture.resolution,r=r!=null?r:o.frame,i.renderTexture.bind(o)):(s=i.resolution,r||(r=nd,r.width=i.width,r.height=i.height),i.renderTexture.bind(null));var u=Math.round(r.width*s),c=Math.round(r.height*s),_=new Uint8Array(sd*u*c),y=i.gl;return y.readPixels(Math.round(r.x*s),Math.round(r.y*s),u,c,y.RGBA,y.UNSIGNED_BYTE,_),h&&o.destroy(!0),t.arrayPostDivide(_,_),_},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var i=0;i<e.length;i+=4){var s=r[i+3]=e[i+3];s!==0?(r[i]=Math.round(Math.min(e[i]*255/s,255)),r[i+1]=Math.round(Math.min(e[i+1]*255/s,255)),r[i+2]=Math.round(Math.min(e[i+2]*255/s,255))):(r[i]=e[i],r[i+1]=e[i+1],r[i+2]=e[i+2])}},t.extension={name:"extract",type:ar.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ba=function(){function t(e,r,i){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function ad(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var ln=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},t.prototype.has=function(e){if(!(e instanceof Ba))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var s=this._head;if(!s)return!1;for(;s;)s._once&&this.detach(s),s._fn.apply(s._thisArg,r),s=s._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return ad(this,new Ba(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return ad(this,new Ba(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof Ba))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function hd(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),s={},o=14;o--;)s[r.key[o]]=i[o]||"";return s[r.q.name]={},s[r.key[12]].replace(r.q.parser,function(h,u,c){u&&(s[r.q.name][u]=c)}),s}var Kl,ka=null,gb=0,ld=200,yb=204,bb=1223,xb=2;function ud(){}function fd(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function tu(t){return t.toString().replace("object ","")}var $r=function(){function t(e,r,i){if(this._dequeue=ud,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ud,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new ln,this.onProgress=new ln,this.onComplete=new ln,this.onAfterMiddleware=new ln}return t.setExtensionLoadType=function(e,r){fd(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){fd(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof Kl=="undefined"&&(Kl=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Kl&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,i){i||(i=e+"/"+this._getExtension(r));var s=document.createElement("source");return s.src=r,s.type=i,s},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(tu(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(tu(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(tu(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",i=typeof e.status=="undefined"?ld:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType=="undefined")&&(r=e.responseText),i===gb&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=ld:i===bb&&(i=yb);var s=i/100|0;if(s===xb)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var h=document.createElement("div");h.innerHTML=r,this.data=h}this.type=t.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,ka||(ka=document.createElement("a")),ka.href=e;var i=hd(ka.href,{strictMode:!0}),s=!i.port&&r.port===""||i.port===r.port,o=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!s||o!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var i=e.indexOf("/");r=e.substring(i+1,e.indexOf(";",i))}else{var s=e.indexOf("?"),o=e.indexOf("#"),h=Math.min(s>-1?s:e.length,o>-1?o:e.length);e=e.substring(0,h),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})($r||($r={}));function jn(){}function Tb(t){return function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(t===null)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,i)}}var Ab=function(){function t(e,r){this.data=e,this.callback=r}return t}(),eu=function(){function t(e,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=jn,this.unsaturated=jn,this.empty=jn,this.drain=jn,this.error=jn,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(s,o,h){if(h&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,s==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var u=new Ab(s,typeof h=="function"?h:jn);o?i._tasks.unshift(u):i._tasks.push(u),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var s=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(s.data,Tb(i._next(s)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var i=arguments,s=[],o=0;o<arguments.length;o++)s[o]=i[o];r.workers-=1,e.callback.apply(e,s),s[0]!=null&&r.error(s[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=jn,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,i,s){var o=0,h=e.length;function u(c){if(c||o===h){i&&i(c);return}s?setTimeout(function(){r(e[o++],u)},1):r(e[o++],u)}u()},t.queue=function(e,r){return new t(e,r)},t}(),ru=100,wb=/(#[\w-]+)?$/,go=function(){function t(e,r){var i=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,_){return i._loadResource(c,_)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,_){return i._loadResource(c,_)},this._queue=eu.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new ln,this.onError=new ln,this.onLoad=new ln,this.onStart=new ln,this.onComplete=new ln;for(var s=0;s<t._plugins.length;++s){var o=t._plugins[s],h=o.pre,u=o.use;h&&this.pre(h),u&&this.use(u)}this._protected=!1}return t.prototype._add=function(e,r,i,s){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new $r(e,r,i),typeof s=="function"&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var o=i.parentResource,h=[],u=0;u<o.children.length;++u)o.children[u].isComplete||h.push(o.children[u]);var c=o.progressChunk*(h.length+1),_=c/(h.length+2);o.children.push(this.resources[e]),o.progressChunk=_;for(var u=0;u<h.length;++u)h[u].progressChunk=_;this.resources[e].progressChunk=_}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(ii("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=ru/r,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=hd(e,{strictMode:!0}),i;if(r.protocol||!r.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var s=wb.exec(i)[0];i=i.slice(0,i.length-s.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=s}return i},t.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,eu.eachSeries(this._beforeMiddleware,function(s,o){s.call(i,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=ru,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),eu.eachSeries(this._afterMiddleware,function(i,s){i.call(r,e,s)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(ru,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return ii("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),zi.add({type:ar.Loader,ref:e}),t},t._plugins=[],t}();zi.handleByList(ar.Loader,go._plugins),go.prototype.add=function(e,r,i,s){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if(typeof e=="object"&&(i=e,s=r||i.callback||i.onComplete,r=i.url,e=i.name||i.key||i.url),typeof r!="string"&&(s=i,i=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(s=i,i=null),this._add(e,r,i,s)};var cd=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?go.shared:new go},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=ar.Application,t}(),dd=function(){function t(){}return t.add=function(){$r.setExtensionLoadType("svg",$r.LOAD_TYPE.XHR),$r.setExtensionXhrType("svg",$r.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===$r.TYPE.IMAGE||e.extension==="svg")){var i=e.data,s=e.url,o=e.name,h=e.metadata;Fe.fromLoader(i,s,o,h).then(function(u){e.texture=u,r()}).catch(r)}else r()},t.extension=ar.Loader,t}(),Pb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Eb(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],s=[0,0,0,0],o=0;o<i.length;++o)r<t.length?i[o]=t.charCodeAt(r++)&255:i[o]=0;s[0]=i[0]>>2,s[1]=(i[0]&3)<<4|i[1]>>4,s[2]=(i[1]&15)<<2|i[2]>>6,s[3]=i[2]&63;var h=r-(t.length-1);switch(h){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64;break}for(var o=0;o<s.length;++o)e+=Pb.charAt(s[o])}return e}function Ib(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===$r.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+Eb(t.xhr.responseText),t.type=$r.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,s=i.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=s,t.type=$r.TYPE.IMAGE,t.data.onload=function(){i.revokeObjectURL(s),t.data.onload=null,e()};return}}e()}var Cb=function(){function t(){}return t.extension=ar.Loader,t.use=Ib,t}();zi.add(dd,Cb);/*!
 * @pixi/compressed-textures - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var hr,Be;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(Be||(Be={}));var yo=(hr={},hr[Be.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,hr[Be.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,hr[Be.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,hr[Be.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,hr[Be.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,hr[Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,hr[Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,hr[Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,hr[Be.COMPRESSED_R11_EAC]=.5,hr[Be.COMPRESSED_SIGNED_R11_EAC]=.5,hr[Be.COMPRESSED_RG11_EAC]=1,hr[Be.COMPRESSED_SIGNED_RG11_EAC]=1,hr[Be.COMPRESSED_RGB8_ETC2]=.5,hr[Be.COMPRESSED_RGBA8_ETC2_EAC]=1,hr[Be.COMPRESSED_SRGB8_ETC2]=.5,hr[Be.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,hr[Be.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,hr[Be.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,hr[Be.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,hr[Be.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,hr[Be.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,hr[Be.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,hr[Be.COMPRESSED_RGB_ETC1_WEBGL]=.5,hr[Be.COMPRESSED_RGB_ATC_WEBGL]=.5,hr[Be.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,hr[Be.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,hr);/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var iu=function(t,e){return iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},iu(t,e)};function _d(t,e){iu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function $b(t,e,r,i){function s(o){return o instanceof r?o:new r(function(h){h(o)})}return new(r||(r=Promise))(function(o,h){function u(y){try{_(i.next(y))}catch(w){h(w)}}function c(y){try{_(i.throw(y))}catch(w){h(w)}}function _(y){y.done?o(y.value):s(y.value).then(u,c)}_((i=i.apply(t,e||[])).next())})}function Rb(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,h;return h={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function u(_){return function(y){return c([_,y])}}function c(_){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(o=_[0]&2?s.return:_[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,_[1])).done)return o;switch(s=0,o&&(_=[_[0]&2,o.value]),_[0]){case 0:case 1:o=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,s=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!o||_[1]>o[0]&&_[1]<o[3])){r.label=_[1];break}if(_[0]===6&&r.label<o[1]){r.label=o[1],o=_;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(_);break}o[2]&&r.ops.pop(),r.trys.pop();continue}_=e.call(t,r)}catch(y){_=[6,y],s=0}finally{i=o=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var pd=function(t){_d(e,t);function e(r,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var s=this,o,h;return typeof r=="string"?(o=r,h=new Uint8Array):(o=null,h=r),s=t.call(this,h,i)||this,s.origin=o,s.buffer=h?new Fa(h):null,s.origin&&i.autoLoad!==!1&&s.load(),h&&h.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return $b(this,void 0,Promise,function(){var r,i,s;return Rb(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return r=o.sent(),[4,r.blob()];case 2:return i=o.sent(),[4,i.arrayBuffer()];case 3:return s=o.sent(),this.data=new Uint32Array(s),this.buffer=new Fa(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),[2,this]}})})},e}(Vn),Xa=function(t){_d(e,t);function e(r,i){var s=t.call(this,r,i)||this;return s.format=i.format,s.levels=i.levels||1,s._width=i.width,s._height=i.height,s._extension=e._formatToExtension(s.format),(i.levelBuffers||s.buffer)&&(s._levelBuffers=i.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return e.prototype.upload=function(r,i,s){var o=r.gl,h=r.context.extensions[this._extension];if(!h)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var u=0,c=this.levels;u<c;u++){var _=this._levelBuffers[u],y=_.levelID,w=_.levelWidth,b=_.levelHeight,E=_.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,y,this.format,w,b,0,E)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,i,s,o,h,u,c){for(var _=new Array(s),y=r.byteOffset,w=u,b=c,E=w+o-1&~(o-1),T=b+h-1&~(h-1),P=E*T*yo[i],O=0;O<s;O++)_[O]={levelID:O,levelWidth:s>1?w:E,levelHeight:s>1?b:T,levelBuffer:new Uint8Array(r.buffer,y,P)},y+=P,w=w>>1||1,b=b>>1||1,E=w+o-1&~(o-1),T=b+h-1&~(h-1),P=E*T*yo[i];return _},e}(pd),vd=function(){function t(){}return t.use=function(e,r){var i=e.data,s=this;if(e.type===$r.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var o=i.textures,h=void 0,u=void 0,c=0,_=o.length;c<_;c++){var y=o[c],w=y.src,b=y.format;if(b||(u=w),t.textureFormats[b]){h=w;break}}if(h=h||u,!h){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(h===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var E={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},T=Hi.resolve(e.url.replace(s.baseUrl,""),h),P=i.cacheID;s.add(P,T,E,function(O){if(O.error){r(O.error);return}var H=O.texture,Y=H===void 0?null:H,J=O.textures,it=J===void 0?{}:J;Object.assign(e,{texture:Y,textures:it}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=te.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var i=e[r];i&&Object.assign(t._textureFormats,Object.getPrototypeOf(i))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=ar.Loader,t}();function md(t,e,r){var i={textures:{},texture:null};if(!e)return i;var s=e.map(function(o){return new Fe(new Ye(o,Object.assign({mipmap:Vi.OFF,alphaMode:_i.NO_PREMULTIPLIED_ALPHA},r)))});return s.forEach(function(o,h){var u=o.baseTexture,c=t+"-"+(h+1);Ye.addToCache(u,c),Fe.addToCache(o,c),h===0&&(Ye.addToCache(u,t),Fe.addToCache(o,t),i.texture=o),i.textures[c]=o}),i}var bo,Si,nu=4,Va=124,Sb=32,gd=20,Nb=542327876,Ha={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Lb={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},za={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ni;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ni||(Ni={}));var su;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(su||(su={}));var Ob=1,Fb=2,Mb=4,Ub=64,Gb=512,Db=131072,Bb=827611204,kb=861165636,Xb=894720068,Vb=808540228,Hb=4,zb=(bo={},bo[Bb]=Be.COMPRESSED_RGBA_S3TC_DXT1_EXT,bo[kb]=Be.COMPRESSED_RGBA_S3TC_DXT3_EXT,bo[Xb]=Be.COMPRESSED_RGBA_S3TC_DXT5_EXT,bo),jb=(Si={},Si[Ni.DXGI_FORMAT_BC1_TYPELESS]=Be.COMPRESSED_RGBA_S3TC_DXT1_EXT,Si[Ni.DXGI_FORMAT_BC1_UNORM]=Be.COMPRESSED_RGBA_S3TC_DXT1_EXT,Si[Ni.DXGI_FORMAT_BC2_TYPELESS]=Be.COMPRESSED_RGBA_S3TC_DXT3_EXT,Si[Ni.DXGI_FORMAT_BC2_UNORM]=Be.COMPRESSED_RGBA_S3TC_DXT3_EXT,Si[Ni.DXGI_FORMAT_BC3_TYPELESS]=Be.COMPRESSED_RGBA_S3TC_DXT5_EXT,Si[Ni.DXGI_FORMAT_BC3_UNORM]=Be.COMPRESSED_RGBA_S3TC_DXT5_EXT,Si[Ni.DXGI_FORMAT_BC1_UNORM_SRGB]=Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Si[Ni.DXGI_FORMAT_BC2_UNORM_SRGB]=Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Si[Ni.DXGI_FORMAT_BC3_UNORM_SRGB]=Be.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Si);function yd(t){var e=new Uint32Array(t),r=e[0];if(r!==Nb)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,Va/Uint32Array.BYTES_PER_ELEMENT),s=i[Ha.HEIGHT],o=i[Ha.WIDTH],h=i[Ha.MIPMAP_COUNT],u=new Uint32Array(t,Ha.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Sb/Uint32Array.BYTES_PER_ELEMENT),c=u[Ob];if(c&Mb){var _=u[Lb.FOURCC];if(_!==Vb){var y=zb[_],w=nu+Va,b=new Uint8Array(t,w),E=new Xa(b,{format:y,width:o,height:s,levels:h});return[E]}var T=nu+Va,P=new Uint32Array(e.buffer,T,gd/Uint32Array.BYTES_PER_ELEMENT),O=P[za.DXGI_FORMAT],H=P[za.RESOURCE_DIMENSION],Y=P[za.MISC_FLAG],J=P[za.ARRAY_SIZE],it=jb[O];if(it===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+O);if(Y===Hb)throw new Error("DDSParser does not support cubemap textures");if(H===su.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var st=new Array,K=nu+Va+gd;if(J===1)st.push(new Uint8Array(t,K));else{for(var At=yo[it],Tt=0,dt=o,Et=s,Rt=0;Rt<h;Rt++){var Ft=Math.max(1,dt+3&-4),ne=Math.max(1,Et+3&-4),ae=Ft*ne*At;Tt+=ae,dt=dt>>>1,Et=Et>>>1}for(var zt=K,Rt=0;Rt<J;Rt++)st.push(new Uint8Array(t,zt,Tt)),zt+=Tt}return st.map(function(Vt){return new Xa(Vt,{format:it,width:o,height:s,levels:h})})}throw c&Ub?new Error("DDSParser does not support uncompressed texture data."):c&Gb?new Error("DDSParser does not supported YUV uncompressed texture data."):c&Db?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&Fb?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Pn,un,xo,bd=[171,75,84,88,32,49,49,187,13,10,26,10],Wb=67305985,Li={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ou=64,au=(Pn={},Pn[ye.UNSIGNED_BYTE]=1,Pn[ye.UNSIGNED_SHORT]=2,Pn[ye.INT]=4,Pn[ye.UNSIGNED_INT]=4,Pn[ye.FLOAT]=4,Pn[ye.HALF_FLOAT]=8,Pn),xd=(un={},un[Ht.RGBA]=4,un[Ht.RGB]=3,un[Ht.RG]=2,un[Ht.RED]=1,un[Ht.LUMINANCE]=1,un[Ht.LUMINANCE_ALPHA]=2,un[Ht.ALPHA]=1,un),Td=(xo={},xo[ye.UNSIGNED_SHORT_4_4_4_4]=2,xo[ye.UNSIGNED_SHORT_5_5_5_1]=2,xo[ye.UNSIGNED_SHORT_5_6_5]=2,xo);function Ad(t,e,r){r===void 0&&(r=!1);var i=new DataView(e);if(!Yb(t,i))return null;var s=i.getUint32(Li.ENDIANNESS,!0)===Wb,o=i.getUint32(Li.GL_TYPE,s),h=i.getUint32(Li.GL_FORMAT,s),u=i.getUint32(Li.GL_INTERNAL_FORMAT,s),c=i.getUint32(Li.PIXEL_WIDTH,s),_=i.getUint32(Li.PIXEL_HEIGHT,s)||1,y=i.getUint32(Li.PIXEL_DEPTH,s)||1,w=i.getUint32(Li.NUMBER_OF_ARRAY_ELEMENTS,s)||1,b=i.getUint32(Li.NUMBER_OF_FACES,s),E=i.getUint32(Li.NUMBER_OF_MIPMAP_LEVELS,s),T=i.getUint32(Li.BYTES_OF_KEY_VALUE_DATA,s);if(_===0||y!==1)throw new Error("Only 2D textures are supported");if(b!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(w!==1)throw new Error("WebGL does not support array textures");var P=4,O=4,H=c+3&-4,Y=_+3&-4,J=new Array(w),it=c*_;o===0&&(it=H*Y);var st;if(o!==0?au[o]?st=au[o]*xd[h]:st=Td[o]:st=yo[u],st===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var K=r?Zb(i,T,s):null,At=it*st,Tt=At,dt=c,Et=_,Rt=H,Ft=Y,ne=ou+T,ae=0;ae<E;ae++){for(var zt=i.getUint32(ne,s),Vt=ne+4,he=0;he<w;he++){var Kt=J[he];Kt||(Kt=J[he]=new Array(E)),Kt[ae]={levelID:ae,levelWidth:E>1||o!==0?dt:Rt,levelHeight:E>1||o!==0?Et:Ft,levelBuffer:new Uint8Array(e,Vt,Tt)},Vt+=Tt}ne+=zt+4,ne=ne%4!==0?ne+4-ne%4:ne,dt=dt>>1||1,Et=Et>>1||1,Rt=dt+P-1&~(P-1),Ft=Et+O-1&~(O-1),Tt=Rt*Ft*st}return o!==0?{uncompressed:J.map(function(ve){var at=ve[0].levelBuffer,bt=!1;return o===ye.FLOAT?at=new Float32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4):o===ye.UNSIGNED_INT?(bt=!0,at=new Uint32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)):o===ye.INT&&(bt=!0,at=new Int32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)),{resource:new Vn(at,{width:ve[0].levelWidth,height:ve[0].levelHeight}),type:o,format:bt?qb(h):h}}),kvData:K}:{compressed:J.map(function(ve){return new Xa(null,{format:u,width:c,height:_,levels:E,levelBuffers:ve})}),kvData:K}}function Yb(t,e){for(var r=0;r<bd.length;r++)if(e.getUint8(r)!==bd[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function qb(t){switch(t){case Ht.RGBA:return Ht.RGBA_INTEGER;case Ht.RGB:return Ht.RGB_INTEGER;case Ht.RG:return Ht.RG_INTEGER;case Ht.RED:return Ht.RED_INTEGER;default:return t}}function Zb(t,e,r){for(var i=new Map,s=0;s<e;){var o=t.getUint32(ou+s,r),h=ou+s+4,u=3-(o+3)%4;if(o===0||o>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var c=0;c<o&&t.getUint8(h+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var _=new TextDecoder().decode(new Uint8Array(t.buffer,h,c)),y=new DataView(t.buffer,h+c+1,o-c-1);i.set(_,y),s+=4+o+u}return i}$r.setExtensionXhrType("dds",$r.XHR_RESPONSE_TYPE.BUFFER);var wd=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,md(e.name||e.url,yd(e.data),e.metadata))}catch(i){r(i);return}r()},t.extension=ar.Loader,t}();$r.setExtensionXhrType("ktx",$r.XHR_RESPONSE_TYPE.BUFFER);var Pd=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,s=Ad(i,e.data,this.loadKeyValueData),o=s.compressed,h=s.uncompressed,u=s.kvData;if(o){var c=md(i,o,e.metadata);if(u&&c.textures)for(var _ in c.textures)c.textures[_].baseTexture.ktxKeyValueData=u;Object.assign(e,c)}else if(h){var y={};h.forEach(function(w,b){var E=new Fe(new Ye(w.resource,{mipmap:Vi.OFF,alphaMode:_i.NO_PREMULTIPLIED_ALPHA,type:w.type,format:w.format})),T=i+"-"+(b+1);u&&(E.baseTexture.ktxKeyValueData=u),Ye.addToCache(E.baseTexture,T),Fe.addToCache(E,T),b===0&&(y[i]=E,Ye.addToCache(E.baseTexture,i),Fe.addToCache(E,i)),y[T]=E}),Object.assign(e,{textures:y})}}catch(w){r(w);return}r()},t.extension=ar.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var hu=function(t,e){return hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},hu(t,e)};function Ed(t,e){hu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jb=function(t){Ed(e,t);function e(r,i,s,o){r===void 0&&(r=1500),s===void 0&&(s=16384),o===void 0&&(o=!1);var h=t.call(this)||this,u=16384;return s>u&&(s=u),h._properties=[!1,!0,!1,!1,!1],h._maxSize=r,h._batchSize=s,h._buffers=null,h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=Te.NORMAL,h.autoResize=o,h.roundPixels=!0,h.baseTexture=null,h.setProperties(i),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,Fn(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var i=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(vi),Id=function(){function t(e,r,i){this.geometry=new Ps,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var o=e[s];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||ye.FLOAT,offset:o.offset},r[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new Dr(Sf(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];s.offset=r,r+=s.size,this.dynamicStride+=s.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Dr(this.dynamicData,!1,!1);var h=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var s=this.staticProperties[i];s.offset=h,h+=s.size,this.staticStride+=s.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new Dr(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];e.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===ye.UNSIGNED_BYTE,s.type,this.dynamicStride*4,s.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var s=this.staticProperties[i];e.addAttribute(s.attributeName,this.staticBuffer,0,s.type===ye.UNSIGNED_BYTE,s.type,this.staticStride*4,s.offset*4)}},t.prototype.uploadDynamic=function(e,r,i){for(var s=0;s<this.dynamicProperties.length;s++){var o=this.dynamicProperties[s];o.uploadFunction(e,r,i,o.type===ye.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,i){for(var s=0;s<this.staticProperties.length;s++){var o=this.staticProperties[s];o.uploadFunction(e,r,i,o.type===ye.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Qb=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Kb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Cd=function(t){Ed(e,t);function e(r){var i=t.call(this,r)||this;return i.shader=null,i.properties=null,i.tempMatrix=new wr,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ye.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=an.from(Kb,Qb,{}),i.state=wn.for2d(),i}return e.prototype.render=function(r){var i=r.children,s=r._maxSize,o=r._batchSize,h=this.renderer,u=i.length;if(u!==0){u>s&&!r.autoResize&&(u=s);var c=r._buffers;c||(c=r._buffers=this.generateBuffers(r));var _=i[0]._texture.baseTexture,y=_.alphaMode>0;this.state.blendMode=Qh(r.blendMode,y),h.state.set(this.state);var w=h.gl,b=r.worldTransform.copyTo(this.tempMatrix);b.prepend(h.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=b.toArray(!0),this.shader.uniforms.uColor=Rf(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,y),this.shader.uniforms.uSampler=_,this.renderer.shader.bind(this.shader);for(var E=!1,T=0,P=0;T<u;T+=o,P+=1){var O=u-T;O>o&&(O=o),P>=c.length&&c.push(this._generateOneMoreBuffer(r));var H=c[P];H.uploadDynamic(i,T,O);var Y=r._bufferUpdateIDs[P]||0;E=E||H._updateID<Y,E&&(H._updateID=r._updateID,H.uploadStatic(i,T,O)),h.geometry.bind(H.geometry),w.drawElements(w.TRIANGLES,O*6,w.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var i=[],s=r._maxSize,o=r._batchSize,h=r._properties,u=0;u<s;u+=o)i.push(new Id(this.properties,h,o));return i},e.prototype._generateOneMoreBuffer=function(r){var i=r._batchSize,s=r._properties;return new Id(this.properties,s,i)},e.prototype.uploadVertices=function(r,i,s,o,h,u){for(var c=0,_=0,y=0,w=0,b=0;b<s;++b){var E=r[i+b],T=E._texture,P=E.scale.x,O=E.scale.y,H=T.trim,Y=T.orig;H?(_=H.x-E.anchor.x*Y.width,c=_+H.width,w=H.y-E.anchor.y*Y.height,y=w+H.height):(c=Y.width*(1-E.anchor.x),_=Y.width*-E.anchor.x,y=Y.height*(1-E.anchor.y),w=Y.height*-E.anchor.y),o[u]=_*P,o[u+1]=w*O,o[u+h]=c*P,o[u+h+1]=w*O,o[u+h*2]=c*P,o[u+h*2+1]=y*O,o[u+h*3]=_*P,o[u+h*3+1]=y*O,u+=h*4}},e.prototype.uploadPosition=function(r,i,s,o,h,u){for(var c=0;c<s;c++){var _=r[i+c].position;o[u]=_.x,o[u+1]=_.y,o[u+h]=_.x,o[u+h+1]=_.y,o[u+h*2]=_.x,o[u+h*2+1]=_.y,o[u+h*3]=_.x,o[u+h*3+1]=_.y,u+=h*4}},e.prototype.uploadRotation=function(r,i,s,o,h,u){for(var c=0;c<s;c++){var _=r[i+c].rotation;o[u]=_,o[u+h]=_,o[u+h*2]=_,o[u+h*3]=_,u+=h*4}},e.prototype.uploadUvs=function(r,i,s,o,h,u){for(var c=0;c<s;++c){var _=r[i+c]._texture._uvs;_?(o[u]=_.x0,o[u+1]=_.y0,o[u+h]=_.x1,o[u+h+1]=_.y1,o[u+h*2]=_.x2,o[u+h*2+1]=_.y2,o[u+h*3]=_.x3,o[u+h*3+1]=_.y3,u+=h*4):(o[u]=0,o[u+1]=0,o[u+h]=0,o[u+h+1]=0,o[u+h*2]=0,o[u+h*2+1]=0,o[u+h*3]=0,o[u+h*3+1]=0,u+=h*4)}},e.prototype.uploadTint=function(r,i,s,o,h,u){for(var c=0;c<s;++c){var _=r[i+c],y=_._texture.baseTexture.alphaMode>0,w=_.alpha,b=w<1&&y?pa(_._tintRGB,w):_._tintRGB+(w*255<<24);o[u]=b,o[u+h]=b,o[u+h*2]=b,o[u+h*3]=b,u+=h*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:ar.RendererPlugin},e}(_o);/*!
 * @pixi/graphics - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fn;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(fn||(fn={}));var cn;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(cn||(cn={}));var Is={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},lu=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Fe.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Fe.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var uu=function(t,e){return uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},uu(t,e)};function fu(t,e){uu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function $d(t,e){var r,i;e===void 0&&(e=!1);var s=t.length;if(!(s<6)){for(var o=0,h=0,u=t[s-2],c=t[s-1];h<s;h+=2){var _=t[h],y=t[h+1];o+=(_-u)*(y+c),u=_,c=y}if(!e&&o>0||e&&o<=0)for(var w=s/2,h=w+w%2;h<s;h+=2){var b=s-h-2,E=s-h-1,T=h,P=h+1;r=[t[T],t[b]],t[b]=r[0],t[T]=r[1],i=[t[P],t[E]],t[E]=i[0],t[P]=i[1]}}}var cu={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,s=e.points,o=e.indices;if(r.length>=6){$d(r,!1);for(var h=[],u=0;u<i.length;u++){var c=i[u];$d(c.points,!0),h.push(r.length/2),r=r.concat(c.points)}var _=xs(r,h,2);if(!_)return;for(var y=s.length/2,u=0;u<_.length;u+=3)o.push(_[u]+y),o.push(_[u+1]+y),o.push(_[u+2]+y);for(var u=0;u<r.length;u++)s.push(r[u])}}},To={build:function(t){var e=t.points,r,i,s,o,h,u;if(t.type===Xr.CIRC){var c=t.shape;r=c.x,i=c.y,h=u=c.radius,s=o=0}else if(t.type===Xr.ELIP){var _=t.shape;r=_.x,i=_.y,h=_.width,u=_.height,s=o=0}else{var y=t.shape,w=y.width/2,b=y.height/2;r=y.x+w,i=y.y+b,h=u=Math.max(0,Math.min(y.radius,Math.min(w,b))),s=w-h,o=b-u}if(!(h>=0&&u>=0&&s>=0&&o>=0)){e.length=0;return}var E=Math.ceil(2.3*Math.sqrt(h+u)),T=E*8+(s?4:0)+(o?4:0);if(e.length=T,T!==0){if(E===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=i+o,e[2]=e[4]=r-s,e[5]=e[7]=i-o;return}var P=0,O=E*4+(s?2:0)+2,H=O,Y=T;{var J=s+h,it=o,st=r+J,K=r-J,At=i+it;if(e[P++]=st,e[P++]=At,e[--O]=At,e[--O]=K,o){var Tt=i-it;e[H++]=K,e[H++]=Tt,e[--Y]=Tt,e[--Y]=st}}for(var dt=1;dt<E;dt++){var Et=Math.PI/2*(dt/E),J=s+Math.cos(Et)*h,it=o+Math.sin(Et)*u,st=r+J,K=r-J,At=i+it,Tt=i-it;e[P++]=st,e[P++]=At,e[--O]=At,e[--O]=K,e[H++]=K,e[H++]=Tt,e[--Y]=Tt,e[--Y]=st}{var J=s,it=o+u,st=r+J,K=r-J,At=i+it,Tt=i-it;e[P++]=st,e[P++]=At,e[--Y]=Tt,e[--Y]=st,s&&(e[P++]=K,e[P++]=At,e[--Y]=Tt,e[--Y]=K)}}},triangulate:function(t,e){var r=t.points,i=e.points,s=e.indices;if(r.length!==0){var o=i.length/2,h=o,u,c;if(t.type!==Xr.RREC){var _=t.shape;u=_.x,c=_.y}else{var y=t.shape;u=y.x+y.width/2,c=y.y+y.height/2}var w=t.matrix;i.push(t.matrix?w.a*u+w.c*c+w.tx:u,t.matrix?w.b*u+w.d*c+w.ty:c),o++,i.push(r[0],r[1]);for(var b=2;b<r.length;b+=2)i.push(r[b],r[b+1]),s.push(o++,h,o);s.push(h+1,h,o)}}},Rd={build:function(t){var e=t.shape,r=e.x,i=e.y,s=e.width,o=e.height,h=t.points;h.length=0,h.push(r,i,r+s,i,r+s,i+o,r,i+o)},triangulate:function(t,e){var r=t.points,i=e.points,s=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}};function Cs(t,e,r){var i=e-t;return t+i*r}function ja(t,e,r,i,s,o,h){h===void 0&&(h=[]);for(var u=20,c=h,_=0,y=0,w=0,b=0,E=0,T=0,P=0,O=0;P<=u;++P)O=P/u,_=Cs(t,r,O),y=Cs(e,i,O),w=Cs(r,s,O),b=Cs(i,o,O),E=Cs(_,w,O),T=Cs(y,b,O),!(P===0&&c[c.length-2]===E&&c[c.length-1]===T)&&c.push(E,T);return c}var Sd={build:function(t){if(wo.nextRoundedRectBehavior){To.build(t);return}var e=t.shape,r=t.points,i=e.x,s=e.y,o=e.width,h=e.height,u=Math.max(0,Math.min(e.radius,Math.min(o,h)/2));r.length=0,u?(ja(i,s+u,i,s,i+u,s,r),ja(i+o-u,s,i+o,s,i+o,s+u,r),ja(i+o,s+h-u,i+o,s+h,i+o-u,s+h,r),ja(i+u,s+h,i,s+h,i,s+h-u,r)):r.push(i,s,i+o,s,i+o,s+h,i,s+h)},triangulate:function(t,e){if(wo.nextRoundedRectBehavior){To.triangulate(t,e);return}for(var r=t.points,i=e.points,s=e.indices,o=i.length/2,h=xs(r,null,2),u=0,c=h.length;u<c;u+=3)s.push(h[u]+o),s.push(h[u+1]+o),s.push(h[u+2]+o);for(var u=0,c=r.length;u<c;u++)i.push(r[u],r[++u])}};function Nd(t,e,r,i,s,o,h,u){var c=t-r*s,_=e-i*s,y=t+r*o,w=e+i*o,b,E;h?(b=i,E=-r):(b=-i,E=r);var T=c+b,P=_+E,O=y+b,H=w+E;return u.push(T,P),u.push(O,H),2}function $s(t,e,r,i,s,o,h,u){var c=r-t,_=i-e,y=Math.atan2(c,_),w=Math.atan2(s-t,o-e);u&&y<w?y+=Math.PI*2:!u&&y>w&&(w+=Math.PI*2);var b=y,E=w-y,T=Math.abs(E),P=Math.sqrt(c*c+_*_),O=(15*T*Math.sqrt(P)/Math.PI>>0)+1,H=E/O;if(b+=H,u){h.push(t,e),h.push(r,i);for(var Y=1,J=b;Y<O;Y++,J+=H)h.push(t,e),h.push(t+Math.sin(J)*P,e+Math.cos(J)*P);h.push(t,e),h.push(s,o)}else{h.push(r,i),h.push(t,e);for(var Y=1,J=b;Y<O;Y++,J+=H)h.push(t+Math.sin(J)*P,e+Math.cos(J)*P),h.push(t,e);h.push(s,o),h.push(t,e)}return O*2}function tx(t,e){var r=t.shape,i=t.points||r.points.slice(),s=e.closePointEps;if(i.length!==0){var o=t.lineStyle,h=new dr(i[0],i[1]),u=new dr(i[i.length-2],i[i.length-1]),c=r.type!==Xr.POLY||r.closeStroke,_=Math.abs(h.x-u.x)<s&&Math.abs(h.y-u.y)<s;if(c){i=i.slice(),_&&(i.pop(),i.pop(),u.set(i[i.length-2],i[i.length-1]));var y=(h.x+u.x)*.5,w=(u.y+h.y)*.5;i.unshift(y,w),i.push(y,w)}var b=e.points,E=i.length/2,T=i.length,P=b.length/2,O=o.width/2,H=O*O,Y=o.miterLimit*o.miterLimit,J=i[0],it=i[1],st=i[2],K=i[3],At=0,Tt=0,dt=-(it-K),Et=J-st,Rt=0,Ft=0,ne=Math.sqrt(dt*dt+Et*Et);dt/=ne,Et/=ne,dt*=O,Et*=O;var ae=o.alignment,zt=(1-ae)*2,Vt=ae*2;c||(o.cap===cn.ROUND?T+=$s(J-dt*(zt-Vt)*.5,it-Et*(zt-Vt)*.5,J-dt*zt,it-Et*zt,J+dt*Vt,it+Et*Vt,b,!0)+2:o.cap===cn.SQUARE&&(T+=Nd(J,it,dt,Et,zt,Vt,!0,b))),b.push(J-dt*zt,it-Et*zt),b.push(J+dt*Vt,it+Et*Vt);for(var he=1;he<E-1;++he){J=i[(he-1)*2],it=i[(he-1)*2+1],st=i[he*2],K=i[he*2+1],At=i[(he+1)*2],Tt=i[(he+1)*2+1],dt=-(it-K),Et=J-st,ne=Math.sqrt(dt*dt+Et*Et),dt/=ne,Et/=ne,dt*=O,Et*=O,Rt=-(K-Tt),Ft=st-At,ne=Math.sqrt(Rt*Rt+Ft*Ft),Rt/=ne,Ft/=ne,Rt*=O,Ft*=O;var Kt=st-J,ve=it-K,at=st-At,bt=Tt-K,vt=ve*at-bt*Kt,le=vt<0;if(Math.abs(vt)<.1){b.push(st-dt*zt,K-Et*zt),b.push(st+dt*Vt,K+Et*Vt);continue}var Gt=(-dt+J)*(-Et+K)-(-dt+st)*(-Et+it),se=(-Rt+At)*(-Ft+K)-(-Rt+st)*(-Ft+Tt),Pe=(Kt*se-at*Gt)/vt,Zt=(bt*Gt-ve*se)/vt,ke=(Pe-st)*(Pe-st)+(Zt-K)*(Zt-K),_e=st+(Pe-st)*zt,fe=K+(Zt-K)*zt,ue=st-(Pe-st)*Vt,me=K-(Zt-K)*Vt,Nt=Math.min(Kt*Kt+ve*ve,at*at+bt*bt),Ge=le?zt:Vt,Ke=Nt+Ge*Ge*H,ce=ke<=Ke;ce?o.join===fn.BEVEL||ke/H>Y?(le?(b.push(_e,fe),b.push(st+dt*Vt,K+Et*Vt),b.push(_e,fe),b.push(st+Rt*Vt,K+Ft*Vt)):(b.push(st-dt*zt,K-Et*zt),b.push(ue,me),b.push(st-Rt*zt,K-Ft*zt),b.push(ue,me)),T+=2):o.join===fn.ROUND?le?(b.push(_e,fe),b.push(st+dt*Vt,K+Et*Vt),T+=$s(st,K,st+dt*Vt,K+Et*Vt,st+Rt*Vt,K+Ft*Vt,b,!0)+4,b.push(_e,fe),b.push(st+Rt*Vt,K+Ft*Vt)):(b.push(st-dt*zt,K-Et*zt),b.push(ue,me),T+=$s(st,K,st-dt*zt,K-Et*zt,st-Rt*zt,K-Ft*zt,b,!1)+4,b.push(st-Rt*zt,K-Ft*zt),b.push(ue,me)):(b.push(_e,fe),b.push(ue,me)):(b.push(st-dt*zt,K-Et*zt),b.push(st+dt*Vt,K+Et*Vt),o.join===fn.ROUND?le?T+=$s(st,K,st+dt*Vt,K+Et*Vt,st+Rt*Vt,K+Ft*Vt,b,!0)+2:T+=$s(st,K,st-dt*zt,K-Et*zt,st-Rt*zt,K-Ft*zt,b,!1)+2:o.join===fn.MITER&&ke/H<=Y&&(le?(b.push(ue,me),b.push(ue,me)):(b.push(_e,fe),b.push(_e,fe)),T+=2),b.push(st-Rt*zt,K-Ft*zt),b.push(st+Rt*Vt,K+Ft*Vt),T+=2)}J=i[(E-2)*2],it=i[(E-2)*2+1],st=i[(E-1)*2],K=i[(E-1)*2+1],dt=-(it-K),Et=J-st,ne=Math.sqrt(dt*dt+Et*Et),dt/=ne,Et/=ne,dt*=O,Et*=O,b.push(st-dt*zt,K-Et*zt),b.push(st+dt*Vt,K+Et*Vt),c||(o.cap===cn.ROUND?T+=$s(st-dt*(zt-Vt)*.5,K-Et*(zt-Vt)*.5,st-dt*zt,K-Et*zt,st+dt*Vt,K+Et*Vt,b,!1)+2:o.cap===cn.SQUARE&&(T+=Nd(st,K,dt,Et,zt,Vt,!1,b)));for(var Vr=e.indices,Br=Is.epsilon*Is.epsilon,he=P;he<T+P-2;++he)J=b[he*2],it=b[he*2+1],st=b[(he+1)*2],K=b[(he+1)*2+1],At=b[(he+2)*2],Tt=b[(he+2)*2+1],!(Math.abs(J*(K-Tt)+st*(Tt-it)+At*(it-K))<Br)&&Vr.push(he,he+1,he+2)}}function ex(t,e){var r=0,i=t.shape,s=t.points||i.points,o=i.type!==Xr.POLY||i.closeStroke;if(s.length!==0){var h=e.points,u=e.indices,c=s.length/2,_=h.length/2,y=_;for(h.push(s[0],s[1]),r=1;r<c;r++)h.push(s[r*2],s[r*2+1]),u.push(y,y+1),y++;o&&u.push(y,_)}}function du(t,e){t.lineStyle.native?ex(t,e):tx(t,e)}var _u=function(){function t(){}return t.curveTo=function(e,r,i,s,o,h){var u=h[h.length-2],c=h[h.length-1],_=c-r,y=u-e,w=s-r,b=i-e,E=Math.abs(_*b-y*w);if(E<1e-8||o===0)return(h[h.length-2]!==e||h[h.length-1]!==r)&&h.push(e,r),null;var T=_*_+y*y,P=w*w+b*b,O=_*w+y*b,H=o*Math.sqrt(T)/E,Y=o*Math.sqrt(P)/E,J=H*O/T,it=Y*O/P,st=H*b+Y*y,K=H*w+Y*_,At=y*(Y+J),Tt=_*(Y+J),dt=b*(H+it),Et=w*(H+it),Rt=Math.atan2(Tt-K,At-st),Ft=Math.atan2(Et-K,dt-st);return{cx:st+e,cy:K+r,radius:o,startAngle:Rt,endAngle:Ft,anticlockwise:y*w>b*_}},t.arc=function(e,r,i,s,o,h,u,c,_){for(var y=u-h,w=Is._segmentsCount(Math.abs(y)*o,Math.ceil(Math.abs(y)/ho)*40),b=y/(w*2),E=b*2,T=Math.cos(b),P=Math.sin(b),O=w-1,H=O%1/O,Y=0;Y<=O;++Y){var J=Y+H*Y,it=b+h+E*J,st=Math.cos(it),K=-Math.sin(it);_.push((T*st+P*K)*o+i,(T*-K+P*st)*o+s)}},t}(),Ld=function(){function t(){}return t.curveLength=function(e,r,i,s,o,h,u,c){for(var _=10,y=0,w=0,b=0,E=0,T=0,P=0,O=0,H=0,Y=0,J=0,it=0,st=e,K=r,At=1;At<=_;++At)w=At/_,b=w*w,E=b*w,T=1-w,P=T*T,O=P*T,H=O*e+3*P*w*i+3*T*b*o+E*u,Y=O*r+3*P*w*s+3*T*b*h+E*c,J=st-H,it=K-Y,st=H,K=Y,y+=Math.sqrt(J*J+it*it);return y},t.curveTo=function(e,r,i,s,o,h,u){var c=u[u.length-2],_=u[u.length-1];u.length-=2;var y=Is._segmentsCount(t.curveLength(c,_,e,r,i,s,o,h)),w=0,b=0,E=0,T=0,P=0;u.push(c,_);for(var O=1,H=0;O<=y;++O)H=O/y,w=1-H,b=w*w,E=b*w,T=H*H,P=T*H,u.push(E*c+3*b*H*e+3*w*T*i+P*o,E*_+3*b*H*r+3*w*T*s+P*h)},t}(),Od=function(){function t(){}return t.curveLength=function(e,r,i,s,o,h){var u=e-2*i+o,c=r-2*s+h,_=2*i-2*e,y=2*s-2*r,w=4*(u*u+c*c),b=4*(u*_+c*y),E=_*_+y*y,T=2*Math.sqrt(w+b+E),P=Math.sqrt(w),O=2*w*P,H=2*Math.sqrt(E),Y=b/P;return(O*T+P*b*(T-H)+(4*E*w-b*b)*Math.log((2*P+Y+T)/(Y+H)))/(4*O)},t.curveTo=function(e,r,i,s,o){for(var h=o[o.length-2],u=o[o.length-1],c=Is._segmentsCount(t.curveLength(h,u,e,r,i,s)),_=0,y=0,w=1;w<=c;++w){var b=w/c;_=h+(e-h)*b,y=u+(r-u)*b,o.push(_+(e+(i-e)*b-_)*b,y+(r+(s-r)*b-y)*b)}},t}(),Fd=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,i){this.reset(),this.style=e,this.start=r,this.attribStart=i},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Wn,Wa=(Wn={},Wn[Xr.POLY]=cu,Wn[Xr.CIRC]=To,Wn[Xr.ELIP]=To,Wn[Xr.RECT]=Rd,Wn[Xr.RREC]=Sd,Wn),pu=[],Ao=[],vu=function(){function t(e,r,i,s){r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=r,this.matrix=s,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Rs=new dr,Md=function(t){fu(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new uo,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Ao.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var i=this.batches[r];i.reset(),pu.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,i,s,o){i===void 0&&(i=null),s===void 0&&(s=null),o===void 0&&(o=null);var h=new vu(r,i,s,o);return this.graphicsData.push(h),this.dirty++,this},e.prototype.drawHole=function(r,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var s=new vu(r,null,null,i),o=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=o.lineStyle,o.holes.push(s),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var i=this.graphicsData,s=0;s<i.length;++s){var o=i[s];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(r,Rs):Rs.copyFrom(r),o.shape.contains(Rs.x,Rs.y))){var h=!1;if(o.holes)for(var u=0;u<o.holes.length;u++){var c=o.holes[u];if(c.shape.contains(Rs.x,Rs.y)){h=!0;break}}if(!h)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,i=this.graphicsData,s=null,o=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],o=s.style);for(var h=this.shapeIndex;h<i.length;h++){this.shapeIndex++;var u=i[h],c=u.fillStyle,_=u.lineStyle,y=Wa[u.type];y.build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||_.visible)&&this.processHoles(u.holes);for(var w=0;w<2;w++){var b=w===0?c:_;if(b.visible){var E=b.texture.baseTexture,T=this.indices.length,P=this.points.length/2;E.wrapMode=Xi.REPEAT,w===0?this.processFill(u):this.processLine(u);var O=this.points.length/2-P;O!==0&&(s&&!this._compareStyles(o,b)&&(s.end(T,P),s=null),s||(s=pu.pop()||new Fd,s.begin(b,T,P),this.batches.push(s),o=b),this.addUvs(this.points,r,b.texture,P,O,b.matrix))}}}var H=this.indices.length,Y=this.points.length/2;if(s&&s.end(H,Y),this.batches.length===0){this.batchable=!0;return}var J=Y>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&J===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=J?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,i){return!(!r||!i||r.texture.baseTexture!==i.texture.baseTexture||r.color+r.alpha!==i.color+i.alpha||!!r.native!=!!i.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,i=this.graphicsData.length;r<i;r++){var s=this.graphicsData[r],o=s.fillStyle,h=s.lineStyle;if(o&&!o.texture.baseTexture.valid||h&&!h.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,i=0,s=r.length;i<s;i++)for(var o=r[i],h=0;h<o.size;h++){var u=o.start+h;this.indicesUint16[u]=this.indicesUint16[u]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,i=0;i<r.length;i++)if(r[i].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++Ye._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Ao.push(this.drawCalls[i]);this.drawCalls.length=0;var s=this.colors,o=this.textureIds,h=Ao.pop();h||(h=new La,h.texArray=new Oa),h.texArray.count=0,h.start=0,h.size=0,h.type=di.TRIANGLES;var u=0,c=null,_=0,y=!1,w=di.TRIANGLES,b=0;this.drawCalls.push(h);for(var i=0;i<this.batches.length;i++){var E=this.batches[i],T=8,P=E.style,O=P.texture.baseTexture;y!==!!P.native&&(y=!!P.native,w=y?di.LINES:di.TRIANGLES,c=null,u=T,r++),c!==O&&(c=O,O._batchEnabled!==r&&(u===T&&(r++,u=0,h.size>0&&(h=Ao.pop(),h||(h=new La,h.texArray=new Oa),this.drawCalls.push(h)),h.start=b,h.size=0,h.texArray.count=0,h.type=w),O.touched=1,O._batchEnabled=r,O._batchLocation=u,O.wrapMode=Xi.REPEAT,h.texArray.elements[h.texArray.count++]=O,u++)),h.size+=E.size,b+=E.size,_=O._batchLocation,this.addColors(s,P.color,P.alpha,E.attribSize,E.attribStart),this.addTextureIds(o,_,E.attribSize,E.attribStart)}Ye._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,i=this.uvs,s=this.colors,o=this.textureIds,h=new ArrayBuffer(r.length*3*4),u=new Float32Array(h),c=new Uint32Array(h),_=0,y=0;y<r.length/2;y++)u[_++]=r[y*2],u[_++]=r[y*2+1],u[_++]=i[y*2],u[_++]=i[y*2+1],c[_++]=s[y],u[_++]=o[y];this._buffer.update(h),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)cu.triangulate(r,this);else{var i=Wa[r.type];i.triangulate(r,this)}},e.prototype.processLine=function(r){du(r,this);for(var i=0;i<r.holes.length;i++)du(r.holes[i],this)},e.prototype.processHoles=function(r){for(var i=0;i<r.length;i++){var s=r[i],o=Wa[s.type];o.build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,i){for(var s=0;s<r.length/2;s++){var o=r[s*2],h=r[s*2+1];r[s*2]=i.a*o+i.c*h+i.tx,r[s*2+1]=i.b*o+i.d*h+i.ty}},e.prototype.addColors=function(r,i,s,o,h){h===void 0&&(h=0);var u=(i>>16)+(i&65280)+((i&255)<<16),c=pa(u,s);r.length=Math.max(r.length,h+o);for(var _=0;_<o;_++)r[h+_]=c},e.prototype.addTextureIds=function(r,i,s,o){o===void 0&&(o=0),r.length=Math.max(r.length,o+s);for(var h=0;h<s;h++)r[o+h]=i},e.prototype.addUvs=function(r,i,s,o,h,u){u===void 0&&(u=null);for(var c=0,_=i.length,y=s.frame;c<h;){var w=r[(o+c)*2],b=r[(o+c)*2+1];if(u){var E=u.a*w+u.c*b+u.tx;b=u.b*w+u.d*b+u.ty,w=E}c++,i.push(w/y.width,b/y.height)}var T=s.baseTexture;(y.width<T.width||y.height<T.height)&&this.adjustUvs(i,s,_,h)},e.prototype.adjustUvs=function(r,i,s,o){for(var h=i.baseTexture,u=1e-6,c=s+o*2,_=i.frame,y=_.width/h.width,w=_.height/h.height,b=_.x/_.width,E=_.y/_.height,T=Math.floor(r[s]+u),P=Math.floor(r[s+1]+u),O=s+2;O<c;O+=2)T=Math.min(T,Math.floor(r[O]+u)),P=Math.min(P,Math.floor(r[O+1]+u));b-=T,E-=P;for(var O=s;O<c;O+=2)r[O]=(r[O]+b)*y,r[O+1]=(r[O+1]+E)*w},e.BATCHABLE_SIZE=100,e}(Yl),Ud=function(t){fu(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=cn.BUTT,r.join=fn.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(lu),rx=new Float32Array(3),mu={},wo=function(t){fu(e,t);function e(r){r===void 0&&(r=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new lu,i._lineStyle=new Ud,i._matrix=null,i._holeMode=!1,i.state=wn.for2d(),i._geometry=r||new Md,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=Te.NORMAL,i}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,i,s,o,h){return r===void 0&&(r=null),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=.5),h===void 0&&(h=!1),typeof r=="number"&&(r={width:r,color:i,alpha:s,alignment:o,native:h}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Fe.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:cn.BUTT,join:fn.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var i=r.width>0&&r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:i},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new lo,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[i-2],r[i-1]))}else this.currentPath=new lo,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,i){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(r,i){this.currentPath||this.moveTo(0,0);var s=this.currentPath.points,o=s[s.length-2],h=s[s.length-1];return(o!==r||h!==i)&&s.push(r,i),this},e.prototype._initCurve=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,i]):this.moveTo(r,i)},e.prototype.quadraticCurveTo=function(r,i,s,o){this._initCurve();var h=this.currentPath.points;return h.length===0&&this.moveTo(0,0),Od.curveTo(r,i,s,o,h),this},e.prototype.bezierCurveTo=function(r,i,s,o,h,u){return this._initCurve(),Ld.curveTo(r,i,s,o,h,u,this.currentPath.points),this},e.prototype.arcTo=function(r,i,s,o,h){this._initCurve(r,i);var u=this.currentPath.points,c=_u.curveTo(r,i,s,o,h,u);if(c){var _=c.cx,y=c.cy,w=c.radius,b=c.startAngle,E=c.endAngle,T=c.anticlockwise;this.arc(_,y,w,b,E,T)}return this},e.prototype.arc=function(r,i,s,o,h,u){if(u===void 0&&(u=!1),o===h)return this;!u&&h<=o?h+=ho:u&&o<=h&&(o+=ho);var c=h-o;if(c===0)return this;var _=r+Math.cos(o)*s,y=i+Math.sin(o)*s,w=this._geometry.closePointEps,b=this.currentPath?this.currentPath.points:null;if(b){var E=Math.abs(b[b.length-2]-_),T=Math.abs(b[b.length-1]-y);E<w&&T<w||b.push(_,y)}else this.moveTo(_,y),b=this.currentPath.points;return _u.arc(_,y,r,i,s,o,h,u,b),this},e.prototype.beginFill=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=1),this.beginTextureFill({texture:Fe.WHITE,color:r,alpha:i})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:Fe.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var i=r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:i},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,i,s,o){return this.drawShape(new We(r,i,s,o))},e.prototype.drawRoundedRect=function(r,i,s,o,h){return this.drawShape(new Bf(r,i,s,o,h))},e.prototype.drawCircle=function(r,i,s){return this.drawShape(new Gf(r,i,s))},e.prototype.drawEllipse=function(r,i,s,o){return this.drawShape(new Df(r,i,s,o))},e.prototype.drawPolygon=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];var o,h=!0,u=i[0];u.points?(h=u.closeStroke,o=u.points):Array.isArray(i[0])?o=i[0]:o=i;var c=new lo(o);return c.closeStroke=h,this.drawShape(c),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Xr.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,i=this.blendMode,s=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(r.points);for(var o=0;o<s;o++){var h=r.batches[o],u=h.style.color,c=new Float32Array(this.vertexData.buffer,h.attribStart*4*2,h.attribSize*2),_=new Float32Array(r.uvsFloat32.buffer,h.attribStart*4*2,h.attribSize*2),y=new Uint16Array(r.indicesUint16.buffer,h.start*2,h.size),w={vertexData:c,blendMode:i,indices:y,uvs:_,_batchRGB:Fn(u),_tintRGB:u,_texture:h.style.texture,alpha:h.style.alpha,worldAlpha:1};this.batches[o]=w}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,s=this.batches.length;i<s;i++){var o=this.batches[i];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(r){var i=this._resolveDirectShader(r),s=this._geometry,o=this.tint,h=this.worldAlpha,u=i.uniforms,c=s.drawCalls;u.translationMatrix=this.transform.worldTransform,u.tint[0]=(o>>16&255)/255*h,u.tint[1]=(o>>8&255)/255*h,u.tint[2]=(o&255)/255*h,u.tint[3]=h,r.shader.bind(i),r.geometry.bind(s,i),r.state.set(this.state);for(var _=0,y=c.length;_<y;_++)this._renderDrawCallDirect(r,s.drawCalls[_])},e.prototype._renderDrawCallDirect=function(r,i){for(var s=i.texArray,o=i.type,h=i.size,u=i.start,c=s.count,_=0;_<c;_++)r.texture.bind(s.elements[_],_);r.geometry.draw(o,h,u)},e.prototype._resolveDirectShader=function(r){var i=this.shader,s=this.pluginName;if(!i){if(!mu[s]){for(var o=r.plugins[s].MAX_TEXTURES,h=new Int32Array(o),u=0;u<o;u++)h[u]=u;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new wr,default:An.from({uSamplers:h},!0)},_=r.plugins[s]._shader.program;mu[s]=new an(_,c)}i=mu[s]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var i=r.bounds,s=i.minX,o=i.minY,h=i.maxX,u=i.maxY;this._bounds.addFrame(this.transform,s,o,h,u)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=Fn(this.tint,rx),i=0;i<this.batches.length;i++){var s=this.batches[i],o=s._batchRGB,h=r[0]*o[0]*255,u=r[1]*o[1]*255,c=r[2]*o[2]*255,_=(h<<16)+(u<<8)+(c|0);s._tintRGB=(_>>16)+(_&65280)+((_&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var i=this.transform.worldTransform,s=i.a,o=i.b,h=i.c,u=i.d,c=i.tx,_=i.ty,y=this._geometry.points,w=this.vertexData,b=0,E=0;E<y.length;E+=2){var T=y[E],P=y[E+1];w[b++]=s*T+h*P+c,w[b++]=u*P+o*T+_}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new dr,e}(vi),ix={buildPoly:cu,buildCircle:To,buildRectangle:Rd,buildRoundedRectangle:Sd,buildLine:du,ArcUtils:_u,BezierUtils:Ld,QuadraticUtils:Od,BatchPart:Fd,FILL_COMMANDS:Wa,BATCH_POOL:pu,DRAW_CALL_POOL:Ao};/*!
 * @pixi/sprite - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var gu=function(t,e){return gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},gu(t,e)};function nx(t,e){gu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Po=new dr,sx=new Uint16Array([0,1,2,0,2,3]),Ss=function(t){nx(e,t);function e(r){var i=t.call(this)||this;return i._anchor=new xn(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=Te.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||Fe.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=sx,i.pluginName="batch",i.isSprite=!0,i._roundPixels=te.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Un(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Un(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,s=i.a,o=i.b,h=i.c,u=i.d,c=i.tx,_=i.ty,y=this.vertexData,w=r.trim,b=r.orig,E=this._anchor,T=0,P=0,O=0,H=0;if(w?(P=w.x-E._x*b.width,T=P+w.width,H=w.y-E._y*b.height,O=H+w.height):(P=-E._x*b.width,T=P+b.width,H=-E._y*b.height,O=H+b.height),y[0]=s*P+h*H+c,y[1]=u*H+o*P+_,y[2]=s*T+h*H+c,y[3]=u*H+o*T+_,y[4]=s*T+h*O+c,y[5]=u*O+o*T+_,y[6]=s*P+h*O+c,y[7]=u*O+o*P+_,this._roundPixels)for(var Y=te.RESOLUTION,J=0;J<y.length;++J)y[J]=Math.round((y[J]*Y|0)/Y)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,s=r.orig,o=this._anchor,h=this.transform.worldTransform,u=h.a,c=h.b,_=h.c,y=h.d,w=h.tx,b=h.ty,E=-o._x*s.width,T=E+s.width,P=-o._y*s.height,O=P+s.height;i[0]=u*E+_*P+w,i[1]=y*P+c*E+b,i[2]=u*T+_*P+w,i[3]=y*P+c*T+b,i[4]=u*T+_*O+w,i[5]=y*O+c*T+b,i[6]=u*E+_*O+w,i[7]=y*O+c*E+b},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new uo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new We),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Po);var i=this._texture.orig.width,s=this._texture.orig.height,o=-i*this.anchor.x,h=0;return Po.x>=o&&Po.x<o+i&&(h=-s*this.anchor.y,Po.y>=h&&Po.y<h+s)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var s=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!s)}this._texture=null},e.from=function(r,i){var s=r instanceof Fe?r:Fe.from(r,i);return new e(s)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=Un(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=Un(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Fe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(vi);/*!
 * @pixi/text - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var yu=function(t,e){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},yu(t,e)};function ox(t,e){yu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ns;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ns||(Ns={}));var bu={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ns.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},ax=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Yn=function(){function t(e){this.styleID=0,this.reset(),Tu(this,e,e)}return t.prototype.clone=function(){var e={};return Tu(e,this,bu),new t(e)},t.prototype.reset=function(){Tu(this,bu,bu)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=xu(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=xu(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){hx(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=xu(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var i=r.length-1;i>=0;i--){var s=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&ax.indexOf(s)<0&&(s='"'+s+'"'),r[i]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function Gd(t){return typeof t=="number"?qh(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function xu(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Gd(t[e]);return t}else return Gd(t)}function hx(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Tu(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Oi=function(){function t(e,r,i,s,o,h,u,c,_){this.text=e,this.style=r,this.width=i,this.height=s,this.lines=o,this.lineWidths=h,this.lineHeight=u,this.maxLineWidth=c,this.fontProperties=_}return t.measureText=function(e,r,i,s){s===void 0&&(s=t._canvas),i=i==null?r.wordWrap:i;var o=r.toFontString(),h=t.measureFont(o);h.fontSize===0&&(h.fontSize=r.fontSize,h.ascent=r.fontSize);var u=s.getContext("2d");u.font=o;for(var c=i?t.wordWrap(e,r,s):e,_=c.split(/(?:\r\n|\r|\n)/),y=new Array(_.length),w=0,b=0;b<_.length;b++){var E=u.measureText(_[b]).width+(_[b].length-1)*r.letterSpacing;y[b]=E,w=Math.max(w,E)}var T=w+r.strokeThickness;r.dropShadow&&(T+=r.dropShadowDistance);var P=r.lineHeight||h.fontSize+r.strokeThickness,O=Math.max(P,h.fontSize+r.strokeThickness)+(_.length-1)*(P+r.leading);return r.dropShadow&&(O+=r.dropShadowDistance),new t(e,r,T,O,_,y,P+r.leading,w,h)},t.wordWrap=function(e,r,i){i===void 0&&(i=t._canvas);for(var s=i.getContext("2d"),o=0,h="",u="",c=Object.create(null),_=r.letterSpacing,y=r.whiteSpace,w=t.collapseSpaces(y),b=t.collapseNewlines(y),E=!w,T=r.wordWrapWidth+_,P=t.tokenize(e),O=0;O<P.length;O++){var H=P[O];if(t.isNewline(H)){if(!b){u+=t.addLine(h),E=!w,h="",o=0;continue}H=" "}if(w){var Y=t.isBreakingSpace(H),J=t.isBreakingSpace(h[h.length-1]);if(Y&&J)continue}var it=t.getFromCache(H,_,c,s);if(it>T)if(h!==""&&(u+=t.addLine(h),h="",o=0),t.canBreakWords(H,r.breakWords))for(var st=t.wordWrapSplit(H),K=0;K<st.length;K++){for(var At=st[K],Tt=1;st[K+Tt];){var dt=st[K+Tt],Et=At[At.length-1];if(!t.canBreakChars(Et,dt,H,K,r.breakWords))At+=dt;else break;Tt++}K+=At.length-1;var Rt=t.getFromCache(At,_,c,s);Rt+o>T&&(u+=t.addLine(h),E=!1,h="",o=0),h+=At,o+=Rt}else{h.length>0&&(u+=t.addLine(h),h="",o=0);var Ft=O===P.length-1;u+=t.addLine(H,!Ft),E=!1,h="",o=0}else it+o>T&&(E=!1,u+=t.addLine(h),h="",o=0),(h.length>0||!t.isBreakingSpace(H)||E)&&(h+=H,o+=it)}return u+=t.addLine(h,!1),u},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,i,s){var o=i[e];if(typeof o!="number"){var h=e.length*r;o=s.measureText(e).width+h,i[e]=o}return o},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var i=e[r];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],i="";if(typeof e!="string")return r;for(var s=0;s<e.length;s++){var o=e[s],h=e[s+1];if(t.isBreakingSpace(o,h)||t.isNewline(o)){i!==""&&(r.push(i),i=""),r.push(o);continue}i+=o}return i!==""&&r.push(i),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,i,s,o){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},i=t._canvas,s=t._context;s.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,h=Math.ceil(s.measureText(o).width),u=Math.ceil(s.measureText(t.BASELINE_SYMBOL).width),c=Math.ceil(t.HEIGHT_MULTIPLIER*u);u=u*t.BASELINE_MULTIPLIER|0,i.width=h,i.height=c,s.fillStyle="#f00",s.fillRect(0,0,h,c),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,u);var _=s.getImageData(0,0,h,c).data,y=_.length,w=h*4,b=0,E=0,T=!1;for(b=0;b<u;++b){for(var P=0;P<w;P+=4)if(_[E+P]!==255){T=!0;break}if(!T)E+=w;else break}for(r.ascent=u-b,E=y-w,T=!1,b=c;b>u;--b){for(var P=0;P<w;P+=4)if(_[E+P]!==255){T=!0;break}if(!T)E-=w;else break}return r.descent=b-u,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),i=r.getContext("2d");if(i&&i.measureText)return t.__canvas=r,r;e=te.ADAPTER.createCanvas()}catch(s){e=te.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Oi._fonts={},Oi.METRICS_STRING="|q",Oi.BASELINE_SYMBOL="M",Oi.BASELINE_MULTIPLIER=1.4,Oi.HEIGHT_MULTIPLIER=2,Oi._newlines=[10,13],Oi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var lx={texture:!0,children:!1,baseTexture:!0},Au=function(t){ox(e,t);function e(r,i,s){var o=this,h=!1;s||(s=te.ADAPTER.createCanvas(),h=!0),s.width=3,s.height=3;var u=Fe.from(s);return u.orig=new We,u.trim=new We,o=t.call(this,u)||this,o._ownCanvas=h,o.canvas=s,o.context=s.getContext("2d"),o._resolution=te.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=i,o.localStyleID=-1,o}return e.prototype.updateText=function(r){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var s=this.context,o=Oi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=o.width,u=o.height,c=o.lines,_=o.lineHeight,y=o.lineWidths,w=o.maxLineWidth,b=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+i.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var E,T,P=i.dropShadow?2:1,O=0;O<P;++O){var H=i.dropShadow&&O===0,Y=H?Math.ceil(Math.max(1,u)+i.padding*2):0,J=Y*this._resolution;if(H){s.fillStyle="black",s.strokeStyle="black";var it=i.dropShadowColor,st=Fn(typeof it=="number"?it:Zh(it)),K=i.dropShadowBlur*this._resolution,At=i.dropShadowDistance*this._resolution;s.shadowColor="rgba("+st[0]*255+","+st[1]*255+","+st[2]*255+","+i.dropShadowAlpha+")",s.shadowBlur=K,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*At,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*At+J}else s.fillStyle=this._generateFillStyle(i,c,o),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var Tt=(_-b.fontSize)/2;(!e.nextLineHeightBehavior||_-b.fontSize<0)&&(Tt=0);for(var dt=0;dt<c.length;dt++)E=i.strokeThickness/2,T=i.strokeThickness/2+dt*_+b.ascent+Tt,i.align==="right"?E+=w-y[dt]:i.align==="center"&&(E+=(w-y[dt])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(c[dt],E+i.padding,T+i.padding-Y,!0),i.fill&&this.drawLetterSpacing(c[dt],E+i.padding,T+i.padding-Y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,i,s,o){o===void 0&&(o=!1);var h=this._style,u=h.letterSpacing,c=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(u===0||c){c&&(this.context.letterSpacing=u,this.context.textLetterSpacing=u),o?this.context.strokeText(r,i,s):this.context.fillText(r,i,s);return}for(var _=i,y=Array.from?Array.from(r):r.split(""),w=this.context.measureText(r).width,b=0,E=0;E<y.length;++E){var T=y[E];o?this.context.strokeText(T,_,s):this.context.fillText(T,_,s);for(var P="",O=E+1;O<y.length;++O)P+=y[O];b=this.context.measureText(P).width,_+=w-b+u,w=b}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var i=Lf(r);i.data&&(r.width=i.width,r.height=i.height,this.context.putImageData(i.data,0,0))}var s=this._texture,o=this._style,h=o.trim?0:o.padding,u=s.baseTexture;s.trim.width=s._frame.width=r.width/this._resolution,s.trim.height=s._frame.height=r.height/this._resolution,s.trim.x=-h,s.trim.y=-h,s.orig.width=s._frame.width-h*2,s.orig.height=s._frame.height-h*2,this._onTextureUpdate(),u.setRealSize(r.width,r.height,this._resolution),s.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,i){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,i)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,i,s){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var h,u=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,_=this.canvas.width/this._resolution-u-c*2,y=this.canvas.height/this._resolution-u-c*2,w=o.slice(),b=r.fillGradientStops.slice();if(!b.length)for(var E=w.length+1,T=1;T<E;++T)b.push(T/E);if(w.unshift(o[0]),b.unshift(0),w.push(o[o.length-1]),b.push(1),r.fillGradientType===Ns.LINEAR_VERTICAL){h=this.context.createLinearGradient(_/2,c,_/2,y+c);for(var P=s.fontProperties.fontSize+r.strokeThickness,T=0;T<i.length;T++){var O=s.lineHeight*(T-1)+P,H=s.lineHeight*T,Y=H;T>0&&O>H&&(Y=(H+O)/2);var J=H+P,it=s.lineHeight*(T+1),st=J;T+1<i.length&&it<J&&(st=(J+it)/2);for(var K=(st-Y)/y,At=0;At<w.length;At++){var Tt=0;typeof b[At]=="number"?Tt=b[At]:Tt=At/w.length;var dt=Math.min(1,Math.max(0,Y/y+Tt*K));dt=Number(dt.toFixed(5)),h.addColorStop(dt,w[At])}}}else{h=this.context.createLinearGradient(c,y/2,_+c,y/2);for(var Et=w.length+1,Rt=1,T=0;T<w.length;T++){var Ft=void 0;typeof b[T]=="number"?Ft=b[T]:Ft=Rt/Et,h.addColorStop(Ft,w[T]),Rt++}}return h},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},lx,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var i=Un(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var i=Un(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Yn?this._style=r:this._style=new Yn(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Ss);/*!
 * @pixi/prepare - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var wu=function(t,e){return wu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},wu(t,e)};function ux(t,e){wu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Dd=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function fx(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Fe){var s=t._textures[i].baseTexture;e.indexOf(s)===-1&&(e.push(s),r=!0)}}return r}function cx(t,e){if(t.baseTexture instanceof Ye){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function dx(t,e){if(t._texture&&t._texture instanceof Fe){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function _x(t,e){return e instanceof Au?(e.updateText(!0),!0):!1}function px(t,e){if(e instanceof Yn){var r=e.toFontString();return Oi.measureFont(r),!0}return!1}function vx(t,e){if(t instanceof Au){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function mx(t,e){return t instanceof Yn?(e.indexOf(t)===-1&&e.push(t),!0):!1}var Bd=function(){function t(e){var r=this;this.limiter=new Dd(te.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(vx),this.registerFindHook(mx),this.registerFindHook(fx),this.registerFindHook(cx),this.registerFindHook(dx),this.registerUploadHook(_x),this.registerUploadHook(px)}return t.prototype.upload=function(e,r){var i=this;return typeof e=="function"&&(r=e,e=null),r&&ii("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(s){e&&i.add(e);var o=function(){r==null||r(),s()};i.queue.length?(i.completes.push(o),i.ticking||(i.ticking=!0,Hr.system.addOnce(i.tick,i,ji.UTILITY))):o()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Hr.system.addOnce(this.tick,this,ji.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var i=0,s=o.length;i<s;i++)o[i]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](e,this.queue);r++);if(e instanceof vi)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&Hr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function kd(t,e){return e instanceof Ye?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function gx(t,e){if(!(e instanceof wo))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,s=0;s<i.length;s++){var o=i[s].style.texture;o&&kd(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function yx(t,e){return t instanceof wo?(e.push(t),!0):!1}var Xd=function(t){ux(e,t);function e(r){var i=t.call(this,r)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(yx),i.registerUploadHook(kd),i.registerUploadHook(gx),i}return e.extension={name:"prepare",type:ar.RendererPlugin},e}(Bd),bx=function(){function t(e){this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();/*!
 * @pixi/spritesheet - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vd=function(){function t(e,r,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=e instanceof Fe?e:null,this.baseTexture=e instanceof Ye?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,i=ao(e,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){var r=this;return e&&ii("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){r._callback=function(s){e==null||e(s),i(s)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var s=this._frameKeys[r],o=this._frames[s],h=o.frame;if(h){var u=null,c=null,_=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,y=new We(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);o.rotated?u=new We(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):u=new We(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(c=new We(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[s]=new Fe(this.baseTexture,u,y,c,o.rotated?2:0,o.anchor),Fe.addToCache(this.textures[s],s)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var i=0;i<e[r].length;i++){var s=e[r][i];this.animations[r].push(this.textures[s])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),Hd=function(){function t(){}return t.use=function(e,r){var i,s,o=this,h=e.name+"_image";if(!e.data||e.type!==$r.TYPE.JSON||!e.data.frames||o.resources[h]){r();return}var u=(s=(i=e.data)===null||i===void 0?void 0:i.meta)===null||s===void 0?void 0:s.related_multi_packs;if(Array.isArray(u))for(var c=function(T){if(typeof T!="string")return"continue";var P=T.replace(".json",""),O=Hi.resolve(e.url.replace(o.baseUrl,""),T);if(o.resources[P]||Object.values(o.resources).some(function(Y){return Hi.format(Hi.parse(Y.url))===O}))return"continue";var H={crossOrigin:e.crossOrigin,loadType:$r.LOAD_TYPE.XHR,xhrType:$r.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(P,O,H)},_=0,y=u;_<y.length;_++){var w=y[_];c(w)}var b={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},E=t.getResourcePath(e,o.baseUrl);o.add(h,E,b,function(P){if(P.error){r(P.error);return}var O=new Vd(P.texture,e.data,e.url);O.parse().then(function(){e.spritesheet=O,e.textures=O.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:Hi.resolve(e.url.replace(r,""),e.data.meta.image)},t.extension=ar.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Pu=function(t,e){return Pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Pu(t,e)};function zd(t,e){Pu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Eo=new dr,xx=function(t){zd(e,t);function e(r,i,s){i===void 0&&(i=100),s===void 0&&(s=100);var o=t.call(this,r)||this;return o.tileTransform=new ba,o._width=i,o._height=s,o.uvMatrix=o.texture.uvMatrix||new Ra(r),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,i=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,i,s,o)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new We),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Eo);var i=this._width,s=this._height,o=-i*this.anchor._x;if(Eo.x>=o&&Eo.x<o+i){var h=-s*this.anchor._y;if(Eo.y>=h&&Eo.y<h+s)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,i){var s=r instanceof Fe?r:Fe.from(r,i);return new e(s,i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(Ss),Tx=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,jd=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Ax=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,wx=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Px=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ya=new wr,Wd=function(t){zd(e,t);function e(r){var i=t.call(this,r)||this;return r.runners.contextChange.add(i),i.quad=new xl,i.state=wn.for2d(),i}return e.prototype.contextChange=function(){var r=this.renderer,i={globals:r.globalUniforms};this.simpleShader=an.from(jd,Tx,i),this.shader=r.context.webGLVersion>1?an.from(wx,Px,i):an.from(jd,Ax,i)},e.prototype.render=function(r){var i=this.renderer,s=this.quad,o=s.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y);var h=r.uvRespectAnchor?r.anchor.x:0,u=r.uvRespectAnchor?r.anchor.y:0;o=s.uvs,o[0]=o[6]=-h,o[1]=o[3]=-u,o[2]=o[4]=1-h,o[5]=o[7]=1-u,s.invalidate();var c=r._texture,_=c.baseTexture,y=_.alphaMode>0,w=r.tileTransform.localTransform,b=r.uvMatrix,E=_.isPowerOfTwo&&c.frame.width===_.width&&c.frame.height===_.height;E&&(_._glTextures[i.CONTEXT_UID]?E=_.wrapMode!==Xi.CLAMP:_.wrapMode===Xi.CLAMP&&(_.wrapMode=Xi.REPEAT));var T=E?this.simpleShader:this.shader,P=c.width,O=c.height,H=r._width,Y=r._height;Ya.set(w.a*P/H,w.b*P/Y,w.c*O/H,w.d*O/Y,w.tx/H,w.ty/Y),Ya.invert(),E?Ya.prepend(b.mapCoord):(T.uniforms.uMapCoord=b.mapCoord.toArray(!0),T.uniforms.uClampFrame=b.uClampFrame,T.uniforms.uClampOffset=b.uClampOffset),T.uniforms.uTransform=Ya.toArray(!0),T.uniforms.uColor=Kh(r.tint,r.worldAlpha,T.uniforms.uColor,y),T.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),T.uniforms.uSampler=c,i.shader.bind(T),i.geometry.bind(s),this.state.blendMode=Qh(r.blendMode,y),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:ar.RendererPlugin},e}(_o);/*!
 * @pixi/mesh - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Eu=function(t,e){return Eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Eu(t,e)};function Iu(t,e){Eu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yd=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),Cu=new dr,qd=new lo,Ls=function(t){Iu(e,t);function e(r,i,s,o){o===void 0&&(o=di.TRIANGLES);var h=t.call(this)||this;return h.geometry=r,h.shader=i,h.state=s||wn.for2d(),h.drawMode=o,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=te.ROUND_PIXELS,h.batchUvs=null,h}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var i=this.geometry.buffers[0].data,s=this.shader;s.batchable&&this.drawMode===di.TRIANGLES&&i.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),r.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(i),r.state.set(this.state),r.geometry.bind(this.geometry,i),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var i=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;var o=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[o]),r.plugins[o].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,i=r.buffers[0],s=i.data,o=i._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==s.length&&(this.vertexData=new Float32Array(s.length));for(var h=this.transform.worldTransform,u=h.a,c=h.b,_=h.c,y=h.d,w=h.tx,b=h.ty,E=this.vertexData,T=0;T<E.length/2;T++){var P=s[T*2],O=s[T*2+1];E[T*2]=u*P+_*O+w,E[T*2+1]=c*P+y*O+b}if(this._roundPixels)for(var H=te.RESOLUTION,T=0;T<E.length;++T)E[T]=Math.round((E[T]*H|0)/H);this.vertexDirty=o}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new Yd(r,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Cu);for(var i=this.geometry.getBuffer("aVertexPosition").data,s=qd.points,o=this.geometry.getIndex().data,h=o.length,u=this.drawMode===4?3:1,c=0;c+2<h;c+=u){var _=o[c]*2,y=o[c+1]*2,w=o[c+2]*2;if(s[0]=i[_],s[1]=i[_+1],s[2]=i[y],s[3]=i[y+1],s[4]=i[w],s[5]=i[w+1],qd.contains(Cu.x,Cu.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(vi),Ex=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Ix=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Os=function(t){Iu(e,t);function e(r,i){var s=this,o={uSampler:r,alpha:1,uTextureMatrix:wr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(o,i.uniforms),s=t.call(this,i.program||Es.from(Ix,Ex),o)||this,s._colorDirty=!1,s.uvMatrix=new Ra(r),s.batchable=i.program===void 0,s.pluginName=i.pluginName,s.tint=i.tint,s.alpha=i.alpha,s}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;Kh(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(an),Io=function(t){Iu(e,t);function e(r,i,s){var o=t.call(this)||this,h=new Dr(r),u=new Dr(i,!0),c=new Dr(s,!0,!0);return o.addAttribute("aVertexPosition",h,2,!1,ye.FLOAT).addAttribute("aTextureCoord",u,2,!1,ye.FLOAT).addIndex(c),o._updateId=-1,o}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Ps);/*!
 * @pixi/text-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var $u=function(t,e){return $u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},$u(t,e)};function Cx(t,e){$u(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Co=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),Zd=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var s in r){var o=r[s].match(/^[a-z]+/gm)[0],h=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(var c in h){var _=h[c].split("="),y=_[0],w=_[1].replace(/"/gm,""),b=parseFloat(w),E=isNaN(b)?w:b;u[y]=E}i[o].push(u)}var T=new Co;return i.info.forEach(function(P){return T.info.push({face:P.face,size:parseInt(P.size,10)})}),i.common.forEach(function(P){return T.common.push({lineHeight:parseInt(P.lineHeight,10)})}),i.page.forEach(function(P){return T.page.push({id:parseInt(P.id,10),file:P.file})}),i.char.forEach(function(P){return T.char.push({id:parseInt(P.id,10),page:parseInt(P.page,10),x:parseInt(P.x,10),y:parseInt(P.y,10),width:parseInt(P.width,10),height:parseInt(P.height,10),xoffset:parseInt(P.xoffset,10),yoffset:parseInt(P.yoffset,10),xadvance:parseInt(P.xadvance,10)})}),i.kerning.forEach(function(P){return T.kerning.push({first:parseInt(P.first,10),second:parseInt(P.second,10),amount:parseInt(P.amount,10)})}),i.distanceField.forEach(function(P){return T.distanceField.push({distanceRange:parseInt(P.distanceRange,10),fieldType:P.fieldType})}),T},t}(),qa=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new Co,i=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),h=e.getElementsByTagName("char"),u=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField"),_=0;_<i.length;_++)r.info.push({face:i[_].getAttribute("face"),size:parseInt(i[_].getAttribute("size"),10)});for(var _=0;_<s.length;_++)r.common.push({lineHeight:parseInt(s[_].getAttribute("lineHeight"),10)});for(var _=0;_<o.length;_++)r.page.push({id:parseInt(o[_].getAttribute("id"),10)||0,file:o[_].getAttribute("file")});for(var _=0;_<h.length;_++){var y=h[_];r.char.push({id:parseInt(y.getAttribute("id"),10),page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xoffset:parseInt(y.getAttribute("xoffset"),10),yoffset:parseInt(y.getAttribute("yoffset"),10),xadvance:parseInt(y.getAttribute("xadvance"),10)})}for(var _=0;_<u.length;_++)r.kerning.push({first:parseInt(u[_].getAttribute("first"),10),second:parseInt(u[_].getAttribute("second"),10),amount:parseInt(u[_].getAttribute("amount"),10)});for(var _=0;_<c.length;_++)r.distanceField.push({fieldType:c[_].getAttribute("fieldType"),distanceRange:parseInt(c[_].getAttribute("distanceRange"),10)});return r},t}(),Jd=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return qa.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return qa.parse(r)},t}(),Ru=[Zd,qa,Jd];function Su(t){for(var e=0;e<Ru.length;e++)if(Ru[e].test(t))return Ru[e];return null}function $x(t,e,r,i,s,o){var h=r.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;var u,c=r.dropShadow?r.dropShadowDistance:0,_=r.padding||0,y=t.width/i-c-_*2,w=t.height/i-c-_*2,b=h.slice(),E=r.fillGradientStops.slice();if(!E.length)for(var T=b.length+1,P=1;P<T;++P)E.push(P/T);if(b.unshift(h[0]),E.unshift(0),b.push(h[h.length-1]),E.push(1),r.fillGradientType===Ns.LINEAR_VERTICAL){u=e.createLinearGradient(y/2,_,y/2,w+_);for(var O=0,H=o.fontProperties.fontSize+r.strokeThickness,Y=H/w,P=0;P<s.length;P++)for(var J=o.lineHeight*P,it=0;it<b.length;it++){var st=0;typeof E[it]=="number"?st=E[it]:st=it/b.length;var K=J/w+st*Y,At=Math.max(O,K);At=Math.min(At,1),u.addColorStop(At,b[it]),O=At}}else{u=e.createLinearGradient(_,w/2,y+_,w/2);for(var Tt=b.length+1,dt=1,P=0;P<b.length;P++){var Et=void 0;typeof E[P]=="number"?Et=E[P]:Et=dt/Tt,u.addColorStop(Et,b[P]),dt++}}return u}function Rx(t,e,r,i,s,o,h){var u=r.text,c=r.fontProperties;e.translate(i,s),e.scale(o,o);var _=h.strokeThickness/2,y=-(h.strokeThickness/2);if(e.font=h.toFontString(),e.lineWidth=h.strokeThickness,e.textBaseline=h.textBaseline,e.lineJoin=h.lineJoin,e.miterLimit=h.miterLimit,e.fillStyle=$x(t,e,h,o,[u],r),e.strokeStyle=h.stroke,h.dropShadow){var w=h.dropShadowColor,b=Fn(typeof w=="number"?w:Zh(w)),E=h.dropShadowBlur*o,T=h.dropShadowDistance*o;e.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+h.dropShadowAlpha+")",e.shadowBlur=E,e.shadowOffsetX=Math.cos(h.dropShadowAngle)*T,e.shadowOffsetY=Math.sin(h.dropShadowAngle)*T}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;h.stroke&&h.strokeThickness&&e.strokeText(u,_,y+r.lineHeight-c.descent),h.fill&&e.fillText(u,_,y+r.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Qd(t){return Array.from?Array.from(t):t.split("")}function Sx(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+s.length+".");var o=s[0].charCodeAt(0),h=s[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(var u=o,c=h;u<=c;u++)e.push(String.fromCharCode(u))}else e.push.apply(e,Qd(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function Za(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var qn=function(){function t(e,r,i){var s,o,h=e.info[0],u=e.common[0],c=e.page[0],_=e.distanceField[0],y=ao(c.file),w={};this._ownsTextures=i,this.font=h.face,this.size=h.size,this.lineHeight=u.lineHeight/y,this.chars={},this.pageTextures=w;for(var b=0;b<e.page.length;b++){var E=e.page[b],T=E.id,P=E.file;w[T]=r instanceof Array?r[b]:r[P],_!=null&&_.fieldType&&_.fieldType!=="none"&&(w[T].baseTexture.alphaMode=_i.NO_PREMULTIPLIED_ALPHA)}for(var b=0;b<e.char.length;b++){var O=e.char[b],T=O.id,H=O.page,Y=e.char[b],J=Y.x,it=Y.y,st=Y.width,K=Y.height,At=Y.xoffset,Tt=Y.yoffset,dt=Y.xadvance;J/=y,it/=y,st/=y,K/=y,At/=y,Tt/=y,dt/=y;var Et=new We(J+w[H].frame.x/y,it+w[H].frame.y/y,st,K);this.chars[T]={xOffset:At,yOffset:Tt,xAdvance:dt,kerning:{},texture:new Fe(w[H].baseTexture,Et),page:H}}for(var b=0;b<e.kerning.length;b++){var Rt=e.kerning[b],Ft=Rt.first,ne=Rt.second,ae=Rt.amount;Ft/=y,ne/=y,ae/=y,this.chars[ne]&&(this.chars[ne].kerning[Ft]=ae)}this.distanceFieldRange=_==null?void 0:_.distanceRange,this.distanceFieldType=(o=(s=_==null?void 0:_.fieldType)===null||s===void 0?void 0:s.toLowerCase())!==null&&o!==void 0?o:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var s;if(e instanceof Co)s=e;else{var o=Su(e);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(e)}r instanceof Fe&&(r=[r]);var h=new t(s,r,i);return t.available[h.font]=h,h},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},t.defaultOptions,i),o=s.chars,h=s.padding,u=s.resolution,c=s.textureWidth,_=s.textureHeight,y=Sx(o),w=r instanceof Yn?r:new Yn(r),b=c,E=new Co;E.info[0]={face:w.fontFamily,size:w.fontSize},E.common[0]={lineHeight:w.fontSize};for(var T=0,P=0,O,H,Y,J=0,it=[],st=0;st<y.length;st++){O||(O=te.ADAPTER.createCanvas(),O.width=c,O.height=_,H=O.getContext("2d"),Y=new Ye(O,{resolution:u}),it.push(new Fe(Y)),E.page.push({id:it.length-1,file:""}));var K=Oi.measureText(y[st],w,!1,O),At=K.width,Tt=Math.ceil(K.height),dt=Math.ceil((w.fontStyle==="italic"?2:1)*At);if(P>=_-Tt*u){if(P===0)throw new Error("[BitmapFont] textureHeight "+_+"px is "+("too small for "+w.fontSize+"px fonts"));--st,O=null,H=null,Y=null,P=0,T=0,J=0;continue}if(J=Math.max(Tt+K.fontProperties.descent,J),dt*u+T>=b){--st,P+=J*u,P=Math.ceil(P),T=0,J=0;continue}Rx(O,H,K,T,P,u,w);var Et=Za(K.text);E.char.push({id:Et,page:it.length-1,x:T/u,y:P/u,width:dt,height:Tt,xoffset:0,yoffset:0,xadvance:Math.ceil(At-(w.dropShadow?w.dropShadowDistance:0)-(w.stroke?w.strokeThickness:0))}),T+=(dt+2*h)*u,T=Math.ceil(T)}for(var st=0,Rt=y.length;st<Rt;st++)for(var Ft=y[st],ne=0;ne<Rt;ne++){var ae=y[ne],zt=H.measureText(Ft).width,Vt=H.measureText(ae).width,he=H.measureText(Ft+ae).width,Kt=he-(zt+Vt);Kt&&E.kerning.push({first:Za(Ft),second:Za(ae),amount:Kt})}var ve=new t(E,it,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=ve,ve},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Nx=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,Lx=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,Ox=[],Fx=[],Kd=[],Mx=function(t){Cx(e,t);function e(r,i){i===void 0&&(i={});var s=t.call(this)||this;s._tint=16777215;var o=Object.assign({},e.styleDefaults,i),h=o.align,u=o.tint,c=o.maxWidth,_=o.letterSpacing,y=o.fontName,w=o.fontSize;if(!qn.available[y])throw new Error('Missing BitmapFont "'+y+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=h,s._tint=u,s._fontName=y,s._fontSize=w||qn.available[y].size,s.text=r,s._maxWidth=c,s._maxLineHeight=0,s._letterSpacing=_,s._anchor=new xn(function(){s.dirty=!0},s,0,0),s._roundPixels=te.ROUND_PIXELS,s.dirty=!0,s._resolution=te.RESOLUTION,s._autoResolution=!0,s._textureCache={},s}return e.prototype.updateText=function(){for(var r,i=qn.available[this._fontName],s=this._fontSize/i.size,o=new dr,h=[],u=[],c=[],_=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",y=Qd(_),w=this._maxWidth*i.size/this._fontSize,b=i.distanceFieldType==="none"?Ox:Fx,E=null,T=0,P=0,O=0,H=-1,Y=0,J=0,it=0,st=0,K=0;K<y.length;K++){var At=y[K],Tt=Za(At);if(/(?:\s)/.test(At)&&(H=K,Y=T,st++),At==="\r"||At===`
`){u.push(T),c.push(-1),P=Math.max(P,T),++O,++J,o.x=0,o.y+=i.lineHeight,E=null,st=0;continue}var dt=i.chars[Tt];if(dt){E&&dt.kerning[E]&&(o.x+=dt.kerning[E]);var Et=Kd.pop()||{texture:Fe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new dr};Et.texture=dt.texture,Et.line=O,Et.charCode=Tt,Et.position.x=o.x+dt.xOffset+this._letterSpacing/2,Et.position.y=o.y+dt.yOffset,Et.prevSpaces=st,h.push(Et),T=Et.position.x+Math.max(dt.xAdvance-dt.xOffset,dt.texture.orig.width),o.x+=dt.xAdvance+this._letterSpacing,it=Math.max(it,dt.yOffset+dt.texture.height),E=Tt,H!==-1&&w>0&&o.x>w&&(++J,Mn(h,1+H-J,1+K-H),K=H,H=-1,u.push(Y),c.push(h.length>0?h[h.length-1].prevSpaces:0),P=Math.max(P,Y),O++,o.x=0,o.y+=i.lineHeight,E=null,st=0)}}var Rt=y[y.length-1];Rt!=="\r"&&Rt!==`
`&&(/(?:\s)/.test(Rt)&&(T=Y),u.push(T),P=Math.max(P,T),c.push(-1));for(var Ft=[],K=0;K<=O;K++){var ne=0;this._align==="right"?ne=P-u[K]:this._align==="center"?ne=(P-u[K])/2:this._align==="justify"&&(ne=c[K]<0?0:(P-u[K])/c[K]),Ft.push(ne)}for(var ae=h.length,zt={},Vt=[],he=this._activePagesMeshData,K=0;K<he.length;K++)b.push(he[K]);for(var K=0;K<ae;K++){var Kt=h[K].texture,ve=Kt.baseTexture.uid;if(!zt[ve]){var at=b.pop();if(!at){var bt=new Io,vt=void 0,le=void 0;i.distanceFieldType==="none"?(vt=new Os(Fe.EMPTY),le=Te.NORMAL):(vt=new Os(Fe.EMPTY,{program:Es.from(Lx,Nx),uniforms:{uFWidth:0}}),le=Te.NORMAL_NPM);var Gt=new Ls(bt,vt);Gt.blendMode=le,at={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Gt,vertices:null,uvs:null,indices:null}}at.index=0,at.indexCount=0,at.vertexCount=0,at.uvsCount=0,at.total=0;var se=this._textureCache;se[ve]=se[ve]||new Fe(Kt.baseTexture),at.mesh.texture=se[ve],at.mesh.tint=this._tint,Vt.push(at),zt[ve]=at}zt[ve].total++}for(var K=0;K<he.length;K++)Vt.indexOf(he[K])===-1&&this.removeChild(he[K].mesh);for(var K=0;K<Vt.length;K++)Vt[K].mesh.parent!==this&&this.addChild(Vt[K].mesh);this._activePagesMeshData=Vt;for(var K in zt){var at=zt[K],Pe=at.total;if(!(((r=at.indices)===null||r===void 0?void 0:r.length)>6*Pe)||at.vertices.length<Ls.BATCHABLE_SIZE*2)at.vertices=new Float32Array(4*2*Pe),at.uvs=new Float32Array(4*2*Pe),at.indices=new Uint16Array(6*Pe);else for(var Zt=at.total,ke=at.vertices,_e=Zt*4*2;_e<ke.length;_e++)ke[_e]=0;at.mesh.size=6*Pe}for(var K=0;K<ae;K++){var At=h[K],fe=At.position.x+Ft[At.line]*(this._align==="justify"?At.prevSpaces:1);this._roundPixels&&(fe=Math.round(fe));var ue=fe*s,me=At.position.y*s,Kt=At.texture,Nt=zt[Kt.baseTexture.uid],Ge=Kt.frame,Ke=Kt._uvs,ce=Nt.index++;Nt.indices[ce*6+0]=0+ce*4,Nt.indices[ce*6+1]=1+ce*4,Nt.indices[ce*6+2]=2+ce*4,Nt.indices[ce*6+3]=0+ce*4,Nt.indices[ce*6+4]=2+ce*4,Nt.indices[ce*6+5]=3+ce*4,Nt.vertices[ce*8+0]=ue,Nt.vertices[ce*8+1]=me,Nt.vertices[ce*8+2]=ue+Ge.width*s,Nt.vertices[ce*8+3]=me,Nt.vertices[ce*8+4]=ue+Ge.width*s,Nt.vertices[ce*8+5]=me+Ge.height*s,Nt.vertices[ce*8+6]=ue,Nt.vertices[ce*8+7]=me+Ge.height*s,Nt.uvs[ce*8+0]=Ke.x0,Nt.uvs[ce*8+1]=Ke.y0,Nt.uvs[ce*8+2]=Ke.x1,Nt.uvs[ce*8+3]=Ke.y1,Nt.uvs[ce*8+4]=Ke.x2,Nt.uvs[ce*8+5]=Ke.y2,Nt.uvs[ce*8+6]=Ke.x3,Nt.uvs[ce*8+7]=Ke.y3}this._textWidth=P*s,this._textHeight=(o.y+i.lineHeight)*s;for(var K in zt){var at=zt[K];if(this.anchor.x!==0||this.anchor.y!==0)for(var Vr=0,Br=this._textWidth*this.anchor.x,ai=this._textHeight*this.anchor.y,Ze=0;Ze<at.total;Ze++)at.vertices[Vr++]-=Br,at.vertices[Vr++]-=ai,at.vertices[Vr++]-=Br,at.vertices[Vr++]-=ai,at.vertices[Vr++]-=Br,at.vertices[Vr++]-=ai,at.vertices[Vr++]-=Br,at.vertices[Vr++]-=ai;this._maxLineHeight=it*s;var Fi=at.mesh.geometry.getBuffer("aVertexPosition"),Sr=at.mesh.geometry.getBuffer("aTextureCoord"),yt=at.mesh.geometry.getIndex();Fi.data=at.vertices,Sr.data=at.uvs,yt.data=at.indices,Fi.update(),Sr.update(),yt.update()}for(var K=0;K<h.length;K++)Kd.push(h[K])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var i=qn.available[this._fontName],s=i.distanceFieldRange,o=i.distanceFieldType,h=i.size;if(o!=="none")for(var u=this.worldTransform,c=u.a,_=u.b,y=u.c,w=u.d,b=Math.sqrt(c*c+_*_),E=Math.sqrt(y*y+w*w),T=(Math.abs(b)+Math.abs(E))/2,P=this._fontSize/h,O=0,H=this._activePagesMeshData;O<H.length;O++){var Y=H[O];Y.mesh.shader.uniforms.uFWidth=T*s*P*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!qn.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var i=this._textureCache;for(var s in i){var o=i[s];o.destroy(),delete i[s]}this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(vi),t_=function(){function t(){}return t.add=function(){$r.setExtensionXhrType("fnt",$r.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var i=Su(e.data);if(!i){r();return}for(var s=t.getBaseUrl(this,e),o=i.parse(e.data),h={},u=function(P){h[P.metadata.pageFile]=P.texture,Object.keys(h).length===o.page.length&&(e.bitmapFont=qn.install(o,h,!0),r())},c=0;c<o.page.length;++c){var _=o.page[c].file,y=s+_,w=!1;for(var b in this.resources){var E=this.resources[b];if(E.url===y){E.metadata.pageFile=_,E.texture?u(E):E.onAfterMiddleware.add(u),w=!0;break}}if(!w){var T={crossOrigin:e.crossOrigin,loadType:$r.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:_},e.metadata.imageMetadata),parentResource:e};this.add(y,T,u)}}},t.getBaseUrl=function(e,r){var i=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(e.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t.extension=ar.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Nu=function(t,e){return Nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Nu(t,e)};function Ux(t,e){Nu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Gx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Dx=function(t){Ux(e,t);function e(r){r===void 0&&(r=1);var i=t.call(this,Xc,Gx,{uAlpha:1})||this;return i.alpha=r,i}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(hn);/*!
 * @pixi/filter-blur - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Lu=function(t,e){return Lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Lu(t,e)};function e_(t,e){Lu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bx=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function kx(t,e){var r=Math.ceil(t/2),i=Bx,s="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<t;h++){var u=o.replace("%index%",h.toString());u=u.replace("%sampleIndex%",h-(r-1)+".0"),s+=u,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}var Xx={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Vx=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Hx(t){for(var e=Xx[t],r=e.length,i=Vx,s="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h,u=0;u<t;u++){var c=o.replace("%index%",u.toString());h=u,u>=r&&(h=t-u-1),c=c.replace("%value%",e[h].toString()),s+=c,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var r_;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(r_||(r_={}));var i_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(i_||(i_={}));var n_;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(n_||(n_={}));var s_;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(s_||(s_={}));var o_;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(o_||(o_={}));var a_;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(a_||(a_={}));var h_;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(h_||(h_={}));var l_;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(l_||(l_={}));var u_;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(u_||(u_={}));var f_;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(f_||(f_={}));var c_;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(c_||(c_={}));var d_;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(d_||(d_={}));var __;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(__||(__={}));var $o;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})($o||($o={}));var p_;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(p_||(p_={}));var v_;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(v_||(v_={}));var m_;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(m_||(m_={}));var g_;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(g_||(g_={}));var y_;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(y_||(y_={}));var b_;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(b_||(b_={}));var Ou=function(t){e_(e,t);function e(r,i,s,o,h){i===void 0&&(i=8),s===void 0&&(s=4),o===void 0&&(o=te.FILTER_RESOLUTION),h===void 0&&(h=5);var u=this,c=kx(h,r),_=Hx(h);return u=t.call(this,c,_)||this,u.horizontal=r,u.resolution=o,u._quality=0,u.quality=s,u.blur=i,u}return e.prototype.apply=function(r,i,s,o){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/i.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,i,s,o);else{var h=r.getFilterTexture(),u=r.renderer,c=i,_=h;this.state.blend=!1,r.applyFilter(this,c,_,$o.CLEAR);for(var y=1;y<this.passes-1;y++){r.bindAndClear(c,$o.BLIT),this.uniforms.uSampler=_;var w=_;_=c,c=w,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,_,s,o),r.returnFilterTexture(h)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(hn),zx=function(t){e_(e,t);function e(r,i,s,o){r===void 0&&(r=8),i===void 0&&(i=4),s===void 0&&(s=te.FILTER_RESOLUTION),o===void 0&&(o=5);var h=t.call(this)||this;return h.blurXFilter=new Ou(!0,r,i,s,o),h.blurYFilter=new Ou(!1,r,i,s,o),h.resolution=s,h.quality=i,h.blur=r,h.repeatEdgePixels=!1,h}return e.prototype.apply=function(r,i,s,o){var h=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(h&&u){var c=r.getFilterTexture();this.blurXFilter.apply(r,i,c,$o.CLEAR),this.blurYFilter.apply(r,c,s,o),r.returnFilterTexture(c)}else u?this.blurYFilter.apply(r,i,s,o):this.blurXFilter.apply(r,i,s,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}(hn);/*!
 * @pixi/filter-color-matrix - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Fu=function(t,e){return Fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Fu(t,e)};function jx(t,e){Fu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Wx=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Mu=function(t){jx(e,t);function e(){var r=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,Wl,Wx,i)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,i){i===void 0&&(i=!1);var s=r;i&&(this._multiply(s,this.uniforms.m,r),s=this._colorMatrix(s)),this.uniforms.m=s},e.prototype._multiply=function(r,i,s){return r[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],r[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],r[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],r[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],r[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],r[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],r[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],r[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],r[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],r[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],r[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],r[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],r[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],r[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],r[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],r[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],r[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],r[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],r[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],r[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],r},e.prototype._colorMatrix=function(r){var i=new Float32Array(r);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(r,i){var s=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.tint=function(r,i){var s=r>>16&255,o=r>>8&255,h=r&255,u=[s/255,0,0,0,0,0,o/255,0,0,0,0,0,h/255,0,0,0,0,0,1,0];this._loadMatrix(u,i)},e.prototype.greyscale=function(r,i){var s=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.blackAndWhite=function(r){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.hue=function(r,i){r=(r||0)/180*Math.PI;var s=Math.cos(r),o=Math.sin(r),h=Math.sqrt,u=1/3,c=h(u),_=s+(1-s)*u,y=u*(1-s)-c*o,w=u*(1-s)+c*o,b=u*(1-s)+c*o,E=s+u*(1-s),T=u*(1-s)-c*o,P=u*(1-s)-c*o,O=u*(1-s)+c*o,H=s+u*(1-s),Y=[_,y,w,0,0,b,E,T,0,0,P,O,H,0,0,0,0,0,1,0];this._loadMatrix(Y,i)},e.prototype.contrast=function(r,i){var s=(r||0)+1,o=-.5*(s-1),h=[s,0,0,0,o,0,s,0,0,o,0,0,s,0,o,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.saturate=function(r,i){r===void 0&&(r=0);var s=r*2/3+1,o=(s-1)*-.5,h=[s,o,o,0,0,o,s,o,0,0,o,o,s,0,0,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.sepia=function(r){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.technicolor=function(r){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.polaroid=function(r){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.toBGR=function(r){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.kodachrome=function(r){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.browni=function(r){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.vintage=function(r){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.colorTone=function(r,i,s,o,h){r=r||.2,i=i||.15,s=s||16770432,o=o||3375104;var u=(s>>16&255)/255,c=(s>>8&255)/255,_=(s&255)/255,y=(o>>16&255)/255,w=(o>>8&255)/255,b=(o&255)/255,E=[.3,.59,.11,0,0,u,c,_,r,0,y,w,b,i,0,u-y,c-w,_-b,0,0];this._loadMatrix(E,h)},e.prototype.night=function(r,i){r=r||.1;var s=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.predator=function(r,i){var s=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.lsd=function(r){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(hn);Mu.prototype.grayscale=Mu.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Uu=function(t,e){return Uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Uu(t,e)};function Yx(t,e){Uu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qx=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Zx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,Jx=function(t){Yx(e,t);function e(r,i){var s=this,o=new wr;return r.renderable=!1,s=t.call(this,Zx,qx,{mapSampler:r._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,s.maskSprite=r,s.maskMatrix=o,i==null&&(i=20),s.scale=new dr(i,i),s}return e.prototype.apply=function(r,i,s,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var h=this.maskSprite.worldTransform,u=Math.sqrt(h.a*h.a+h.b*h.b),c=Math.sqrt(h.c*h.c+h.d*h.d);u!==0&&c!==0&&(this.uniforms.rotation[0]=h.a/u,this.uniforms.rotation[1]=h.b/u,this.uniforms.rotation[2]=h.c/c,this.uniforms.rotation[3]=h.d/c),r.applyFilter(this,i,s,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e}(hn);/*!
 * @pixi/filter-fxaa - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Gu=function(t,e){return Gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Gu(t,e)};function Qx(t,e){Gu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kx=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,tT=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,eT=function(t){Qx(e,t);function e(){return t.call(this,Kx,tT)||this}return e}(hn);/*!
 * @pixi/filter-noise - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Du=function(t,e){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Du(t,e)};function rT(t,e){Du(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var iT=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,nT=function(t){rT(e,t);function e(r,i){r===void 0&&(r=.5),i===void 0&&(i=Math.random());var s=t.call(this,Wl,iT,{uNoise:0,uSeed:0})||this;return s.noise=r,s.seed=i,s}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e}(hn);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var x_;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(x_||(x_={}));var T_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(T_||(T_={}));var A_;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(A_||(A_={}));var w_;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(w_||(w_={}));var P_;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(P_||(P_={}));var E_;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(E_||(E_={}));var I_;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(I_||(I_={}));var C_;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(C_||(C_={}));var $_;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})($_||($_={}));var R_;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(R_||(R_={}));var S_;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(S_||(S_={}));var N_;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(N_||(N_={}));var L_;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(L_||(L_={}));var O_;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(O_||(O_={}));var F_;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(F_||(F_={}));var M_;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(M_||(M_={}));var U_;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(U_||(U_={}));var G_;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(G_||(G_={}));var Bu;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Bu||(Bu={}));var D_;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(D_||(D_={}));var B_=new wr;Nr.prototype._cacheAsBitmap=!1,Nr.prototype._cacheData=null,Nr.prototype._cacheAsBitmapResolution=null,Nr.prototype._cacheAsBitmapMultisample=Bu.NONE;var sT=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(Nr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new sT),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),Nr.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Nr.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,e.batch.flush();var s=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;s.pad(o)}s.ceil(te.RESOLUTION);var h=e.renderTexture.current,u=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),_=e.projection.transform,y=Tn.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),w="cacheAsBitmap_"+bn();this._cacheData.textureCacheId=w,Ye.addToCache(y.baseTexture,w),Fe.addToCache(y,w);var b=this.transform.localTransform.copyTo(B_).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:y,clear:!0,transform:b,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=_,e.renderTexture.bind(h,u,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var E=new Ss(y);E.transform.worldTransform=this.transform.worldTransform,E.anchor.x=-(s.x/s.width),E.anchor.y=-(s.y/s.height),E.alpha=i,E._bounds=this._bounds,this._cacheData.sprite=E,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=E.containsPoint.bind(E)}},Nr.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Nr.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var s=e.context,o=e._projTransform;r.ceil(te.RESOLUTION);var h=Tn.create({width:r.width,height:r.height}),u="cacheAsBitmap_"+bn();this._cacheData.textureCacheId=u,Ye.addToCache(h.baseTexture,u),Fe.addToCache(h,u);var c=B_;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=r.x,c.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),e.context=s,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var _=new Ss(h);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(r.x/r.width),_.anchor.y=-(r.y/r.height),_.alpha=i,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)}},Nr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Nr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Nr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ye.removeFromCache(this._cacheData.textureCacheId),Fe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Nr.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Nr.prototype.name=null,vi.prototype.getChildByName=function(e,r){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i].name===e)return this.children[i];if(r)for(var i=0,s=this.children.length;i<s;i++){var o=this.children[i];if(o.getChildByName){var h=o.getChildByName(e,!0);if(h)return h}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Nr.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new dr),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var k_=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var i,s;if(r._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{var o=r._resizeTo,h=o.clientWidth,u=o.clientHeight;i=h,s=u}r.renderer.resize(i,s)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=ar.Application,t}();/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var X_;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(X_||(X_={}));var V_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(V_||(V_={}));var H_;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(H_||(H_={}));var z_;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(z_||(z_={}));var j_;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(j_||(j_={}));var W_;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(W_||(W_={}));var Y_;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Y_||(Y_={}));var q_;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(q_||(q_={}));var Z_;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Z_||(Z_={}));var ku;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ku||(ku={}));var Xu;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Xu||(Xu={}));var Vu;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Vu||(Vu={}));var J_;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(J_||(J_={}));var Q_;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Q_||(Q_={}));var Hu;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Hu||(Hu={}));var Ro;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ro||(Ro={}));var K_;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(K_||(K_={}));var tp;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(tp||(tp={}));var zu;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(zu||(zu={}));var ep;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(ep||(ep={}));var oT={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},ju=/iPhone/i,rp=/iPod/i,ip=/iPad/i,np=/\biOS-universal(?:.+)Mac\b/i,Wu=/\bAndroid(?:.+)Mobile\b/i,sp=/Android/i,Fs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ja=/Silk/i,dn=/Windows Phone/i,op=/\bWindows(?:.+)ARM\b/i,ap=/BlackBerry/i,hp=/BB10/i,lp=/Opera Mini/i,up=/\b(CriOS|Chrome)(?:.+)Mobile/i,fp=/Mobile(?:.+)Firefox\b/i,cp=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function aT(t){return function(e){return e.test(t)}}function hT(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var s=aT(r),o={apple:{phone:s(ju)&&!s(dn),ipod:s(rp),tablet:!s(ju)&&(s(ip)||cp(e))&&!s(dn),universal:s(np),device:(s(ju)||s(rp)||s(ip)||s(np)||cp(e))&&!s(dn)},amazon:{phone:s(Fs),tablet:!s(Fs)&&s(Ja),device:s(Fs)||s(Ja)},android:{phone:!s(dn)&&s(Fs)||!s(dn)&&s(Wu),tablet:!s(dn)&&!s(Fs)&&!s(Wu)&&(s(Ja)||s(sp)),device:!s(dn)&&(s(Fs)||s(Ja)||s(Wu)||s(sp))||s(/\bokhttp\b/i)},windows:{phone:s(dn),tablet:s(op),device:s(dn)||s(op)},other:{blackberry:s(ap),blackberry10:s(hp),opera:s(lp),firefox:s(fp),chrome:s(up),device:s(ap)||s(hp)||s(lp)||s(fp)||s(up)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var Ms=hT(globalThis.navigator);function lT(){return!Ms.apple.device}function uT(t){var e=!0;if(Ms.tablet||Ms.phone){if(Ms.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(Ms.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var Qa={ADAPTER:oT,MIPMAP_TEXTURES:Vu.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:zu.NONE,SPRITE_MAX_TEXTURES:uT(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Hu.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Xu.CLAMP,SCALE_MODE:ku.LINEAR,PRECISION_VERTEX:Ro.HIGH,PRECISION_FRAGMENT:Ms.apple.device?Ro.HIGH:Ro.MEDIUM,CAN_UPLOAD_SAME_BUFFER:lT(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Yu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function qu(t,e,r){return r={path:e,exports:{},require:function(i,s){return fT(i,s==null?r.path:s)}},t(r,r.exports),r.exports}function fT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}qu(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(c,_,y){this.fn=c,this.context=_,this.once=y||!1}function o(c,_,y,w,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var E=new s(y,w||c,b),T=r?r+_:_;return c._events[T]?c._events[T].fn?c._events[T]=[c._events[T],E]:c._events[T].push(E):(c._events[T]=E,c._eventsCount++),c}function h(c,_){--c._eventsCount===0?c._events=new i:delete c._events[_]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var _=[],y,w;if(this._eventsCount===0)return _;for(w in y=this._events)e.call(y,w)&&_.push(r?w.slice(1):w);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(y)):_},u.prototype.listeners=function(_){var y=r?r+_:_,w=this._events[y];if(!w)return[];if(w.fn)return[w.fn];for(var b=0,E=w.length,T=new Array(E);b<E;b++)T[b]=w[b].fn;return T},u.prototype.listenerCount=function(_){var y=r?r+_:_,w=this._events[y];return w?w.fn?1:w.length:0},u.prototype.emit=function(_,y,w,b,E,T){var P=arguments,O=r?r+_:_;if(!this._events[O])return!1;var H=this._events[O],Y=arguments.length,J,it;if(H.fn){switch(H.once&&this.removeListener(_,H.fn,void 0,!0),Y){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,y),!0;case 3:return H.fn.call(H.context,y,w),!0;case 4:return H.fn.call(H.context,y,w,b),!0;case 5:return H.fn.call(H.context,y,w,b,E),!0;case 6:return H.fn.call(H.context,y,w,b,E,T),!0}for(it=1,J=new Array(Y-1);it<Y;it++)J[it-1]=P[it];H.fn.apply(H.context,J)}else{var st=H.length,K;for(it=0;it<st;it++)switch(H[it].once&&this.removeListener(_,H[it].fn,void 0,!0),Y){case 1:H[it].fn.call(H[it].context);break;case 2:H[it].fn.call(H[it].context,y);break;case 3:H[it].fn.call(H[it].context,y,w);break;case 4:H[it].fn.call(H[it].context,y,w,b);break;default:if(!J)for(K=1,J=new Array(Y-1);K<Y;K++)J[K-1]=P[K];H[it].fn.apply(H[it].context,J)}}return!0},u.prototype.on=function(_,y,w){return o(this,_,y,w,!1)},u.prototype.once=function(_,y,w){return o(this,_,y,w,!0)},u.prototype.removeListener=function(_,y,w,b){var E=r?r+_:_;if(!this._events[E])return this;if(!y)return h(this,E),this;var T=this._events[E];if(T.fn)T.fn===y&&(!b||T.once)&&(!w||T.context===w)&&h(this,E);else{for(var P=0,O=[],H=T.length;P<H;P++)(T[P].fn!==y||b&&!T[P].once||w&&T[P].context!==w)&&O.push(T[P]);O.length?this._events[E]=O.length===1?O[0]:O:h(this,E)}return this},u.prototype.removeAllListeners=function(_){var y;return _?(y=r?r+_:_,this._events[y]&&h(this,y)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u}),qu(function(t,e){(function(r){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,o=typeof Yu=="object"&&Yu;(o.global===o||o.window===o||o.self===o)&&(r=o);var h,u=2147483647,c=36,_=1,y=26,w=38,b=700,E=72,T=128,P="-",O=/^xn--/,H=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,J={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=c-_,st=Math.floor,K=String.fromCharCode,At;function Tt(at){throw RangeError(J[at])}function dt(at,bt){for(var vt=at.length,le=[];vt--;)le[vt]=bt(at[vt]);return le}function Et(at,bt){var vt=at.split("@"),le="";vt.length>1&&(le=vt[0]+"@",at=vt[1]),at=at.replace(Y,".");var Gt=at.split("."),se=dt(Gt,bt).join(".");return le+se}function Rt(at){for(var bt=[],vt=0,le=at.length,Gt,se;vt<le;)Gt=at.charCodeAt(vt++),Gt>=55296&&Gt<=56319&&vt<le?(se=at.charCodeAt(vt++),(se&64512)==56320?bt.push(((Gt&1023)<<10)+(se&1023)+65536):(bt.push(Gt),vt--)):bt.push(Gt);return bt}function Ft(at){return dt(at,function(bt){var vt="";return bt>65535&&(bt-=65536,vt+=K(bt>>>10&1023|55296),bt=56320|bt&1023),vt+=K(bt),vt}).join("")}function ne(at){return at-48<10?at-22:at-65<26?at-65:at-97<26?at-97:c}function ae(at,bt){return at+22+75*(at<26)-((bt!=0)<<5)}function zt(at,bt,vt){var le=0;for(at=vt?st(at/b):at>>1,at+=st(at/bt);at>it*y>>1;le+=c)at=st(at/it);return st(le+(it+1)*at/(at+w))}function Vt(at){var bt=[],vt=at.length,le,Gt=0,se=T,Pe=E,Zt,ke,_e,fe,ue,me,Nt,Ge,Ke;for(Zt=at.lastIndexOf(P),Zt<0&&(Zt=0),ke=0;ke<Zt;++ke)at.charCodeAt(ke)>=128&&Tt("not-basic"),bt.push(at.charCodeAt(ke));for(_e=Zt>0?Zt+1:0;_e<vt;){for(fe=Gt,ue=1,me=c;_e>=vt&&Tt("invalid-input"),Nt=ne(at.charCodeAt(_e++)),(Nt>=c||Nt>st((u-Gt)/ue))&&Tt("overflow"),Gt+=Nt*ue,Ge=me<=Pe?_:me>=Pe+y?y:me-Pe,!(Nt<Ge);me+=c)Ke=c-Ge,ue>st(u/Ke)&&Tt("overflow"),ue*=Ke;le=bt.length+1,Pe=zt(Gt-fe,le,fe==0),st(Gt/le)>u-se&&Tt("overflow"),se+=st(Gt/le),Gt%=le,bt.splice(Gt++,0,se)}return Ft(bt)}function he(at){var bt,vt,le,Gt,se,Pe,Zt,ke,_e,fe,ue,me=[],Nt,Ge,Ke,ce;for(at=Rt(at),Nt=at.length,bt=T,vt=0,se=E,Pe=0;Pe<Nt;++Pe)ue=at[Pe],ue<128&&me.push(K(ue));for(le=Gt=me.length,Gt&&me.push(P);le<Nt;){for(Zt=u,Pe=0;Pe<Nt;++Pe)ue=at[Pe],ue>=bt&&ue<Zt&&(Zt=ue);for(Ge=le+1,Zt-bt>st((u-vt)/Ge)&&Tt("overflow"),vt+=(Zt-bt)*Ge,bt=Zt,Pe=0;Pe<Nt;++Pe)if(ue=at[Pe],ue<bt&&++vt>u&&Tt("overflow"),ue==bt){for(ke=vt,_e=c;fe=_e<=se?_:_e>=se+y?y:_e-se,!(ke<fe);_e+=c)ce=ke-fe,Ke=c-fe,me.push(K(ae(fe+ce%Ke,0))),ke=st(ce/Ke);me.push(K(ae(ke,0))),se=zt(vt,Ge,le==Gt),vt=0,++le}++vt,++bt}return me.join("")}function Kt(at){return Et(at,function(bt){return O.test(bt)?Vt(bt.slice(4).toLowerCase()):bt})}function ve(at){return Et(at,function(bt){return H.test(bt)?"xn--"+he(bt):bt})}if(h={version:"1.3.2",ucs2:{decode:Rt,encode:Ft},decode:Vt,encode:he,toASCII:ve,toUnicode:Kt},i&&s)if(t.exports==i)s.exports=h;else for(At in h)h.hasOwnProperty(At)&&(i[At]=h[At]);else r.punycode=h})(Yu)});function cT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var dT=function(t,e,r,i){e=e||"&",r=r||"=";var s={};if(typeof t!="string"||t.length===0)return s;var o=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var c=0;c<u;++c){var _=t[c].replace(o,"%20"),y=_.indexOf(r),w,b,E,T;y>=0?(w=_.substr(0,y),b=_.substr(y+1)):(w=_,b=""),E=decodeURIComponent(w),T=decodeURIComponent(b),cT(s,E)?Array.isArray(s[E])?s[E].push(T):s[E]=[s[E],T]:s[E]=T}return s},So=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},_T=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var o=encodeURIComponent(So(s))+r;return Array.isArray(t[s])?t[s].map(function(h){return o+encodeURIComponent(So(h))}).join(e):o+encodeURIComponent(So(t[s]))}).join(e):i?encodeURIComponent(So(i))+r+encodeURIComponent(So(t)):""};qu(function(t,e){e.decode=e.parse=dT,e.encode=e.stringify=_T});/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var dp;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(dp||(dp={}));var _p;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(_p||(_p={}));var pp;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(pp||(pp={}));var si;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(si||(si={}));var vp;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(vp||(vp={}));var mp;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(mp||(mp={}));var gp;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(gp||(gp={}));var yp;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(yp||(yp={}));var bp;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(bp||(bp={}));var xp;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(xp||(xp={}));var Tp;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Tp||(Tp={}));var Ap;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ap||(Ap={}));var wp;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(wp||(wp={}));var Pp;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Pp||(Pp={}));var Ep;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Ep||(Ep={}));var Ip;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ip||(Ip={}));var Cp;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Cp||(Cp={}));var $p;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})($p||($p={}));var Rp;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Rp||(Rp={}));var Sp;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Sp||(Sp={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Qa.RETINA_PREFIX=/@([0-9\.]+)x/,Qa.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function pT(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[si.NORMAL_NPM]=si.NORMAL,t[si.ADD_NPM]=si.ADD,t[si.SCREEN_NPM]=si.SCREEN,e[si.NORMAL]=si.NORMAL_NPM,e[si.ADD]=si.ADD_NPM,e[si.SCREEN]=si.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}pT();var Np={};function vT(t,e,r){if(r===void 0&&(r=3),!Np[e]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Np[e]=!0}}(function(){function t(e,r,i){this.canvas=Qa.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Qa.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t})();var Zu=function(){function t(e){var r=this;this.stage=new vi,e=Object.assign({forceCanvas:!1},e),this.renderer=kc(e),t._plugins.forEach(function(i){i.init.call(r,e)})}return t.registerPlugin=function(e){vT("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),zi.add({type:ar.Application,ref:e})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,s=t._plugins.slice(0);s.reverse(),s.forEach(function(o){o.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();zi.handleByList(ar.Application,Zu._plugins),zi.add(k_);/*!
 * @pixi/mesh-extras - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ju=function(t,e){return Ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Ju(t,e)};function Us(t,e){Ju(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Lp=function(t){Us(e,t);function e(r,i,s,o){r===void 0&&(r=100),i===void 0&&(i=100),s===void 0&&(s=10),o===void 0&&(o=10);var h=t.call(this)||this;return h.segWidth=s,h.segHeight=o,h.width=r,h.height=i,h.build(),h}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,i=[],s=[],o=[],h=this.segWidth-1,u=this.segHeight-1,c=this.width/h,_=this.height/u,y=0;y<r;y++){var w=y%this.segWidth,b=y/this.segWidth|0;i.push(w*c,b*_),s.push(w/h,b/u)}for(var E=h*u,y=0;y<E;y++){var T=y%h,P=y/h|0,O=P*this.segWidth+T,H=P*this.segWidth+T+1,Y=(P+1)*this.segWidth+T,J=(P+1)*this.segWidth+T+1;o.push(O,H,Y,H,J,Y)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Io),Op=function(t){Us(e,t);function e(r,i,s){r===void 0&&(r=200),s===void 0&&(s=0);var o=t.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return o.points=i,o._width=r,o.textureScale=s,o.build(),o}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var i=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){i.data.length/4!==r.length&&(i.data=new Float32Array(r.length*4),s.data=new Float32Array(r.length*4),o.data=new Uint16Array((r.length-1)*6));var h=s.data,u=o.data;h[0]=0,h[1]=0,h[2]=0,h[3]=1;for(var c=0,_=r[0],y=this._width*this.textureScale,w=r.length,b=0;b<w;b++){var E=b*4;if(this.textureScale>0){var T=_.x-r[b].x,P=_.y-r[b].y,O=Math.sqrt(T*T+P*P);_=r[b],c+=O/y}else c=b/(w-1);h[E]=c,h[E+1]=0,h[E+2]=c,h[E+3]=1}for(var H=0,b=0;b<w-1;b++){var E=b*2;u[H++]=E,u[H++]=E+1,u[H++]=E+2,u[H++]=E+2,u[H++]=E+1,u[H++]=E+3}s.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var i=r[0],s,o=0,h=0,u=this.buffers[0].data,c=r.length,_=0;_<c;_++){var y=r[_],w=_*4;_<r.length-1?s=r[_+1]:s=y,h=-(s.x-i.x),o=s.y-i.y;var b=Math.sqrt(o*o+h*h),E=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=b,h/=b,o*=E,h*=E,u[w]=y.x+o,u[w+1]=y.y+h,u[w+2]=y.x-o,u[w+3]=y.y-h,i=y}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Io),mT=function(t){Us(e,t);function e(r,i,s){s===void 0&&(s=0);var o=this,h=new Op(r.height,i,s),u=new Os(r);return s>0&&(r.baseTexture.wrapMode=Xi.REPEAT),o=t.call(this,h,u)||this,o.autoUpdate=!0,o}return e.prototype._render=function(r){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,r)},e}(Ls),Fp=function(t){Us(e,t);function e(r,i,s){var o=this,h=new Lp(r.width,r.height,i,s),u=new Os(Fe.WHITE);return o=t.call(this,h,u)||this,o.texture=r,o.autoResize=!0,o}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,i=this.shader.texture,s=i.width,o=i.height;this.autoResize&&(r.width!==s||r.height!==o)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(Ls),gT=function(t){Us(e,t);function e(r,i,s,o,h){r===void 0&&(r=Fe.EMPTY);var u=this,c=new Io(i,s,o);c.getBuffer("aVertexPosition").static=!1;var _=new Os(r);return u=t.call(this,c,_,null,h)||this,u.autoUpdate=!0,u}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e}(Ls),Ka=10,yT=function(t){Us(e,t);function e(r,i,s,o,h){i===void 0&&(i=Ka),s===void 0&&(s=Ka),o===void 0&&(o=Ka),h===void 0&&(h=Ka);var u=t.call(this,Fe.WHITE,4,4)||this;return u._origWidth=r.orig.width,u._origHeight=r.orig.height,u._width=u._origWidth,u._height=u._origHeight,u._leftWidth=i,u._rightWidth=o,u._topHeight=s,u._bottomHeight=h,u.texture=r,u}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,i=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*i,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*i,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,i=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*i,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*i,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,i=this._width>r?1:this._width/r,s=this._topHeight+this._bottomHeight,o=this._height>s?1:this._height/s,h=Math.min(i,o);return h},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,i=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var s=1/this._origWidth,o=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=s*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-s*this._rightWidth,i[9]=i[11]=i[13]=i[15]=o*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(Fp);/*!
 * @pixi/sprite-animated - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Qu=function(t,e){return Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Qu(t,e)};function bT(t,e){Qu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xT=function(t){bT(e,t);function e(r,i){i===void 0&&(i=!0);var s=t.call(this,r[0]instanceof Fe?r[0]:r[0].texture)||this;return s._textures=null,s._durations=null,s._autoUpdate=i,s._isConnectedToTicker=!1,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s._playing=!1,s._previousFrame=null,s.textures=r,s}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Hr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Hr.shared.add(this.update,this,ji.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var i=this.animationSpeed*r,s=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var h=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s?this.onLoop():this.animationSpeed<0&&this.currentFrame>s&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var i=[],s=0;s<r.length;++s)i.push(Fe.from(r[s]));return new e(i)},e.fromImages=function(r){for(var i=[],s=0;s<r.length;++s)i.push(Fe.from(r[s]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Fe)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<r.length;i++)this._textures.push(r[i].texture),this._durations.push(r[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Hr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Hr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Ss);/*!
 * pixi.js - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */zi.add(Kc,od,rd,Cd,Xd,ql,Wd,t_,vd,wd,Pd,Hd,hc,cd);var TT={AlphaFilter:Dx,BlurFilter:zx,BlurFilterPass:Ou,ColorMatrixFilter:Mu,DisplacementFilter:Jx,FXAAFilter:eT,NoiseFilter:nT};const AT=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return _i},AbstractBatchRenderer:Vc,AbstractMultiResource:Ta,AbstractRenderer:Bc,AccessibilityManager:Kc,AnimatedSprite:xT,AppLoaderPlugin:cd,Application:Zu,ArrayResource:cl,Attribute:bl,get BLEND_MODES(){return Te},get BUFFER_BITS(){return no},get BUFFER_TYPE(){return $i},BaseImageResource:Wi,BasePrepare:Bd,BaseRenderTexture:gl,BaseTexture:Ye,BatchDrawCall:La,BatchGeometry:Yl,BatchPluginFactory:Wc,BatchRenderer:ql,BatchShaderGenerator:Hc,BatchSystem:wl,BatchTextureArray:Oa,BitmapFont:qn,BitmapFontData:Co,BitmapFontLoader:t_,BitmapText:Mx,BlobResource:pd,Bounds:uo,BrowserAdapter:of,Buffer:Dr,BufferResource:Vn,get CLEAR_MODES(){return on},get COLOR_MASK_BITS(){return jh},CanvasResource:dl,Circle:Gf,CompressedTextureLoader:vd,CompressedTextureResource:Xa,Container:vi,ContextSystem:Pl,CountLimiter:Dd,CubeResource:_l,DDSLoader:wd,DEG_TO_RAD:Uf,get DRAW_MODES(){return di},DisplayObject:Nr,get ENV(){return Bi},Ellipse:Df,get ExtensionType(){return ar},Extract:od,get FORMATS(){return Ht},FORMATS_TO_COMPONENTS:xd,FillStyle:lu,Filter:hn,FilterState:_c,FilterSystem:Al,Framebuffer:wa,FramebufferSystem:El,get GC_MODES(){return _a},GLFramebuffer:vc,GLProgram:Uc,GLTexture:Na,GRAPHICS_CURVES:Is,Geometry:Ps,GeometrySystem:Cl,Graphics:wo,GraphicsData:vu,GraphicsGeometry:Md,IGLUniformData:Hy,INSTALLED:co,get INTERNAL_FORMATS(){return Be},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:yo,ImageBitmapResource:ml,ImageResource:Aa,InteractionData:Jl,InteractionEvent:td,InteractionManager:rd,InteractionTrackingData:Ua,KTXLoader:Pd,get LINE_CAP(){return cn},get LINE_JOIN(){return fn},LineStyle:Ud,Loader:go,get LoaderResource(){return $r},get MASK_TYPES(){return Gr},get MIPMAP_MODES(){return Vi},get MSAA_QUALITY(){return Fr},MaskData:mc,MaskSystem:Ml,Matrix:wr,Mesh:Ls,MeshBatchUvs:Yd,MeshGeometry:Io,MeshMaterial:Os,NineSlicePlane:yT,ObjectRenderer:_o,ObservablePoint:xn,PI_2:ho,get PRECISION(){return Ci},ParticleContainer:Jb,ParticleRenderer:Cd,PlaneGeometry:Lp,Point:dr,Polygon:lo,Prepare:Xd,Program:Es,ProjectionSystem:Dl,Quad:dc,QuadUv:xl,RAD_TO_DEG:Mf,get RENDERER_TYPE(){return ws},Rectangle:We,RenderTexture:Tn,RenderTexturePool:fc,RenderTextureSystem:Bl,Renderer:jl,ResizePlugin:k_,Resource:Xn,RopeGeometry:Op,RoundedRectangle:Bf,Runner:Wr,get SAMPLER_TYPES(){return so},get SCALE_MODES(){return ki},get SHAPES(){return Xr},SVGResource:pl,ScissorSystem:Ul,Shader:an,ShaderSystem:kl,SimpleMesh:gT,SimplePlane:Fp,SimpleRope:mT,Sprite:Ss,SpriteMaskFilter:$c,Spritesheet:Vd,SpritesheetLoader:Hd,State:wn,StateSystem:Xl,StencilSystem:Gl,System:ob,get TARGETS(){return yn},get TEXT_GRADIENT(){return Ns},get TYPES(){return ye},TYPES_TO_BYTES_PER_COMPONENT:au,TYPES_TO_BYTES_PER_PIXEL:Td,TemporaryDisplayObject:al,Text:Au,TextFormat:Zd,TextMetrics:Oi,TextStyle:Yn,Texture:Fe,TextureGCSystem:Vl,TextureLoader:dd,TextureMatrix:Ra,TextureSystem:Hl,TextureUvs:yl,Ticker:Hr,TickerPlugin:hc,TilingSprite:xx,TilingSpriteRenderer:Wd,TimeLimiter:bx,Transform:ba,get UPDATE_PRIORITY(){return ji},UniformGroup:An,VERSION:lb,VideoResource:vl,ViewableBuffer:Fa,get WRAP_MODES(){return Xi},XMLFormat:qa,XMLStringFormat:Jd,accessibleTarget:Zc,autoDetectFormat:Su,autoDetectRenderer:kc,autoDetectResource:xa,checkMaxIfStatementsInShader:Ic,createUBOElements:Oc,defaultFilterVertex:Wl,defaultVertex:Xc,extensions:zi,filters:TT,generateProgram:Gc,generateUniformBufferSync:Mc,getTestContext:Tc,getUBOData:Fc,graphicsUtils:ix,groupD8:Pr,interactiveTarget:ed,isMobile:ci,parseDDS:yd,parseKTX:Ad,resources:Yc,settings:te,systems:qc,uniformParsers:Hn,utils:dy},Symbol.toStringTag,{value:"Module"}));var Zn=Math.pow,Rr=(t,e,r)=>new Promise((i,s)=>{var o=c=>{try{u(r.next(c))}catch(_){s(_)}},h=c=>{try{u(r.throw(c))}catch(_){s(_)}},u=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,h);u((r=r.apply(t,e)).next())});const Mp=2,Up=2;var No;(t=>{t.supportMoreMaskDivisions=!0,t.setOpacityFromMotion=!1})(No||(No={}));var Yr;(t=>{t.LOG_LEVEL_VERBOSE=0,t.LOG_LEVEL_WARNING=1,t.LOG_LEVEL_ERROR=2,t.LOG_LEVEL_NONE=999,t.logLevel=t.LOG_LEVEL_WARNING,t.sound=!0,t.motionSync=!0,t.motionFadingDuration=500,t.idleMotionFadingDuration=2e3,t.expressionFadingDuration=500,t.preserveExpressionOnMotion=!0,t.cubism4=No})(Yr||(Yr={}));const _r={log(t,...e){Yr.logLevel<=Yr.LOG_LEVEL_VERBOSE&&console.log(`[${t}]`,...e)},warn(t,...e){Yr.logLevel<=Yr.LOG_LEVEL_WARNING&&console.warn(`[${t}]`,...e)},error(t,...e){Yr.logLevel<=Yr.LOG_LEVEL_ERROR&&console.error(`[${t}]`,...e)}};function th(t,e,r){return t<e?e:t>r?r:t}function wT(t,e){return Math.random()*(e-t)+t}function Lo(t,e,r,i,s){const o=e[i];o!==null&&typeof o===t&&(r[s]=o)}function Oo(t,e,r,i,s){const o=e[i];Array.isArray(o)&&(r[s]=o.filter(h=>h!==null&&typeof h===t))}function Gp(t,e){e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i))})})}function PT(t){let e=t.lastIndexOf("/");return e!=-1&&(t=t.slice(0,e)),e=t.lastIndexOf("/"),e!==-1&&(t=t.slice(e+1)),t}function ET(t,e){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}class Ku extends Ei{constructor(e,r){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return Rr(this,null,function*(){if(!this.definitions[e]){_r.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){_r.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const r=yield this._loadExpression(e);return this.expressions[e]=r,r})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return Rr(this,null,function*(){if(this.definitions.length){const e=[];for(let r=0;r<this.definitions.length;r++)this.expressions[r]!==null&&this.expressions[r]!==this.currentExpression&&r!==this.reserveExpressionIndex&&e.push(r);if(e.length){const r=Math.floor(Math.random()*e.length);return this.setExpression(r)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return Rr(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const r=yield this.loadExpression(e);return!r||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=r,this._setExpression(r),!0)})}update(e,r){return this.isFinished()?!1:this.updateParameters(e,r)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const Dp=.01,IT=40/7.5,CT=1/(.15*1e3);class $T{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,r,i=!1){this.targetX=th(e,-1,1),this.targetY=th(r,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const r=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(r)<Dp&&Math.abs(i)<Dp)return;const s=Math.sqrt(Zn(r,2)+Zn(i,2)),o=IT/(1e3/e);let h=o*(r/s)-this.vx,u=o*(i/s)-this.vy;const c=Math.sqrt(Zn(h,2)+Zn(u,2)),_=o*CT*e;c>_&&(h*=_/c,u*=_/c),this.vx+=h,this.vy+=u;const y=Math.sqrt(Zn(this.vx,2)+Zn(this.vy,2)),w=.5*(Math.sqrt(Zn(_,2)+8*_*s)-_);y>w&&(this.vx*=w/y,this.vy*=w/y),this.x+=this.vx,this.y+=this.vy}}class eh{constructor(e){this.json=e;let r=e.url;if(typeof r!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=r,this.name=PT(this.url)}resolveURL(e){return Hi.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let r=0;r<this.textures.length;r++)this.textures[r]=e(this.textures[r],`textures[${r}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(r=>(e.push(r),r)),e}validateFiles(e){const r=(o,h)=>{const u=this.resolveURL(o);if(!e.includes(u)){if(h)throw new Error(`File "${o}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(o=>r(o,!0)),this.getDefinedFiles().filter(o=>r(o,!1))}}var t0=(t=>(t[t.NONE=0]="NONE",t[t.IDLE=1]="IDLE",t[t.NORMAL=2]="NORMAL",t[t.FORCE=3]="FORCE",t))(t0||{});class RT{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,r,i){if(i<=0)return _r.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&r===this.currentIndex)return _r.log(this.tag,"Motion is already playing.",this.dump(e,r)),!1;if(e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex)return _r.log(this.tag,"Motion is already reserved.",this.dump(e,r)),!1;if(i===1){if(this.currentPriority!==0)return _r.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,r)),!1;if(this.reservedIdleGroup!==void 0)return _r.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,r)),!1;this.setReservedIdle(e,r)}else{if(i<3){if(i<=this.currentPriority)return _r.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,r)),!1;if(i<=this.reservePriority)return _r.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,r)),!1}this.setReserved(e,r,i)}return!0}start(e,r,i,s){if(s===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return _r.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(r,i)),!1}else{if(r!==this.reservedGroup||i!==this.reservedIndex)return _r.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(r,i)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(r,i,s),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,r,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=r}setReserved(e,r,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=r}setReservedIdle(e,r){this.reservedIdleGroup=e,this.reservedIdleIndex=r}isActive(e,r){return e===this.currentGroup&&r===this.currentIndex||e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!Yr.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,r){if(this.debug){const i=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${r}
`+i.map(s=>"["+s+"] "+this[s]).join(`
`)}return""}}const ST="SoundManager",NT=.5;class Jn{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(r=>r.volume=this._volume)}static add(e,r,i){const s=new Audio(e);return s.volume=this._volume,s.preload="auto",s.addEventListener("ended",()=>{this.dispose(s),r==null||r()}),s.addEventListener("error",o=>{this.dispose(s),_r.warn(ST,`Error occurred on "${e}"`,o.error),i==null||i(o.error)}),this.audios.push(s),s}static play(e){return new Promise((r,i)=>{var s;(s=e.play())==null||s.catch(o=>{e.dispatchEvent(new ErrorEvent("error",{error:o})),i(o)}),e.readyState===e.HAVE_ENOUGH_DATA?r():e.addEventListener("canplaythrough",r)})}static dispose(e){e.pause(),e.removeAttribute("src"),ET(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}Jn.audios=[],Jn._volume=NT;class rh extends Ei{constructor(e,r){super(),this.motionGroups={},this.state=new RT,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let r;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":r=Object.keys(this.definitions);break;case"IDLE":default:r=[this.groups.idle];break}for(const i of r)if(this.definitions[i])for(let s=0;s<this.definitions[i].length;s++)this.loadMotion(i,s).then()}loadMotion(e,r){return Rr(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[r])){_r.warn(this.tag,`Undefined motion at "${e}"[${r}]`);return}if(this.motionGroups[e][r]===null){_r.warn(this.tag,`Cannot start motion at "${e}"[${r}] because it's already failed in loading.`);return}if(this.motionGroups[e][r])return this.motionGroups[e][r];const s=yield this._loadMotion(e,r);if(!this.destroyed)return this.motionGroups[e][r]=s!=null?s:null,s})}_loadMotion(e,r){throw new Error("Not implemented.")}startMotion(e,r){return Rr(this,arguments,function*(i,s,o=t0.NORMAL){var h;if(!this.state.reserve(i,s,o))return!1;const u=(h=this.definitions[i])==null?void 0:h[s];if(!u)return!1;this.currentAudio&&Jn.dispose(this.currentAudio);let c;if(Yr.sound){const y=this.getSoundFile(u);if(y)try{c=Jn.add(this.settings.resolveURL(y),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=c}catch(w){_r.warn(this.tag,"Failed to create audio",y,w)}}const _=yield this.loadMotion(i,s);if(c){const y=Jn.play(c).catch(w=>_r.warn(this.tag,"Failed to play audio",c.src,w));Yr.motionSync&&(yield y)}return this.state.start(_,i,s,o)?(_r.log(this.tag,"Start motion:",this.getMotionName(u)),this.emit("motionStart",i,s,c),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(_),!0):(c&&(Jn.dispose(c),this.currentAudio=void 0),!1)})}startRandomMotion(e,r){return Rr(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const s=[];for(let o=0;o<i.length;o++)this.motionGroups[e][o]!==null&&!this.state.isActive(e,o)&&s.push(o);if(s.length){const o=Math.floor(Math.random()*s.length);return this.startMotion(e,s[o],r)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(Jn.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,r){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,t0.IDLE)),this.updateParameters(e,r)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const r=this;r.definitions=void 0,r.motionGroups=void 0}}const LT={x:0,y:0,width:0,height:0};class Bp extends Ei{constructor(){super(...arguments),this.focusController=new $T,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new wr,this.drawingMatrix=new wr,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,r=this.getSize();e.originalWidth=r[0],e.originalHeight=r[1];const i=Object.assign({width:Mp,height:Up},this.getLayout());this.localTransform.scale(i.width/Mp,i.height/Up),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const s=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,o=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*s,-this.height*o)}setupHitAreas(){const e=this.getHitAreaDefs().filter(r=>r.index>=0);for(const r of e)this.hitAreas[r.name]=r}hitTest(e,r){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,r))}isHit(e,r,i){if(!this.hitAreas[e])return!1;const s=this.hitAreas[e].index,o=this.getDrawableBounds(s,LT);return o.x<=r&&r<=o.x+o.width&&o.y<=i&&i<=o.y+o.height}getDrawableBounds(e,r){const i=this.getDrawableVertices(e);let s=i[0],o=i[0],h=i[1],u=i[1];for(let c=0;c<i.length;c+=2){const _=i[c],y=i[c+1];s=Math.min(_,s),o=Math.max(_,o),h=Math.min(y,h),u=Math.max(y,u)}return r!=null||(r={}),r.x=s,r.y=h,r.width=o-s,r.height=u-h,r}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,r){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const OT="XHRLoader";class kp extends Error{constructor(e,r,i,s=!1){super(e),this.url=r,this.status=i,this.aborted=s}}const Kr=class{static createXHR(t,e,r,i,s){const o=new XMLHttpRequest;if(Kr.allXhrSet.add(o),t){let h=Kr.xhrMap.get(t);h?h.add(o):(h=new Set([o]),Kr.xhrMap.set(t,h)),t.listeners("destroy").includes(Kr.cancelXHRs)||t.once("destroy",Kr.cancelXHRs)}return o.open("GET",e),o.responseType=r,o.onload=()=>{(o.status===200||o.status===0)&&o.response?i(o.response):o.onerror()},o.onerror=()=>{_r.warn(OT,`Failed to load resource as ${o.responseType} (Status ${o.status}): ${e}`),s(new kp("Network error.",e,o.status))},o.onabort=()=>s(new kp("Aborted.",e,o.status,!0)),o.onloadend=()=>{var h;Kr.allXhrSet.delete(o),t&&((h=Kr.xhrMap.get(t))==null||h.delete(o))},o}static cancelXHRs(){var t;(t=Kr.xhrMap.get(this))==null||t.forEach(e=>{e.abort(),Kr.allXhrSet.delete(e)}),Kr.xhrMap.delete(this)}static release(){Kr.allXhrSet.forEach(t=>t.abort()),Kr.allXhrSet.clear(),Kr.xhrMap=new WeakMap}};let ih=Kr;ih.xhrMap=new WeakMap,ih.allXhrSet=new Set,ih.loader=(t,e)=>new Promise((r,i)=>{Kr.createXHR(t.target,t.settings?t.settings.resolveURL(t.url):t.url,t.type,o=>{t.result=o,r()},i).send()});function Xp(t,e){let r=-1;return i(0);function i(s,o){if(o)return Promise.reject(o);if(s<=r)return Promise.reject(new Error("next() called multiple times"));r=s;const h=t[s];if(!h)return Promise.resolve();try{return Promise.resolve(h(e,i.bind(null,s+1)))}catch(u){return Promise.reject(u)}}}class En{static load(e){return Xp(this.middlewares,e).then(()=>e.result)}}En.middlewares=[ih.loader];function FT(t,e={}){var r;const i={resourceOptions:{crossorigin:e.crossOrigin}};if(Fe.fromURL)return Fe.fromURL(t,i).catch(h=>{if(h instanceof Error)throw h;const u=new Error("Texture loading error");throw u.event=h,u});i.resourceOptions.autoLoad=!1;const s=Fe.from(t,i);if(s.baseTexture.valid)return Promise.resolve(s);const o=s.baseTexture.resource;return(r=o._live2d_load)!=null||(o._live2d_load=new Promise((h,u)=>{const c=_=>{o.source.removeEventListener("error",c);const y=new Error("Texture loading error");y.event=_,u(y)};o.source.addEventListener("error",c),o.load().then(()=>h(s)).catch(c)})),o._live2d_load}const Vp="Live2DFactory",Hp=(t,e)=>Rr(void 0,null,function*(){if(typeof t.source=="string"){const r=yield En.load({url:t.source,type:"json",target:t.live2dModel});r.url=t.source,t.source=r,t.live2dModel.emit("settingsJSONLoaded",r)}return e()}),zp=(t,e)=>Rr(void 0,null,function*(){if(t.source instanceof eh)return t.settings=t.source,e();if(typeof t.source=="object"){const r=Er.findRuntime(t.source);if(r){const i=r.createModelSettings(t.source);return t.settings=i,t.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),jp=(t,e)=>{if(t.settings){const r=Er.findRuntime(t.settings);if(r)return r.ready().then(e)}return e()},Wp=(t,e)=>Rr(void 0,null,function*(){yield e();const r=t.internalModel;if(r){const i=t.settings,s=Er.findRuntime(i);if(s){const o=[];i.pose&&o.push(En.load({settings:i,url:i.pose,type:"json",target:r}).then(h=>{r.pose=s.createPose(r.coreModel,h),t.live2dModel.emit("poseLoaded",r.pose)}).catch(h=>{t.live2dModel.emit("poseLoadError",h),_r.warn(Vp,"Failed to load pose.",h)})),i.physics&&o.push(En.load({settings:i,url:i.physics,type:"json",target:r}).then(h=>{r.physics=s.createPhysics(r.coreModel,h),t.live2dModel.emit("physicsLoaded",r.physics)}).catch(h=>{t.live2dModel.emit("physicsLoadError",h),_r.warn(Vp,"Failed to load physics.",h)})),o.length&&(yield Promise.all(o))}}}),Yp=(t,e)=>Rr(void 0,null,function*(){if(t.settings){const r=t.live2dModel,i=t.settings.textures.map(s=>{const o=t.settings.resolveURL(s);return FT(o,{crossOrigin:t.options.crossOrigin})});if(yield e(),t.internalModel)r.internalModel=t.internalModel,r.emit("modelLoaded",t.internalModel);else throw new TypeError("Missing internal model.");r.textures=yield Promise.all(i),r.emit("textureLoaded",r.textures)}else throw new TypeError("Missing settings.")}),qp=(t,e)=>Rr(void 0,null,function*(){const r=t.settings;if(r instanceof eh){const i=Er.findRuntime(r);if(!i)throw new TypeError("Unknown model settings.");const s=yield En.load({settings:r,url:r.moc,type:"arraybuffer",target:t.live2dModel});if(!i.isValidMoc(s))throw new Error("Invalid moc data");const o=i.createCoreModel(s);return t.internalModel=i.createInternalModel(o,r,t.options),e()}throw new TypeError("Missing settings.")}),qr=class{static registerRuntime(t){qr.runtimes.push(t),qr.runtimes.sort((e,r)=>r.version-e.version)}static findRuntime(t){for(const e of qr.runtimes)if(e.test(t))return e}static setupLive2DModel(t,e,r){return Rr(this,null,function*(){const i=new Promise(h=>t.once("textureLoaded",h)),s=new Promise(h=>t.once("modelLoaded",h)),o=Promise.all([i,s]).then(()=>t.emit("ready"));yield Xp(qr.live2DModelMiddlewares,{live2dModel:t,source:e,options:r||{}}),yield o,t.emit("load")})}static loadMotion(t,e,r){var i,s;const o=h=>t.emit("motionLoadError",e,r,h);try{const h=(i=t.definitions[e])==null?void 0:i[r];if(!h)return Promise.resolve(void 0);t.listeners("destroy").includes(qr.releaseTasks)||t.once("destroy",qr.releaseTasks);let u=qr.motionTasksMap.get(t);u||(u={},qr.motionTasksMap.set(t,u));let c=u[e];c||(c=[],u[e]=c);const _=t.getMotionFile(h);return(s=c[r])!=null||(c[r]=En.load({url:_,settings:t.settings,type:t.motionDataType,target:t}).then(y=>{var w;const b=(w=qr.motionTasksMap.get(t))==null?void 0:w[e];b&&delete b[r];const E=t.createMotion(y,e,h);return t.emit("motionLoaded",e,r,E),E}).catch(y=>{_r.warn(t.tag,`Failed to load motion: ${_}
`,y),o(y)})),c[r]}catch(h){_r.warn(t.tag,`Failed to load motion at "${e}"[${r}]
`,h),o(h)}return Promise.resolve(void 0)}static loadExpression(t,e){var r;const i=s=>t.emit("expressionLoadError",e,s);try{const s=t.definitions[e];if(!s)return Promise.resolve(void 0);t.listeners("destroy").includes(qr.releaseTasks)||t.once("destroy",qr.releaseTasks);let o=qr.expressionTasksMap.get(t);o||(o=[],qr.expressionTasksMap.set(t,o));const h=t.getExpressionFile(s);return(r=o[e])!=null||(o[e]=En.load({url:h,settings:t.settings,type:"json",target:t}).then(u=>{const c=qr.expressionTasksMap.get(t);c&&delete c[e];const _=t.createExpression(u,s);return t.emit("expressionLoaded",e,_),_}).catch(u=>{_r.warn(t.tag,`Failed to load expression: ${h}
`,u),i(u)})),o[e]}catch(s){_r.warn(t.tag,`Failed to load expression at [${e}]
`,s),i(s)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof rh?qr.motionTasksMap.delete(this):qr.expressionTasksMap.delete(this)}};let Er=qr;Er.runtimes=[],Er.urlToJSON=Hp,Er.jsonToSettings=zp,Er.waitUntilReady=jp,Er.setupOptionals=Wp,Er.setupEssentials=Yp,Er.createInternalModel=qp,Er.live2DModelMiddlewares=[Hp,zp,jp,Wp,Yp,qp],Er.motionTasksMap=new WeakMap,Er.expressionTasksMap=new WeakMap,rh.prototype._loadMotion=function(t,e){return Er.loadMotion(this,t,e)},Ku.prototype._loadExpression=function(t){return Er.loadExpression(this,t)};class MT{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",Zp,this):this.off("pointertap",Zp,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",Jp,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",Jp,this),this.interactionManager=void 0)}}function Zp(t){this.tap(t.data.global.x,t.data.global.y)}function Jp(t){this.focus(t.data.global.x,t.data.global.y)}class UT extends ba{}const mi=new dr,GT=new wr;let In;class Qp extends vi{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new UT,this.anchor=new xn(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,r){const i=new this(r);return Er.setupLive2DModel(i,e,r).then(()=>i)}static fromSync(e,r){const i=new this(r);return Er.setupLive2DModel(i,e,r).then(r==null?void 0:r.onLoad).catch(r==null?void 0:r.onError),i}static registerTicker(e){In=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var r;In||(In=(r=window.PIXI)==null?void 0:r.Ticker),e?this._destroyed||(In?(In.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):_r.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(In==null||In.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const r=Object.assign({autoUpdate:!0,autoInteract:!0},e);r.autoInteract&&(this.interactive=!0),this.autoInteract=r.autoInteract,this.autoUpdate=r.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,r,i){return r===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,r,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,r,i=!1){mi.x=e,mi.y=r,this.toModelPosition(mi,mi,!0);let s=mi.x/this.internalModel.originalWidth*2-1,o=mi.y/this.internalModel.originalHeight*2-1,h=Math.atan2(o,s);this.internalModel.focusController.focus(Math.cos(h),-Math.sin(h),i)}tap(e,r){const i=this.hitTest(e,r);i.length&&(_r.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,r){return mi.x=e,mi.y=r,this.toModelPosition(mi,mi),this.internalModel.hitTest(mi.x,mi.y)}toModelPosition(e,r=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,r),this.internalModel.localTransform.applyInverse(r,r),r}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(In.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let r=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),r=!0);for(let o=0;o<this.textures.length;o++){const h=this.textures[o];h.valid&&((r||!h.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(h.baseTexture,0)),this.internalModel.bindTexture(o,h.baseTexture._glTextures[this.glContextID].texture),h.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const s=GT.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(s),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(r=>r.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}Gp(Qp,[MT]);const Yi=class{static resolveURL(t,e){var r;const i=(r=Yi.filesMap[t])==null?void 0:r[e];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return i}static upload(t,e){return Rr(this,null,function*(){const r={};for(const i of e.getDefinedFiles()){const s=decodeURI(Hi.resolve(e.url,i)),o=t.find(h=>h.webkitRelativePath===s);o&&(r[i]=URL.createObjectURL(o))}Yi.filesMap[e._objectURL]=r})}static createSettings(t){return Rr(this,null,function*(){const e=t.find(h=>h.name.endsWith("model.json")||h.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const r=yield Yi.readText(e),i=JSON.parse(r);i.url=e.webkitRelativePath;const s=Er.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");const o=s.createModelSettings(i);return o._objectURL=URL.createObjectURL(e),o})}static readText(t){return Rr(this,null,function*(){return new Promise((e,r)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsText(t,"utf8")})})}};let e0=Yi;e0.filesMap={},e0.factory=(t,e)=>Rr(void 0,null,function*(){if(Array.isArray(t.source)&&t.source[0]instanceof File){const r=t.source;let i=r.settings;if(!i)i=yield Yi.createSettings(r);else if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');i.validateFiles(r.map(s=>encodeURI(s.webkitRelativePath))),yield Yi.upload(r,i),i.resolveURL=function(s){return Yi.resolveURL(this._objectURL,s)},t.source=i,t.live2dModel.once("modelLoaded",s=>{s.once("destroy",function(){const o=this.settings._objectURL;if(URL.revokeObjectURL(o),Yi.filesMap[o])for(const h of Object.values(Yi.filesMap[o]))URL.revokeObjectURL(h);delete Yi.filesMap[o]})})}return e()}),Er.live2DModelMiddlewares.unshift(e0.factory);const oi=class{static unzip(t,e){return Rr(this,null,function*(){const r=yield oi.getFilePaths(t),i=[];for(const o of e.getDefinedFiles()){const h=decodeURI(Hi.resolve(e.url,o));r.includes(h)&&i.push(h)}const s=yield oi.getFiles(t,i);for(let o=0;o<s.length;o++){const h=i[o],u=s[o];Object.defineProperty(u,"webkitRelativePath",{value:h})}return s})}static createSettings(t){return Rr(this,null,function*(){const r=(yield oi.getFilePaths(t)).find(h=>h.endsWith("model.json")||h.endsWith("model3.json"));if(!r)throw new Error("Settings file not found");const i=yield oi.readText(t,r);if(!i)throw new Error("Empty settings file: "+r);const s=JSON.parse(i);s.url=r;const o=Er.findRuntime(s);if(!o)throw new Error("Unknown settings JSON");return o.createModelSettings(s)})}static zipReader(t,e){return Rr(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(t){return Rr(this,null,function*(){throw new Error("Not implemented")})}static getFiles(t,e){return Rr(this,null,function*(){throw new Error("Not implemented")})}static readText(t,e){return Rr(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(t){}};let nh=oi;if(nh.ZIP_PROTOCOL="zip://",nh.uid=0,nh.factory=(t,e)=>Rr(void 0,null,function*(){const r=t.source;let i,s,o;if(typeof r=="string"&&(r.endsWith(".zip")||r.startsWith(oi.ZIP_PROTOCOL))?(r.startsWith(oi.ZIP_PROTOCOL)?i=r.slice(oi.ZIP_PROTOCOL.length):i=r,s=yield En.load({url:i,type:"blob",target:t.live2dModel})):Array.isArray(r)&&r.length===1&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(s=r[0],i=URL.createObjectURL(s),o=r.settings),s){if(!s.size)throw new Error("Empty zip file");const h=yield oi.zipReader(s,i);o||(o=yield oi.createSettings(h)),o._objectURL=oi.ZIP_PROTOCOL+oi.uid+"/"+o.url;const u=yield oi.unzip(h,o);u.settings=o,t.source=u,i.startsWith("blob:")&&t.live2dModel.once("modelLoaded",c=>{c.once("destroy",function(){URL.revokeObjectURL(i)})}),oi.releaseReader(h)}return e()}),Er.live2DModelMiddlewares.unshift(nh.factory),!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const DT=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(t,e){DT.call(this,t,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class BT extends AMotion{constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:Yr.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:Yr.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(r=>{const i=r.calc||"add";if(i==="add"){const s=r.def||0;r.val-=s}else if(i==="mult"){const s=r.def||1;r.val/=s}this.params.push({calc:i,val:r.val,id:r.id})})}updateParamExe(e,r,i,s){this.params.forEach(o=>{e.setParamFloat(o.id,o.val*i)})}}class kT extends Ku{constructor(e,r){var i;super(e,r),this.queueManager=new MotionQueueManager,this.definitions=(i=this.settings.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.name===e)}getExpressionFile(e){return e.file}createExpression(e,r){return new BT(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}}class XT extends rh{constructor(e,r){super(e,r),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new kT(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,r,i){const s=Live2DMotion.loadMotion(e),o=r===this.groups.idle?Yr.idleMotionFadingDuration:Yr.motionFadingDuration;return s.setFadeIn(i.fade_in>0?i.fade_in:o),s.setFadeOut(i.fade_out>0?i.fade_out:o),s}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,r){return e.onFinishHandler=r,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class VT{constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=th(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+wT(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const Qn=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class HT extends Bp{constructor(e,r,i){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=r,this.motionManager=new XT(r,i),this.eyeBlink=new VT(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:o,value:h})=>this.coreModel.setParamFloat(o,h)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:o,value:h})=>this.coreModel.setPartsOpacity(o,h)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e!=null&&e.length&&(this.drawDataCount=e.length);let r=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:o=>r=o,get:()=>this.disableCulling?!1:r});const i=this.coreModel.getModelContext().clipManager,s=i.setupClip;i.setupClip=(o,h)=>{s.call(i,o,h),h.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){let i=r;r==="center_x"?i="centerX":r==="center_y"&&(i="centerY"),e[i]=this.settings.layout[r]}return e}updateWebGLContext(e,r){const i=this.coreModel.drawParamWebGL;i.firstDraw=!0,i.setGL(e),i.glno=r;for(const h in i)i.hasOwnProperty(h)&&i[h]instanceof WebGLBuffer&&(i[h]=null);const s=this.coreModel.getModelContext().clipManager;s.curFrameNo=r;const o=e.getParameter(e.FRAMEBUFFER_BINDING);s.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,o)}bindTexture(e,r){this.coreModel.setTexture(e,r)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(r=>({id:r.id,name:r.name,index:this.coreModel.getDrawDataIndex(r.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),r=[];for(let i=0;i<this.drawDataCount;i++){const s=e.getDrawData(i);s&&r.push(s.getDrawDataID().id)}return r}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,r){var i,s,o,h;super.update(e,r);const u=this.coreModel;this.emit("beforeMotionUpdate");const c=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),u.saveParam(),(i=this.motionManager.expressionManager)==null||i.update(u,r),c||(s=this.eyeBlink)==null||s.update(e),this.updateFocus(),this.updateNaturalMovements(e,r),(o=this.physics)==null||o.update(r),(h=this.pose)==null||h.update(e),this.emit("beforeModelUpdate"),u.update(),u.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,r){const i=r/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(i/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(i/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(i/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(i/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(i/3.2345))}draw(e){const r=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const i=this.drawingMatrix;Qn[0]=i.a,Qn[1]=i.b,Qn[4]=i.c,Qn[5]=i.d,Qn[12]=i.tx,Qn[13]=i.ty,this.coreModel.setMatrix(Qn),this.coreModel.draw(),this.disableCulling=r}destroy(){super.destroy(),this.coreModel=void 0}}class Fo extends eh{constructor(e){if(super(e),this.motions={},!Fo.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,Oo("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var r;return!!e&&typeof e.model=="string"&&((r=e.textures)==null?void 0:r.length)>0&&e.textures.every(i=>typeof i=="string")}copy(e){Lo("string",e,this,"name","name"),Lo("string",e,this,"pose","pose"),Lo("string",e,this,"physics","physics"),Lo("object",e,this,"layout","layout"),Lo("object",e,this,"motions","motions"),Oo("object",e,this,"hit_areas","hitAreas"),Oo("object",e,this,"expressions","expressions"),Oo("object",e,this,"init_params","initParams"),Oo("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[r,i]of Object.entries(this.motions))for(let s=0;s<i.length;s++)i[s].file=e(i[s].file,`motions.${r}[${s}].file`),i[s].sound!==void 0&&(i[s].sound=e(i[s].sound,`motions.${r}[${s}].sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].file=e(this.expressions[r].file,`expressions[${r}].file`)}}const zT={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},jT={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class WT{constructor(e,r){this.coreModel=e,this.physicsHairs=[],r.physics_hair&&(this.physicsHairs=r.physics_hair.map(i=>{const s=new PhysicsHair;return s.setup(i.setup.length,i.setup.regist,i.setup.mass),i.src.forEach(({id:o,ptype:h,scale:u,weight:c})=>{const _=zT[h];_&&s.addSrcParam(_,o,u,c)}),i.targets.forEach(({id:o,ptype:h,scale:u,weight:c})=>{const _=jT[h];_&&s.addTargetParam(_,o,u,c)}),s}))}update(e){this.physicsHairs.forEach(r=>r.update(this.coreModel,e))}}class Kp{constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class YT{constructor(e,r){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],r.parts_visible&&(this.partsGroups=r.parts_visible.map(({group:i})=>i.map(({id:s,link:o})=>{const h=new Kp(s);return o&&(h.link=o.map(u=>new Kp(u))),h})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(r=>{if(r.initIndex(this.coreModel),r.paramIndex>=0){const i=this.coreModel.getParamFloat(r.paramIndex)!==0;this.coreModel.setPartsOpacity(r.partsIndex,i?1:0),this.coreModel.setParamFloat(r.paramIndex,i?1:0),r.link.length>0&&r.link.forEach(s=>s.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,r){const i=this.coreModel,s=.5,o=.15;let h=1,u=e.findIndex(({paramIndex:c,partsIndex:_})=>_>=0&&i.getParamFloat(c)!==0);if(u>=0){const c=i.getPartsOpacity(e[u].partsIndex);h=th(c+r/this.opacityAnimDuration,0,1)}else u=0,h=1;e.forEach(({partsIndex:c},_)=>{if(c>=0)if(u==_)i.setPartsOpacity(c,h);else{let y=i.getPartsOpacity(c),w;h<s?w=h*(s-1)/s+1:w=(1-h)*s/(1-s),(1-w)*(1-h)>o&&(w=1-o/(1-h)),y>w&&(y=w),i.setPartsOpacity(c,y)}})}copyOpacity(e){const r=this.coreModel;e.forEach(({partsIndex:i,link:s})=>{if(i>=0&&s){const o=r.getPartsOpacity(i);s.forEach(({partsIndex:h})=>{h>=0&&r.setPartsOpacity(h,o)})}})}update(e){this.partsGroups.forEach(r=>{this.normalizePartsOpacityGroup(r,e),this.copyOpacity(r)})}}if(Er.registerRuntime({version:2,test(t){return t instanceof Fo||Fo.isValidJSON(t)},ready(){return Promise.resolve()},isValidMoc(t){if(t.byteLength<3)return!1;const e=new Int8Array(t,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings(t){return new Fo(t)},createCoreModel(t){const e=Live2DModelWebGL.loadModel(t),r=Live2D.getError();if(r)throw r;return e},createInternalModel(t,e,r){return new HT(t,e,r)},createPose(t,e){return new YT(t,e)},createPhysics(t,e){return new WT(t,e)}}),!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class Ue{constructor(e,r){this.x=e||0,this.y=r||0}add(e){const r=new Ue(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r}substract(e){const r=new Ue(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r}multiply(e){const r=new Ue(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r}multiplyByScaler(e){return this.multiply(new Ue(e,e))}division(e){const r=new Ue(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r}divisionByScalar(e){return this.division(new Ue(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const sh=class{static range(t,e,r){return t<e?t=e:t>r&&(t=r),t}static sin(t){return Math.sin(t)}static cos(t){return Math.cos(t)}static abs(t){return Math.abs(t)}static sqrt(t){return Math.sqrt(t)}static cbrt(t){if(t===0)return t;let e=t;const r=e<0;r&&(e=-e);let i;return e===1/0?i=1/0:(i=Math.exp(Math.log(e)/3),i=(e/(i*i)+2*i)/3),r?-i:i}static getEasingSine(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)}static max(t,e){return t>e?t:e}static min(t,e){return t>e?e:t}static degreesToRadian(t){return t/180*Math.PI}static radianToDegrees(t){return t*180/Math.PI}static directionToRadian(t,e){const r=Math.atan2(e.y,e.x),i=Math.atan2(t.y,t.x);let s=r-i;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}static directionToDegrees(t,e){const r=this.directionToRadian(t,e);let i=this.radianToDegrees(r);return e.x-t.x>0&&(i=-i),i}static radianToDirection(t){const e=new Ue;return e.x=this.sin(t),e.y=this.cos(t),e}static quadraticEquation(t,e,r){return this.abs(t)<sh.Epsilon?this.abs(e)<sh.Epsilon?-r:-r/e:-(e+this.sqrt(e*e-4*t*r))/(2*t)}static cardanoAlgorithmForBezier(t,e,r,i){if(this.sqrt(t)<sh.Epsilon)return this.range(this.quadraticEquation(e,r,i),0,1);const s=e/t,o=r/t,h=i/t,u=(3*o-s*s)/3,c=u/3,_=(2*s*s*s-9*s*o+27*h)/27,y=_/2,w=y*y+c*c*c,b=.5,E=b+.01;if(w<0){const Y=-u/3,J=Y*Y*Y,it=this.sqrt(J),st=-_/(2*it),K=this.range(st,-1,1),At=Math.acos(K),dt=2*this.cbrt(it),Et=dt*this.cos(At/3)-s/3;if(this.abs(Et-b)<E)return this.range(Et,0,1);const Rt=dt*this.cos((At+2*Math.PI)/3)-s/3;if(this.abs(Rt-b)<E)return this.range(Rt,0,1);const Ft=dt*this.cos((At+4*Math.PI)/3)-s/3;return this.range(Ft,0,1)}if(w==0){let Y;y<0?Y=this.cbrt(-y):Y=-this.cbrt(y);const J=2*Y-s/3;if(this.abs(J-b)<E)return this.range(J,0,1);const it=-Y-s/3;return this.range(it,0,1)}const T=this.sqrt(w),P=this.cbrt(T-y),O=this.cbrt(T+y),H=P-O-s/3;return this.range(H,0,1)}constructor(){}};let mr=sh;mr.Epsilon=1e-5;class gi{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,r,i){const s=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=4;for(let h=0;h<o;++h)for(let u=0;u<o;++u)for(let c=0;c<o;++c)s[u+h*4]+=e[c+h*4]*r[u+c*4];for(let h=0;h<16;++h)i[h]=s[h]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let r=0;r<16;++r)this._tr[r]=e[r]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,r){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);gi.multiply(i,this._tr,this._tr)}translate(e,r){this._tr[12]=e,this._tr[13]=r}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,r){const i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);gi.multiply(i,this._tr,this._tr)}scale(e,r){this._tr[0]=e,this._tr[5]=r}multiplyByMatrix(e){gi.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new gi;for(let r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e}}class r0{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,r,i,s){e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),this._modelColor.R=e,this._modelColor.G=r,this._modelColor.B=i,this._modelColor.A=s}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new Mo,this._mvpMatrix4x4=new gi,this._mvpMatrix4x4.loadIdentity()}}var Cn=(t=>(t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",t))(Cn||{});class Mo{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let qi=!1,Gs=!1,Ds;const i0={vertexOffset:0,vertexStep:2};class Uo{static startUp(e){if(qi)return Go("CubismFramework.startUp() is already done."),qi;if(Live2DCubismCore._isStarted)return qi=!0,!0;if(Live2DCubismCore._isStarted=!0,Ds=e,Ds&&Live2DCubismCore.Logging.csmSetLogFunction(Ds.logFunction),qi=!0,qi){const r=Live2DCubismCore.Version.csmGetVersion(),i=(r&4278190080)>>24,s=(r&16711680)>>16,o=r&65535,h=r;Go("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+s).slice(-2),("0000"+o).slice(-4),h)}return Go("CubismFramework.startUp() is complete."),qi}static cleanUp(){qi=!1,Gs=!1,Ds=void 0}static initialize(){if(!qi){Do("CubismFramework is not started.");return}if(Gs){Do("CubismFramework.initialize() skipped, already initialized.");return}Gs=!0,Go("CubismFramework.initialize() is complete.")}static dispose(){if(!qi){Do("CubismFramework is not started.");return}if(!Gs){Do("CubismFramework.dispose() skipped, not initialized.");return}r0.staticRelease(),Gs=!1,Go("CubismFramework.dispose() is complete.")}static isStarted(){return qi}static isInitialized(){return Gs}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return Ds!=null?Ds.loggingLevel:Kn.LogLevel_Off}constructor(){}}var Kn=(t=>(t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off",t))(Kn||{});const oh=()=>{};function t2(t,...e){ah.print(Kn.LogLevel_Debug,"[CSM][D]"+t+`
`,e)}function Go(t,...e){ah.print(Kn.LogLevel_Info,"[CSM][I]"+t+`
`,e)}function Do(t,...e){ah.print(Kn.LogLevel_Warning,"[CSM][W]"+t+`
`,e)}function Bs(t,...e){ah.print(Kn.LogLevel_Error,"[CSM][E]"+t+`
`,e)}class ah{static print(e,r,i){if(e<Uo.getLoggingLevel())return;const s=Uo.coreLogFunction;if(!s)return;const o=r.replace(/{(\d+)}/g,(h,u)=>i[u]);s(o)}static dumpBytes(e,r,i){for(let s=0;s<i;s++)s%16==0&&s>0?this.print(e,`
`):s%8==0&&s>0&&this.print(e,"  "),this.print(e,"{0} ",[r[s]&255]);this.print(e,`
`)}constructor(){}}class e2{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,r,i){if(!r.isAvailable()||r.isFinished())return;if(!r.isStarted()){r.setIsStarted(!0),r.setStartTime(i-this._offsetSeconds),r.setFadeInStartTime(i);const u=this.getDuration();r.getEndTime()<0&&r.setEndTime(u<=0?-1:r.getStartTime()+u)}let s=this._weight;const o=this._fadeInSeconds==0?1:mr.getEasingSine((i-r.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds==0||r.getEndTime()<0?1:mr.getEasingSine((r.getEndTime()-i)/this._fadeOutSeconds);s=s*o*h,r.setState(i,s),this.doUpdateParameters(e,i,s,r),r.getEndTime()>0&&r.getEndTime()<i&&r.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,r){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}}const r2=1;class n0 extends e2{constructor(){super(),this._parameters=[]}static create(e){const r=new n0,i=e.FadeInTime,s=e.FadeOutTime;r.setFadeInTime(i!==void 0?i:r2),r.setFadeOutTime(s!==void 0?s:r2);const o=e.Parameters||[];for(let h=0;h<o.length;++h){const u=o[h],c=u.Id,_=u.Value;let y;switch(u.Blend){case"Multiply":y=ts.ExpressionBlendType_Multiply;break;case"Overwrite":y=ts.ExpressionBlendType_Overwrite;break;case"Add":default:y=ts.ExpressionBlendType_Add;break}const w={parameterId:c,blendType:y,value:_};r._parameters.push(w)}return r}doUpdateParameters(e,r,i,s){for(let o=0;o<this._parameters.length;++o){const h=this._parameters[o];switch(h.blendType){case ts.ExpressionBlendType_Add:{e.addParameterValueById(h.parameterId,h.value,i);break}case ts.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(h.parameterId,h.value,i);break}case ts.ExpressionBlendType_Overwrite:{e.setParameterValueById(h.parameterId,h.value,i);break}}}}}var ts=(t=>(t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",t))(ts||{});class qT{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,r){const i=r+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,r){this._stateTimeSeconds=e,this._stateWeight=r}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class i2{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,r,i){if(e==null)return ZT;let s;for(let o=0;o<this._motions.length;++o)s=this._motions[o],s!=null&&s.setFadeOut(s._motion.getFadeOutTime());return s=new qT,s._autoDelete=r,s._motion=e,this._motions.push(s),s._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const r=this._motions[e];if(r==null){this._motions.splice(e,1);continue}if(r._motion==null){r.release(),this._motions.splice(e,1);continue}if(!r.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let r=0;r<this._motions.length;r++){const i=this._motions[r];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const r=this._motions[e];r!=null&&r.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(r=>r!=null&&r._motionQueueEntryHandle==e)}setEventCallback(e,r=null){this._eventCallBack=e,this._eventCustomData=r}doUpdateMotion(e,r){let i=!1,s=0;for(;s<this._motions.length;){const o=this._motions[s];if(o==null){this._motions.splice(s,1);continue}const h=o._motion;if(h==null){o.release(),this._motions.splice(s,1);continue}h.updateParameters(e,o,r),i=!0;const u=h.getFiredEvent(o.getLastCheckEventSeconds()-o.getStartTime(),r-o.getStartTime());for(let c=0;c<u.length;++c)this._eventCallBack(this,u[c],this._eventCustomData);o.setLastCheckEventSeconds(r),o.isFinished()?(o.release(),this._motions.splice(s,1)):(o.isTriggeredFadeOut()&&o.startFadeOut(o.getFadeOutSeconds(),r),s++)}return i}}const ZT=-1;class JT extends Ku{constructor(e,r){var i;super(e,r),this.queueManager=new i2,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.Name===e)}getExpressionFile(e){return e.File}createExpression(e,r){return n0.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}}class n2{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:r.Ids}getLipSyncParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:r.Ids}}class ks extends eh{constructor(e){if(super(e),!ks.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new n2(e))}static isValidJSON(e){var r;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((r=e.FileReferences.Textures)==null?void 0:r.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[r,i]of Object.entries(this.motions))for(let s=0;s<i.length;s++)i[s].File=e(i[s].File,`motions.${r}[${s}].File`),i[s].Sound!==void 0&&(i[s].Sound=e(i[s].Sound,`motions.${r}[${s}].Sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].File=e(this.expressions[r].File,`expressions[${r}].File`)}}Gp(ks,[n2]);var es=(t=>(t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",t))(es||{}),Zi=(t=>(t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",t))(Zi||{});class $n{constructor(e=0,r=0){this.time=e,this.value=r}}class QT{constructor(){this.basePointIndex=0,this.segmentType=0}}class KT{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class tA{constructor(){this.fireTime=0,this.value=""}}class eA{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class s2{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return s0.EvaluationOptionFlag_AreBeziersRistricted==e?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,r){return this._json.Curves[e].Segments[r]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var s0=(t=>(t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",t))(s0||{});const rA="EyeBlink",iA="LipSync",nA="Model",sA="Parameter",oA="PartOpacity",aA=!1;function yi(t,e,r){const i=new $n;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function hA(t,e){let r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function lA(t,e){let r=(e-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);const i=yi(t[0],t[1],r),s=yi(t[1],t[2],r),o=yi(t[2],t[3],r),h=yi(i,s,r),u=yi(s,o,r);return yi(h,u,r).value}function uA(t,e){const r=e,i=t[0].time,s=t[3].time,o=t[1].time,h=t[2].time,u=s-3*h+3*o-i,c=3*h-6*o+3*i,_=3*o-3*i,y=i-r,w=mr.cardanoAlgorithmForBezier(u,c,_,y),b=yi(t[0],t[1],w),E=yi(t[1],t[2],w),T=yi(t[2],t[3],w),P=yi(b,E,w),O=yi(E,T,w);return yi(P,O,w).value}function fA(t,e){return t[0].value}function cA(t,e){return t[1].value}function o0(t,e,r){const i=t.curves[e];let s=-1;const o=i.baseSegmentIndex+i.segmentCount;let h=0;for(let c=i.baseSegmentIndex;c<o;++c)if(h=t.segments[c].basePointIndex+(t.segments[c].segmentType==Zi.CubismMotionSegmentType_Bezier?3:1),t.points[h].time>r){s=c;break}if(s==-1)return t.points[h].value;const u=t.segments[s];return u.evaluate(t.points.slice(u.basePointIndex),r)}class a0 extends e2{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,r){const i=new a0;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=r,i}doUpdateParameters(e,r,i,s){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=rA),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=iA);let o=r-s.getStartTime();o<0&&(o=0);let h=Number.MAX_VALUE,u=Number.MAX_VALUE;const c=64;let _=0,y=0;this._eyeBlinkParameterIds.length>c&&t2("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>c&&t2("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const w=this._fadeInSeconds<=0?1:mr.getEasingSine((r-s.getFadeInStartTime())/this._fadeInSeconds),b=this._fadeOutSeconds<=0||s.getEndTime()<0?1:mr.getEasingSine((s.getEndTime()-r)/this._fadeOutSeconds);let E,T,P,O=o;if(this._isLoop)for(;O>this._motionData.duration;)O-=this._motionData.duration;const H=this._motionData.curves;for(T=0;T<this._motionData.curveCount&&H[T].type==es.CubismMotionCurveTarget_Model;++T)E=o0(this._motionData,T,O),H[T].id==this._modelCurveIdEyeBlink?u=E:H[T].id==this._modelCurveIdLipSync&&(h=E);for(;T<this._motionData.curveCount&&H[T].type==es.CubismMotionCurveTarget_Parameter;++T){if(P=e.getParameterIndex(H[T].id),P==-1)continue;const Y=e.getParameterValueByIndex(P);if(E=o0(this._motionData,T,O),u!=Number.MAX_VALUE){for(let it=0;it<this._eyeBlinkParameterIds.length&&it<c;++it)if(this._eyeBlinkParameterIds[it]==H[T].id){E*=u,y|=1<<it;break}}if(h!=Number.MAX_VALUE){for(let it=0;it<this._lipSyncParameterIds.length&&it<c;++it)if(this._lipSyncParameterIds[it]==H[T].id){E+=h,_|=1<<it;break}}let J;if(H[T].fadeInTime<0&&H[T].fadeOutTime<0)J=Y+(E-Y)*i;else{let it,st;H[T].fadeInTime<0?it=w:it=H[T].fadeInTime==0?1:mr.getEasingSine((r-s.getFadeInStartTime())/H[T].fadeInTime),H[T].fadeOutTime<0?st=b:st=H[T].fadeOutTime==0||s.getEndTime()<0?1:mr.getEasingSine((s.getEndTime()-r)/H[T].fadeOutTime);const K=this._weight*it*st;J=Y+(E-Y)*K}e.setParameterValueByIndex(P,J,1)}{if(u!=Number.MAX_VALUE)for(let Y=0;Y<this._eyeBlinkParameterIds.length&&Y<c;++Y){const J=e.getParameterValueById(this._eyeBlinkParameterIds[Y]);if(y>>Y&1)continue;const it=J+(u-J)*i;e.setParameterValueById(this._eyeBlinkParameterIds[Y],it)}if(h!=Number.MAX_VALUE)for(let Y=0;Y<this._lipSyncParameterIds.length&&Y<c;++Y){const J=e.getParameterValueById(this._lipSyncParameterIds[Y]);if(_>>Y&1)continue;const it=J+(h-J)*i;e.setParameterValueById(this._lipSyncParameterIds[Y],it)}}for(;T<this._motionData.curveCount&&H[T].type==es.CubismMotionCurveTarget_PartOpacity;++T)if(E=o0(this._motionData,T,O),No.setOpacityFromMotion)e.setPartOpacityById(H[T].id,E);else{if(P=e.getParameterIndex(H[T].id),P==-1)continue;e.setParameterValueByIndex(P,E)}o>=this._motionData.duration&&(this._isLoop?(s.setStartTime(r),this._isLoopFadeIn&&s.setFadeInStartTime(r)):(this._onFinishedMotion&&this._onFinishedMotion(this),s.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,r){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id){i[s].fadeInTime=r;return}}setParameterFadeOutTime(e,r){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id){i[s].fadeOutTime=r;return}}getParameterFadeInTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeInTime;return-1}getParameterFadeOutTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeOutTime;return-1}setEffectIds(e,r){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=r}release(){this._motionData=void 0}parse(e){this._motionData=new eA;let r=new s2(e);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const i=r.getEvaluationOptionFlag(s0.EvaluationOptionFlag_AreBeziersRistricted),s=r.getMotionFadeInTime(),o=r.getMotionFadeOutTime();s!==void 0?this._fadeInSeconds=s<0?1:s:this._fadeInSeconds=1,o!==void 0?this._fadeOutSeconds=o<0?1:o:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new KT),this._motionData.segments=Array.from({length:r.getMotionTotalSegmentCount()}).map(()=>new QT),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new tA),this._motionData.points=[];let h=0,u=0;for(let c=0;c<this._motionData.curveCount;++c){const _=this._motionData.curves[c];switch(r.getMotionCurveTarget(c)){case nA:_.type=es.CubismMotionCurveTarget_Model;break;case sA:_.type=es.CubismMotionCurveTarget_Parameter;break;case oA:_.type=es.CubismMotionCurveTarget_PartOpacity;break;default:Do('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}_.id=r.getMotionCurveId(c),_.baseSegmentIndex=u;const y=r.getMotionCurveFadeInTime(c),w=r.getMotionCurveFadeOutTime(c);_.fadeInTime=y!==void 0?y:-1,_.fadeOutTime=w!==void 0?w:-1;for(let b=0;b<r.getMotionCurveSegmentCount(c);){switch(b==0?(this._motionData.segments[u].basePointIndex=h,this._motionData.points[h]=new $n(r.getMotionCurveSegment(c,b),r.getMotionCurveSegment(c,b+1)),h+=1,b+=2):this._motionData.segments[u].basePointIndex=h-1,r.getMotionCurveSegment(c,b)){case Zi.CubismMotionSegmentType_Linear:{this._motionData.segments[u].segmentType=Zi.CubismMotionSegmentType_Linear,this._motionData.segments[u].evaluate=hA,this._motionData.points[h]=new $n(r.getMotionCurveSegment(c,b+1),r.getMotionCurveSegment(c,b+2)),h+=1,b+=3;break}case Zi.CubismMotionSegmentType_Bezier:{this._motionData.segments[u].segmentType=Zi.CubismMotionSegmentType_Bezier,i||aA?this._motionData.segments[u].evaluate=lA:this._motionData.segments[u].evaluate=uA,this._motionData.points[h]=new $n(r.getMotionCurveSegment(c,b+1),r.getMotionCurveSegment(c,b+2)),this._motionData.points[h+1]=new $n(r.getMotionCurveSegment(c,b+3),r.getMotionCurveSegment(c,b+4)),this._motionData.points[h+2]=new $n(r.getMotionCurveSegment(c,b+5),r.getMotionCurveSegment(c,b+6)),h+=3,b+=7;break}case Zi.CubismMotionSegmentType_Stepped:{this._motionData.segments[u].segmentType=Zi.CubismMotionSegmentType_Stepped,this._motionData.segments[u].evaluate=fA,this._motionData.points[h]=new $n(r.getMotionCurveSegment(c,b+1),r.getMotionCurveSegment(c,b+2)),h+=1,b+=3;break}case Zi.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[u].segmentType=Zi.CubismMotionSegmentType_InverseStepped,this._motionData.segments[u].evaluate=cA,this._motionData.points[h]=new $n(r.getMotionCurveSegment(c,b+1),r.getMotionCurveSegment(c,b+2)),h+=1,b+=3;break}}++_.segmentCount,++u}this._motionData.curves.push(_)}for(let c=0;c<r.getEventCount();++c)this._motionData.events[c].fireTime=r.getEventTime(c),this._motionData.events[c].value=r.getEventValue(c);r.release()}getFiredEvent(e,r){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=r&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}}class dA extends rh{constructor(e,r){var i;super(e,r),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new i2,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new JT(this.settings,e)),this.queueManager.setEventCallback((r,i,s)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,r){return e.setFinishedMotionHandler(r),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,r,i){const s=a0.create(e),o=new s2(e),h=(r===this.groups.idle?Yr.idleMotionFadingDuration:Yr.motionFadingDuration)/1e3;return o.getMotionFadeInTime()===void 0&&s.setFadeInTime(i.FadeInTime>0?i.FadeInTime:h),o.getMotionFadeOutTime()===void 0&&s.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:h),s.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),s}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const _A="ParamAngleX",pA="ParamAngleY",vA="ParamAngleZ",mA="ParamEyeBallX",gA="ParamEyeBallY",yA="ParamBodyAngleX",bA="ParamBreath";class h0{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new h0}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,r){this._currentTime+=r;const i=this._currentTime*2*3.14159;for(let s=0;s<this._breathParameters.length;++s){const o=this._breathParameters[s];e.addParameterValueById(o.parameterId,o.offset+o.peak*Math.sin(i/o.cycle),o.weight)}}}class Bo{constructor(e,r,i,s,o){this.parameterId=e==null?void 0:e,this.offset=r==null?0:r,this.peak=i==null?0:i,this.cycle=s==null?0:s,this.weight=o==null?0:o}}const l0=class{static create(t){return new l0(t)}setBlinkingInterval(t){this._blinkingIntervalSeconds=t}setBlinkingSetting(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r}setParameterIds(t){this._parameterIds=t}getParameterIds(){return this._parameterIds}updateParameters(t,e){this._userTimeSeconds+=e;let r,i=0;switch(this._blinkingState){case bi.EyeState_Closing:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=bi.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-i;break;case bi.EyeState_Closed:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=bi.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case bi.EyeState_Opening:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=bi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=i;break;case bi.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=bi.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case bi.EyeState_First:default:this._blinkingState=bi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1;break}l0.CloseIfZero||(r=-r);for(let s=0;s<this._parameterIds.length;++s)t.setParameterValueById(this._parameterIds[s],r)}constructor(t){var e,r;this._blinkingState=bi.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],t!=null&&(this._parameterIds=(r=(e=t.getEyeBlinkParameters())==null?void 0:e.slice())!=null?r:this._parameterIds)}determinNextBlinkingTiming(){const t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)}};let o2=l0;o2.CloseIfZero=!0;var bi=(t=>(t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening",t))(bi||{});class u0{constructor(e=0,r=0,i=0,s=0){this.x=e,this.y=r,this.width=i,this.height=s}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,r){this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2}}const f0=4,xA=10;let rs,ko,c0;class d0{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const r=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,r,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c0),this._maskTexture=new TA(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,r){let i=Number.MAX_VALUE,s=Number.MAX_VALUE,o=Number.MIN_VALUE,h=Number.MIN_VALUE;const u=r._clippedDrawableIndexList.length;for(let c=0;c<u;c++){const _=r._clippedDrawableIndexList[c],y=e.getDrawableVertexCount(_),w=e.getDrawableVertices(_);let b=Number.MAX_VALUE,E=Number.MAX_VALUE,T=Number.MIN_VALUE,P=Number.MIN_VALUE;const O=y*i0.vertexStep;for(let H=i0.vertexOffset;H<O;H+=i0.vertexStep){const Y=w[H],J=w[H+1];Y<b&&(b=Y),Y>T&&(T=Y),J<E&&(E=J),J>P&&(P=J)}if(b!=Number.MAX_VALUE)if(b<i&&(i=b),E<s&&(s=E),T>o&&(o=T),P>h&&(h=P),i==Number.MAX_VALUE)r._allClippedDrawRect.x=0,r._allClippedDrawRect.y=0,r._allClippedDrawRect.width=0,r._allClippedDrawRect.height=0,r._isUsing=!1;else{r._isUsing=!0;const H=o-i,Y=h-s;r._allClippedDrawRect.x=i,r._allClippedDrawRect.y=s,r._allClippedDrawRect.width=H,r._allClippedDrawRect.height=Y}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new u0,this._tmpMatrix=new gi,this._tmpMatrixForMask=new gi,this._tmpMatrixForDraw=new gi;let e=new Mo;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new Mo,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new Mo,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new Mo,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,r,i;const s=this;for(let o=0;o<this._clippingContextListForMask.length;o++)this._clippingContextListForMask[o]&&((e=this._clippingContextListForMask[o])==null||e.release());s._clippingContextListForMask=void 0,s._clippingContextListForDraw=void 0,this._maskTexture&&((r=this.gl)==null||r.deleteFramebuffer(this._maskTexture.texture),s._maskTexture=void 0),s._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,r,i,s){for(let o=0;o<r;o++){if(s[o]<=0){this._clippingContextListForDraw.push(null);continue}let h=this.findSameClip(i[o],s[o]);h==null&&(h=new AA(this,i[o],s[o]),this._clippingContextListForMask.push(h)),h.addClippedDrawable(o),this._clippingContextListForDraw.push(h)}}setupClippingContext(e,r){this._currentFrameNo++;let i=0;for(let s=0;s<this._clippingContextListForMask.length;s++){const o=this._clippingContextListForMask[s];this.calcClippedDrawTotalBounds(e,o),o._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),r.getMvpMatrix(),r.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let s=0;s<this._clippingContextListForMask.length;s++){const o=this._clippingContextListForMask[s],h=o._allClippedDrawRect,u=o._layoutBounds,c=.05;this._tmpBoundsOnModel.setRect(h),this._tmpBoundsOnModel.expand(h.width*c,h.height*c);const _=u.width/this._tmpBoundsOnModel.width,y=u.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(_,y),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(_,y),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const w=o._clippingIdCount;for(let b=0;b<w;b++){const E=o._clippingIdList[b];e.getDrawableDynamicFlagVertexPositionsDidChange(E)&&(r.setIsCulling(e.getDrawableCulling(E)!=!1),r.setClippingContextBufferForMask(o),r.drawMesh(e.getDrawableTextureIndices(E),e.getDrawableVertexIndexCount(E),e.getDrawableVertexCount(E),e.getDrawableVertexIndices(E),e.getDrawableVertices(E),e.getDrawableVertexUvs(E),e.getDrawableOpacity(E),Cn.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c0),r.setClippingContextBufferForMask(null),this.gl.viewport(ko[0],ko[1],ko[2],ko[3])}}findSameClip(e,r){for(let i=0;i<this._clippingContextListForMask.length;i++){const s=this._clippingContextListForMask[i],o=s._clippingIdCount;if(o!=r)continue;let h=0;for(let u=0;u<o;u++){const c=s._clippingIdList[u];for(let _=0;_<o;_++)if(e[_]==c){h++;break}}if(h==o)return s}return null}setupLayoutBounds(e){let r=e/f0,i=e%f0;r=~~r,i=~~i;let s=0;for(let o=0;o<f0;o++){const h=r+(o<i?1:0);if(h!=0)if(h==1){const u=this._clippingContextListForMask[s++];u._layoutChannelNo=o,u._layoutBounds.x=0,u._layoutBounds.y=0,u._layoutBounds.width=1,u._layoutBounds.height=1}else if(h==2)for(let u=0;u<h;u++){let c=u%2;c=~~c;const _=this._clippingContextListForMask[s++];_._layoutChannelNo=o,_._layoutBounds.x=c*.5,_._layoutBounds.y=0,_._layoutBounds.width=.5,_._layoutBounds.height=1}else if(h<=4)for(let u=0;u<h;u++){let c=u%2,_=u/2;c=~~c,_=~~_;const y=this._clippingContextListForMask[s++];y._layoutChannelNo=o,y._layoutBounds.x=c*.5,y._layoutBounds.y=_*.5,y._layoutBounds.width=.5,y._layoutBounds.height=.5}else if(h<=9)for(let u=0;u<h;u++){let c=u%3,_=u/3;c=~~c,_=~~_;const y=this._clippingContextListForMask[s++];y._layoutChannelNo=o,y._layoutBounds.x=c/3,y._layoutBounds.y=_/3,y._layoutBounds.width=1/3,y._layoutBounds.height=1/3}else if(No.supportMoreMaskDivisions&&h<=16)for(let u=0;u<h;u++){let c=u%4,_=u/4;c=~~c,_=~~_;const y=this._clippingContextListForMask[s++];y._layoutChannelNo=o,y._layoutBounds.x=c/4,y._layoutBounds.y=_/4,y._layoutBounds.width=1/4,y._layoutBounds.height=1/4}else Bs("not supported mask count : {0}",h)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class TA{constructor(e,r){this.frameNo=e,this.texture=r}}class AA{constructor(e,r,i){this._isUsing=!1,this._owner=e,this._clippingIdList=r,this._clippingIdCount=i,this._allClippedDrawRect=new u0,this._layoutBounds=new u0,this._clippedDrawableIndexList=[],this._matrixForMask=new gi,this._matrixForDraw=new gi}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class Xs{static getInstance(){return rs==null&&(rs=new Xs),rs}static deleteInstance(){rs&&(rs.release(),rs=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,r,i,s,o,h,u,c,_,y,w,b,E){w||Bs("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let T,P,O,H;const Y=e.getClippingContextBufferForMask();if(Y!=null){const J=this._shaderSets[Xo.ShaderNames_SetupMask];this.gl.useProgram(J.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(J.samplerTexture0Location,0),u.vertex==null&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributePositionLocation),this.gl.vertexAttribPointer(J.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),u.uv==null&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributeTexCoordLocation),this.gl.vertexAttribPointer(J.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const it=Y._layoutChannelNo,st=Y.getClippingManager().getChannelFlagAsColor(it);this.gl.uniform4f(J.uniformChannelFlagLocation,st.R,st.G,st.B,st.A),this.gl.uniformMatrix4fv(J.uniformClipMatrixLocation,!1,Y._matrixForMask.getArray());const K=Y._layoutBounds;this.gl.uniform4f(J.uniformBaseColorLocation,K.x*2-1,K.y*2-1,K.getRight()*2-1,K.getBottom()*2-1),T=this.gl.ZERO,P=this.gl.ONE_MINUS_SRC_COLOR,O=this.gl.ZERO,H=this.gl.ONE_MINUS_SRC_ALPHA}else{const J=e.getClippingContextBufferForDraw(),st=J!=null?E?2:1:0;let K;switch(_){case Cn.CubismBlendMode_Normal:default:K=this._shaderSets[Xo.ShaderNames_NormalPremultipliedAlpha+st],T=this.gl.ONE,P=this.gl.ONE_MINUS_SRC_ALPHA,O=this.gl.ONE,H=this.gl.ONE_MINUS_SRC_ALPHA;break;case Cn.CubismBlendMode_Additive:K=this._shaderSets[Xo.ShaderNames_AddPremultipliedAlpha+st],T=this.gl.ONE,P=this.gl.ONE,O=this.gl.ZERO,H=this.gl.ONE;break;case Cn.CubismBlendMode_Multiplicative:K=this._shaderSets[Xo.ShaderNames_MultPremultipliedAlpha+st],T=this.gl.DST_COLOR,P=this.gl.ONE_MINUS_SRC_ALPHA,O=this.gl.ZERO,H=this.gl.ONE;break}if(this.gl.useProgram(K.shaderProgram),u.vertex==null&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(K.attributePositionLocation),this.gl.vertexAttribPointer(K.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),u.uv==null&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(K.attributeTexCoordLocation),this.gl.vertexAttribPointer(K.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),J!=null){this.gl.activeTexture(this.gl.TEXTURE1);const At=J.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,At),this.gl.uniform1i(K.samplerTexture1Location,1),this.gl.uniformMatrix4fv(K.uniformClipMatrixLocation,!1,J._matrixForDraw.getArray());const Tt=J._layoutChannelNo,dt=J.getClippingManager().getChannelFlagAsColor(Tt);this.gl.uniform4f(K.uniformChannelFlagLocation,dt.R,dt.G,dt.B,dt.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(K.samplerTexture0Location,0),this.gl.uniformMatrix4fv(K.uniformMatrixLocation,!1,b.getArray()),this.gl.uniform4f(K.uniformBaseColorLocation,y.R,y.G,y.B,y.A)}u.index==null&&(u.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,u.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(T,P,O,H)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<xA;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(wA,PA),this._shaderSets[1].shaderProgram=this.loadShaderProgram(EA,IA),this._shaderSets[2].shaderProgram=this.loadShaderProgram(a2,CA),this._shaderSets[3].shaderProgram=this.loadShaderProgram(a2,$A),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,r){let i=this.gl.createProgram(),s=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!s)return Bs("Vertex shader compile error!"),0;let o=this.compileShaderSource(this.gl.FRAGMENT_SHADER,r);return o?(this.gl.attachShader(i,s),this.gl.attachShader(i,o),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(s),this.gl.deleteShader(o),i):(Bs("Failed to link program: {0}",i),this.gl.deleteShader(s),this.gl.deleteShader(o),i&&this.gl.deleteProgram(i),0)):(Bs("Vertex shader compile error!"),0)}compileShaderSource(e,r){const i=r,s=this.gl.createShader(e);if(this.gl.shaderSource(s,i),this.gl.compileShader(s),!s){const h=this.gl.getShaderInfoLog(s);Bs("Shader compile log: {0} ",h)}return this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?s:(this.gl.deleteShader(s),null)}setGl(e){this.gl=e}}var Xo=(t=>(t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",t))(Xo||{});const wA="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",PA="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",EA="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",a2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",IA="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",CA="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",$A="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class h2 extends r0{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new d0,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new d0,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let r=e.getDrawableCount()-1;r>=0;r--)this._sortedDrawableIndexList[r]=0;super.initialize(e)}bindTexture(e,r){this._textures[e]=r}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new d0,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,r,i;const s=this;this._clippingManager.release(),s._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(r=this.gl)==null||r.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,s._bufferData=void 0,s._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),r=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const s=r[i];this._sortedDrawableIndexList[s]=i}for(let i=0;i<e;++i){const s=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(s)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[s]:null),this.setIsCulling(this.getModel().getDrawableCulling(s)),this.drawMesh(this.getModel().getDrawableTextureIndices(s),this.getModel().getDrawableVertexIndexCount(s),this.getModel().getDrawableVertexCount(s),this.getModel().getDrawableVertexIndices(s),this.getModel().getDrawableVertices(s),this.getModel().getDrawableVertexUvs(s),this.getModel().getDrawableOpacity(s),this.getModel().getDrawableBlendMode(s),this.getModel().getDrawableInvertedMaskBit(s)))}}drawMesh(e,r,i,s,o,h,u,c,_){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const y=this.getModelColor();this.getClippingContextBufferForMask()==null&&(y.A*=u,this.isPremultipliedAlpha()&&(y.R*=y.A,y.G*=y.A,y.B*=y.A));let w=null;this._textures[e]!=null&&(w=this._textures[e]),Xs.getInstance().setupShaderProgram(this,w,i,o,s,h,this._bufferData,u,c,y,this.isPremultipliedAlpha(),this.getMvpMatrix(),_),this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Xs.deleteInstance()}setRenderState(e,r){c0=e,ko=r}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),Xs.getInstance().setGl(e)}}r0.staticRelease=()=>{h2.doStaticRelease()};const l2=new gi;class RA extends Bp{constructor(e,r,i){super(),this.lipSync=!0,this.breath=h0.create(),this.renderer=new h2,this.idParamAngleX=_A,this.idParamAngleY=pA,this.idParamAngleZ=vA,this.idParamEyeBallX=mA,this.idParamEyeBallY=gA,this.idParamBodyAngleX=yA,this.idParamBreath=bA,this.pixelsPerUnit=1,this.centeringTransform=new wr,this.coreModel=e,this.settings=r,this.motionManager=new dA(r,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=o2.create(this.settings)),this.breath.setParameters([new Bo(this.idParamAngleX,0,15,6.5345,.5),new Bo(this.idParamAngleY,0,8,3.5345,.5),new Bo(this.idParamAngleZ,0,10,5.5345,.5),new Bo(this.idParamBodyAngleX,0,4,15.5345,.5),new Bo(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){const i=r.charAt(0).toLowerCase()+r.slice(1);e[i]=this.settings.layout[r]}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,r){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=r,this.renderer._clippingManager._maskTexture=void 0,Xs.getInstance()._shaderSets=[]}bindTexture(e,r){this.renderer.bindTexture(e,r)}getHitAreaDefs(){var e,r;return(r=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?r:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const r=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<r.length;i+=2)r[i]=r[i]*this.pixelsPerUnit+this.originalWidth/2,r[i+1]=-r[i+1]*this.pixelsPerUnit+this.originalHeight/2;return r}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,r){var i,s,o,h;super.update(e,r),e/=1e3,r/=1e3;const u=this.coreModel;this.emit("beforeMotionUpdate");const c=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),u.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(u,r),c||(s=this.eyeBlink)==null||s.updateParameters(u,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,r*1e3),(o=this.physics)==null||o.evaluate(u,e),(h=this.pose)==null||h.updateParameters(u,e),this.emit("beforeModelUpdate"),u.update(),u.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(e,r){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const r=this.drawingMatrix,i=l2.getArray();i[0]=r.a,i[1]=r.b,i[4]=-r.c,i[5]=-r.d,i[12]=r.tx,i[13]=r.ty,this.renderer.setMvpMatrix(l2),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let hh,u2=20;function SA(){return Uo.isStarted()?Promise.resolve():(hh!=null||(hh=new Promise((t,e)=>{function r(){try{NA(),t()}catch(i){if(u2--,u2<0){const s=new Error("Failed to start up Cubism 4 framework.");s.cause=i,e(s);return}_r.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}}r()})),hh)}function NA(t){t=Object.assign({logFunction:console.log,loggingLevel:Kn.LogLevel_Verbose},t),Uo.startUp(t),Uo.initialize()}const LA=.001,f2=.5;class _0{static create(e){const r=new _0;typeof e.FadeInTime=="number"&&(r._fadeTimeSeconds=e.FadeInTime,r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=f2));const i=e.Groups,s=i.length;for(let o=0;o<s;++o){const h=i[o],u=h.length;let c=0;for(let _=0;_<u;++_){const y=h[_],w=new lh;w.partId=y.Id;const b=y.Link;if(b){const E=b.length;for(let T=0;T<E;++T){const P=new lh;P.partId=b[T],w.link.push(P)}}r._partGroups.push(w),++c}r._partGroupCounts.push(c)}return r}updateParameters(e,r){e!=this._lastModel&&this.reset(e),this._lastModel=e,r<0&&(r=0);let i=0;for(let s=0;s<this._partGroupCounts.length;s++){const o=this._partGroupCounts[s];this.doFade(e,r,i,o),i+=o}this.copyPartOpacities(e)}reset(e){let r=0;for(let i=0;i<this._partGroupCounts.length;++i){const s=this._partGroupCounts[i];for(let o=r;o<r+s;++o){this._partGroups[o].initialize(e);const h=this._partGroups[o].partIndex,u=this._partGroups[o].parameterIndex;if(!(h<0)){e.setPartOpacityByIndex(h,o==r?1:0),e.setParameterValueByIndex(u,o==r?1:0);for(let c=0;c<this._partGroups[o].link.length;++c)this._partGroups[o].link[c].initialize(e)}}r+=s}}copyPartOpacities(e){for(let r=0;r<this._partGroups.length;++r){const i=this._partGroups[r];if(i.link.length==0)continue;const s=this._partGroups[r].partIndex,o=e.getPartOpacityByIndex(s);for(let h=0;h<i.link.length;++h){const c=i.link[h].partIndex;c<0||e.setPartOpacityByIndex(c,o)}}}doFade(e,r,i,s){let o=-1,h=1;const u=.5,c=.15;for(let _=i;_<i+s;++_){const y=this._partGroups[_].partIndex,w=this._partGroups[_].parameterIndex;if(e.getParameterValueByIndex(w)>LA){if(o>=0)break;o=_,h=e.getPartOpacityByIndex(y),h+=r/this._fadeTimeSeconds,h>1&&(h=1)}}o<0&&(o=0,h=1);for(let _=i;_<i+s;++_){const y=this._partGroups[_].partIndex;if(o==_)e.setPartOpacityByIndex(y,h);else{let w=e.getPartOpacityByIndex(y),b;h<u?b=h*(u-1)/u+1:b=(1-h)*u/(1-u),(1-b)*(1-h)>c&&(b=1-c/(1-h)),w>b&&(w=b),e.setPartOpacityByIndex(y,w)}}}constructor(){this._fadeTimeSeconds=f2,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class lh{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(r=>r.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new lh;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(r=>r.clone()),e}}class OA{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,r=this._savedParameters.length;for(let i=0;i<e;++i)i<r?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let r;const i=this._model.parts.count;for(r=0;r<i;++r)if(e==this._partIds[r])return r;return e in this._notExistPartId?this._notExistPartId[e]:(r=i+this._notExistPartId.length,this._notExistPartId[e]=r,this._notExistPartOpacities[r]=0,r)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,r){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=r;return}oh(0<=e&&e<this.getPartCount()),this._partOpacities[e]=r}setPartOpacityById(e,r){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,r)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(oh(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const r=this.getPartIndex(e);return r<0?0:this.getPartOpacityByIndex(r)}getParameterIndex(e){let r;const i=this._model.parameters.count;for(r=0;r<i;++r)if(e==this._parameterIds[r])return r;return e in this._notExistParameterId?this._notExistParameterId[e]:(r=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=r,this._notExistParameterValues[r]=0,r)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(oh(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const r=this.getParameterIndex(e);return this.getParameterValueByIndex(r)}setParameterValueByIndex(e,r,i=1){if(e in this._notExistParameterValues){this._notExistParameterValues[e]=i==1?r:this._notExistParameterValues[e]*(1-i)+r*i;return}oh(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<r&&(r=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>r&&(r=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?r:this._parameterValues[e]=this._parameterValues[e]*(1-i)+r*i}setParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.setParameterValueByIndex(s,r,i)}addParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+r*i)}addParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.addParameterValueByIndex(s,r,i)}multiplyParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.multiplyParameterValueByIndex(s,r,i)}multiplyParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(r-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const r=this._model.drawables.count;for(let i=0;i<r;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const r=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[e])}getDrawableBlendMode(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[e])?Cn.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[e])?Cn.CubismBlendMode_Multiplicative:Cn.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(r[e])}getDrawableDynamicFlagVisibilityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[e])}getDrawableDynamicFlagOpacityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[e])}loadParameters(){let e=this._model.parameters.count;const r=this._savedParameters.length;e>r&&(e=r);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,r=this._model.parameters.count;for(let i=0;i<r;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,r=this._model.parts.count;for(let i=0;i<r;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,r=this._model.drawables.count;for(let i=0;i<r;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class p0{static create(e){const r=Live2DCubismCore.Moc.fromArrayBuffer(e);if(r)return new p0(r);throw new Error("Unknown error")}createModel(){let e;const r=Live2DCubismCore.Model.fromMoc(this._moc);if(r)return e=new OA(r),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}var v0=(t=>(t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",t))(v0||{}),is=(t=>(t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",t))(is||{});class FA{constructor(){this.initialPosition=new Ue(0,0),this.position=new Ue(0,0),this.lastPosition=new Ue(0,0),this.lastGravity=new Ue(0,0),this.force=new Ue(0,0),this.velocity=new Ue(0,0)}}class MA{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class UA{constructor(){this.source={}}}class GA{constructor(){this.destination={},this.translationScale=new Ue(0,0)}}class DA{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new Ue(0,0),this.wind=new Ue(0,0)}}class BA{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new Ue(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new Ue(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,r){return this._json.PhysicsSettings[e].Input[r].Weight}getInputReflect(e,r){return this._json.PhysicsSettings[e].Input[r].Reflect}getInputType(e,r){return this._json.PhysicsSettings[e].Input[r].Type}getInputSourceId(e,r){return this._json.PhysicsSettings[e].Input[r].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,r){return this._json.PhysicsSettings[e].Output[r].VertexIndex}getOutputAngleScale(e,r){return this._json.PhysicsSettings[e].Output[r].Scale}getOutputWeight(e,r){return this._json.PhysicsSettings[e].Output[r].Weight}getOutputDestinationId(e,r){return this._json.PhysicsSettings[e].Output[r].Destination.Id}getOutputType(e,r){return this._json.PhysicsSettings[e].Output[r].Type}getOutputReflect(e,r){return this._json.PhysicsSettings[e].Output[r].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,r){return this._json.PhysicsSettings[e].Vertices[r].Mobility}getParticleDelay(e,r){return this._json.PhysicsSettings[e].Vertices[r].Delay}getParticleAcceleration(e,r){return this._json.PhysicsSettings[e].Vertices[r].Acceleration}getParticleRadius(e,r){return this._json.PhysicsSettings[e].Vertices[r].Radius}getParticlePosition(e,r){const i=new Ue(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[r].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[r].Position.Y,i}}const c2="X",d2="Y",_2="Angle",kA=5,p2=100,XA=.001;class m0{static create(e){const r=new m0;return r.parse(e),r._physicsRig.gravity.y=0,r}evaluate(e,r){let i,s,o,h;const u=new Ue;let c,_,y,w,b,E,T,P;b=e.getModel().parameters.values,E=e.getModel().parameters.maximumValues,T=e.getModel().parameters.minimumValues,P=e.getModel().parameters.defaultValues;for(let O=0;O<this._physicsRig.subRigCount;++O){i={angle:0},u.x=0,u.y=0,c=this._physicsRig.settings[O],_=this._physicsRig.inputs.slice(c.baseInputIndex),y=this._physicsRig.outputs.slice(c.baseOutputIndex),w=this._physicsRig.particles.slice(c.baseParticleIndex);for(let H=0;H<c.inputCount;++H)s=_[H].weight/p2,_[H].sourceParameterIndex==-1&&(_[H].sourceParameterIndex=e.getParameterIndex(_[H].source.id)),_[H].getNormalizedParameterValue(u,i,b[_[H].sourceParameterIndex],T[_[H].sourceParameterIndex],E[_[H].sourceParameterIndex],P[_[H].sourceParameterIndex],c.normalizationPosition,c.normalizationAngle,_[H].reflect,s);o=mr.degreesToRadian(-i.angle),u.x=u.x*mr.cos(o)-u.y*mr.sin(o),u.y=u.x*mr.sin(o)+u.y*mr.cos(o),ew(w,c.particleCount,u,i.angle,this._options.wind,XA*c.normalizationPosition.maximum,r,kA);for(let H=0;H<c.outputCount;++H){const Y=y[H].vertexIndex;if(Y<1||Y>=c.particleCount)break;y[H].destinationParameterIndex==-1&&(y[H].destinationParameterIndex=e.getParameterIndex(y[H].destination.id));const J=new Ue;J.x=w[Y].position.x-w[Y-1].position.x,J.y=w[Y].position.y-w[Y-1].position.y,h=y[H].getValue(J,w,Y,y[H].reflect,this._options.gravity);const it=y[H].destinationParameterIndex,st=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(b.subarray(it))):b.slice(it);rw(st,T[it],E[it],h,y[H]);for(let K=it,At=0;K<b.length;K++,At++)b[K]=st[At]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new VA,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new DA;let r=new BA(e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount();let i=0,s=0,o=0;for(let h=0;h<this._physicsRig.subRigCount;++h){const u=new MA;u.normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(h),u.normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(h),u.normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(h),u.normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(h),u.normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(h),u.normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(h),u.inputCount=r.getInputCount(h),u.baseInputIndex=i,i+=u.inputCount;for(let c=0;c<u.inputCount;++c){const _=new UA;switch(_.sourceParameterIndex=-1,_.weight=r.getInputWeight(h,c),_.reflect=r.getInputReflect(h,c),r.getInputType(h,c)){case c2:_.type=is.CubismPhysicsSource_X,_.getNormalizedParameterValue=HA;break;case d2:_.type=is.CubismPhysicsSource_Y,_.getNormalizedParameterValue=zA;break;case _2:_.type=is.CubismPhysicsSource_Angle,_.getNormalizedParameterValue=jA;break}_.source.targetType=v0.CubismPhysicsTargetType_Parameter,_.source.id=r.getInputSourceId(h,c),this._physicsRig.inputs.push(_)}u.outputCount=r.getOutputCount(h),u.baseOutputIndex=s,s+=u.outputCount;for(let c=0;c<u.outputCount;++c){const _=new GA;switch(_.destinationParameterIndex=-1,_.vertexIndex=r.getOutputVertexIndex(h,c),_.angleScale=r.getOutputAngleScale(h,c),_.weight=r.getOutputWeight(h,c),_.destination.targetType=v0.CubismPhysicsTargetType_Parameter,_.destination.id=r.getOutputDestinationId(h,c),r.getOutputType(h,c)){case c2:_.type=is.CubismPhysicsSource_X,_.getValue=WA,_.getScale=QA;break;case d2:_.type=is.CubismPhysicsSource_Y,_.getValue=YA,_.getScale=KA;break;case _2:_.type=is.CubismPhysicsSource_Angle,_.getValue=qA,_.getScale=tw;break}_.reflect=r.getOutputReflect(h,c),this._physicsRig.outputs.push(_)}u.particleCount=r.getParticleCount(h),u.baseParticleIndex=o,o+=u.particleCount;for(let c=0;c<u.particleCount;++c){const _=new FA;_.mobility=r.getParticleMobility(h,c),_.delay=r.getParticleDelay(h,c),_.acceleration=r.getParticleAcceleration(h,c),_.radius=r.getParticleRadius(h,c),_.position=r.getParticlePosition(h,c),this._physicsRig.particles.push(_)}this._physicsRig.settings.push(u)}this.initialize(),r.release()}initialize(){let e,r,i;for(let s=0;s<this._physicsRig.subRigCount;++s){r=this._physicsRig.settings[s],e=this._physicsRig.particles.slice(r.baseParticleIndex),e[0].initialPosition=new Ue(0,0),e[0].lastPosition=new Ue(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Ue(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Ue(0,0),e[0].force=new Ue(0,0);for(let o=1;o<r.particleCount;++o)i=new Ue(0,0),i.y=e[o].radius,e[o].initialPosition=new Ue(e[o-1].initialPosition.x+i.x,e[o-1].initialPosition.y+i.y),e[o].position=new Ue(e[o].initialPosition.x,e[o].initialPosition.y),e[o].lastPosition=new Ue(e[o].initialPosition.x,e[o].initialPosition.y),e[o].lastGravity=new Ue(0,-1),e[o].lastGravity.y*=-1,e[o].velocity=new Ue(0,0),e[o].force=new Ue(0,0)}}}class VA{constructor(){this.gravity=new Ue(0,0),this.wind=new Ue(0,0)}}function HA(t,e,r,i,s,o,h,u,c,_){t.x+=g0(r,i,s,o,h.minimum,h.maximum,h.defalut,c)*_}function zA(t,e,r,i,s,o,h,u,c,_){t.y+=g0(r,i,s,o,h.minimum,h.maximum,h.defalut,c)*_}function jA(t,e,r,i,s,o,h,u,c,_){e.angle+=g0(r,i,s,o,u.minimum,u.maximum,u.defalut,c)*_}function WA(t,e,r,i,s){let o=t.x;return i&&(o*=-1),o}function YA(t,e,r,i,s){let o=t.y;return i&&(o*=-1),o}function qA(t,e,r,i,s){let o;return r>=2?s=e[r-1].position.substract(e[r-2].position):s=s.multiplyByScaler(-1),o=mr.directionToRadian(s,t),i&&(o*=-1),o}function ZA(t,e){return Math.abs(Math.max(t,e)-Math.min(t,e))}function JA(t,e){return Math.min(t,e)+ZA(t,e)/2}function QA(t,e){return t.x}function KA(t,e){return t.y}function tw(t,e){return e}function ew(t,e,r,i,s,o,h,u){let c,_,y,w,b=new Ue(0,0),E=new Ue(0,0),T=new Ue(0,0),P=new Ue(0,0);t[0].position=new Ue(r.x,r.y),c=mr.degreesToRadian(i),w=mr.radianToDirection(c),w.normalize();for(let O=1;O<e;++O)t[O].force=w.multiplyByScaler(t[O].acceleration).add(s),t[O].lastPosition=new Ue(t[O].position.x,t[O].position.y),_=t[O].delay*h*30,b=t[O].position.substract(t[O-1].position),y=mr.directionToRadian(t[O].lastGravity,w)/u,b.x=mr.cos(y)*b.x-b.y*mr.sin(y),b.y=mr.sin(y)*b.x+b.y*mr.cos(y),t[O].position=t[O-1].position.add(b),E=t[O].velocity.multiplyByScaler(_),T=t[O].force.multiplyByScaler(_).multiplyByScaler(_),t[O].position=t[O].position.add(E).add(T),P=t[O].position.substract(t[O-1].position),P.normalize(),t[O].position=t[O-1].position.add(P.multiplyByScaler(t[O].radius)),mr.abs(t[O].position.x)<o&&(t[O].position.x=0),_!=0&&(t[O].velocity=t[O].position.substract(t[O].lastPosition),t[O].velocity=t[O].velocity.divisionByScalar(_),t[O].velocity=t[O].velocity.multiplyByScaler(t[O].mobility)),t[O].force=new Ue(0,0),t[O].lastGravity=new Ue(w.x,w.y)}function rw(t,e,r,i,s){let o,h,u;o=s.getScale(s.translationScale,s.angleScale),h=i*o,h<e?(h<s.valueBelowMinimum&&(s.valueBelowMinimum=h),h=e):h>r&&(h>s.valueExceededMaximum&&(s.valueExceededMaximum=h),h=r),u=s.weight/p2,u>=1||(h=t[0]*(1-u)+h*u),t[0]=h}function g0(t,e,r,i,s,o,h,u){let c=0;const _=mr.max(r,e);_<t&&(t=_);const y=mr.min(r,e);y>t&&(t=y);const w=mr.min(s,o),b=mr.max(s,o),E=h,T=JA(y,_),P=t-T;switch(Math.sign(P)){case 1:{const O=b-E,H=_-T;H!=0&&(c=P*(O/H),c+=E);break}case-1:{const O=w-E,H=y-T;H!=0&&(c=P*(O/H),c+=E);break}case 0:{c=E;break}}return u?c:c*-1}Er.registerRuntime({version:4,ready:SA,test(t){return t instanceof ks||ks.isValidJSON(t)},isValidMoc(t){if(t.byteLength<4)return!1;const e=new Int8Array(t,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(t){return new ks(t)},createCoreModel(t){const e=p0.create(t);try{const r=e.createModel();return r.__moc=e,r}catch(r){try{e.release()}catch(i){}throw r}},createInternalModel(t,e,r){const i=new RA(t,e,r),s=t;return s.__moc&&(i.__moc=s.__moc,delete s.__moc,i.once("destroy",iw)),i},createPhysics(t,e){return m0.create(e)},createPose(t,e){return _0.create(e)}});function iw(){var t;(t=this.__moc)==null||t.release()}const nw=["","~","","","","~","2023~",""],sw={daybreak:"",morning:"",noon:"",afternoon:"~",dusk:"~",night:"",lateNight:"~",weeHours:""},ow=["~"],aw=`
.oml-icon {
  width: 1em; 
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}

#oml-stage {
  position: fixed;
  left: 0;
  bottom: 0;
  z-index: 9997;
  transform: translateY(130%);
}

#oml-canvas{
  width: 100%;
  height: 100%;
  position: relative;
  z-index: 9997;
}

#oml-levitated-btn {
  position: fixed;
  transform: translateX(-110%);
  left: 0;
  bottom: 80px;
  padding: 7px 5px;
  z-index: 9998;
  background-color: #58b0fc;
  border-style: solid;
  border-width: 2px 2px 2px 0px;
  border-color: #fff;
  border-radius: 0 5px 5px 0;
  box-shadow: 0 0 5px #999;
  color: #fff;
  writing-mode: vertical-lr;
  display: flex;
  align-items: center;
  text-align: center;
  align-items: center;
  flex-wrap: wrap;
  font-size: 14px;
}

.oml-loading{
  animation-name: oml-loading-rotate;
  animation-duration: 600ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

#oml-tips {
  position: absolute;
  top: 0px;
  font-size: 18px;
  border-radius: 10px;
  filter: drop-shadow(0 0 5px #999);
  transform: translate(0%, -40%);
  background-color: #58b0fc;
  border: 2px solid #fff;
  color: #fff;
  padding: 3px 5px;
  opacity: 0;
  visibility: hidden;
  transform: translateX(-50%);
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}


#oml-controls {
  transition: all 500ms;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  right: 0;
  bottom: 10%;
  z-index: 9999;
  font-size: 26px;
}

#oml-stage:hover > #oml-controls {
  visibility: visible;
  opacity: 1;
}

#oml-controls .oml-control-item {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  box-sizing: border-box;
  align-items: center;
  transition: all 300ms;
  color: #58b0fc;
  cursor: pointer;
  background-color: #fff;
}

#oml-controls .oml-control-item:hover {
  background-color: #58b0fc;
  color: #fff;
  box-shadow: 0 0 5px #000;
}

#oml-controls .oml-control-item:not(:last-child) {
  margin-bottom: 10px;
}

@keyframes oml-shake-tooltip{
  0% {
    transform: translate(-50%, 5%) scale(0.99);
  }
  50% {
 
    transform: translate(-50%, 0%) scale(1);
  }
  100% {
    transform: translate(-50%, 5%) scale(0.99);
  }
}

@keyframes oml-stage-slide-in {
  from {
    transform: translateY(130%);
  }
  to {
    transform: translateY(0%);
  }
}

@keyframes oml-stage-slide-out {
  from {
    transform: translateY(0%);
  }
  to {
    transform: translateY(130%);
  }
}

@keyframes oml-loading-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes oml-levitated-btn-hidden {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-120%);
  }
}


@keyframes oml-levitated-btn-display {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(0%);
  }
}

@keyframes oml-display-tooltip {
  0% {
    opacity: 0;
    visibility: hidden;
  }
  100% {
    opacity: 1;
    visibility: visible;
  }
}

@keyframes oml-hidden-tooltip {
  0% {
    opacity: 1;
    visibility: visible;
  }
  100% {
    opacity: 0;
    visibility: hidden;
  }
}

`;window._iconfont_svg_string_3847283='<svg><symbol id="icon-bed1" viewBox="0 0 1280 1024"><path d="M352 512c88.22 0 160-71.78 160-160s-71.78-160-160-160-160 71.78-160 160 71.78 160 160 160z m704-256H608c-17.68 0-32 14.32-32 32v288H128V160c0-17.68-14.32-32-32-32H32C14.32 128 0 142.32 0 160v704c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32v-96h1024v96c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V480c0-123.72-100.28-224-224-224z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-heart-fill" viewBox="0 0 1024 1024"><path d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"  ></path></symbol><symbol id="icon-skin-fill" viewBox="0 0 1024 1024"><path d="M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7c-4.1-17.4-19.5-29.3-37-29.3H154c-24.3 0-44 19.7-44 44v252c0 24.3 19.7 44 44 44h75v388c0 24.3 19.7 44 44 44h478c24.3 0 44-19.7 44-44V466h75c24.3 0 44-19.7 44-44V170c0-24.3-19.7-44-44-44z"  ></path></symbol><symbol id="icon-setting-fill" viewBox="0 0 1024 1024"><path d="M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1-21.2-21.2-49.2-32.8-79.1-32.8z"  ></path><path d="M924.8 626.1l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.4-44.8-96.8-79.6-137.7l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52-9.4-106.8-9.4-158.8 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.3c-35.9 13.6-69.1 32.9-98.9 57.3l-81.8-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.5 87.4-79.6 137.7l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.7 7.1 79.4 7.1 26.7 0 53.4-2.4 79.4-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l0.9-2.6c4.3-12.4 0.6-26.3-9.5-35z m-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"  ></path></symbol><symbol id="icon-a-userswitch-fill" viewBox="0 0 1024 1024"><path d="M512 565c133.7 0 242-108.3 242-242S645.7 81 512 81 270 189.3 270 323s108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 645.3 128 771.7 128 917v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75zM760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m-98.4 136a4 4 0 0 1 4-4h124v-33.4c0-16 20.8-22.1 29.4-8.7l36.9 57.5a16 16 0 0 1-13.5 24.6H665.6a4 4 0 0 1-4-4z m196.8 112a4 4 0 0 1-4 4h-124v33.4c0 16-20.8 22.1-29.4 8.7l-36.9-57.5a16 16 0 0 1 13.5-24.6h176.8a4 4 0 0 1 4 4z"  ></path></symbol><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"  ></path></symbol></svg>',function(t){var r=(r=document.getElementsByTagName("script"))[r.length-1],e=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var i,s,o,h,u,c=function(w,b){b.parentNode.insertBefore(w,b)};if(e&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(w){console&&console.log(w)}}i=function(){var w,b=document.createElement("div");b.innerHTML=t._iconfont_svg_string_3847283,(b=b.getElementsByTagName("svg")[0])&&(b.setAttribute("aria-hidden","true"),b.style.position="absolute",b.style.width=0,b.style.height=0,b.style.overflow="hidden",b=b,(w=document.body).firstChild?c(b,w.firstChild):w.appendChild(b))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(i,0):(s=function(){document.removeEventListener("DOMContentLoaded",s,!1),i()},document.addEventListener("DOMContentLoaded",s,!1)):document.attachEvent&&(o=i,h=t.document,u=!1,y(),h.onreadystatechange=function(){h.readyState=="complete"&&(h.onreadystatechange=null,_())})}function _(){u||(u=!0,o())}function y(){try{h.documentElement.doScroll("left")}catch(w){return void setTimeout(y,50)}_()}}(window);const hw="https://oml-api.tj520.top",lw={complete:"/pa15_3701/normal/normal.model3.json",cubism2:"/pio/index.json",cubism4:"/pa15_3701/normal/normal.model3.json"},ns={source:hw,sayHello:!0,transitionTime:1e3,mobileShow:!1,models:{path:"",x:0,y:0,scale:1,stageStyle:{backgroundColor:"rgba(0, 0, 0, 0)",width:"auto",height:"auto"}},tips:{style:{width:230,height:100,offsetX:0,offsetY:0},idleTips:{message:nw,persistTime:5e3,interval:5e3,priority:2,remote:!1},welcomeTips:{message:sw,persistTime:5e3,priority:3},copyTips:{message:ow,persistTime:5e3,priority:9}}},uh={globalStyle:aw,elements:{canvasEl:{id:"oml-canvas",tagName:"canvas"},stageEl:{id:"oml-stage",tagName:"div"},tipsEl:{id:"oml-tips",tagName:"div"},levitatedBtnEl:{id:"oml-levitated-btn",tagName:"div"},controlsEl:{id:"oml-controls",tagName:"div"}},controls:[{id:"SwitchModel",name:"icon-a-userswitch-fill",title:""},{id:"Setting",name:"icon-setting-fill",title:""},{id:"About",name:"icon-info-circle-fill",title:""}]};var uw=typeof global=="object"&&global&&global.Object===Object&&global;const v2=uw;var fw=typeof self=="object"&&self&&self.Object===Object&&self,cw=v2||fw||Function("return this")();const Ji=cw;var dw=Ji.Symbol;const Vs=dw;var m2=Object.prototype,_w=m2.hasOwnProperty,pw=m2.toString,Vo=Vs?Vs.toStringTag:void 0;function vw(t){var e=_w.call(t,Vo),r=t[Vo];try{t[Vo]=void 0;var i=!0}catch(o){}var s=pw.call(t);return i&&(e?t[Vo]=r:delete t[Vo]),s}var mw=Object.prototype,gw=mw.toString;function yw(t){return gw.call(t)}var bw="[object Null]",xw="[object Undefined]",g2=Vs?Vs.toStringTag:void 0;function Hs(t){return t==null?t===void 0?xw:bw:g2&&g2 in Object(t)?vw(t):yw(t)}function ss(t){return t!=null&&typeof t=="object"}var Tw=Array.isArray;const Ho=Tw;function Rn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function y2(t){return t}var Aw="[object AsyncFunction]",ww="[object Function]",Pw="[object GeneratorFunction]",Ew="[object Proxy]";function y0(t){if(!Rn(t))return!1;var e=Hs(t);return e==ww||e==Pw||e==Aw||e==Ew}var Iw=Ji["__core-js_shared__"];const b0=Iw;var b2=function(){var t=/[^.]+$/.exec(b0&&b0.keys&&b0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Cw(t){return!!b2&&b2 in t}var $w=Function.prototype,Rw=$w.toString;function os(t){if(t!=null){try{return Rw.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Sw=/[\\^$.*+?()[\]{}|]/g,Nw=/^\[object .+?Constructor\]$/,Lw=Function.prototype,Ow=Object.prototype,Fw=Lw.toString,Mw=Ow.hasOwnProperty,Uw=RegExp("^"+Fw.call(Mw).replace(Sw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gw(t){if(!Rn(t)||Cw(t))return!1;var e=y0(t)?Uw:Nw;return e.test(os(t))}function Dw(t,e){return t==null?void 0:t[e]}function as(t,e){var r=Dw(t,e);return Gw(r)?r:void 0}var Bw=as(Ji,"WeakMap");const x0=Bw;var x2=Object.create,kw=function(){function t(){}return function(e){if(!Rn(e))return{};if(x2)return x2(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Xw=kw;function Vw(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function T2(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var Hw=800,zw=16,jw=Date.now;function Ww(t){var e=0,r=0;return function(){var i=jw(),s=zw-(i-r);if(r=i,s>0){if(++e>=Hw)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Yw(t){return function(){return t}}var qw=function(){try{var t=as(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const fh=qw;var Zw=fh?function(t,e){return fh(t,"toString",{configurable:!0,enumerable:!1,value:Yw(e),writable:!0})}:y2,Jw=Ww(Zw);const Qw=Jw;function Kw(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var t4=9007199254740991,e4=/^(?:0|[1-9]\d*)$/;function A2(t,e){var r=typeof t;return e=e==null?t4:e,!!e&&(r=="number"||r!="symbol"&&e4.test(t))&&t>-1&&t%1==0&&t<e}function T0(t,e,r){e=="__proto__"&&fh?fh(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function ch(t,e){return t===e||t!==t&&e!==e}var r4=Object.prototype,i4=r4.hasOwnProperty;function w2(t,e,r){var i=t[e];(!(i4.call(t,e)&&ch(i,r))||r===void 0&&!(e in t))&&T0(t,e,r)}function zo(t,e,r,i){var s=!r;r||(r={});for(var o=-1,h=e.length;++o<h;){var u=e[o],c=i?i(r[u],t[u],u,r,t):void 0;c===void 0&&(c=t[u]),s?T0(r,u,c):w2(r,u,c)}return r}var P2=Math.max;function n4(t,e,r){return e=P2(e===void 0?t.length-1:e,0),function(){for(var i=arguments,s=-1,o=P2(i.length-e,0),h=Array(o);++s<o;)h[s]=i[e+s];s=-1;for(var u=Array(e+1);++s<e;)u[s]=i[s];return u[e]=r(h),Vw(t,this,u)}}function s4(t,e){return Qw(n4(t,e,y2),t+"")}var o4=9007199254740991;function E2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o4}function dh(t){return t!=null&&E2(t.length)&&!y0(t)}function a4(t,e,r){if(!Rn(r))return!1;var i=typeof e;return(i=="number"?dh(r)&&A2(e,r.length):i=="string"&&e in r)?ch(r[e],t):!1}function h4(t){return s4(function(e,r){var i=-1,s=r.length,o=s>1?r[s-1]:void 0,h=s>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):void 0,h&&a4(r[0],r[1],h)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var u=r[i];u&&t(e,u,i,o)}return e})}var l4=Object.prototype;function A0(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||l4;return t===r}function u4(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var f4="[object Arguments]";function I2(t){return ss(t)&&Hs(t)==f4}var C2=Object.prototype,c4=C2.hasOwnProperty,d4=C2.propertyIsEnumerable,_4=I2(function(){return arguments}())?I2:function(t){return ss(t)&&c4.call(t,"callee")&&!d4.call(t,"callee")};const w0=_4;function p4(){return!1}var $2=typeof or=="object"&&or&&!or.nodeType&&or,R2=$2&&typeof module=="object"&&module&&!module.nodeType&&module,v4=R2&&R2.exports===$2,S2=v4?Ji.Buffer:void 0,m4=S2?S2.isBuffer:void 0,g4=m4||p4;const P0=g4;var y4="[object Arguments]",b4="[object Array]",x4="[object Boolean]",T4="[object Date]",A4="[object Error]",w4="[object Function]",P4="[object Map]",E4="[object Number]",I4="[object Object]",C4="[object RegExp]",$4="[object Set]",R4="[object String]",S4="[object WeakMap]",N4="[object ArrayBuffer]",L4="[object DataView]",O4="[object Float32Array]",F4="[object Float64Array]",M4="[object Int8Array]",U4="[object Int16Array]",G4="[object Int32Array]",D4="[object Uint8Array]",B4="[object Uint8ClampedArray]",k4="[object Uint16Array]",X4="[object Uint32Array]",xr={};xr[O4]=xr[F4]=xr[M4]=xr[U4]=xr[G4]=xr[D4]=xr[B4]=xr[k4]=xr[X4]=!0,xr[y4]=xr[b4]=xr[N4]=xr[x4]=xr[L4]=xr[T4]=xr[A4]=xr[w4]=xr[P4]=xr[E4]=xr[I4]=xr[C4]=xr[$4]=xr[R4]=xr[S4]=!1;function V4(t){return ss(t)&&E2(t.length)&&!!xr[Hs(t)]}function E0(t){return function(e){return t(e)}}var N2=typeof or=="object"&&or&&!or.nodeType&&or,jo=N2&&typeof module=="object"&&module&&!module.nodeType&&module,H4=jo&&jo.exports===N2,I0=H4&&v2.process,z4=function(){try{var t=jo&&jo.require&&jo.require("util").types;return t||I0&&I0.binding&&I0.binding("util")}catch(e){}}();const zs=z4;var L2=zs&&zs.isTypedArray,j4=L2?E0(L2):V4;const O2=j4;var W4=Object.prototype,Y4=W4.hasOwnProperty;function F2(t,e){var r=Ho(t),i=!r&&w0(t),s=!r&&!i&&P0(t),o=!r&&!i&&!s&&O2(t),h=r||i||s||o,u=h?u4(t.length,String):[],c=u.length;for(var _ in t)(e||Y4.call(t,_))&&!(h&&(_=="length"||s&&(_=="offset"||_=="parent")||o&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||A2(_,c)))&&u.push(_);return u}function M2(t,e){return function(r){return t(e(r))}}var q4=M2(Object.keys,Object);const Z4=q4;var J4=Object.prototype,Q4=J4.hasOwnProperty;function K4(t){if(!A0(t))return Z4(t);var e=[];for(var r in Object(t))Q4.call(t,r)&&r!="constructor"&&e.push(r);return e}function C0(t){return dh(t)?F2(t):K4(t)}function tP(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var eP=Object.prototype,rP=eP.hasOwnProperty;function iP(t){if(!Rn(t))return tP(t);var e=A0(t),r=[];for(var i in t)i=="constructor"&&(e||!rP.call(t,i))||r.push(i);return r}function Wo(t){return dh(t)?F2(t,!0):iP(t)}var nP=as(Object,"create");const Yo=nP;function sP(){this.__data__=Yo?Yo(null):{},this.size=0}function oP(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var aP="__lodash_hash_undefined__",hP=Object.prototype,lP=hP.hasOwnProperty;function uP(t){var e=this.__data__;if(Yo){var r=e[t];return r===aP?void 0:r}return lP.call(e,t)?e[t]:void 0}var fP=Object.prototype,cP=fP.hasOwnProperty;function dP(t){var e=this.__data__;return Yo?e[t]!==void 0:cP.call(e,t)}var _P="__lodash_hash_undefined__";function pP(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Yo&&e===void 0?_P:e,this}function hs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}hs.prototype.clear=sP,hs.prototype.delete=oP,hs.prototype.get=uP,hs.prototype.has=dP,hs.prototype.set=pP;function vP(){this.__data__=[],this.size=0}function _h(t,e){for(var r=t.length;r--;)if(ch(t[r][0],e))return r;return-1}var mP=Array.prototype,gP=mP.splice;function yP(t){var e=this.__data__,r=_h(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():gP.call(e,r,1),--this.size,!0}function bP(t){var e=this.__data__,r=_h(e,t);return r<0?void 0:e[r][1]}function xP(t){return _h(this.__data__,t)>-1}function TP(t,e){var r=this.__data__,i=_h(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function _n(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}_n.prototype.clear=vP,_n.prototype.delete=yP,_n.prototype.get=bP,_n.prototype.has=xP,_n.prototype.set=TP;var AP=as(Ji,"Map");const qo=AP;function wP(){this.size=0,this.__data__={hash:new hs,map:new(qo||_n),string:new hs}}function PP(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ph(t,e){var r=t.__data__;return PP(e)?r[typeof e=="string"?"string":"hash"]:r.map}function EP(t){var e=ph(this,t).delete(t);return this.size-=e?1:0,e}function IP(t){return ph(this,t).get(t)}function CP(t){return ph(this,t).has(t)}function $P(t,e){var r=ph(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function js(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}js.prototype.clear=wP,js.prototype.delete=EP,js.prototype.get=IP,js.prototype.has=CP,js.prototype.set=$P;function U2(t,e){for(var r=-1,i=e.length,s=t.length;++r<i;)t[s+r]=e[r];return t}var RP=M2(Object.getPrototypeOf,Object);const $0=RP;var SP="[object Object]",NP=Function.prototype,LP=Object.prototype,G2=NP.toString,OP=LP.hasOwnProperty,FP=G2.call(Object);function MP(t){if(!ss(t)||Hs(t)!=SP)return!1;var e=$0(t);if(e===null)return!0;var r=OP.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&G2.call(r)==FP}function UP(){this.__data__=new _n,this.size=0}function GP(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function DP(t){return this.__data__.get(t)}function BP(t){return this.__data__.has(t)}var kP=200;function XP(t,e){var r=this.__data__;if(r instanceof _n){var i=r.__data__;if(!qo||i.length<kP-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new js(i)}return r.set(t,e),this.size=r.size,this}function ls(t){var e=this.__data__=new _n(t);this.size=e.size}ls.prototype.clear=UP,ls.prototype.delete=GP,ls.prototype.get=DP,ls.prototype.has=BP,ls.prototype.set=XP;function VP(t,e){return t&&zo(e,C0(e),t)}function HP(t,e){return t&&zo(e,Wo(e),t)}var D2=typeof or=="object"&&or&&!or.nodeType&&or,B2=D2&&typeof module=="object"&&module&&!module.nodeType&&module,zP=B2&&B2.exports===D2,k2=zP?Ji.Buffer:void 0,X2=k2?k2.allocUnsafe:void 0;function V2(t,e){if(e)return t.slice();var r=t.length,i=X2?X2(r):new t.constructor(r);return t.copy(i),i}function jP(t,e){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var h=t[r];e(h,r,t)&&(o[s++]=h)}return o}function H2(){return[]}var WP=Object.prototype,YP=WP.propertyIsEnumerable,z2=Object.getOwnPropertySymbols,qP=z2?function(t){return t==null?[]:(t=Object(t),jP(z2(t),function(e){return YP.call(t,e)}))}:H2;const R0=qP;function ZP(t,e){return zo(t,R0(t),e)}var JP=Object.getOwnPropertySymbols,QP=JP?function(t){for(var e=[];t;)U2(e,R0(t)),t=$0(t);return e}:H2;const j2=QP;function KP(t,e){return zo(t,j2(t),e)}function W2(t,e,r){var i=e(t);return Ho(t)?i:U2(i,r(t))}function tE(t){return W2(t,C0,R0)}function eE(t){return W2(t,Wo,j2)}var rE=as(Ji,"DataView");const S0=rE;var iE=as(Ji,"Promise");const N0=iE;var nE=as(Ji,"Set");const L0=nE;var Y2="[object Map]",sE="[object Object]",q2="[object Promise]",Z2="[object Set]",J2="[object WeakMap]",Q2="[object DataView]",oE=os(S0),aE=os(qo),hE=os(N0),lE=os(L0),uE=os(x0),us=Hs;(S0&&us(new S0(new ArrayBuffer(1)))!=Q2||qo&&us(new qo)!=Y2||N0&&us(N0.resolve())!=q2||L0&&us(new L0)!=Z2||x0&&us(new x0)!=J2)&&(us=function(t){var e=Hs(t),r=e==sE?t.constructor:void 0,i=r?os(r):"";if(i)switch(i){case oE:return Q2;case aE:return Y2;case hE:return q2;case lE:return Z2;case uE:return J2}return e});const O0=us;var fE=Object.prototype,cE=fE.hasOwnProperty;function dE(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&cE.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var _E=Ji.Uint8Array;const K2=_E;function F0(t){var e=new t.constructor(t.byteLength);return new K2(e).set(new K2(t)),e}function pE(t,e){var r=e?F0(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var vE=/\w*$/;function mE(t){var e=new t.constructor(t.source,vE.exec(t));return e.lastIndex=t.lastIndex,e}var tv=Vs?Vs.prototype:void 0,ev=tv?tv.valueOf:void 0;function gE(t){return ev?Object(ev.call(t)):{}}function rv(t,e){var r=e?F0(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var yE="[object Boolean]",bE="[object Date]",xE="[object Map]",TE="[object Number]",AE="[object RegExp]",wE="[object Set]",PE="[object String]",EE="[object Symbol]",IE="[object ArrayBuffer]",CE="[object DataView]",$E="[object Float32Array]",RE="[object Float64Array]",SE="[object Int8Array]",NE="[object Int16Array]",LE="[object Int32Array]",OE="[object Uint8Array]",FE="[object Uint8ClampedArray]",ME="[object Uint16Array]",UE="[object Uint32Array]";function GE(t,e,r){var i=t.constructor;switch(e){case IE:return F0(t);case yE:case bE:return new i(+t);case CE:return pE(t,r);case $E:case RE:case SE:case NE:case LE:case OE:case FE:case ME:case UE:return rv(t,r);case xE:return new i;case TE:case PE:return new i(t);case AE:return mE(t);case wE:return new i;case EE:return gE(t)}}function iv(t){return typeof t.constructor=="function"&&!A0(t)?Xw($0(t)):{}}var DE="[object Map]";function BE(t){return ss(t)&&O0(t)==DE}var nv=zs&&zs.isMap,kE=nv?E0(nv):BE;const XE=kE;var VE="[object Set]";function HE(t){return ss(t)&&O0(t)==VE}var sv=zs&&zs.isSet,zE=sv?E0(sv):HE;const jE=zE;var WE=1,YE=2,qE=4,ov="[object Arguments]",ZE="[object Array]",JE="[object Boolean]",QE="[object Date]",KE="[object Error]",av="[object Function]",tI="[object GeneratorFunction]",eI="[object Map]",rI="[object Number]",hv="[object Object]",iI="[object RegExp]",nI="[object Set]",sI="[object String]",oI="[object Symbol]",aI="[object WeakMap]",hI="[object ArrayBuffer]",lI="[object DataView]",uI="[object Float32Array]",fI="[object Float64Array]",cI="[object Int8Array]",dI="[object Int16Array]",_I="[object Int32Array]",pI="[object Uint8Array]",vI="[object Uint8ClampedArray]",mI="[object Uint16Array]",gI="[object Uint32Array]",gr={};gr[ov]=gr[ZE]=gr[hI]=gr[lI]=gr[JE]=gr[QE]=gr[uI]=gr[fI]=gr[cI]=gr[dI]=gr[_I]=gr[eI]=gr[rI]=gr[hv]=gr[iI]=gr[nI]=gr[sI]=gr[oI]=gr[pI]=gr[vI]=gr[mI]=gr[gI]=!0,gr[KE]=gr[av]=gr[aI]=!1;function vh(t,e,r,i,s,o){var h,u=e&WE,c=e&YE,_=e&qE;if(r&&(h=s?r(t,i,s,o):r(t)),h!==void 0)return h;if(!Rn(t))return t;var y=Ho(t);if(y){if(h=dE(t),!u)return T2(t,h)}else{var w=O0(t),b=w==av||w==tI;if(P0(t))return V2(t,u);if(w==hv||w==ov||b&&!s){if(h=c||b?{}:iv(t),!u)return c?KP(t,HP(h,t)):ZP(t,VP(h,t))}else{if(!gr[w])return s?t:{};h=GE(t,w,u)}}o||(o=new ls);var E=o.get(t);if(E)return E;o.set(t,h),jE(t)?t.forEach(function(O){h.add(vh(O,e,r,O,t,o))}):XE(t)&&t.forEach(function(O,H){h.set(H,vh(O,e,r,H,t,o))});var T=_?c?eE:tE:c?Wo:C0,P=y?void 0:T(t);return Kw(P||t,function(O,H){P&&(H=O,O=t[H]),w2(h,H,vh(O,e,r,H,t,o))}),h}var yI=1,bI=4;function M0(t){return vh(t,yI|bI)}function xI(t){return function(e,r,i){for(var s=-1,o=Object(e),h=i(e),u=h.length;u--;){var c=h[t?u:++s];if(r(o[c],c,o)===!1)break}return e}}var TI=xI();const AI=TI;function U0(t,e,r){(r!==void 0&&!ch(t[e],r)||r===void 0&&!(e in t))&&T0(t,e,r)}function wI(t){return ss(t)&&dh(t)}function G0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function PI(t){return zo(t,Wo(t))}function EI(t,e,r,i,s,o,h){var u=G0(t,r),c=G0(e,r),_=h.get(c);if(_){U0(t,r,_);return}var y=o?o(u,c,r+"",t,e,h):void 0,w=y===void 0;if(w){var b=Ho(c),E=!b&&P0(c),T=!b&&!E&&O2(c);y=c,b||E||T?Ho(u)?y=u:wI(u)?y=T2(u):E?(w=!1,y=V2(c,!0)):T?(w=!1,y=rv(c,!0)):y=[]:MP(c)||w0(c)?(y=u,w0(u)?y=PI(u):(!Rn(u)||y0(u))&&(y=iv(c))):w=!1}w&&(h.set(c,y),s(y,c,i,o,h),h.delete(c)),U0(t,r,y)}function lv(t,e,r,i,s){t!==e&&AI(e,function(o,h){if(s||(s=new ls),Rn(o))EI(t,e,h,r,lv,i,s);else{var u=i?i(G0(t,h),o,h+"",t,e,s):void 0;u===void 0&&(u=o),U0(t,h,u)}},Wo)}var II=h4(function(t,e,r){lv(t,e,r)});const uv=II,CI=(t,e)=>{let r="",i="";return t.endsWith("/")?r=t:r=t+"/",e[0]!=="/"?i=e:i=e.slice(1),r+i},$I=t=>{console.log(...[`
 %c  %c %c  oh-my-live2d v0.3.0 - https://oml2d.com/  %c %c  
`,"background: #add7fb; padding:5px 0;","background: #58b0fc; padding:5px 0;","color: #fff; background: #030307; padding:5px 0;","background: #58b0fc; padding:5px 0;","background: #add7fb; padding:5px 0;"])},Ws=(t,e)=>{t&&Object.assign(t.style,e)},RI=(t,e)=>{const r=M0(t);let i=M0(r.models);const s=[t.models];return uv(t,e),Array.isArray(t.models)&&t.models.map((o,h)=>{i=M0(r.models),s[h]=uv(i,o)}),t.models=s,t},SI=t=>new Promise(e=>setTimeout(e,t)),fv=t=>{const e=document.createElement(t.tagName);return e.id=t.id,t.className&&(e.className=t.className),t.childrens&&t.childrens.forEach(r=>{e.appendChild(fv(r))}),t.innerHtml&&(e.innerHTML=t.innerHtml),e},NI=(t,e,r)=>{t.innerHTML=e.map(i=>`
    <div title="${i.title}" class="oml-control-item" data-name="${i.id}">
      <svg class="oml-icon">
        <use xlink:href="#${i.name}"></use>
      </svg>
    </div>`).join(""),t.addEventListener("click",i=>{if(i.target===i.currentTarget)return;let s=i.target;for(;s.parentNode!==i.currentTarget;)s=s.parentNode;r(s.getAttribute("data-name"))})},LI=()=>{let t;const e=window.matchMedia("screen and (max-width: 768px)"),r=window.matchMedia("screen and (min-width: 768px)");return e.matches&&(t="xs"),r.matches&&(t="xl"),t};let cv;const OI=function(t,e){let r;switch(t){case"loading":r=`
      <div style="margin-bottom:3px;"></div>
      <svg class="oml-icon oml-loading" aria-hidden="true">
        <use xlink:href="#icon-loading"></use>
      </svg>
    `;break;case"text":r=`<div>${e}</div>`;break;case"error":r="<div></div>";break}this.elementList.levitatedBtnEl.innerHTML=r},FI=function(t,e="",r){return gn(this,null,function*(){clearTimeout(cv),this.changeLevitatedBtnContent(t,e),this.changeLevitatedBtnStyle({animationName:"oml-levitated-btn-display",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),r&&(cv=setTimeout(()=>{this.hiddenLevitatedBtn()},r))})},MI=function(){return gn(this,null,function*(){this.changeLevitatedBtnStyle({animationName:"oml-levitated-btn-hidden",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),yield SI(this.options.transitionTime)})};let dv=0,D0=0,Zo;const UI=function(t,e){if(!(D0>e.priority||!e.message))return new Promise(r=>{D0=e.priority,clearTimeout(dv),dv=setTimeout(()=>{Ws(t,{animationName:"oml-hidden-tooltip,oml-shake-tooltip"}),D0=0},e.persistTime),t.innerHTML=e.message,Ws(t,{animationName:"oml-display-tooltip,oml-shake-tooltip",animationDuration:"1000ms,1000ms",animationFillMode:"forwards, none",animationIterationCount:"1, infinite"}),setTimeout(r,e.persistTime+1e3)})},GI=function(){this.options.tips&&(Zo=BI(this.options.tips.idleTips,this))},DI=function(){Zo&&Zo()},BI=function(t,e){const r=setInterval(()=>{e.onTips("idleTips")},t.persistTime+t.interval);return Zo=()=>clearInterval(r),Zo},kI=function(t){return gn(this,null,function*(){if(!this.options.tips)return;const e=yield XI(t,this.options.tips);return yield UI(this.elementList.tipsEl,e)})},XI=function(t,e){return gn(this,null,function*(){var h,u,c;let r,i;switch(t){case"welcomeTips":r=VI(e.welcomeTips);break;case"idleTips":(h=e.idleTips)!=null&&h.remote?r=(yield(c=(u=e.idleTips).remote)==null?void 0:c.call(u)).text:r=_v(e[t].message);break;default:r=_v(e[t].message);break}const s=e[t].persistTime,o=e[t].priority;return t==="idleTips"&&(i=e[t].interval),{message:r,persistTime:s,priority:o,interval:i}})},_v=function(t){return typeof t=="string"?t:t.length?t[Math.floor(Math.random()*t.length)]:void 0},VI=function(t){const{message:e}=t;let r="";const i=new Date().getHours().toString(),s=/^[5-7]$/,o=/^(?:[8-9]|1[0-1])$/,h=/^(1[2-3])$/,u=/^1[4-7]$/,c=/^1[8-9]$/,_=/^2[0-1]$/,y=/^2[2-3]$/;return s.test(i)?r=e.daybreak:o.test(i)?r=e.morning:h.test(i)?r=e.noon:u.test(i)?r=e.afternoon:c.test(i)?r=e.dusk:_.test(i)?r=e.night:y.test(i)?r=e.lateNight:r=e.weeHours,r};class HI{constructor(e,r,i){Qr(this,"options");Qr(this,"elementList");Qr(this,"currentModelIndex");Qr(this,"loadLive2DModel");Qr(this,"importType");Qr(this,"model");Qr(this,"app");Qr(this,"displayLevitatedBtn",FI);Qr(this,"hiddenLevitatedBtn",MI);Qr(this,"changeLevitatedBtnContent",OI);Qr(this,"onTips",kI);Qr(this,"startPlayIdleTips",GI);Qr(this,"stopPlayIdleTips",DI);Qr(this,"_omlScreenSize","xl");Qr(this,"_omlStatus","hidden");this.options=e,this.currentModelIndex=0,this.loadLive2DModel=r,this.importType=i,this.elementList=this.mountElement(),this.setGlobalStyle(),this.addEventListen(),this.modelLoader(e.models[this.currentModelIndex]),this.options.sayHello&&$I()}set omlStatus(e){switch(e){case"display":this.changeStageStyle({visibility:"visible"}),this.stageSlideIn().then(()=>{this.onTips("welcomeTips"),this.startPlayIdleTips(),this.hiddenLevitatedBtn()});break;case"hidden":if(this.displayLevitatedBtn("text",""),this.stopPlayIdleTips(),this._omlStatus==="hidden")return;this.stageSlideOut().then(()=>{this.changeStageStyle({visibility:"hidden"})});break}}set screenSize(e){switch(this._omlScreenSize=e,e){case"xl":this.omlStatus="display";break;case"xs":this.options.mobileShow?this.omlStatus="display":this.omlStatus="hidden";break}}createOmlElements(){const e={};return Object.keys(uh.elements).forEach(r=>{e[r]=fv(uh.elements[r])}),e}setGlobalStyle(){const e=document.createElement("style");e.innerHTML=uh.globalStyle,document.head.appendChild(e)}mountElement(){const e=new DocumentFragment,r=this.createOmlElements(),{stageEl:i,canvasEl:s,tipsEl:o,controlsEl:h,levitatedBtnEl:u}=r;return i.append(s,o,h),NI(h,uh.controls,this.onClickControl.bind(this)),e.append(i,u),document.body.appendChild(e),window.onbeforeunload=()=>{document.body.removeChild(this.elementList.stageEl),document.body.removeChild(this.elementList.levitatedBtnEl)},r}changeStageStyle(e){Ws(this.elementList.stageEl,e)}changeCanvasStyle(e){Ws(this.elementList.canvasEl,e)}changeLevitatedBtnStyle(e){Ws(this.elementList.levitatedBtnEl,e)}changeTipsStyle(e){Ws(this.elementList.tipsEl,e)}reloadStageStyle(){let e=this.options.models[this.currentModelIndex].stageStyle.width,r=this.options.models[this.currentModelIndex].stageStyle.height;e==="auto"&&this.model?e=this.model.width:this.options.models[this.currentModelIndex].stageStyle.width,r==="auto"&&this.model?r=this.model.height:this.options.models[this.currentModelIndex].stageStyle.height,this.changeStageStyle({width:`${e}px`,height:`${r}px`,backgroundColor:this.options.models[this.currentModelIndex].stageStyle.backgroundColor})}reloadModelTransform(){var h;const e=this.options.models[this.currentModelIndex].x,r=this.options.models[this.currentModelIndex].y,i=this.options.models[this.currentModelIndex].scale;let s,o;Array.isArray(i)?(s=i[0]*.1,o=i[1]*.1):s=o=i*.1,(h=this.model)==null||h.setTransform(e,r,s,o)}reloadTipsStyle(){!this.options.tips||!this.model||this.changeTipsStyle({width:`${this.options.tips.style.width}px`,height:`${this.options.tips.style.height}px`,top:`${0-this.options.tips.style.offsetY}px`,left:`${this.model.width/2+this.model.x+this.options.tips.style.offsetX}px`})}reloadAllTransform(){this.reloadModelTransform(),this.reloadStageStyle(),this.reloadTipsStyle()}modelLoader(e){this.displayLevitatedBtn("loading");const r=CI(this.options.source,e.path);this.model=this.loadLive2DModel.fromSync(r,{onError:()=>{this.displayLevitatedBtn("error")}}),this.listenModelEvent()}loadNextModel(){return gn(this,null,function*(){this.options.models.length>1?(this.stopPlayIdleTips(),yield this.stageSlideOut(),this.currentModelIndex>=this.options.models.length-1?this.currentModelIndex=0:this.currentModelIndex++,this.modelLoader(this.options.models[this.currentModelIndex])):this.displayLevitatedBtn("text","",3e3)})}onClickControl(e){return gn(this,null,function*(){switch(e){case"SwitchModel":yield this.loadNextModel();break;case"About":window.open("https://oml2d.com");break;default:this.displayLevitatedBtn("text","",3e3);break}})}listenModelEvent(){var e,r,i;(e=this.model)==null||e.once("ready",()=>{this.reloadAllTransform()}),(r=this.model)==null||r.once("load",()=>gn(this,null,function*(){this.displayLevitatedBtn("text","",1e3),this.app?(this.app.stage.removeChildAt(0),this.model&&this.app.stage.addChild(this.model)):(this.app=new Zu({view:this.elementList.canvasEl,resolution:2,autoStart:!0,autoDensity:!0,backgroundAlpha:0,resizeTo:this.elementList.stageEl}),this.model&&this.app.stage.addChild(this.model)),this.app.resize(),this.screenSize=LI()})),(i=this.model)==null||i.on("hit",s=>{["Tap","tap_"].map(o=>{var h;(h=this.model)==null||h.motion(`${o}${s[0]}`)})})}addEventListen(){const e=window.matchMedia("screen and (max-width: 768px)");window.addEventListener("copy",()=>{this.onTips("copyTips")}),e.addEventListener("change",r=>{r.matches?this.screenSize="xs":this.screenSize="xl"})}stageSlideIn(){return this.changeStageStyle({animationName:"oml-stage-slide-in",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),new Promise(e=>{setTimeout(()=>gn(this,null,function*(){this._omlStatus="display",e()}),this.options.transitionTime)})}stageSlideOut(){return this.changeStageStyle({animationName:"oml-stage-slide-out",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),new Promise(e=>setTimeout(()=>{this._omlStatus="hidden",e()},this.options.transitionTime))}}const zI=(t,e)=>{let r;ns.models.path=lw[t];const i=()=>{ns.models=Array.isArray(ns.models)?ns.models:[ns.models],r=new HI(ns,e,t)};return window.document.addEventListener("DOMContentLoaded",()=>{r!=null||i()}),o=>(RI(ns,o),i(),{})},jI="complete";window.PIXI=AT,If();const WI=zI(jI,Qp);or.loadOhMyLive2D=WI,Object.defineProperty(or,Symbol.toStringTag,{value:"Module"})});
